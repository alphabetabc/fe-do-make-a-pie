let history={color:["#33FF99","#33FF99","#ff3333","ffa033"],targetDate:[{color:"#33FF99",levelCode:"10001",levelName:"优",targetDate:"2021-08-15"},{color:"#33FF99",levelCode:"10001",levelName:"优",targetDate:"2021-08-16"},{color:"#ff3333",levelCode:"10004",levelName:"差",targetDate:"2021-08-30"},{color:"#ffa033",levelCode:"10003",levelName:"中",targetDate:"2021-08-31"}],levelName:["优","良","中","差"]},maxArr=[],month=new Date("2021-08").getMonth()+1;for(var year=new Date("2021-08").getFullYear(),datas=[],dataLength=new Date(year,month).toJSON().substring(0,10).split("-")[2],i=0;i<Number(dataLength);i++){let e=month>=10?month:"0"+month,a=i+1>=10?i+1:"0"+(i+1);datas.push({date:year+"-"+e+"-"+a,total:0,statu:history.levelName[i]?history.levelName[i]:"优"})}let chartData=[],chartData1=[],color=history.color;datas.forEach((e,a)=>{history.targetDate.length>0?history.targetDate.map((t,r)=>{e.date==t.targetDate?(maxArr.push(e.total),chartData1.push({name:e.statu,value:[e.date,e.total],symbolSize:1,label:{show:!0,formatter:function(l){return`
▂`},color:t.color?t.color:"transparent",fontSize:18}}),chartData.push({name:e.statu,value:[e.date,e.total]})):(maxArr.push(e.total),chartData1.push({name:e.statu,value:[e.date,e.total],symbolSize:1,label:{show:!0,formatter:function(l){return`
▂`},color:"transparent",fontSize:18}}),chartData.push({name:e.statu,value:[e.date,e.total]}))}):(maxArr.push(e.total),chartData1.push({name:e.statu,value:[e.date,e.total],symbolSize:1,label:{show:!0,formatter:function(t){return`
▂`},color:"transparent",fontSize:18}}),chartData.push({name:e.statu,value:[e.date,e.total]}))});let thisMonth="2021-08";option={visualMap:{min:0,max:300,inRange:{color:["rgb(9,5,27)"]},show:!1},calendar:{cellSize:[48,48],left:"center",top:"middle",orient:"vertical",range:[thisMonth],itemStyle:{borderWidth:0},splitLine:{show:!1},yearLabel:{show:!1},monthLabel:{show:!1},dayLabel:{show:!1,firstDay:1,margin:10,nameMap:"cn"}},series:[{type:"scatter",coordinateSystem:"calendar",symbolSize:1,label:{normal:{show:!0,formatter:function(e){var a=echarts.number.parseDate(e.value[0]);return a.getDate()},textStyle:{color:"#7FA1C5",fontSize:18,fontWeight:"bold"}}},data:chartData},{type:"heatmap",coordinateSystem:"calendar",data:chartData},{type:"scatter",coordinateSystem:"calendar",data:chartData1}]};
