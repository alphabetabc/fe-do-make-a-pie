const cellSize=[80,80],pieRadius=30;function getVirtulData(){let e=+echarts.number.parseDate("2021-01-01"),r=+echarts.number.parseDate("2021-03-01"),n=3600*24*1e3,t=[];for(let a=e;a<r;a+=n)t.push([echarts.format.formatTime("yyyy-MM-dd",a),Math.floor(Math.random()*500)]);return t}function getPieSeries(e,r){return e.map(function(n,t){var a=r.convertToPixel("calendar",n);return{id:t+"pie",type:"pie",center:a,label:{formatter:"{c}",position:"inside"},radius:pieRadius,data:[{name:"优",value:Math.round(Math.random()*24)},{name:"良",value:Math.round(Math.random()*24)},{name:"轻度污染",value:Math.round(Math.random()*24)},{name:"中度污染",value:Math.round(Math.random()*24)},{name:"重度污染",value:Math.round(Math.random()*24)},{name:"严重污染",value:Math.round(Math.random()*24)}]}})}var scatterData=getVirtulData();option={tooltip:{},legend:{data:["优","良","轻度污染","中度污染","重度污染","严重污染"],bottom:20},color:["#00E400","#FFFF00","#FF7E00","#FF0000","#99004C","#7E0023"],calendar:{top:"middle",left:"center",orient:"vertical",cellSize,yearLabel:{show:!1,fontSize:30},dayLabel:{margin:20,firstDay:1,nameMap:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},monthLabel:{show:!0,nameMap:"cn"},range:["2021-01","2021-02-28"]},series:[{id:"label",type:"scatter",coordinateSystem:"calendar",symbolSize:0,label:{show:!0,formatter:function(e){return echarts.format.formatTime("dd",e.value[0])},offset:[-cellSize[0]/2+10,-cellSize[1]/2+10],fontSize:14},data:scatterData}]},setTimeout(function(){myChart.setOption({series:getPieSeries(scatterData,myChart)})},10);
