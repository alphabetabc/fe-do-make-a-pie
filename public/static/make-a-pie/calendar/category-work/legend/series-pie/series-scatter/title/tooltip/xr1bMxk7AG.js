var cellSize=[80,80],pieRadius=30;function getVirtulData(){for(var e=+echarts.number.parseDate("2017-02-01"),r=+echarts.number.parseDate("2017-03-01"),n=3600*24*1e3,a=[],t=e;t<r;t+=n)a.push([echarts.format.formatTime("yyyy-MM-dd",t),Math.floor(Math.random()*1e4)]);return a}function getPieSeries(e,r){return echarts.util.map(e,function(n,a){var t=r.convertToPixel("calendar",n);return{id:a+"pie",type:"pie",center:t,label:{normal:{formatter:"{c}",position:"inside"}},tooltip:{formatter:"{c} 小时"},radius:pieRadius,data:[{name:"做镜头",value:Math.round(Math.random()*5)},{name:"自主学习",value:Math.round(Math.random()*5)},{name:"开会",value:Math.round(Math.random()*5)}]}})}function getPieSeriesUpdate(e,r){return echarts.util.map(e,function(n,a){var t=r.convertToPixel("calendar",n);return{id:a+"pie",center:t}})}var scatterData=getVirtulData();if(option={tooltip:{},title:{text:"鬼猫猫五月每天工作组成",top:40,left:"center",subtext:"本数据纯属虚构"},legend:{data:["做镜头","自主学习","开会"],top:100},calendar:{top:"middle",left:"center",orient:"vertical",cellSize,yearLabel:{show:!1,textStyle:{fontSize:30}},dayLabel:{margin:20,firstDay:1,nameMap:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},monthLabel:{show:!1},range:["2017-02"]},series:[{id:"label",type:"scatter",coordinateSystem:"calendar",symbolSize:1,label:{normal:{show:!0,formatter:function(e){return echarts.format.formatTime("dd",e.value[0])},offset:[-cellSize[0]/2+10,-cellSize[1]/2+10],textStyle:{color:"#000",fontSize:14}}},data:scatterData}]},!app.inNode){var pieInitialized;setTimeout(function(){pieInitialized=!0,myChart.setOption({series:getPieSeries(scatterData,myChart)})},10),app.onresize=function(){pieInitialized&&myChart.setOption({series:getPieSeriesUpdate(scatterData,myChart)})}}
