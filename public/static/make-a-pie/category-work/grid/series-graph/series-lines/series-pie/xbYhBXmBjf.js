let points=[{name:"市城市管理局",desc:{type:1}},{name:"科大讯飞",desc:{type:2}},{name:"市水利局",desc:{type:1}},{name:"市政法委",desc:{type:1}},{name:"市自然资源和规划局",desc:{type:1}},{name:"市生态环境局",desc:{type:1}},{name:"市大数据局",desc:{type:3}}],color=["#ffffff","#36fff6","#ffe93a","#67f95f"],oneArr=[{name:"中心点",desc:{type:0},symbol:"none",symbolSize:233}],erArr=points,allArr=[...oneArr,...erArr],dataArr=[];allArr.forEach((t,e)=>{t.desc.type>0&&(t.symbolSize=50,t.symbol="path://M544 552.325V800a32 32 0 0 1-32 32 31.375 31.375 0 0 1-32-32V552.325L256 423.037a32 32 0 0 1-11.525-43.512A31.363 31.363 0 0 1 288 368l224 128 222.075-128a31.363 31.363 0 0 1 43.525 11.525 31.988 31.988 0 0 1-11.525 43.513L544 551.038z m0 0,M64 256v512l448 256 448-256V256L512 0z m832 480L512 960 128 736V288L512 64l384 224z m0 0",t.itemStyle={color:color[t.desc.type]}),t.label={normal:{show:!0,position:"bottom",distance:10,color:color[t.desc.type]}}});function CalutePointToSplitCircle(t,e){const s=[],{length:a}=t;let n=(360/a).toFixed(2),l={calute_x:(r,i)=>(Math.cos(r*Math.PI/180).toFixed(2)*i).toFixed(2),calute_y:(r,i)=>(Math.sin(r*Math.PI/180).toFixed(2)*i).toFixed(2)};return t.forEach((r,i)=>{let c=r.desc,o=e.stratAngle+(c.angle&&typeof c.angle=="number"?c.angle:n*i);const d=l.calute_x(o,e.raduis),u=l.calute_y(o,e.raduis),f=l.calute_x(o,e.raduis-e.nodeRadius),m=l.calute_y(o,e.raduis-e.nodeRadius),y=l.calute_x(o,e.emptyCenterRadius),p=l.calute_y(o,e.emptyCenterRadius);r.value=[d,u],r.lineData=[[f,m],[y,p]],s.push(r)}),s}function linesConfig(t){let e=[];function s(a,n,l){return[{coord:a.lineData[n]},{coord:a.lineData[l],lineStyle:{color:"#0BC6FE",curveness:a.desc.type===3?.1:0},effect:{color:color[a.desc.type]}}]}return t.forEach(a=>{switch(a.desc.type){case 0:break;case 1:e.push(s(a,0,1));break;case 2:e.push(s(a,1,0));break;case 3:e.push(s(a,0,1)),e.push(s(a,1,0));break}}),e}oneArr=CalutePointToSplitCircle(oneArr,{stratAngle:0,raduis:0,nodeRadius:0,emptyCenterRadius:0}),erArr=CalutePointToSplitCircle(erArr,{stratAngle:0,raduis:40,nodeRadius:5,emptyCenterRadius:10}),allArr=[...oneArr,...erArr],dataArr=linesConfig(allArr);function generateData(t,e,s,a){let n=[];for(var l=0;l<t;l++)l%2===0?n.push({name:(l+1).toString(),value:e,itemStyle:{normal:{color:a,borderWidth:0}}}):n.push({name:(l+1).toString(),value:s,itemStyle:{normal:{color:"rgba(0,0,0,0)",borderWidth:0}}});return n}let dolitData=generateData(100,25,20,"rgb(126,190,255)"),threeData=generateData(6,40,10,"#2dc0c9");function getOption(t,e){return{backgroundColor:"#081c47",title:{text:"自定义方向的数据流向动画",left:"center",textStyle:{color:"#fff"}},xAxis:{show:!1,type:"value",max:50,min:-51},grid:{top:10,bottom:10,left:10,right:10},yAxis:{show:!1,type:"value",max:50,min:-50},graphic:{elements:[{type:"text",z:7,style:{text:"地理信息中台",textAlign:"center",fill:"#fff",font:'30px "Microsoft YaHei"'},left:"center",top:"center"},{type:"image",z:4,style:{image:"./asset/get/s/data-1641374427371-xPKsRNQ2l.png",width:170,height:170},left:"center",top:"center"}]},series:[{name:"节点",type:"graph",silent:!1,hoverAnimation:!1,cursor:"default",coordinateSystem:"cartesian2d",z:3,lineStyle:{width:2,color:"source",type:"dashed"},data:allArr},{name:"线图",type:"lines",hoverAnimation:!1,silent:!1,cursor:"default",coordinateSystem:"cartesian2d",polyline:!1,z:1,lineStyle:{width:2,type:"dashed",curveness:0},effect:{show:!0,period:8,trailLength:0,symbol:"arrow",symbolSize:6},emphasis:{lineStyle:{type:"dashed"}},data:dataArr},{name:"不动外圆",type:"pie",zlevel:4,silent:!0,radius:["60%","59%"],label:{normal:{show:!1}},labelLine:{normal:{show:!1}},data:dolitData},{type:"pie",name:"旋转圆",zlevel:20,silent:!0,radius:["50%","49%"],hoverAnimation:!1,startAngle:t,data:threeData,label:{normal:{show:!1}},labelLine:{normal:{show:!1}}},{name:"缩放圆",type:"pie",zlevel:4,silent:!0,radius:[e+1+"%",e+"%"],label:{normal:{show:!1}},labelLine:{normal:{show:!1}},data:dolitData}]}}let startAngle=50,[minradius,radius,maxradius]=[22,22,24],isBig=!0;function draw(){startAngle=startAngle-5,isBig?(radius=radius+.5,radius>maxradius&&(isBig=!1)):(radius=radius-.5,radius<minradius&&(isBig=!0));let t=getOption(startAngle,radius);myChart.setOption(t,!0)}timer=setInterval(draw,200);
