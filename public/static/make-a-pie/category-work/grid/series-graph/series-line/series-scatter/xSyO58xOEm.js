var lightnings=function(){let t=[],e=function(){let a=Math.random()*30+10;return function(){return(Math.random()-.5)*5+a}}();for(let a=0;a<5;a++)t.push({type:"line",xAxisIndex:2,yAxisIndex:2,symbolSize:0,lineStyle:{normal:{color:"#fff",width:.5+Math.random(),opacity:1}},data:new Array(4),animation:!0,animationDuration:1e3});t[0].lineStyle.normal.width=3,t[0].z=3;let s=Math.random();if(s>.66){for(let a=0;a<16;a++){if(a===15){let i=e();t.forEach(function(o){o.data.push(i)})}if(a===14){let i=e()+2.5;t.forEach(function(o){o.data.push(i)})}a>6&&a<14&&(t[0].data.push(e()+(16-a)),t[1].data.push(e()+(16-a)),t[2].data.push(e()+(16-a)),t[3].data.push(e()+(16-a)),t[4].data.push(e()+(16-a))),a<=6&&(t[0].data.push(e()+(16-a)*.8),t[1].data.push(e()+(16-a)*.3),t[2].data.push(e()+(16-a)*.4),t[3].data.push(e()+(16-a)*1.1),t[4].data.push(e()+(16-a)*1.2))}console.log("right")}if(s<.33){for(let a=0;a<16;a++){if(a===15){let i=e();t.forEach(function(o){o.data.push(i)})}if(a===14){let i=e()-2.5;t.forEach(function(o){o.data.push(i)})}a>6&&a<14&&(t[0].data.push(e()+(a-16)),t[1].data.push(e()+(a-16)),t[2].data.push(e()+(a-16)),t[3].data.push(e()+(a-16)),t[4].data.push(e()+(a-16))),a<=6&&(t[0].data.push(e()+(a-16)*.8),t[1].data.push(e()+(a-16)*.4),t[2].data.push(e()+(a-16)*.3),t[3].data.push(e()+(a-16)*1.1),t[4].data.push(e()+(a-16)*1.2))}console.log("left")}if(s>=.33&&s<=.66){for(let a=0;a<16;a++)if(a>13){let i=e();t.forEach(function(o){o.data.push(i)})}else t[0].data.push(e()),t[1].data.push(e()-(16-a)*.2),t[2].data.push(e()-(16-a)*.4),t[3].data.push(e()+(16-a)*.2),t[4].data.push(e()+(16-a)*.4);console.log("center")}return t},rain=function(){var t=[];for(let e=0;e<200;e++)t.push([100*Math.random(),100*Math.random()]);return t};let option={grid:{left:0,right:0,bottom:0,top:0},xAxis:[{data:[],show:!1},{data:[],boundaryGap:!1,show:!1},{splitLine:!1,max:50},{splitLine:!1,show:!1}],yAxis:[{splitLine:!1,max:50},{splitLine:!1,max:50},{data:new Array(20)},{splitLine:!1,show:!1}],series:[{name:"buildings",step:"middle",type:"line",data:function(){let t=[];for(let e=0;e<40;e++)t.push(10+10*Math.random());return t}(),lineStyle:{normal:{width:0}},areaStyle:{normal:{color:"#1c1f2f",opacity:.8}},symbolSize:0,animation:!0,z:3,animationDelay:800,animationDuration:1500},{name:"clouds",type:"graph",xAxisIndex:1,yAxisIndex:1,data:[{x:0,y:0,symbolSize:0},{x:200,y:100,symbolSize:0},{x:0,y:0,symbolSize:300},{x:25,y:0,symbolSize:300},{x:50,y:0,symbolSize:300},{x:75,y:0,symbolSize:300},{x:100,y:0,symbolSize:300},{x:125,y:0,symbolSize:300},{x:150,y:0,symbolSize:300},{x:175,y:0,symbolSize:300},{x:200,y:0,symbolSize:300}],itemStyle:{normal:{color:"#24313a",borderWidth:0,opacity:.5}},silent:!0,left:-100,right:-100,bottom:0,top:-100,animation:!0,z:4,animationDelay:function(t){return t*100+500}},{name:"clouds",type:"graph",xAxisIndex:1,yAxisIndex:1,data:[{x:0,y:0,symbolSize:0},{x:200,y:100,symbolSize:0},{x:20,y:0,symbolSize:450},{x:60,y:0,symbolSize:500},{x:100,y:0,symbolSize:450},{x:140,y:0,symbolSize:500},{x:180,y:0,symbolSize:450}],itemStyle:{normal:{color:"#24313a",borderWidth:0,opacity:.5}},silent:!0,left:-100,right:-100,bottom:0,top:-100,animation:!0,z:4},{name:"rain",type:"scatter",symbolSize:[10,1],symbolRotate:60,xAxisIndex:3,yAxisIndex:3,data:rain(),z:5,symbol:"roundRect"}],backgroundColor:"#1b2933"};myChart.setOption(option);var n=1,offset=-10;setInterval(function(){n%50===0&&(option.series=option.series.concat(lightnings()),option.series[0].areaStyle.normal.color="#3c444a",option.backgroundColor="#1d2d38",myChart.setOption(option),console.log("show"),setTimeout(function(){option.series[0].areaStyle.normal.color="#1c1f2f",option.backgroundColor="#1b2933",option.series.forEach(function(t,e){e>3&&(t.lineStyle.normal.opacity=0)}),myChart.setOption(option),console.log("hide")},1e3)),n%60===0&&(offset=-offset),n%2===0&&(option.series[1].left+=offset,option.series[1].right-=offset,option.series[2].left-=offset,option.series[2].right+=offset,option.series[3].data=rain(),myChart.setOption(option)),n++},100);
