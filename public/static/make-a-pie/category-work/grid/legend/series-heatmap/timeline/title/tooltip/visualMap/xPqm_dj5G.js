var result=[{ydmc:"0001",zgy:"X01",sl:"12",sj:"201901"},{ydmc:"0002",zgy:"X01",sl:"13",sj:"201901"},{ydmc:"0003",zgy:"X01",sl:"14",sj:"201901"},{ydmc:"0004",zgy:"X01",sl:"15",sj:"201901"},{ydmc:"0005",zgy:"X01",sl:"16",sj:"201901"},{ydmc:"0001",zgy:"X02",sl:"41",sj:"201901"},{ydmc:"0002",zgy:"X02",sl:"42",sj:"201901"},{ydmc:"0003",zgy:"X02",sl:"43",sj:"201901"},{ydmc:"0004",zgy:"X02",sl:"44",sj:"201901"},{ydmc:"0005",zgy:"X02",sl:"45",sj:"201901"},{ydmc:"0001",zgy:"X03",sl:"81",sj:"201901"},{ydmc:"0002",zgy:"X03",sl:"82",sj:"201901"},{ydmc:"0003",zgy:"X03",sl:"83",sj:"201901"},{ydmc:"0004",zgy:"X03",sl:"84",sj:"201901"},{ydmc:"0005",zgy:"X03",sl:"200",sj:"201901"},{ydmc:"0001",zgy:"X01",sl:"101",sj:"201902"},{ydmc:"0002",zgy:"X01",sl:"101",sj:"201902"},{ydmc:"0003",zgy:"X01",sl:"101",sj:"201902"},{ydmc:"0004",zgy:"X01",sl:"101",sj:"201902"},{ydmc:"0005",zgy:"X01",sl:"101",sj:"201902"},{ydmc:"0001",zgy:"X02",sl:"102",sj:"201902"},{ydmc:"0002",zgy:"X02",sl:"102",sj:"201902"},{ydmc:"0003",zgy:"X02",sl:"102",sj:"201902"},{ydmc:"0004",zgy:"X02",sl:"102",sj:"201902"},{ydmc:"0005",zgy:"X02",sl:"102",sj:"201902"},{ydmc:"0001",zgy:"X03",sl:"103",sj:"201902"},{ydmc:"0002",zgy:"X03",sl:"103",sj:"201902"},{ydmc:"0003",zgy:"X03",sl:"103",sj:"201902"},{ydmc:"0004",zgy:"X03",sl:"103",sj:"201902"},{ydmc:"0005",zgy:"X03",sl:"190",sj:"201902"}],zgyarr=[],ydmcarr=[],sjarr=[];for(var i in result)zgyarr.push(result[i].zgy),ydmcarr.push(result[i].ydmc),sjarr.push(result[i].sj);zgyarr=norepeat(zgyarr),ydmcarr=norepeat(ydmcarr),sjarr=norepeat(sjarr),console.log(zgyarr),console.log(ydmcarr),console.log(sjarr);var maxsl=0,yfjson={};for(var s in sjarr){var datajson=[];for(var q in zgyarr)for(var w in ydmcarr)for(var e in result)maxsl=parseInt(result[e].sl)>maxsl?result[e].sl:maxsl,result[e].sj==sjarr[s]&&result[e].zgy==zgyarr[q]&&result[e].ydmc==ydmcarr[w]&&datajson.push([parseInt(q),parseInt(w),parseInt(result[e].sl).toFixed(0)]);console.log(datajson),yfjson[sjarr[s]]=datajson}console.log(yfjson),console.log("【最大数】："+maxsl);var xdata=zgyarr,ydata=ydmcarr,basedata=sjarr,baseseries=[],optionsdata=[];for(var k in yfjson)baseseries.push({type:"heatmap",label:{normal:{show:!0}},itemStyle:{emphasis:{shadowBlur:10,shadowColor:"rgba(120, 0, 0, 0.5)"}}}),optionsdata.push({xAxis:{type:"category",data:xdata},yAxis:{type:"category",data:ydata},title:{text:k},series:[{data:yfjson[k]}]});option={baseOption:{timeline:{axisType:"category",autoPlay:!0,playInterval:3e3,data:basedata},tooltip:{},legend:{},calculable:!0,tooltip:{position:"top",formatter:function(l){return l.componentType=="timeline"?l.name:l.componentType=="series"?l.marker+"<br/>学历："+ydata[l.value[1]]+"<br/>人数："+l.data[2]+"<br/>地址："+l.name:""}},animation:!1,grid:{left:"3%",right:"8%",bottom:"8%",containLabel:!0},xAxis:{name:"X轴",type:"category",data:xdata,axisLine:{lineStyle:{color:"#000"}},axisLabel:{interval:0,rotate:40},splitArea:{show:!0}},yAxis:{type:"category",data:ydata,axisLine:{lineStyle:{color:"#000"}},axisLabel:{interval:0,rotate:40},splitArea:{show:!0},name:"Y轴"},visualMap:{min:1,max:maxsl,calculable:!0,left:"left",bottom:"1%",text:[maxsl,"1"],calculable:!1,color:["#22DDDD","#fec42c","#80F1BE"]},series:baseseries},options:optionsdata};function norepeat(l){return l.filter(function(t,a,y){return y.indexOf(t)===a})}
