let nameArr=["巴西","印尼","美国","印度","中国","世界人口(万)"],legend=["2011年","2012年","2013年"];const formatterYaxis=function(){let t=[];for(let o=0;o<nameArr.length;o++){let e={};e.data=nameArr,e.show=!1,o===0&&(e.show=!0),t.push(e)}return t},formatterSeries=function(t){let o=[[18203,23489,29034,104970,131744,630230],[29325,29438,36e3,127594,164141,581807],[293025,20488,86e3,107594,104141,781807]];dataGreyArr=[[28203,23489,29034,104970,131844,630230],[29325,29038,36e3,127094,164141,581007],[299025,20488,86e3,107594,104141,781807]];let e=[],l={};o.forEach((r,a)=>{r.forEach((s,n)=>{l[n]||(l[n]=[]),l[n].push({name:legend[a],type:"bar",stack:legend[a],value:s,grey:dataGreyArr[a][n],yAxisIndex:n})})});for(key in l)l[key].sort((r,a)=>a.value-r.value),e.push(l[key]);return e=e.reduce((r,a)=>r.concat(a),[]),e.forEach(r=>{let a=new Array(nameArr.length),s=new Array(nameArr.length);a[r.yAxisIndex]=r.value,s[r.yAxisIndex]=r.grey,r.data=a,r.greyArr=s,delete r.value,delete r.grey}),console.log(e),e};let temGreyArr=formatterSeries();temGreyArr.forEach(t=>{t.data=t.greyArr,t.itemStyle={normal:{color:"#DCDCDC"}},delete t.greyArr}),option={title:{text:"世界人口总量",subtext:"数据来自网络"},tooltip:{trigger:"axis",axisPointer:{type:"shadow",shadowStyle:{color:"rgba(239, 232, 232, 0.2)"}},formatter:function(t){let o="";return t.filter(e=>e.value!=null&&e.color!="#DCDCDC").forEach(e=>{o+=e.seriesName+": "+e.value+"<br/>"}),o}},legend:{data:legend},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",boundaryGap:[0,.01]},yAxis:formatterYaxis(),series:formatterSeries().concat(temGreyArr)};
