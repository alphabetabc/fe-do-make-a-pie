option={title:{text:"分类销量（堆叠柱状图求和）"},legend:{y:"bottom",data:["百货","电子","服装"]},xAxis:[{type:"category",data:[20190612,20190613,20190614,20190615]}],yAxis:[{type:"value"}],series:[{name:"百货",type:"bar",stack:"1",data:[10,14,17,8],label:{show:!1,position:"top",color:"black",formatter:function(t){return t.value}}},{name:"电子",type:"bar",stack:"1",data:[1,12,9,22],label:{show:!1,position:"top",color:"black",formatter:function(t){return t.value}}},{name:"服装",type:"bar",stack:"1",data:[1,8,13,20],label:{show:!0,position:"top",color:"black",formatter:function(t){return t.value}}}]};var series=option.series,fun=function(t){for(var r=0,e=0;e<series.length;e++)r+=series[e].data[t.dataIndex];return r};series[series.length-1]&&(series[series.length-1].label.formatter=fun),myChart.on("legendselectchanged",function(t){var r=t.selected,e=[];for(var l in r)if(r[l])for(var a=0,s=series.length;a<s;a++){var i=series[a].name;i==l&&e.push(a)}for(var u=function(c){for(var f=0,n=0;n<e.length;n++)for(var o=0;o<series.length;o++)e[n]==o&&(f+=series[o].data[c.dataIndex]);return f},a=0;a<series.length;a++)series[a].label.show=!1;for(var a=series.length-1;a>=0;a--){var v=series[a].name;if(t.selected[v]){series[a].label.formatter=u,series[a].label.show=!0;break}}myChart.setOption(option)});
