let data={female:{name:"变电容量",data:[{value:210,weight:25,label:"110Kv"},{value:303,weight:0,label:"220Kv"},{value:0,weight:0,label:"500Kv"}]},male:{name:"线路长度",data:[{value:432.45,weight:172.76,label:"110Kv"},{value:332.07,weight:157.05,label:"220Kv"},{value:0,weight:0,label:"500Kv"}]}},yAxisData=new Set,yAxisDataN=new Set,yAxisDataV=new Set,legendData=[];_.forEach(data,e=>{legendData.push(e.name),_.forEach(e.data,a=>{e.name=="线路长度"&&yAxisDataN.add(a.label),e.name=="变电容量"&&yAxisDataV.add(a.label)})});let top=60,bottom=60;yAxisData=[...yAxisData],yAxisDataN=[...yAxisDataN],yAxisDataV=[...yAxisDataV],option={tooltip:{show:!0,trigger:"axis",axisPointer:{type:"shadow"}},legend:{icon:"none",left:"center",top:24,orient:"horizontal",itemWidth:0,itemHeight:0,y:" center",borderRadius:0,formatter:e=>e==data.female.name?"{a|"+e+"}":"{b|"+e+"}",textStyle:{rich:{a:{padding:[8,15,8,15],align:"center",backgroundColor:"#ffffff"},b:{padding:[8,15,8,15],align:"center",backgroundColor:"#ffffff"}}},data:legendData},grid:[{left:"12%",width:"34%",containLabel:!0,bottom},{left:"50%",width:"0%",top:top+16},{right:"12%",width:"34%",containLabel:!0,bottom}].map(e=>_.merge({top},e)),xAxis:[{type:"value",inverse:!0,axisLabel:{show:!0},axisLine:{show:!0},axisTick:{show:!1},splitLine:{show:!1}},{gridIndex:1,show:!1},{gridIndex:2,type:"value",axisLabel:{show:!0},axisLine:{show:!0},axisTick:{show:!1},splitLine:{show:!1}}].map(e=>_.merge(e,{axisLabel:{color:"#fff",margin:8},splitLine:{lineStyle:{color:"#fff",type:"dashed"}}})),yAxis:[{position:"right",axisLabel:{color:"#fff",show:!0},axisLine:{show:!1},type:"category",inverse:!1,axisTick:{show:!1},data:yAxisDataN},{gridIndex:1,position:"center",type:"category",axisLabel:{show:!1},axisLine:{show:!0}},{gridIndex:2,position:"left",axisLabel:{color:"#fff"},axisLine:{show:!1},type:"category",inverse:!1,axisTick:{show:!1},data:yAxisDataV}],series:[{name:_.get(data,"female.name"),label:{show:!1,color:"#fff",position:"left"},itemStyle:{color:"#238bf2",barBorderRadius:[4,0,0,4]},data:_.map(_.get(data,"female.data"),e=>e.value)},{name:_.get(data,"female.name"),label:{show:!1,color:"#fff",position:"left"},itemStyle:{color:"#a0d0ff",barBorderRadius:[4,0,0,4]},data:_.map(_.get(data,"female.data"),e=>e.weight)},{xAxisIndex:2,yAxisIndex:2,name:_.get(data,"male.name"),label:{show:!1,color:"#fff",position:"right"},itemStyle:{color:"#f9c807",barBorderRadius:[0,4,4,0]},data:_.map(_.get(data,"male.data"),e=>e.value)},{xAxisIndex:2,yAxisIndex:2,name:_.get(data,"male.name"),label:{show:!1,color:"#fff",position:"right"},itemStyle:{color:"#ffeea9",barBorderRadius:[0,4,4,0]},data:_.map(_.get(data,"male.data"),e=>e.weight)}].map(e=>_.merge(e,{type:"bar",barWidth:11,label:{show:!1,fontFamily:"Rubik-Medium",fontSize:14,distance:10}}))};var loopIndex=0;setInterval(function(){loopIndex>3&&(loopIndex=0),myChart.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:loopIndex}),option.series[0].data[loopIndex]===""&&myChart.dispatchAction({type:"showTip",seriesIndex:2,dataIndex:loopIndex}),loopIndex++},1e3);
