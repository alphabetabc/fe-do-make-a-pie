var data=[{name:"课题组1",clas:100,member:10},{name:"课题组2",clas:360.2,member:40.9},{name:"课题组3",clas:173.3,member:30},{name:"课题组4",clas:384.5,member:500}],nam=[],clas=[],member=[];$.each(data,function(a,e){nam.push(e.name),clas.push(e.clas),member.push(e.member)}),option={tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},legend:{data:["member","clas"]},xAxis:[{type:"category",data:nam,axisPointer:{type:"shadow"}}],yAxis:[{type:"value",name:"member",min:0,max:Math.max.apply(null,member)>Math.max.apply(null,clas)?Math.max.apply(null,member):Math.max.apply(null,clas)},{type:"value",name:"clas",min:0,max:Math.max.apply(null,clas),splitLine:{show:!1}}],series:[{name:"member",type:"bar",data:member},{name:"clas",type:"bar",data:clas}]},myChart.on("legendselectchanged",function(a){if(console.log(a.selected),console.log(a.selected.member&&a.selected.clas),a.selected.member&&a.selected.clas){var e=myChart.getOption();e.xAxis[0].data=nam,e.series[0].data=member,e.series[1].data=clas,myChart.setOption(e)}else if(a.selected.member){var e=myChart.getOption();e.xAxis[0].data=sortData(data,"member").name,e.series[0].data=sortData(data,"member").member,myChart.setOption(e)}else if(a.selected.clas){var e=myChart.getOption();e.xAxis[0].data=sortData(data,"clas").name,e.series[1].data=sortData(data,"clas").clas,myChart.setOption(e)}});function sortData(a,e){var t={};return t.name=[],t[e]=[],a.sort(function(m,s){return m[e]-s[e]}),$.each(a,function(m,s){t.name.push(s.name),t[e].push(s[e])}),t}
