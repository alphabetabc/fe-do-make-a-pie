var sourceData={摄像机一:["08:00-12:00","13:00-17:00"],摄像机二:["08:00-9:00","10:00-11:00","13:00-17:00"],摄像机三:["07:00-19:00"],摄像机四:["08:00-08:30","09:00-09:30","10:00-10:30"],摄像机五:["00:00-05:00","12:00-17:00"]};function getInvalidTime(e){var g={};for(let l in e){let i=[];e[l].length&&e[l][0].indexOf("00:00")==-1&&i.push("00:00-"+e[l][0].split("-")[0]);for(let r=1;r<e[l].length;r++){let t=e[l][r].split("-")[0],n=e[l][r-1].split("-")[1]+"-"+t;i.push(n)}if(i[i.length-1].split("-")[1]!="24:00"&&e[l][e[l].length-1].split("-")[1]!="24:00"){let r=e[l][e[l].length-1].split("-")[1],t=i[i.length-1].split("-")[1];new Date("2020 "+r).getTime()<new Date("2020 "+t).getTime()?i.push(i[i.length-1].split("-")[1]+"-24:00"):i.push(e[l][e[l].length-1].split("-")[1]+"-24:00")}g[l]=i}return g}var invalidTime=getInvalidTime(sourceData);function dateToNum(e){var g=e.split("-"),l=new Date("2020 "+g[0]),i=new Date("2020 "+g[1]),r=i.getTime()-l.getTime(),t=(r/(3600*1e3)).toFixed(2);return t}function getseries(e,g){let l=[],i=Object.keys(e).length,r=0;for(let t in e){if(e[t].length||g[t].length){if(g[t][0].split("-")[0]=="00:00")for(let n=0;n<g[t].length;n++){let h={name:"无录制",type:"bar",stack:t,itemStyle:{color:"rgba(220, 220, 220, 0.8)"},data:[]};if(h.data=new Array(i).fill(0),h.data[r]=dateToNum(g[t][n]),l.push(h),e[t][n]){let f={name:"正常录制",type:"bar",stack:t,itemStyle:{color:"rgb(194,54,52)"},data:[]};f.data=new Array(i).fill(0),f.data[r]=dateToNum(e[t][n]),l.push(f)}if(n==g[t].length&&n<e[t].length)for(let f=n+1;f<e[t].length;f++){let y={name:"正常录制",type:"bar",stack:t,itemStyle:{color:"rgb(194,54,52)"},data:[]};y.data=new Array(i).fill(0),y.data[r]=dateToNum(e[t][n]),l.push(y)}}if(e[t][0].split("-")[0]=="00:00")for(let n=0;n<e[t].length;n++){let h={name:"正常录制",type:"bar",stack:t,itemStyle:{color:"rgb(194,54,52)"},data:[]};if(h.data=new Array(i).fill(0),h.data[r]=dateToNum(e[t][n]),l.push(h),g[t][n]){let f={name:"无录制",type:"bar",stack:t,itemStyle:{color:"rgba(220, 220, 220, 0.8)"},data:[]};f.data=new Array(i).fill(0),f.data[r]=dateToNum(g[t][n]),l.push(f)}if(n==e[t].length&&n<g[t].length)for(let f=n+1;f<g[t].length;f++){let y={name:"无录制",type:"bar",stack:t,itemStyle:{color:"rgba(220, 220, 220, 0.8)"},data:[]};y.data=new Array(i).fill(0),y.data[r]=dateToNum(g[t][n]),l.push(y)}}}r++}return l}var option={tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(e,g,l,i){for(var r=e[0].name,t=0,n=0,h=0;h<e.length;h++)e[h].value>0&&(e[h].seriesName=="无录制"?n+=Number(e[h].value):e[h].seriesName=="正常录制"&&(t+=Number(e[h].value)));return r+"<br/>正常录制时长:"+t+"h<br/>无录像时长:"+n+"h"},show:!0},legend:{data:["正常录制","无录制"],selectedMode:!1},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},yAxis:{type:"value",max:24,splitNumber:23,splitLine:{lineStyle:{type:"dashed"}}},xAxis:{type:"category",data:["摄像机一","摄像机二","摄像机三","摄像机四","摄像机五"]},series:getseries(sourceData,invalidTime)};
