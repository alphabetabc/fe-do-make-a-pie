for(var fx=["01、03","02","04","05","06","07","08"],fxdata=[],i=0;i<fx.length;i++)fxdata.push({name:fx[i],max:20});var data={同济大学:[[26,17,7,0,17,7,2],[10,8,1,2,12,7,0],[[252,245,251,262,249,253,255,228,229,246,253,225,237,243,234,231,235,223,230,233,228,243,229,237,223,226],[249.8,257.5,252.5,256.5,243.3,241.8,251.8,249.8,248,253.2,249.3,255,247.2,251.3,249.5,240.2,248.2],[304,286,291,295,281,271,277],[],[293.5,256.8,267.5,294.5,277.6,273.5,296,264.7,276.6,267.5,264.2,262.2,268.9,266.7,290,298,256],[265,292,271,265,284,261,274],[263.3,285.5]]],中南大学:[[3,4,3,0,1,1,0],[1,6,2,0,7,3,0],[[233,236,225],[244.7,240.8,245.5,255],[279,287,274],[],[260],[265],[]]],郑州大学:[[3,1,1,0,0,0,0],[1,0,0,0,0,0,0],[[231,240,242],[242.5],[285],[],[],[],[]]],哈尔滨工业大学:[[2,0,0,0,0,0,0],[2,0,0,0,0,0,0],[[253,233],[],[],[],[],[],[]]],东南大学:[[0,1,0,0,2,2,0],[1,0,2,0,2,0,0],[[],[243.7],[],[],[283.2,265.7],[272,264],[]]],西南交通大学:[[2,2,2,3,6,4,1],[0,3,3,2,6,2,2],[[225,238],[240.2,242.7],[276,269],[244,231,253],[303,279.6,258,263.9,271.2,255.5],[261,279,265,269],[263.1]]],湖南大学:[[2,0,0,0,0,0,0],[1,0,1,0,0,0,0],[[226,223],[],[],[],[],[],[]]],吉林大学:[[2,0,3,0,1,0,0],[4,0,1,0,2,1,1],[[236,231],[],[278,293,268],[],[276.7],[],[]]],长安大学:[[6,0,0,0,2,0,0],[5,1,0,0,3,0,0],[[227,245,251,230,237,247],[],[],[],[255,256],[],[]]],西北工业大学:[[1,0,0,0,0,0,0],[0,0,0,0,0,0,0],[[250],[],[],[],[],[],[]]],沈阳建筑大学:[[1,0,0,0,0,0,0],[0,0,0,0,0,0,0],[[227],[],[],[],[],[],[]]],华中科技大学:[[1,0,0,0,1,0,0],[0,0,0,0,0,0,0],[[223],[],[],[],[300],[],[]]],重庆交通大学:[[0,0,0,0,0,0,0],[1,0,0,0,0,0,0],[[],[],[],[],[],[],[]]],山东大学:[[0,1,1,0,0,0,1],[1,0,0,0,0,0,0],[[],[244.7],[276],[],[],[],[262.5]]],宁波大学:[[0,0,0,0,0,0,0],[1,0,0,0,0,0,0],[[],[],[],[],[],[],[]]],大连理工大学:[[1,0,0,0,0,0,0],[0,0,0,0,0,0,0],[[244],[],[],[],[],[],[]]],东北林业大学:[[0,0,0,0,1,0,0],[1,0,0,0,0,0,0],[[],[],[],[],[258],[],[]]],石河子大学:[[0,0,0,0,0,0,0],[1,0,0,0,0,0,0],[[],[],[],[],[],[],[]]],中国矿业大学:[[1,2,0,0,0,0,0],[0,0,0,0,0,0,0],[[225],[252.8,247],[],[],[],[],[]]],中国民航大学:[[0,0,0,0,0,0,0],[1,0,0,0,0,0,0],[[],[],[],[],[],[],[]]],内蒙古大学:[[1,0,0,0,0,0,0],[0,0,0,0,0,0,0],[[227],[],[],[],[],[],[]]],"中国地质大学（北京）":[[0,0,0,0,0,0,0],[1,0,0,0,0,0,0],[[],[],[],[],[],[],[]]],重庆大学:[[0,0,0,0,0,0,0],[0,1,0,0,0,0,0],[[],[],[],[],[],[],[]]],武汉理工大学:[[0,0,0,0,0,1,0],[0,1,0,0,1,0,0],[[],[],[],[],[],[265],[]]],北京交通大学:[[0,1,0,1,1,1,0],[0,0,0,0,2,1,0],[[],[245.2],[],[234],[263.6],[261],[]]],华南理工大学:[[0,0,2,0,0,0,0],[0,0,0,0,0,0,0],[[],[],[273,270],[],[],[],[]]],"哈尔滨工业大学（威海）":[[0,0,1,0,2,0,0],[0,0,0,1,2,0,0],[[],[],[270],[],[263.4,261],[],[]]],中山大学:[[0,0,1,0,0,0,0],[0,0,0,0,0,0,0],[[],[],[287],[],[],[],[]]],中国农业大学:[[0,0,1,0,0,0,0],[0,0,0,0,0,0,0],[[],[],[268],[],[],[],[]]],南京理工大学:[[0,0,1,2,0,0,0],[0,0,0,1,0,0,0],[[],[],[268],[244,246],[],[],[]]],苏州大学:[[0,0,0,1,1,0,0],[0,0,0,0,0,0,0],[[],[],[],[243],[259.6],[],[]]],厦门大学:[[0,0,0,0,0,0,0],[0,0,0,1,0,0,0],[[],[],[],[],[],[],[]]],扬州大学:[[0,0,0,0,0,0,0],[0,0,0,1,0,0,0],[[],[],[],[],[],[],[]]],上海海事大学:[[0,0,0,1,0,0,0],[0,0,0,0,0,0,0],[[],[],[],[230],[],[],[]]],北京林业大学:[[0,0,0,0,0,0,0],[0,0,0,1,0,0,0],[[],[],[],[],[],[],[]]],北京工业大学:[[0,0,0,0,1,0,0],[0,0,0,1,0,0,0],[[],[],[],[],[292],[],[]]],南京工业大学:[[0,0,0,0,0,0,0],[0,0,0,1,0,0,0],[[],[],[],[],[],[],[]]],新疆大学:[[0,0,0,0,0,0,0],[0,0,0,0,1,0,0],[[],[],[],[],[],[],[]]],大连海事大学:[[0,0,0,0,0,0,0],[0,0,0,0,2,0,0],[[],[],[],[],[],[],[]]],兰州交通大学:[[0,0,0,0,0,0,0],[0,0,0,0,1,0,0],[[],[],[],[],[],[],[]]],华东交通大学:[[0,0,0,0,0,0,0],[0,0,0,0,0,1,0],[[],[],[],[],[],[],[]]],四川大学:[[0,0,0,0,0,0,0],[0,0,0,0,0,0,1],[[],[],[],[],[],[],[]]]},nodedata=[],university="同济大学",alldata=[];for(var key in data){tempdata=data[key][2];for(var i=0;i<tempdata.length;i+=1)for(var j=0;j<tempdata[i].length;j+=1)alldata.push([fx[i],tempdata[i][j]])}function getscoredata(t,e){for(var a=[],r=0;r<e.length;r+=1)for(var o=0;o<e[r].length;o+=1)a.push([fx[r],e[r][o]]);return a}for(var key in data){var totalnum=data[key][0].reduce(function(e,a){return e+a},0)+data[key][1].reduce(function(e,a){return e+a},0);key==university?nodedata.push({name:key,symbolSize:Math.max(totalnum,7),value:data[key][2],label:{color:"rgba(193,56,52,1)"},itemStyle:{normal:{color:"rgba(193,56,52,1)"}}}):nodedata.push({name:key,symbolSize:Math.max(totalnum,3),value:data[key][2],label:{color:"black"},itemStyle:{normal:{color:"rgba(51,71,85,1)"}}})}option={title:{text:"18同济交通夏令营录取情况",subtext:"点击右边学校可交互",x:"center"},backgroundColor:"#eee",legend:{data:["录取","不录取"],align:"left",left:10},toolbox:{feature:{magicType:{type:["stack","tiled"]},dataView:{}}},tooltip:{},xAxis:[{data:fx,name:"方向",silent:!1,axisLine:{onZero:!0},splitLine:{show:!1},splitArea:{show:!1}},{gridIndex:1,data:fx,name:"方向",silent:!1,axisLine:{onZero:!0},splitLine:{show:!1},splitArea:{show:!1}}],yAxis:[{max:35,name:"人数",inverse:!1,splitArea:{show:!1}},{gridIndex:1,name:"复试总分",max:300,min:210,inverse:!1,splitArea:{show:!1}}],grid:[{left:50,name:"人数",top:"10%",height:"40%",width:"40%"},{left:50,name:"人数",top:"60%",height:"35%",width:"40%"}],series:[{name:"录取",type:"bar",stack:"one",xAxisIndex:0,yAxisIndex:0,data:data[university][0],label:{normal:{show:!0,position:"inside"}}},{name:"不录取",type:"bar",stack:"one",xAxisIndex:0,yAxisIndex:0,data:data[university][1],label:{normal:{show:!0,position:"inside"}}},{type:"graph",layout:"force",left:"40%",right:"0%",top:"10%",bottom:"50%",focusNodeAdjacency:!0,roam:!0,data:nodedata,label:{normal:{position:"top",show:!0,textStyle:{color:"rgba(18,89,147,1)",fontSize:12}}},force:{repulsion:70},links:[],tooltip:{formatter:function(t){var e=data[t.data.name],a=e[0].reduce(function(r,o){return r+o},0)+e[1].reduce(function(r,o){return r+o},0);return t.name+"参加人数:"+a}}},{type:"pie",radius:[0,"30%"],center:["70%","75%"],data:[{name:"录取",value:data[university][0].reduce(function(t,e){return t+e},0)},{name:"不录取",value:data[university][1].reduce(function(t,e){return t+e},0)}],label:{normal:{formatter:`{hr|}
  {b|{b}：}{c}  {per|{d}%}  `,backgroundColor:"#eee",borderColor:"#aaa",borderWidth:1,borderRadius:4,rich:{a:{color:"#999",lineHeight:22,align:"center"},hr:{borderColor:"#aaa",width:"100%",borderWidth:.5,height:0},b:{fontSize:16,lineHeight:33},per:{color:"#eee",backgroundColor:"#334455",padding:[2,4],borderRadius:2}}}}},{name:"初选全部",type:"scatter",symbolSize:8,xAxisIndex:1,yAxisIndex:1,data:alldata,label:{normal:{show:!1,position:"inside"}}},{name:"录取",type:"scatter",symbol:"arrow",symbolSize:7,xAxisIndex:1,yAxisIndex:1,data:getscoredata(university,data[university][2]),label:{normal:{show:!1,position:"inside"}}}]},myChart.on("click",function(t){if(console.log(t),t.seriesType=="graph"){var e=t.name,a=[],r=[],o=[];for(var n in data){var d=data[n][0].reduce(function(l,s){return l+s},0)+data[n][1].reduce(function(l,s){return l+s},0);n==e?(a.push({name:n,symbolSize:Math.max(d,7),value:data[n][2],label:{color:"rgba(193,56,52,1)"},itemStyle:{normal:{color:"rgba(193,56,52,1)"}}}),r=[{name:"录取",value:data[e][0].reduce(function(l,s){return l+s},0)},{name:"不录取",value:data[e][1].reduce(function(l,s){return l+s},0)}],o=getscoredata(e,data[e][2])):a.push({name:n,symbolSize:Math.max(d,3),value:data[n][2],label:{color:"black"},itemStyle:{normal:{color:"rgba(51,71,85,1)"}}})}myChart.setOption({title:{subtext:e},series:[{data:data[e][0]},{data:data[e][1]},{data:a},{data:r},{},{data:o}]})}});
