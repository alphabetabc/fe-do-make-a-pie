let arr=[],list=[],series=[],legend=[],fontSize=16,barWidth=26,barGap=0,maxList=[],max=460,colorStartList=["transparent","transparent","transparent","transparent"],colorLeftList=["#000","#000","#000","#000"],colorTopList=["#1E7EFF","#FFA75A","#6ACC29","#9833FF"],colorEndList=["#4084EE","#FF8D28","#6ACC29","#9833FF"];chartObj={series:[{name:"当前资源",data:[269,460,400,170]},{name:"其他资源",data:[39,50,40,100]},{name:"资源",data:[15,200,80,60]}],chartList:["通信","网络","能源","建筑"]};function colorRgba(e,t){let r=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;var o=e.toLowerCase();if(o=="transparent")return"transparent";if(o&&r.test(o)){if(o.length===4){var l="#";for(let a=1;a<4;a+=1)l+=o.slice(a,a+1).concat(o.slice(a,a+1));o=l}var s=[];for(let a=1;a<7;a+=2)s.push(parseInt("0x"+o.slice(a,a+2)));return"rgba("+s.join(",")+","+t+")"}else return o}chartObj.series&&chartObj.series.length&&(chartObj.series.forEach((e,t)=>{arr=arr.concat(e.data)}),maxList=chartObj.series[0].data.map(()=>max),list=chartObj.series[0].data.map((e,t)=>1),chartObj.series.forEach((e,t)=>{legend.push({name:e.name,itemStyle:{color:colorEndList[t%colorEndList.length]}}),series.push({data:maxList,type:"pictorialBar",barMaxWidth:fontSize*3,itemStyle:{color:colorEndList[t],opacity:.1},tooltip:{show:!1},symbolPosition:"end",symbol:"diamond",symbolOffset:[(-.5*(chartObj.series.length-1)+t+-.5*barGap*.01*(chartObj.series.length-1)+barGap*.01*t)*barWidth,"-50%"],symbolSize:[barWidth,barWidth*.4],zlevel:-1}),series.push({data:list,color:colorStartList[t%colorStartList.length],type:"pictorialBar",tooltip:{show:!1},barMaxWidth:fontSize*3,symbol:"diamond",symbolOffset:[(-.5*(chartObj.series.length-1)+t+-.5*barGap*.01*(chartObj.series.length-1)+barGap*.01*t)*barWidth,"50%"],symbolSize:[barWidth,barWidth*.5]}),series.push({data:e.data,type:"pictorialBar",tooltip:{show:!1},barMaxWidth:fontSize*3,color:colorTopList[t],symbolPosition:"end",symbol:"diamond",symbolOffset:[(-.5*(chartObj.series.length-1)+t+-.5*barGap*.01*(chartObj.series.length-1)+barGap*.01*t)*barWidth,"-50%"],symbolSize:[barWidth,barWidth*.4],zlevel:2}),series.push({data:e.data,type:"pictorialBar",tooltip:{show:!1},barMaxWidth:fontSize*3,color:{x:0,y:1,x2:0,y2:0,type:"linear",global:!1,colorStops:[{offset:0,color:"transparent"},{offset:.2,color:colorRgba(colorLeftList[t%colorLeftList.length],.2)},{offset:1,color:colorRgba(colorLeftList[t%colorLeftList.length],.3)}]},symbolPosition:"end",symbol:"rect",symbolSize:[barWidth/2,"100%"],symbolOffset:[(-.5*(chartObj.series.length-1)+t+-.5*barGap*.01*(chartObj.series.length-1)+barGap*.01*t-.25)*barWidth,0],zlevel:1}),series.push({data:e.data,type:"bar",name:e.name,barGap:barGap+"%",barWidth,barMaxWidth:fontSize*3,label:{show:!0,position:"top",distance:fontSize*.3,textStyle:{color:colorEndList[t%colorEndList.length],fontSize}},showBackground:!0,backgroundStyle:{color:{x:0,y:1,x2:0,y2:0,type:"linear",global:!1,colorStops:[{offset:0,color:colorStartList[t%colorStartList.length]},{offset:.2,color:colorRgba(colorEndList[t%colorEndList.length],.2)},{offset:1,color:colorRgba(colorEndList[t%colorEndList.length],1)}]},opacity:.1},itemStyle:{color:{x:0,y:1,x2:0,y2:0,type:"linear",global:!1,colorStops:[{offset:0,color:colorStartList[t%colorStartList.length]},{offset:.2,color:colorRgba(colorEndList[t%colorEndList.length],.2)},{offset:1,color:colorRgba(colorEndList[t%colorEndList.length],1)}]}}})})),option={title:{text:"",top:20,left:"center",textStyle:{color:"#fff",fontSize:20}},tooltip:{show:!0,trigger:"axis",backgroundColor:"rgba(116,176,222,0.3)",extraCssText:"box-shadow: 0 0 8px rgba(0, 128, 255, 0.27) inset;",borderWidth:0,confine:!1,appendToBody:!0,formatter:e=>{let t="<div style='margin-bottom:5px;'>"+e[0].name+"</div>";return e.forEach((r,o)=>{var l=`<span style="display:inline-block;margin-right:5px;border-radius:50%;width:${fontSize}px;height:${fontSize}px;background:${colorEndList[o]}"></span>`;t+="<div style='display:flex;align-items:center;margin-bottom:5px'>"+l+r.seriesName+(r.seriesName?"<span style='display:inline-block;margin-right:6px;'></span>":"")+r.data+"</div>"}),t},axisPointer:{type:"shadow",shadowStyle:{color:"rgba(35,49,77,0.3)"}},textStyle:{color:"#fff",fontSize}},grid:{top:fontSize*3.5,left:5,right:5,bottom:fontSize,containLabel:!0},legend:{show:!0,data:legend,selectedMode:!1,type:"scroll",icon:"circle",itemWidth:fontSize,itemHeight:fontSize,textStyle:{color:"#C3E3F9",fontSize}},xAxis:{data:chartObj.chartList,type:"category",axisLine:{show:!0,lineStyle:{color:"#2B72A1"}},axisLabel:{fontSize,color:"#87CCFF"},splitLine:{show:!1},axisTick:{show:!1},interval:0},yAxis:[{type:"value",name:"单位",nameGap:fontSize*1.5,nameTextStyle:{align:"center",fontSize,color:"#2869A9"},splitNumber:4,splitLine:{show:!0,lineStyle:{color:"rgba(255,255,255,0.1)"}},axisLine:{show:!1},axisLabel:{margin:10,fontSize,color:"#2869A9"},axisTick:{show:!0,lineStyle:{color:"#2869A9"}}}],series};
