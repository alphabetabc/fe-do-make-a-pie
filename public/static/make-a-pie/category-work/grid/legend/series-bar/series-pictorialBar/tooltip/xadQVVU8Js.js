const dataArr={xdata:["01-01","01-02","01-03","01-04","01-05","01-06","01-07"],result:[{name:"天河",data:[320,435,490,340,320,270,360]},{name:"海珠",data:[150,220,210,310,140,180,288]},{name:"荔湾",data:[250,120,240,280,240,180,188]},{name:"黄埔",data:[180,420,370,250,210,180,228]},{name:"越秀",data:[130,210,340,240,220,180,218]},{name:"白云",data:[210,260,230,220,260,180,388]}]},diamondData=dataArr.result.reduce((o,e,t)=>(o[t]=e.data.map((f,a)=>f+(o[t-1]?o[t-1][a]:0)),o),[]),color=[[{offset:0,color:"#dc0707"},{offset:.5,color:"#dc0707"},{offset:.5,color:"#af0808"},{offset:1,color:"#af0808"}],[{offset:0,color:"#f67c20"},{offset:.5,color:"#f67c20"},{offset:.5,color:"#cc681e"},{offset:1,color:"#cc681e"}],[{offset:0,color:"#efff37"},{offset:.5,color:"#efff37"},{offset:.5,color:"#d5e700"},{offset:1,color:"#d5e700"}],[{offset:0,color:"#32ffee"},{offset:.5,color:"#32ffee"},{offset:.5,color:"#00e8d5"},{offset:1,color:"#00e8d5"}],[{offset:0,color:"#46c9ff"},{offset:.5,color:"#46c9ff"},{offset:.5,color:"#00b4ff"},{offset:1,color:"#00b4ff"}],[{offset:0,color:"#54a0ff"},{offset:.5,color:"#54a0ff"},{offset:.5,color:"#1f83ff"},{offset:1,color:"#1f83ff"}]];let series=dataArr.result.reduce((o,e,t,f)=>(o.push({z:t+1,stack:"总量",type:"bar",name:e.name,barGap:"-100%",barWidth:30,data:e.data,itemStyle:{color:{type:"linear",x:0,x2:1,y:0,y2:0,colorStops:color[t]}}},{z:t+10,type:"pictorialBar",symbolPosition:"end",symbol:"diamond",symbolOffset:[0,"-50%"],symbolSize:[30,10],data:diamondData[t],itemStyle:{color:{type:"linear",x:0,x2:1,y:0,y2:0,colorStops:color[t]}},tooltip:{show:!1}}),o.length===f.length*2&&o.push({z:f.length*2,type:"pictorialBar",symbolPosition:"start",data:dataArr.result[0].data,symbol:"diamond",symbolOffset:["0%","50%"],symbolSize:[30,10],itemStyle:{color:{type:"linear",x:0,x2:1,y:0,y2:0,colorStops:color[0]}},tooltip:{show:!1}}),o),[]);const tooltip={trigger:"axis"},legend={data:dataArr.result.map(o=>o.name),textStyle:{fontSize:14,color:"#fff"},itemWidth:25,itemHeight:15,itemGap:15,bottom:"5%",selectedMode:!1},grid={top:"10%",left:"10%",right:"3%",bottom:"15%"},xAxis={axisTick:{show:!0},axisLine:{lineStyle:{color:"rgba(255,255,255, .2)"}},axisLabel:{textStyle:{fontSize:12,color:"#fff"}},data:dataArr.xdata},yAxis=[{splitLine:{lineStyle:{color:"rgba(255,255,255, .05)"}},axisLine:{show:!1},axisLabel:{textStyle:{fontSize:16,color:"#fff"}}}];option={tooltip,xAxis,yAxis,series,grid,legend,backgroundColor:"rgba(0, 0, 0, .8)"};
