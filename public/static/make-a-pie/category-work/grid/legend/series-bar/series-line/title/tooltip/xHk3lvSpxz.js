for(var brandData=["X1 Carbon系列","Yoga 系列","","X1系列","Yoga Yoga系列"],storeData=["KKONE","高新万达","世欧广场","缤纷城"],salesData=[[100,236,325,439],[209,236,325,439],[209,236,325,439],[209,236,325,439]],ratioData=[[90,80,70,75],[95,60,75,78],[95,60,75,78],[95,60,75,78]],smin=Number.MAX_VALUE,smax=0,i=0;i<salesData[0].length;i++){for(var sum=0,nsum=0,j=0;j<salesData.length;j++)salesData[j][i]>=0?sum+=salesData[j][i]:nsum+=salesData[j][i];sum>smax&&(smax=sum),nsum<smin&&(smin=nsum)}for(var rmin=Number.MAX_VALUE,rmax=0,i=0;i<ratioData.length;i++)for(var j=0;j<ratioData[i].length;j++)ratioData[i][j]>rmax&&(rmax=ratioData[i][j]),ratioData[i][j]<rmin&&(rmin=ratioData[i][j]);smin>=0&&(smin=0);var smax=(smax-smin)/2*3+smin,rmin=rmax-(rmax-rmin)*3;option={title:{},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(a){for(var r=a[0].name+": <br />",t="",e=0;e<a.length;e++)e<a.length/2?(t='<span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;border:1px solid'+a[e].color+";background-color:"+a[e].color+'"></span>',r+=t,r+=a[e].seriesName+"销量："+a[e].data+"<br />"):(t='<span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;border:1px solid'+a[e].color+'"></span>',r+=t,r+=a[e].seriesName+"达成率："+a[e].data+"%<br />");return r}},grid:{containLabel:!0},legend:{data:brandData,formatter:function(a){return"{space|"+a+"}"},textStyle:{rich:{space:{width:100}}}},xAxis:[{type:"category",data:storeData}],yAxis:[{type:"value",position:"left",max:smax,min:smin,interval:(smax-smin)/6},{type:"value",position:"right",max:rmax,min:rmin,interval:(rmax-rmin)/6}],series:[{name:brandData[0],type:"bar",stack:"a",data:salesData[0]},{name:brandData[1],type:"bar",stack:"a",data:salesData[1]},{name:brandData[3],type:"bar",stack:"a",data:salesData[2]},{name:brandData[4],type:"bar",stack:"a",data:salesData[3]},{name:brandData[0],type:"line",yAxisIndex:1,data:ratioData[0]},{name:brandData[1],type:"line",yAxisIndex:1,data:ratioData[1]}]};
