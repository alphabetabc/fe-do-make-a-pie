for(var caption=["增值税","消费税","营业税","关税","所得税"],data_total=[220,182,191,234,290],data_curr=[210,170,161,160,150],data_percent=[],line=[],selectA=[],selectB=[],i=0;i<data_total.length;i++){var j=data_curr[i]/data_total[i]*100;data_percent.push(j),line.push(0),selectA.push(""),selectB.push("")}var checkName="",checkIndex=-1;option={grid:{bottom:"20%"},legend:{show:!0,left:"center",orient:"horizontal",textStyle:{color:"#E7F8FB",fontSize:16},itemGap:40},xAxis:{data:caption,axisTick:{show:!1},axisLine:{show:!0,lineStyle:{color:"#696969",width:2}},axisLabel:{show:!0,fontSize:22,margin:40,textStyle:{color:function(t,e){return checkIndex==e?"#FFF45C":"#fff"}}}},yAxis:{show:!0,type:"value",min:0,axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1},splitLine:{show:!0,lineStyle:{color:"rgba(105,105,105,0.5)",width:2,type:"solid"}}},series:[{type:"line",data:line,label:{show:!0,position:"bottom",formatter:function(t){var e=option.series[1].data[t.dataIndex],o=option.series[2].data[t.dataIndex],a=e/o*100;return a.toFixed(0)+"%"},fontSize:22,distance:8,color:"#FFF45C"},lineStyle:{color:"rgba(255, 0, 0, 0)"},itemStyle:{color:"#088B50"},symbol:"rect",silent:!0,animation:!1},{name:"已完成",type:"bar",itemStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(7,173,98, 1)"},{offset:1,color:"rgba(7,173,98, 0)"}],global:!1}},label:{show:!0,position:"insideTop",formatter:"{c}",fontSize:18,color:"#fff"},barWidth:"50%",data:data_curr},{name:"总量",type:"bar",barGap:"-100%",itemStyle:{color:"rgba(255, 0, 0, 0)",borderColor:"#088B50",borderWidth:6},label:{show:!0,position:"top",formatter:"{c}",fontSize:18,color:"#fff"},barWidth:"50%",data:data_total},{type:"bar",itemStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(173,167,7, 1)"},{offset:1,color:"rgba(173,167,7, 0)"}],global:!1}},label:{show:!0,formatter:function(t){return checkName==t.name?t.value:""},position:"insideTop",fontSize:18,color:"#fff"},barWidth:"50%",data:selectA,silent:!0,animation:!1},{type:"bar",barGap:"-100%",itemStyle:{color:"rgba(255, 0, 0, 0)",borderColor:"#ADA707",borderWidth:6},label:{show:!1},barWidth:"50%",data:selectA,silent:!0,animation:!1}]},myChart.on("click",function(t){checkName=t.name,console.log(t),checkIndex=t.dataIndex;for(var e=0;e<data_total.length;e++)e==checkIndex?selectA[e]=data_total[checkIndex]:selectA[e]="",e==checkIndex?selectB[e]=data_curr[checkIndex]:selectB[e]="";option.series[4].data=selectA,option.series[3].data=selectB,myChart.setOption(option)});
