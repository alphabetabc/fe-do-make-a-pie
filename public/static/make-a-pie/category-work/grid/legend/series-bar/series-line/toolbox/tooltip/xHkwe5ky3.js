option={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["直接访问","邮件营销"]},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar","stack","tiled"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,xAxis:[{type:"value"}],yAxis:[{type:"category",data:["周一","周二","周三","周四","周五","周六","周日"]}],series:[{name:"直接访问",type:"bar",stack:"总量",itemStyle:{normal:{label:{show:!1,position:"insideRight"}}},data:[320,302,301,334,390,330,320]},{name:"邮件营销",type:"line",stack:"总量",symbol:"/图片togoal.png",symbolSize:[1,40],itemStyle:{normal:{lineStyle:{width:0},testStyle:{color:"#000",fontSize:12},label:{show:!0,position:"right"},color:"#000"}},data:[120,132,101,134,90,230,210]}]};for(var ser=option.series,seriesLen=ser.length,sum=[],i=0;i<ser[0].data.length;i++){var sums=ser[0].data[i]/ser[1].data[i];sum.push(sums.toFixed(4))}option.series.push({name:"百分比",type:"bar",stack:"总量",itemStyle:{normal:{label:{show:!0,position:"right",textStyle:{color:"#000"},formatter:function(e){return(e.value*100).toFixed(2)+"%"}},color:"#fff"}},data:sum}),myChart.setOption(option);
