var legendData=["商超","餐饮","小吃","其他","年同比"],value1=[[75.45,66.42,150.23,49.96,60.67,61.57],[119.68,54.72,119.09,44.76,27.4,24.57],[105.27,79.34,152.96,40.09,55.33,36.46],[0,0,.34,0,0,0]],value2=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],series=[];option={tooltip:{trigger:"axis"},legend:{data:legendData},xAxis:{data:["黄冈","十堰","孝感","咸宁","恩施","宜昌"]},yAxis:[{type:"value"},{type:"value",name:"%"}],series:[]},series=value1.map(function(r,e){return{type:"bar",name:legendData[e],itemStyle:{opacity:.5},data:r}}),series.unshift({type:"custom",name:"年同比",renderItem:function(r,e){for(var l=e.value(0),a=e.currentSeriesIndices(),u=e.barLayout({barGap:"30%",barCategoryGap:"20%",count:a.length-1}),o=[],t=0;t<a.length;t++){var s=a[t];if(s!==r.seriesIndex){var n=e.coord([l,e.value(s)]);n[0]+=u[t-1].offsetCenter,n[1]-=20,o.push(n)}}var i=e.style({stroke:e.visual("color"),fill:null});return{type:"polyline",shape:{points:o},style:i}},yAxisIndex:1,itemStyle:{borderWidth:2},encode:{x:0,y:[1,2,3,4,5]},data:value2.map((r,e)=>[e,...r]),z:100}),option.series=series,console.log(option.series);
