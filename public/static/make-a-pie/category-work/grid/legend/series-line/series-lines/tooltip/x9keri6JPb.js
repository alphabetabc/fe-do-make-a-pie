function getRandomInt(a,t){return a=Math.ceil(a),t=Math.floor(t),Math.floor(Math.random()*(t-a))+a}function getFormatDate(a){const t=new Date,e=t.getFullYear();let r=t.getMonth()+1,o="";const s="-",c=":";let l="";switch(o=t.getDate(),r>=1&&r<=9&&(r="0"+r),o>=0&&o<=9&&(o="0"+o),a){case"date":l=e+s+r+s+o;break;case"time":l=t.getHours()+c+t.getMinutes()+c+t.getSeconds();break;case"year":l=parseInt(e);break;default:return!1}return l}let xAxisData=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15"],data1=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],data2=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15];const base=+new Date(new Date().getTime()-1*15*60*1e3),oneMin=60*1e3,date=[],xData=[Math.random()*150];let now=new Date(base),now2="";function addData(a){now2=[now.getHours(),now.getMinutes(),now.getSeconds()].join(":"),xAxisData.push(now2),a&&xAxisData.shift(),now=new Date(+new Date(now)+oneMin)}for(let a=1;a<=15;a++)data1.push(getRandomInt(1,99)),data2.push(getRandomInt(1,99)),addData(!0);let json={chart0:{xcategory:xAxisData,low:data1,lowLine:[]}},json2={chart0:{xcategory:xAxisData,low:data2,lowLine:[]}},zrUtil=echarts.util;zrUtil.each(json.chart0.xcategory,function(a,t){json.chart0.lowLine.push([{coord:[t,json.chart0.low[t]]},{coord:[t+1,json.chart0.low[t+1]]}])}),zrUtil.each(json.chart0.xcategory,function(a,t){json2.chart0.lowLine.push([{coord:[t,json2.chart0.low[t]]},{coord:[t+1,json2.chart0.low[t+1]]}])});var option={backgroundColor:"#03060F",tooltip:{trigger:"axis",axisPointer:{lineStyle:{color:"#15ecf4"}},backgroundColor:"rgba(0,0,0,.8)",extraCssText:"box-shadow: 4px 4px 10px rgba(21, 250, 255,.6);",formatter:function(a){var t=a[0].name+"<br>";return a.forEach(function(e){t+='<span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:'+e.color+'"></span>',parseFloat(e.data)>=50?t+=e.seriesName+': <span class="growth">增长'+e.data+"%</span><br>":parseFloat(e.data)<50&&(t+=e.seriesName+': <span class="reduce">降低'+e.data+"%</span><br>")}),t}},legend:{data:["同比","环比"],textStyle:{fontSize:12,color:"rgb(0,253,255,0.6)"},top:"5%",right:"5%"},grid:{bottom:50,left:70,right:50},xAxis:{axisLine:{show:!0,lineStyle:{color:"red"}},axisTick:{show:!1},axisLabel:{show:!0},data:xAxisData},yAxis:{max:100,splitNumber:4,interval:25,axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{type:"dashed",color:"#4b4d64"}},axisLabel:{formatter:"{value} %",textStyle:{color:"#ffffff"}}},series:[{name:"环比",type:"line",symbol:"circle",symbolSize:10,areaStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(255, 204,1, .9)"},{offset:.8,color:"rgba(6, 8, 41,.1)"}],!1),shadowColor:"rgba(0, 0, 0, 0.1)",shadowBlur:10}},itemStyle:{normal:{color:"#ffcb00"}},data:data1},{name:"环比",type:"lines",coordinateSystem:"cartesian2d",zlevel:1,smooth:!0,symbol:"circle",effect:{show:!0,smooth:!0,period:2,symbolSize:8},lineStyle:{normal:{color:"#ffcb00",width:0,opacity:0,curveness:0}},data:json.chart0.lowLine},{name:"同比",type:"line",symbol:"circle",symbolSize:10,areaStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(21, 250, 255,.9)"},{offset:.8,color:"rgba(6, 8, 41,.1)"}],!1),shadowColor:"rgba(0, 0, 0, 0.1)",shadowBlur:10}},itemStyle:{normal:{color:"#15faff"}},data:data2},{name:"同比",type:"lines",coordinateSystem:"cartesian2d",zlevel:1,smooth:!0,symbol:"circle",effect:{show:!0,smooth:!0,period:2,symbolSize:8},lineStyle:{normal:{color:"#15faff",width:0,opacity:0,curveness:0}},data:json2.chart0.lowLine}]};setInterval(function(){for(var a=0;a<1;a++)data1.shift(),data1.push(getRandomInt(1,99)),data2.shift(),data2.push(getRandomInt(1,99)),json={chart0:{xcategory:xAxisData,low:data1,lowLine:[]}},json2={chart0:{xcategory:xAxisData,low:data2,lowLine:[]}},zrUtil.each(json.chart0.xcategory,function(t,e){json.chart0.lowLine.push([{coord:[e,json.chart0.low[e]]},{coord:[e+1,json.chart0.low[e+1]]}])}),zrUtil.each(json.chart0.xcategory,function(t,e){json2.chart0.lowLine.push([{coord:[e,json2.chart0.low[e]]},{coord:[e+1,json2.chart0.low[e+1]]}])});addData(!0),myChart.setOption({xAxis:{data:xAxisData},series:[{data:data1},{data:json.chart0.lowLine},{data:data2},{data:json2.chart0.lowLine}]})},5e3);
