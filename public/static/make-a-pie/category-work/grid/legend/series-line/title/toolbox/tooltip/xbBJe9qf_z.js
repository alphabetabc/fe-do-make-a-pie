for(var ckqList=[{year:"2013",value:-3},{year:"2014",value:-2},{year:"2015",value:0},{year:"2016",value:-1},{year:"2017",value:2},{year:"2018",value:2},{year:"2019",value:3},{year:"2020",value:5}],xData=[],data1=[],data2=[],data3=[],data4=[],i=0;i<ckqList.length;i++)xData.push(ckqList[i].year),data4.push([i,ckqList[i].value]),data2.push(1);var myRegression=ecStat.regression("linear",data4,3);myRegression.points.sort(function(e,a){return e[0]-a[0]}),data3=myRegression.points;for(var data3Min=0,j=0;j<data3.length;j++){let e=(data3[j][1]-.5).toFixed(3);data1.push(Number(e)),Number(e)<data3Min&&(data3Min=Number(e))}for(var data4Min=0,i=0;i<data4.length;i++)Number(data4[i][1])<data4Min&&(data4Min=Number(data4[i][1]));var min=0;if(data3Min<0||data4Min<0){data3Min<data4Min?min=-data3Min:min=-data4Min,min=Math.ceil(min);for(var i=0;i<data4.length;i++)data1[i]=data1[i]+min,data3[i][1]=data3[i][1]+min,data4[i][1]=data4[i][1]+min}option={toolbox:{show:!0,feature:{saveAsImage:{show:!0}},x:"right",y:12,padding:10,itemSize:14},tooltip:{trigger:"axis",axisPointer:{type:"line"},formatter:function(e,a,o){let l=e[0].axisValue+"<br>",t=e[0].value-min,r=e[0].value+e[1].value-min;return t=t.toFixed(3),r=r.toFixed(3),l+="95%置信区间："+t+" mil k㎡ ~ "+r+" mil k㎡<br>",l+="异常值："+(e[3].value[1]-min)+" mil km2",l}},calculable:!1,xAxis:{name:"年",type:"category",boundaryGap:!1,data:xData,axisLine:{lineStyle:{color:"rgba(0,0,0,0.7)"}},splitLine:{show:!1},axisTick:{show:!0,lineStyle:{color:"rgba(0,0,0,0.85)"}},axisLabel:{textStyle:{fontSize:12,color:"rgba(0,0,0,0.85)"}}},yAxis:{type:"value",name:"million k㎡",axisLabel:{formatter:function(e,a){var o=e-min;return o}},axisLine:{lineStyle:{color:"rgba(0,0,0,0.7)"}},splitLine:{show:!1}},series:[{name:"最小值",type:"line",stack:"总量",data:data1,symbol:"none",areaStyle:{color:"rgba(255,255,255,0)"},lineStyle:{normal:{width:0}}},{name:"差值",type:"line",stack:"总量",data:data2,symbol:"none",areaStyle:{normal:{color:"#ddd"}},lineStyle:{normal:{width:0}}},{name:"线性回归",type:"line",smooth:!0,showSymbol:!1,data:data3,symbol:"none",lineStyle:{normal:{color:"#aaa",type:"dashed",width:1}}},{name:"折线",type:"line",data:data4,lineStyle:{normal:{color:"#222"}},symbol:"diamond",symbolSize:8,itemStyle:{normal:{color:"#222"}}}],grid:{x:80,y:35,x2:60,y2:50,borderWidth:0,containLabel:!0}};
