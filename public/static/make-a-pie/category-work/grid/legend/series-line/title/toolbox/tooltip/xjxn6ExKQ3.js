let maxSeries=[97.26,97.08,97.67,97.83,97.65,97.75],otherSeries=[[.47,.63,.59,.53,.55,.56],[.31,.3,.32,.34,.35,.37],[1.53,1.59,1.04,.92,1.03,.91],[.43,.4,.38,.38,.41,.41]],sumOtherSeries=otherSeries.reduce((e,a)=>(e=e.map((l,t)=>(e[t]*100+a[t]*100)/100),e)),maxSumOtherSeriesSingle=Math.max.apply(null,sumOtherSeries),minmaxSeriesSingle=Math.min.apply(null,maxSeries),minuend=0;Number(minmaxSeriesSingle)>Number(maxSumOtherSeriesSingle)&&(minuend=(Number(minmaxSeriesSingle)*100-Number(maxSumOtherSeriesSingle)*100)/100,console.log(maxSumOtherSeriesSingle,"maxSumOtherSeriesSingle"),console.log(minuend,"minuend1"),minuend=Math.floor(minuend),console.log(minuend,"minuend2"));let max=(Number(Math.max.apply(null,maxSeries))*100-Number(minuend)*100+Number(maxSumOtherSeriesSingle)*100)/100;max=parseInt(max);let allMaxSeries=sumOtherSeries.map((e,a)=>(e*100+maxSeries[a]*100)/100),allMaxSingle=Math.max.apply(null,allMaxSeries);(Number(allMaxSingle)*100-minuend*100)/100>max&&(max=parseInt(allMaxSingle)+1);let computemaxSeries=maxSeries.map(e=>e=(e*100-minuend*100)/100);option={title:{text:"堆叠区域图"},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["正常占比","次级占比","损失类占比","关注类占比","可疑类占比"]},toolbox:{feature:{saveAsImage:{}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:["2020年3月","2020年2月","2020年1月","2019年12月","2019年11月","2019年10月"]}],yAxis:[{type:"value",max,min:0,splitNumber:5,axisLabel:{formatter:function(e){return e>maxSumOtherSeriesSingle?(Number(e)*100+Number(minuend)*100)/100:e}}}],series:[{name:"损失类占比",type:"line",stack:"总量",areaStyle:{},data:[.47,.63,.59,.53,.55,.56]},{name:"次级占比",type:"line",stack:"总量",areaStyle:{},data:[.31,.3,.32,.34,.35,.37]},{name:"关注类占比",type:"line",stack:"总量",areaStyle:{},data:[1.53,1.59,1.04,.92,1.03,.91]},{name:"可疑类占比",type:"line",stack:"总量",areaStyle:{},data:[.43,.4,.38,.38,.41,.41]},{name:"正常占比",type:"line",stack:"总量",areaStyle:{},data:computemaxSeries}]};
