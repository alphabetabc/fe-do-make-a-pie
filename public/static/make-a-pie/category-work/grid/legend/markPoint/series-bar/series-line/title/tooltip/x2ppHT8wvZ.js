var dataObj={categories:[],legendData:["动态曲线"],yAxisData:[],yAxisName:"次",wangge:[]};dataObj.categories=function(){for(var e=new Date,t=[],o=60;o--;){var a=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),i=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds(),n=e.getHours()+":"+a+":"+i;t.unshift(n),e=new Date(e-1e3)}return t}(),dataObj.wangge=function(){for(var e=[],t=60;t--;)e.push(100);return e}(),dataObj.yAxisData=function(){for(var e=[],t=0;t<60;)e.push(""),t++;return e}();var option=anlysis(myChart,dataObj);setInterval(function(){var e=new Date().toLocaleTimeString().replace(/^\D*/,""),t=dataObj.wangge,o=dataObj.yAxisData;t.shift(),t.push(100),o.shift(),o.push(Math.round(Math.random()*10)),dataObj.categories.shift(),dataObj.categories.push(e),myChart.setOption({xAxis:[{data:dataObj.categories},{data:dataObj.categories}],series:[{data:t},{data:o}]})},1e3);function anlysis(e,t){var o={title:{show:!1},grid:{top:"12%",left:"10px",right:"10px",bottom:"2%",containLabel:!0},tooltip:{trigger:"axis",formatter:function(a){if(a[0].data!==""){var i='<span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:'+a[0].color+'"></span>'+a[0].seriesName+"："+a[0].data;return i}}},legend:{data:t.legendData,textStyle:{color:"#555"},top:"10",right:"20"},xAxis:[{type:"category",boundaryGap:!0,axisLine:{lineStyle:{color:"#dfdfdf"}},axisTick:{lineStyle:{color:"#dfdfdf"}},axisLabel:{color:"#555",rotate:"20",interval:6,formatter:function(a){var i=a;return i.length>10&&(i=i.substring(0,9)+".."),i}},data:t.categories},{type:"category",boundaryGap:!0,axisLine:{lineStyle:{color:"#dfdfdf"}},axisTick:{lineStyle:{color:"#dfdfdf"}},data:t.categories,show:!1}],yAxis:[{type:"value",scale:!0,name:t.yAxisName,min:0,boundaryGap:[.1,.2],splitLine:{show:!0,lineStyle:{color:"#007fff"}},axisLabel:{color:"#555"},axisLine:{lineStyle:{color:"#555"}},axisTick:{lineStyle:{color:"#007fff"}}},{type:"value",scale:!0,max:100,min:0,boundaryGap:0,splitLine:{show:!1},axisLabel:{show:!1},axisLine:{lineStyle:{color:"#007fff"}},axisTick:{show:!1}}],series:[{type:"bar",xAxisIndex:1,yAxisIndex:1,barGap:"-100%",barCategoryGap:"0%",itemStyle:{normal:{color:"rgba(0,0,0,0)",borderRightWidth:"1",borderColor:"#007fff"}},data:t.wangge},{name:t.legendData,type:"line",smooth:!0,showAllSymbol:!0,symbol:"circle",symbolSize:0,itemStyle:{normal:{color:"#f74df6"}},lineStyle:{shadowColor:"#f74df6",shadowBlur:8,shadowOffsetX:"3",shadowOffsetY:"4"},markPoint:{data:[{name:"峰值",type:"max",label:{normal:{position:"top",formatter:function(a){var i=t.categories[a.data.coord[0]];return a.name+":"+a.value+"次（"+i+"）"},background:"#ddd"}}}],symbol:"pin",symbolSize:15,symbolOffset:[0,-6]},data:t.yAxisData,animationDurationUpdate:function(a){return a*100}}],animationEasing:"exponentialOut",animationEasingUpdate:"exponentialOut"};e.hideLoading(),e.setOption(o)}
