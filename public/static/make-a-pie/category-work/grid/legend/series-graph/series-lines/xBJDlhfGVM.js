const targetCoord=[1e3,140],curveness=.2,linesData=[],categories=[{name:"流入中",itemStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,1,0,[{offset:0,color:"#01acca"},{offset:1,color:"#5adbe7"}])}},label:{normal:{fontSize:"14"}}},{name:"暂无流入",itemStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,1,0,[{offset:0,color:"#ffb402"},{offset:1,color:"#ffdc84"}])}},label:{normal:{fontSize:"14"}}}],item={name:"数据中心",value:targetCoord,symbolSize:100,itemStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,1,0,[{offset:0,color:"#157eff"},{offset:1,color:"#35c2ff"}])}},label:{normal:{fontSize:"14"}}},items=[{name:"子平台1",category:0,active:!0,speed:"50kb/s",value:[0,0]},{name:"子平台2",category:0,active:!0,speed:"50kb/s",value:[0,100]},{name:"子平台3",category:1,value:[0,200]},{name:"子平台4",category:1,value:[0,300]}],data=items.concat([item]);items.forEach(function(e){e.active&&linesData.push([{coord:e.value},{coord:targetCoord}])});const links=items.map(e=>({source:e.name,target:item.name,speed:e.speed,lineStyle:{normal:{color:e.speed?"#12b5d0":"#ff0000",curveness}}}));option={legend:[{formatter:function(e){return echarts.format.truncateText(e,100,"14px Microsoft Yahei","…")},tooltip:{show:!0},textStyle:{color:"#999"},selectedMode:!1,right:0,data:categories.map(function(e){return e.name})}],xAxis:{show:!1,type:"value"},yAxis:{show:!1,type:"value"},series:[{type:"graph",layout:"none",coordinateSystem:"cartesian2d",symbolSize:60,z:3,edgeLabel:{normal:{show:!0,textStyle:{fontSize:14},formatter:function(e){let o="";return e.data.speed!==void 0&&(o=e.data.speed),o}}},label:{normal:{show:!0,position:"bottom",color:"#5e5e5e"}},itemStyle:{normal:{shadowColor:"none"},emphasis:{}},lineStyle:{normal:{width:2,shadowColor:"none"}},edgeSymbol:["none","arrow"],edgeSymbolSize:8,data,links,categories},{name:"A",type:"lines",coordinateSystem:"cartesian2d",z:1,effect:{show:!0,smooth:!1,trailLength:0,symbol:"arrow",color:"rgba(55,155,255,0.5)",symbolSize:12},lineStyle:{normal:{curveness}},data:linesData}]};
