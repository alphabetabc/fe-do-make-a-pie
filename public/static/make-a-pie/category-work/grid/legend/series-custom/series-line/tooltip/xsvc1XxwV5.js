const headers=["2011-09-30","2011-10-31","2011-11-30","2011-12-31","2012-01-31","2012-02-29","2012-03-31","2012-04-30","2012-05-31","2012-06-30","2012-07-31","2012-08-31","2012-09-30","2012-10-31","2012-11-30","2012-12-31","2013-01-31","2013-02-28","2013-03-31","2013-04-30","2013-05-31","2013-06-30","2013-07-31","2013-08-31","2013-09-30","2013-10-31","2013-11-30","2013-12-31","2014-01-31","2014-02-28","2014-03-31","2014-04-30","2014-05-31","2014-06-30","2014-07-31","2014-08-31","2014-09-30","2014-10-31","2014-11-30","2014-12-31","2015-01-31","2015-02-28","2015-03-31","2015-04-30","2015-05-31","2015-06-30","2015-07-31","2015-08-31","2015-09-30","2015-10-31"],srcData=[24.9654,null,null,16.7573,null,null,10.9466,null,null,7.6162,null,null,7.0672,null,null,12.0246,null,null,8.4632,null,null,9.5515,null,null,10.5731,null,null,6.8437,null,null,6.1885,null,null,6.857,null,null,6.6064,null,null,4.6705,null,null,-.4302,null,null,.0367,null,null,-5.9624,null],subData=[13.8,13.2,12.4,12.8,null,21.3,11.9,9.3,9.6,9.5,9.2,8.9,9.2,9.6,10.1,10.3,null,null,8.9,9.3,9.2,8.9,9.7,10.4,10.2,10.3,10,9.7,null,null,8.8,8.7,8.8,9.2,9,6.9,8,7.7,7.2,7.9,7.4477,6.06,5.6,5.9,6.1,6.8,6,6.1,5.7,5.6],thirdData=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1.5,1.8,1.9,1.8,1.8,1.7,1.6,1.6,1.7,1.8,1.8,1.8,2,1.7,1.7,1.6,1.7,1.7,1.7,1.6,1.5,1.4,1.3,1.3,1.2,1.574,1.4596,1.4699,1.5758,1.6943,1.6845,1.703,1.6362,1.4731],fourthData=[6.52,5,2.72,1.69,.73,.03,-.32,-.7,-1.4,-2.08,-2.87,-3.48,-3.55,-2.76,-2.2,-1.94,-1.64,-1.63,-1.92,-2.62,-2.87,-2.7,-2.27,-1.62,-1.34,-1.51,-1.42,-1.36,-1.64,-2,-2.3019,-2.0042,-1.4464,-1.1092,-.8688,-1.2038,-1.7996,-2.2428,-2.6928,-3.3152,-4.3202,-4.7976,-4.5603,-4.5725,-4.607,-4.8135,-5.3692,-5.9227,-5.945,-5.9],fifthData=[51.2,50.4,49,50.3,50.5,51,53.1,53.3,50.4,50.2,50.1,49.1705,49.8,50.2,50.6,50.6,50.4,50.1,50.9,50.6,50.8,50.1,50.3,51,51.1,51.4,51.4,51,50.5,50.2,50.3,50.4,50.8,51,51.7,51.1,51.1,50.8,50.3,50.1,49.8,49.9,50.1,50.1,50.2,50.2,50,49.7,49.8,49.8],sixthData=[17.1,15.9,13.8,13.4,-.5,18.4,8.9,4.9,15.3,11.3,1,2.7,9.9,11.6,2.9,14.1,25,21.8,10,14.7,1,-3.1,5.1,7.2,-.3,5.6,12.7,4.3,10.5,-18.1,-6.6,.8,7.1,7.2,14.4,9.4,15.3,11.6,4.7,9.7,-3.5,48.2,-15.1,-6.6,-3.4,1.5,-9.2,-5.8,-3.9,-7],getValueExtend=(s,e)=>{let o=Math.min(...s),n=Math.max(...s);return o>0&&e&&(o=0),n<0&&e&&(n=0),[o,n]},roundNumber=echarts.number.round,getPrecision=echarts.number.getPrecision,niceValueExtend=(s,e=5)=>{const[o,n]=s,r=(n-o)/e,l=echarts.number.nice(r,!0),i=getPrecision(l),c=roundNumber(Math.floor(o/l)*l,i),a=roundNumber(Math.ceil(n/l)*l,i);return{min:c,max:a,interval:l}},subNice=s=>{const e=[1,1.2,1.5,2,2.5,3,4,5,6,8,10],o=echarts.number.quantityExponent(s),n=Math.pow(10,o),t=s/n;let r;for(let i=0;i<e.length;i++){const c=e[i];if(t<=c){r=c;break}}let l=r*n;return o>=-20&&(o<0?l=l.toFixed(-o):l=l.toFixed(0)),Number(l)},subNiceValueExtend=(s,e)=>{const[o,n]=s,r=(n-o)/(e-1),l=subNice(r),i=getPrecision(l),c=roundNumber(Math.floor(o/l)*l,i),a=roundNumber(c+e*l,i);return{min:c,max:a,interval:l}},nice=niceValueExtend(getValueExtend(srcData,!0)),count=(nice.max-nice.min)/nice.interval,sub=subNiceValueExtend(getValueExtend([...subData,...thirdData,...fifthData,...sixthData],!0),count),GAP=2,renderCircleSymbolItem=(s,e)=>{var o=e.size([0,0])[0],n=8,t=e.coord([e.value(0),e.value(1)]);return{type:"circle",transition:["shape"],shape:{cx:t[0],cy:t[1],r:n/2},invisible:n>o/GAP,style:e.style({fill:e.visual("color"),stroke:"none",lineWidth:0})}},renderDiamondSymbolItem=(s,e)=>{var o=e.size([0,0])[0],n=8,t=e.coord([e.value(0),e.value(1)]);return{type:"rect",transition:["shape"],originX:t[0],originY:t[1],rotation:Math.PI/4,shape:{x:t[0]-n/2,y:t[1]-n/2,width:n,height:n},invisible:n>o/GAP,style:e.style({fill:e.visual("color"),stroke:"none",lineWidth:0})}},renderRectSymbolItem=(s,e)=>{var o=e.size([0,0])[0],n=8,t=e.coord([e.value(0),e.value(1)]);return{type:"rect",transition:["shape"],originX:t[0],originY:t[1],rotation:0,shape:{x:t[0]-n/2,y:t[1]-n/2,width:n,height:n},invisible:n>o/GAP,style:e.style({fill:e.visual("color"),stroke:"none",lineWidth:0})}},renderTriangleSymbolItem=(s,e)=>{var o=e.size([0,0])[0],n=8,t=e.coord([e.value(0),e.value(1)]);const r=t[0],l=t[1],i=Math.cos(Math.PI/6),c=Math.sin(Math.PI/6),a=n*.7;return{type:"polygon",transition:["style"],originX:t[0],originY:t[1],rotation:Math.PI,shape:{points:[[r,l-a],[r+a*i,l+a*c],[r-a*i,l+a*c]]},invisible:n>o/GAP,style:e.style({fill:e.visual("color"),stroke:"none",lineWidth:0})}},renderInvTriangleSymbolItem=(s,e)=>{var o=e.size([0,0])[0],n=8,t=e.coord([e.value(0),e.value(1)]);const r=t[0],l=t[1],i=Math.cos(Math.PI/6),c=Math.sin(Math.PI/6),a=n*.7;return{type:"polygon",transition:["style"],originX:t[0],originY:t[1],shape:{points:[[r,l-a],[r+a*i,l+a*c],[r-a*i,l+a*c]]},invisible:n>o/GAP,style:e.style({fill:e.visual("color"),stroke:"none",lineWidth:0})}};option={color:["#7cb5ec","#434348","#f7a35c","#8085e9","#f15c80","#c4ccd3","#e4d354","#2b908f","#f45b5b","#91e8e1"],animation:!0,legend:{type:"scroll",bottom:18},grid:{top:64,bottom:64,left:32,right:32,containLabel:!0},xAxis:{type:"category",data:headers,axisLine:{lineStyle:{color:"#CCD6EB"}},axisLabel:{color:"#787B8A"}},yAxis:[{type:"value",min:nice.min,max:nice.max,interval:nice.interval,axisLine:{show:!0,lineStyle:{color:"#CCD6EB"}},axisTick:{show:!0},splitLine:{show:!0,lineStyle:{color:"#E6E6E6"}},axisLabel:{color:"#787B8A"}},{type:"value",min:sub.min,max:sub.max,interval:sub.interval,axisLine:{show:!0,lineStyle:{color:"#CCD6EB"}},axisTick:{show:!0},splitLine:{show:!1},axisLabel:{color:"#787B8A"}}],tooltip:{trigger:"axis"},series:[{type:"bar",name:"xxx",data:srcData,symbol:"circle",showSymbol:!1,symbolSize:10,connectNulls:!0,z:0},{type:"line",name:"yyy",data:subData,symbol:"diamond",showSymbol:!1,symbolSize:12,connectNulls:!0,yAxisIndex:1,z:2},{type:"custom",name:"yyy",data:subData,renderItem:renderDiamondSymbolItem,tooltip:{show:!1},yAxisIndex:1,z:3},{type:"line",name:"zzz",data:thirdData,symbol:"triangle",showSymbol:!1,symbolSize:10,symbolRotate:180,connectNulls:!0,yAxisIndex:1,z:4},{type:"custom",name:"zzz",data:thirdData,renderItem:renderTriangleSymbolItem,tooltip:{show:!1},yAxisIndex:1,z:5},{type:"line",name:"aaa",data:fifthData,symbol:"triangle",showSymbol:!1,symbolSize:10,symbolRotate:0,connectNulls:!0,yAxisIndex:1,z:6},{type:"custom",name:"aaa",data:fifthData,renderItem:renderInvTriangleSymbolItem,tooltip:{show:!1},yAxisIndex:1,z:7},{type:"line",name:"bbb",data:sixthData,symbol:"rect",showSymbol:!1,symbolSize:10,connectNulls:!0,yAxisIndex:1,z:8},{type:"custom",name:"bbb",data:sixthData,renderItem:renderRectSymbolItem,tooltip:{show:!1},yAxisIndex:1,z:9}]},console.log("...ggg...",myChart),myChart.on("legendselectchanged",s=>{console.log(s),option.legend={...option.legend,selected:{...s.selected}};const e=subNiceValueExtend(getValueExtend([...s.selected.yyy?subData:[],...s.selected.zzz?thirdData:[],...s.selected.aaa?fifthData:[],...s.selected.bbb?sixthData:[]],!0),count);option.yAxis[1]={...option.yAxis[1],min:e.min,max:e.max,interval:e.interval},myChart.setOption(option,{lazyUpdate:!0}),myChart.resize()});
