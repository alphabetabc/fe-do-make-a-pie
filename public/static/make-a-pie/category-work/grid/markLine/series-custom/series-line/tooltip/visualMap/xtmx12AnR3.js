var xAxisData=["09-01","09-02","09-03","09-04","09-05","09-06","09-07","09-08","09-09","09-10"],seriesData=[.5,.2,.1,.4,.5,1,.5,.2,.1,.4,.5,1],arrowArr=["W","WSW","SW","SSW","S","SSE","SE","ESE","E","E"],preditDate="09-05",beforeEnsure="09-04",afterEnsure="09-07",num=xAxisData.length-1,index=0,actualPercent="",preditPercent="",firstNum=0,firstIndex=0,secondNum=0,arrowDataArr=[];xAxisData.forEach(function(a,e){var t=[];t.push(xAxisData[e]),t.push(seriesData[e]),t.push(arrowArr[e]),arrowDataArr.push(t),a==preditDate&&(index=e,actualPercent=e/num*90,preditPercent=(num-e)/num*90),a==beforeEnsure&&(firstIndex=e,firstNum=e/num*90),a==afterEnsure&&(secondNum=(e-firstIndex)/num*90)});var directionMap={};echarts.util.each(["W","WSW","SW","SSW","S","SSE","SE","ESE","E","ENE","NE","NNE","N","NNW","NW","WNW"],function(a,e){directionMap[a]=Math.PI/8*e});var dims={time:0,windSpeed:1,R:2,waveHeight:3,weatherIcon:2,minTemp:3,maxTemp:4},arrowSize=18,weatherIconSize=45;function renderArrow(a,e){var t=e.coord([e.value(dims.time),e.value(dims.windSpeed)]);return{type:"path",shape:{pathData:"M31 16l-15-15v9h-26v12h26v9z",x:-arrowSize/2,y:-arrowSize/2,width:arrowSize,height:arrowSize},rotation:directionMap[e.value(dims.R)],position:t,style:e.style({stroke:"#555",lineWidth:1})}}option={color:["#259e72","#178fcd"],tooltip:{trigger:"axis",formatter:function(a){return[a[1].value[dims.time]+"<br/>风速："+a[1].value[dims.windSpeed],"风向："+a[1].value[dims.R]].join("<br>")}},xAxis:[{axisLabel:{show:!0,textStyle:{color:"#fff"}},axisTick:{show:!1},splitLine:{show:!1},axisLine:{show:!0,lineStyle:{color:"rgba(200,200,200,0.3)"}},boundaryGap:!1,data:xAxisData},{gridIndex:1,type:"category",position:"bottom",name:"保障前",nameLocation:"center",nameTextStyle:{color:"white"},nameGap:-5,offset:40,data:[""],axisTick:{length:40,inside:!0,lineStyle:{color:"rgba(200,200,200,0.9)"},show:!0},axisLabel:{inside:!1,show:!0},axisLine:{show:!1,onZero:!1}},{gridIndex:2,type:"category",position:"bottom",name:"保障中",nameLocation:"center",nameTextStyle:{color:"white"},nameGap:-5,offset:40,data:[""],axisTick:{length:40,inside:!0,lineStyle:{color:"rgba(200,200,200,0.9)"},show:!0},axisLabel:{inside:!1,show:!0},axisLine:{show:!1,onZero:!1}},{gridIndex:3,type:"category",position:"bottom",name:"保障后",nameLocation:"center",nameTextStyle:{color:"white"},nameGap:-5,offset:40,data:[""],axisTick:{length:40,lineStyle:{color:"rgba(200,200,200,0.9)"},inside:!0,show:!0},axisLabel:{inside:!1,show:!0},axisLine:{show:!1,onZero:!1}},{gridIndex:4,type:"category",position:"top",name:"实测",nameLocation:"center",nameTextStyle:{color:"white"},nameGap:-5,offset:10,data:[""],axisTick:{lineStyle:{color:"rgba(200,200,200,0.9)"},length:10,inside:!0,show:!0},axisLabel:{inside:!1,show:!0},axisLine:{show:!1,onZero:!1}},{gridIndex:5,type:"category",position:"top",name:"预测",nameLocation:"center",nameTextStyle:{color:"white"},nameGap:-5,offset:10,data:[""],axisTick:{length:10,inside:!0,show:!0,lineStyle:{color:"rgba(200,200,200,0.9)"}},axisLabel:{inside:!1,show:!0},axisLine:{show:!1,onZero:!1}}],grid:[{left:"5%",right:"5%",show:!1},{show:!0,tooltip:{trigger:"item",axisPointer:{type:"none"}},borderWidth:0,shadowColor:"rgba(0, 0, 0, 0.3)",shadowBlur:1,axisLabel:{padding:[10,0]},width:firstNum+"%",left:"5%"},{show:!0,borderWidth:0,shadowColor:"rgba(0, 0, 0, 0.3)",shadowBlur:1,tooltip:{trigger:"item",axisPointer:{type:"none"}},axisLabel:{padding:[10,0]},width:secondNum+"%",left:firstNum+5+"%"},{show:!0,borderWidth:0,shadowColor:"rgba(0, 0, 0, 0.3)",shadowBlur:1,tooltip:{trigger:"item",axisPointer:{type:"none"}},axisLabel:{padding:[10,0]},width:90-(secondNum+firstNum+5)+"%",left:secondNum+firstNum+5+"%"},{show:!0,borderWidth:0,shadowColor:"rgba(0, 0, 0, 0.3)",shadowBlur:1,tooltip:{trigger:"item",axisPointer:{type:"none"}},axisLabel:{padding:[10,0]},width:actualPercent+"%",left:"5%"},{show:!0,borderWidth:0,tooltip:{trigger:"item",axisPointer:{type:"none"}},shadowColor:"rgba(0, 0, 0, 0.3)",shadowBlur:1,axisLabel:{padding:[10,0]},width:preditPercent+"%",left:actualPercent+5+"%"}],yAxis:[{name:"",axisLabel:{color:"#ccc"},axisTick:{show:!1},splitLine:{show:!1},axisLine:{show:!0,lineStyle:{color:"rgba(200,200,200,0.3)"}}},{gridIndex:1,type:"value",interval:20,max:100,min:0,axisTick:{show:!1},splitLine:{show:!1},axisLine:{show:!1,onZero:!0},axisLabel:{show:!1}},{gridIndex:2,type:"value",interval:20,max:100,min:0,axisTick:{show:!1},splitLine:{show:!1},axisLine:{show:!1,onZero:!0},axisLabel:{show:!1}},{gridIndex:3,type:"value",interval:20,max:100,min:0,splitLine:{show:!1},axisTick:{show:!1},axisLine:{show:!1,onZero:!0},axisLabel:{show:!1}},{gridIndex:4,type:"value",interval:20,max:100,min:0,splitLine:{show:!1},axisTick:{show:!1},axisLine:{show:!1,onZero:!0},axisLabel:{show:!1}},{gridIndex:5,type:"value",interval:20,max:100,min:0,axisTick:{show:!1},splitLine:{show:!1},axisLine:{show:!1,onZero:!0},axisLabel:{show:!1}}],visualMap:[{show:!1,dimension:0,seriesIndex:0,pieces:[{lte:index,color:"#259e72"},{gt:index,lte:seriesData.length+1,color:"#51d9a7"}]}],visualMap:[{show:!1,dimension:0,seriesIndex:0,pieces:[{lte:index,color:"#259e72"},{gt:index,lte:seriesData.length+1,color:"#51d9a7"}]}],series:[{name:"风速",type:"line",smooth:!0,xAxisIndex:"0",data:seriesData,markLine:{label:{color:"#666",position:"middle",textStyle:{padding:-50}},lineStyle:{color:"#666"}}},{name:"风向",type:"custom",renderItem:renderArrow,encode:{x:0,y:1},data:arrowDataArr,z:10},{name:"平行于y轴的趋势线",type:"line",color:["black"],markLine:{data:[[{symbol:"line",coord:[preditDate,0]},{symbol:"line",coord:[preditDate,1]}]]}}]},setTimeout(function(){var a=document.getElementById("chart-panel"),e=echarts.init(a);e.dispatchAction({type:"showTip",seriesIndex:1,dataIndex:3})},10);
