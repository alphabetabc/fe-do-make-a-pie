var uploadedDataURL="/asset/get/s/data-1498994055008-rJJ5SUU4W.csv",stratify=d3.stratify().parentId(function(i){return i.id.substring(0,i.id.lastIndexOf("."))});d3.csv(uploadedDataURL,function(i,x){if(i)throw i;for(var o=stratify(x).sum(function(t){return t.value}).sort(function(t,e){return e.value-t.value}),f=0,d=o.descendants().map(function(t){return f=Math.max(f,t.depth),[t.value,t.depth,t.id]}),h=[],r=0;r<=f;r++)h.push({value:r,label:"Level "+r});function v(t,e){var l=t.context;l.layout||(d3.pack().size([e.getWidth()-2,e.getHeight()-2]).padding(3)(o),l.layout={},o.descendants().forEach(function(s){l.layout[s.id]={x:s.x,y:s.y,r:s.r,isLeaf:!s.children||!s.children.length}}));var c=e.value(2),a=l.layout[c],n="",u=e.font({fontSize:10,fontFamily:"Arial"});return a.isLeaf&&a.r>10&&(n=c.slice(c.lastIndexOf(".")+1).split(/(?=[A-Z][^A-Z])/g).join(`
`),n=echarts.format.truncateText(n,a.r,u,".")),{type:"circle",shape:{cx:a.x,cy:a.y,r:a.r},z2:e.value(1)*2,style:e.style({text:n,textFont:u,textPosition:"inside",fill:"transparent",stroke:"#fff",lineDash:[1,3]}),styleEmphasis:e.style({text:n,textPosition:"inside",textFont:u,fill:"rgba(255,255,255,0.65)",lineWidth:0})}}var y={backgroundColor:"#000000",xAxis:{axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1},splitLine:{show:!1}},yAxis:{axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1},splitLine:{show:!1}},tooltip:{},visualMap:{show:!1,type:"piecewise",bottom:40,pieces:h,dimension:1,inRange:{color:["#000000","#ffffff"]}},series:{type:"custom",renderItem:v,encode:{tooltip:0,itemName:2},data:d}};myChart.setOption(y)});
