const data=[50,10,15,15,10],data2=[10,20,15,15,40];function getZuobiao(r,t=100,a=100,p=10,u=10){let s=[],o=0;r.forEach((n,h)=>{let e=[];o+=n;let c={x:p+(1-o)/2*a,y:u+(1-o)*t},i={x:p+(1+o)/2*a,y:u+(1-o)*t};if(h===0)e.push({x:p+1/2*a,y:u+t}),e.push(i),e.push(c);else{let l=s[h-1],f=l[h==1?l.length-1:l.length-2],g=l[1];e.push(g),e.push(i),e.push(c),e.push(f)}s.push(e)});let y={};return y.arr=s,y.center=s.map((n,h)=>({x:(n[0].x+n[1].x)/2,y:(n[0].y+n[1].y)/2})),y}function getDaoZuobiao(r,t=100,a=100,p=10,u=10){let s=[],o=0;r.forEach((n,h)=>{let e=[];o+=n;let c={x:p+(2+o)/2*a,y:u+(1-o)*t},i={x:p+(4-o)/2*a,y:u+(1-o)*t};if(h===0)e.push({x:p+a,y:u+t}),e.push({x:p+2*a,y:u+t}),e.push(i),e.push(c);else if(h!=r.length-1){let l=s[h-1],f=l[l.length-1],g=l[l.length-2];e.push(f),e.push(g),e.push(i),e.push(c)}else{let l=s[h-1],f=l[l.length-1],g=l[l.length-2];e.push(f),e.push(g),e.push({x:p+3/2*a,y:u+0})}s.push(e)});let y={};return y.arr=s,y.center=s.map((n,h)=>({x:(n[0].x+n[n.length-1].x)/2,y:(n[0].y+n[n.length-1].y)/2})),y}const COLORS=["blue","#ddd","red","#333","yellow","grey"],left=getZuobiao(data.map(r=>r/100)),right=getDaoZuobiao(data2.map(r=>r/100)),Leftpoints=[...left.arr,...right.arr];function createRenderItem(r){return function(t,a){let p=[...COLORS].splice(0,data.length);console.info(t.dataIndex);var u=r[t.dataIndex].map(o=>[o.x,o.y]),s=u.map(o=>a.coord(o));return console.info(s),{type:"polygon",shape:{points:s},style:a.style({fill:p[t.dataIndex%p.length],stroke:"#fff"})}}}var series=[{type:"custom",renderItem:createRenderItem(left.arr),data,tooltip:{formatter:function(r,t){return console.info(r,t),`${r.data}%`}}},{type:"custom",renderItem:createRenderItem(right.arr),data:data2,tooltip:{formatter:function(r,t){return console.info(r,t),`${r.data}%`}}}];left.center.forEach((r,t)=>{series.push({type:"line",lineStyle:{color:COLORS[t],type:"dashed"},itemStyle:{borderStyle:"dashed"},showSymbol:!1,data:[[r.x,r.y],[right.center[t].x,right.center[t].y]]})}),option={tooltip:{trigger:"item"},xAxis:{min:0,max:220},yAxis:{min:0,max:120},series};
