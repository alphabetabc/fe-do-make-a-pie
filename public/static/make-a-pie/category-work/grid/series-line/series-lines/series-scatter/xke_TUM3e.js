var plantCap=[{name:"过渡仓温度",value:"800"},{name:"排料温度",value:"150"},{name:"每小时投料量",value:"10"},{name:"窑尾负压",value:"-55"},{name:"电机转速",value:"760"},{name:"煅烧带温度",value:"500"},{name:"窑头温度",value:"666"},{name:"二次风转速",value:"1100"}],dataRangeList=[{name:"过渡仓温度",range:[110,1350],unit:"℃",offset:[5,70]},{name:"排料温度",range:[30,120],unit:"℃",offset:[38,15]},{name:"每小时投料量",range:[0,25],unit:"t/h",offset:[13,30]},{name:"窑尾负压",range:[-45,-5],unit:"Pa",offset:[20,100]},{name:"电机转速",range:[650,1200],unit:"r/min",offset:[70,17]},{name:"煅烧带温度",range:[110,1350],unit:"℃",offset:[45,105]},{name:"窑头温度",range:[500,1e3],unit:"℃",offset:[90,50]},{name:"二次风转速",range:[400,1200],unit:"r/min",offset:[75,95]}],datas=[],scatterChangeData=[{煅烧带温度:"1629.332435",窑头温度:"8008.5791066",窑尾温度:"889.2533913",窑头负压:"-13.05208958",窑尾负压:"-27.49793445",过渡仓温度:"794.4836498",排料温度:"104.8058228",二次风转速:"462.6774131",电机转速:"860.1908243",每小时投料量:"13.20013379"},{煅烧带温度:"1148.966078",窑头温度:"914.3966791",窑尾温度:"1060.840939",窑头负压:"-0.370034962",窑尾负压:"-44.89323923",过渡仓温度:"1141.681524",排料温度:"75.78547461",二次风转速:"975.280138",电机转速:"1165.840343",每小时投料量:"8.129950129"},{煅烧带温度:"1589.411183",窑头温度:"884.2022576",窑尾温度:"1182.008457",窑头负压:"-4.605446111",窑尾负压:"-34.25039165",过渡仓温度:"711.5585378",排料温度:"63.66215703",二次风转速:"967.0480237",电机转速:"788.5137323",每小时投料量:"6.432888199"},{煅烧带温度:"1103.540863",窑头温度:"879.7202962",窑尾温度:"1134.026109",窑头负压:"-2.385525634",窑尾负压:"-27.83503472",过渡仓温度:"943.1293979",排料温度:"34.28524456",二次风转速:"896.6131519",电机转速:"1039.517157",每小时投料量:"15.84427779"}],outrangeData=[];function getTime(){var n=new Date,f=n.getFullYear(),l=n.getMonth()+1,o=n.getDate(),e=n.getHours(),r=n.getMinutes(),i=n.getSeconds();e<10&&(e="0"+e),r<10&&(r="0"+r),i<10&&(i="0"+i);var a=f+"/"+l+"/"+o+"/"+e+":"+r+":"+i;return a}function getScatterData(n){for(var f=[],l=0;l<dataRangeList.length;l++){var o=dataRangeList[l],e=o.range,r,i,a;for(var u in n)if(u==o.name){if(a=Number(n[u]).toFixed(2),a>e[1]||o.value<e[0]){r="rgba(0,0,0,0.5)",i=.8;var v={time:getTime(),name:o.name,data:a,range:e};outrangeData.push(v)}else{var s=(e[1]-e[0])/5;o.unit=="℃"?e[0]<a&&a<=e[0]+s*1?r="#fb6969":e[0]+s*1<a&&a<=e[0]+s*2?r="#f54646":e[0]+s*2<a&&a<=e[0]+s*3?r="#ef4747":e[0]+s*3<a&&a<=e[0]+s*4?r="#e41818":e[0]+s*4<a&&a<=e[1]&&(r="#a90909"):(r="rgba(104,184,55, 1)",i=.8)}f.push({name:a+o.unit+`
`+o.name,value:o.offset,symbolSize:62,label:{normal:{textStyle:{fontSize:11}}},itemStyle:{normal:{color:r,opacity:.8,shadowColor:r,shadowBlur:15}}})}}return f}var timeName=["正常运行时间：10h","停窑时间：0.5h","停料保温时间：1h","故障时间：0.2h"];option={backgroundColor:"#fff",grid:{top:0,bottom:60,left:50,right:50},xAxis:[{type:"category",show:!1,data:[10,20,30,40,50,60,70,80,90]},{show:!1,type:"value",max:100},{inverse:!0,show:!1}],yAxis:[{type:"value",show:!1,position:"left",max:150},{type:"category",position:"right",inverse:!0,show:!1}],series:[{name:"窑",type:"line",xAxisIndex:0,data:[null,80,{name:"窑尾",value:80,label:{show:!0,color:"#fff",formatter:"{b}",offset:[20,14],fontSize:18}},79,78,77,{name:"窑头",value:76,label:{show:!0,color:"#fff",formatter:"{b}",offset:[-20,14],fontSize:18}}],symbolSize:.01,lineStyle:{width:40,color:"#e4a618"}},{name:"过渡仓",type:"line",data:[null,80,{name:"过渡仓",value:80,label:{show:!0,color:"#fff",formatter:"{b}",offset:[-30,14],fontSize:12}}],symbolSize:.01,lineStyle:{color:"#4c60ff",width:40}},{name:"冷却机",type:"line",data:[null,null,40,41,42,{value:43,name:"冷却机",label:{show:!0,color:"#fff",formatter:"{b}",offset:[-40,14],fontSize:18}},44],symbolSize:.01,lineStyle:{color:"#e4a618",width:40}},{type:"scatter",symbol:"circle",coordinateSystem:"cartesian2d",xAxisIndex:1,symbolSize:120,label:{normal:{show:!0,formatter:"{b}",color:"#fff",textStyle:{fontSize:"20"}}},itemStyle:{normal:{color:"#00acea"}},animation:!1,data:getScatterData(scatterChangeData[0])},{name:"连接线",type:"lines",coordinateSystem:"cartesian2d",xAxisIndex:1,lineStyle:{curveness:-.4,color:"#999",opacity:1,width:30},data:[{coords:[[69,42],[69,78]]}]}]};var count=0,t=null;t=setTimeout(time,1e3);function time(){clearTimeout(t),count++,count>=scatterChangeData.length&&(count=0);var n=scatterChangeData[count];if(option.series[3].data=getScatterData(n),myChart.setOption(option),outrangeData.length>0)for(var f=0;f<outrangeData.length;f++){var l=outrangeData[f],o='<tr><td width="35%">'+l.time+'</td><td width="30%">'+l.name+"</td><td>"+l.data+"</td><td>"+l.range+"</td></tr>";$(".broadcast tbody").append(o)}t=setTimeout(time,1e3)}
