function getBaseLog(e,a=10){const t=e<0?-1:1;return e=e*t,Math.log(e)/Math.log(a)*t}function getBaseData(e,a=10){const t=e<0?-1:1;return e=e*t,parseFloat(Math.pow(a,e).toFixed(5))*t}function randomData(e,a=new Date){const t=Math.random()*1e3*(Math.random()*10>5?1:-1);let s=e*20+10+getBaseLog(t);return Math.random()*10<2&&(s=null),{name:a.toString(),value:[+a,s]}}var seriesData=[];const seriesNameList=["轧制力(N)","轧制速度(m/s)","后张力(N)","前张力(N)","钢带出口厚度(mm)","钢带入口厚度(mm)","钢带2出口厚度(mm)","钢带2入口厚度(mm)"];let productionLen=0;for(var i=1;i<9;i++)seriesData.push({name:seriesNameList[i-1],type:"line",showSymbol:!1,hoverAnimation:!1,data:[]});seriesData.push({name:"",type:"line",yAxisIndex:1,tooltip:{show:!1},data:[]}),seriesData.push({name:"",type:"line",xAxisIndex:1,zlevel:-1,show:!1,data:[]}),option={title:{text:"实时参数录制"},legend:{show:!0},tooltip:{trigger:"axis",formatter:function(e){const a=e.map(n=>{const{marker:o,seriesName:r,value:h,seriesIndex:u}=n,l=h[1];return`${o} ${r}: ${l===null?null:getBaseData(l-10-20*u)}`});a.reverse(),e=e[0];var t=new Date(e.name);const s=`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()} 
            ${t.getHours()}:${t.getMinutes()}:${t.getSeconds()}`;return a.unshift(s),a.join("<br />")},axisPointer:{animation:!1,snap:!0}},xAxis:[{type:"time",splitLine:{show:!1},axisLine:{show:!1},axisTick:{show:!1}},{type:"category",name:"长度",axisTick:{show:!1},minorSplitLine:{show:!1},axisPointer:{show:!1},data:[]}],yAxis:[{type:"value",splitLine:{show:!1},show:!1,scale:!0,interval:20,min:0,max:160,axisLabel:{show:!1}},{type:"category",splitLine:{show:!0},scale:!0,interval:20,position:"left",axisTick:{show:!1},axisPointer:{show:!1},data:seriesNameList}],series:seriesData};const interval=setInterval(function(){const e=myChart.getOption(),{xAxis:a}=e,t=a[1].data,s=new Date;for(var n=0;n<8;n++){const o=seriesData[n].data;o.length>20&&o.shift();const r=randomData(n,s);r&&o.push(r)}t.length>20&&t.shift(),productionLen++,t.push(productionLen),myChart.setOption({xAxis:a,series:seriesData})},1e3);
