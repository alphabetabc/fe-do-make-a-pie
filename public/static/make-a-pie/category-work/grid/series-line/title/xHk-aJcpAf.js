var cellSize=[80,80],pieRadius=30;function getVirtulData(){for(var e=+echarts.number.parseDate("2017-02-01"),r=+echarts.number.parseDate("2017-03-01"),n=3600*24*1e3,t=[],a=e;a<r;a+=n)t.push([echarts.format.formatTime("yyyy-MM-dd",a),Math.floor(Math.random()*1e4)]);return t}function getPieSeries(e,r){return echarts.util.map(e,function(n,t){var a=r.convertToPixel("calendar",n);return{id:t+"pie",type:"pie",center:a,label:{normal:{formatter:"{c}",position:"inside"}},radius:pieRadius,data:[{name:"工作",value:Math.round(Math.random()*24)},{name:"娱乐",value:Math.round(Math.random()*24)},{name:"睡觉",value:Math.round(Math.random()*24)}]}})}function getPieSeriesUpdate(e,r){return echarts.util.map(e,function(n,t){var a=r.convertToPixel("calendar",n);return{id:t+"pie",center:a}})}var scatterData=getVirtulData();if(option={tooltip:{},legend:{data:["工作","娱乐","睡觉"],bottom:20},calendar:{top:"middle",left:"center",orient:"vertical",cellSize,yearLabel:{show:!1,textStyle:{fontSize:30}},dayLabel:{margin:20,firstDay:1,nameMap:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},monthLabel:{show:!1},range:["2017-02"]},series:[{id:"label",type:"scatter",coordinateSystem:"calendar",symbolSize:1,label:{normal:{show:!0,formatter:function(e){return echarts.format.formatTime("dd",e.value[0])},offset:[-cellSize[0]/2+10,-cellSize[1]/2+10],textStyle:{color:"#000",fontSize:14}}},data:scatterData}]},!app.inNode){var pieInitialized;setTimeout(function(){pieInitialized=!0,myChart.setOption({series:getPieSeries(scatterData,myChart)})},10),app.onresize=function(){pieInitialized&&myChart.setOption({series:getPieSeriesUpdate(scatterData,myChart)})}}
