const times=["2016","2017","2018"],colors=["#80CA35","#518CD2","#E05D7C","#DB9154","#808080"],levels=[10,20,30,40,50],pollutions=[[19,24,8,41,35,25,18],[41,35,25,19,24,8,18],[24,8,19,41,35,25,18]],getColorStops=e=>{let t=1/(e.length-1),o=[];return Array(e.length).fill().reduce((r,s,l)=>(o.push({offset:r,color:colors[getIndex(e[l])]}),t+r),0),o},getIndex=e=>{let t=0;return levels.some((o,r)=>{if(e<=o)return t=r,!0}),t};option={baseOption:{containLabel:!0,visualMap:{type:"continuous",calculable:!1,text:["严重","轻微"],orient:"horizontal",min:0,max:50,splitNumber:5,color:[...colors].reverse(),textStyle:{color:"dodgerblue"},top:5,right:20},dataZoom:[{type:"inside",show:!0,height:15,start:0,end:100},{type:"slider",xAxisIndex:[0],start:0,end:100,bottom:"5%"}],grid:{bottom:"11%"},timeline:{data:times,axisType:"category",autoPlay:!1,playInterval:1500,left:"5%",right:"5%",bottom:"0%",width:"90%",label:{normal:{textStyle:{color:"red"}},emphasis:{textStyle:{color:"red"}}},symbolSize:10,lineStyle:{color:"#red"},checkpointStyle:{borderColor:"#red",borderWidth:2},controlStyle:{showNextBtn:!0,showPrevBtn:!0,normal:{color:"#ff8800",borderColor:"#ff8800"},emphasis:{color:"red",borderColor:"red"}}},title:{text:"河道水质结果过程线分析"},tooltip:{trigger:"axis"},xAxis:{data:["20","30","40","50","60","70","80"],name:"里程"},yAxis:[{type:"value",position:"left",name:"水位"},{type:"value",position:"left",offset:65,name:"高程"},{type:"value",position:"right",name:"浓度"}],series:[{type:"line",yAxisIndex:0,areaStyle:{normal:{opacity:0}},stack:"总量",symbol:"none",smooth:!0,data:[220,218,209,199,195,189,180]},{type:"line",yAxisIndex:0,stack:"总量",symbol:"none",smooth:!0,data:[30,40,30,50,40,60,80]},{type:"line",yAxisIndex:2}]},options:[]},option.options=pollutions.map((e,t)=>({series:[{},{areaStyle:{normal:{color:{type:"linear",x:0,y:0,x2:1,y2:0,colorStops:getColorStops(e),globalCoord:!1}}}},{data:e}]})),console.log(option.options);
