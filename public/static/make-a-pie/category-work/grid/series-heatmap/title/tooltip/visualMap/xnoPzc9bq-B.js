var fee_rule_color=1,mouseDown=0,startIndex={},currentIndex={},dataIndexArray=[],minutes=["00","15","30","45"],data=[[[0,0,6],[0,1,1],[0,2,0],[0,3,4],[0,4,3],[0,5,7],[0,6,6],[0,7,4],[0,8,4],[0,9,0],[0,10,7],[0,11,0],[0,12,2],[0,13,2],[0,14,5],[0,15,3],[0,16,6],[0,17,8],[0,18,6],[0,19,6],[0,20,7],[0,21,2],[0,22,8],[0,23,6],[1,0,5],[1,1,7],[1,2,7],[1,3,8],[1,4,7],[1,5,8],[1,6,2],[1,7,0],[1,8,4],[1,9,6],[1,10,6],[1,11,6],[1,12,7],[1,13,1],[1,14,4],[1,15,2],[1,16,5],[1,17,7],[1,18,3],[1,19,3],[1,20,5],[1,21,5],[1,22,6],[1,23,8],[2,0,1],[2,1,6],[2,2,4],[2,3,4],[2,4,4],[2,5,6],[2,6,2],[2,7,1],[2,8,4],[2,9,0],[2,10,4],[2,11,2],[2,12,4],[2,13,2],[2,14,3],[2,15,6],[2,16,1],[2,17,3],[2,18,7],[2,19,6],[2,20,0],[2,21,6],[2,22,3],[2,23,1],[3,0,1],[3,1,1],[3,2,6],[3,3,6],[3,4,2],[3,5,8],[3,6,3],[3,7,2],[3,8,2],[3,9,6],[3,10,0],[3,11,5],[3,12,1],[3,13,6],[3,14,2],[3,15,4],[3,16,1],[3,17,2],[3,18,5],[3,19,3],[3,20,0],[3,21,4],[3,22,6],[3,23,7]],[[0,0,6],[0,1,1],[0,2,0],[0,3,4],[0,4,3],[0,5,7],[0,6,6],[0,7,4],[0,8,4],[0,9,0],[0,10,7],[0,11,0],[0,12,2],[0,13,2],[0,14,5],[0,15,3],[0,16,6],[0,17,8],[0,18,6],[0,19,6],[0,20,7],[0,21,2],[0,22,8],[0,23,6],[1,0,5],[1,1,7],[1,2,7],[1,3,8],[1,4,7],[1,5,8],[1,6,2],[1,7,0],[1,8,4],[1,9,6],[1,10,6],[1,11,6],[1,12,7],[1,13,1],[1,14,4],[1,15,2],[1,16,5],[1,17,7],[1,18,3],[1,19,3],[1,20,5],[1,21,5],[1,22,6],[1,23,8],[2,0,1],[2,1,6],[2,2,4],[2,3,4],[2,4,4],[2,5,6],[2,6,2],[2,7,1],[2,8,4],[2,9,0],[2,10,4],[2,11,2],[2,12,4],[2,13,2],[2,14,3],[2,15,6],[2,16,1],[2,17,3],[2,18,7],[2,19,6],[2,20,0],[2,21,6],[2,22,3],[2,23,1],[3,0,1],[3,1,1],[3,2,6],[3,3,6],[3,4,2],[3,5,8],[3,6,3],[3,7,2],[3,8,2],[3,9,6],[3,10,0],[3,11,5],[3,12,1],[3,13,6],[3,14,2],[3,15,4],[3,16,1],[3,17,2],[3,18,5],[3,19,3],[3,20,0],[3,21,4],[3,22,6],[3,23,7]],[[0,0,6],[0,1,1],[0,2,0],[0,3,4],[0,4,3],[0,5,7],[0,6,6],[0,7,4],[0,8,4],[0,9,0],[0,10,7],[0,11,0],[0,12,2],[0,13,2],[0,14,5],[0,15,3],[0,16,6],[0,17,8],[0,18,6],[0,19,6],[0,20,7],[0,21,2],[0,22,8],[0,23,6],[1,0,5],[1,1,7],[1,2,7],[1,3,8],[1,4,7],[1,5,8],[1,6,2],[1,7,0],[1,8,4],[1,9,6],[1,10,6],[1,11,6],[1,12,7],[1,13,1],[1,14,4],[1,15,2],[1,16,5],[1,17,7],[1,18,3],[1,19,3],[1,20,5],[1,21,5],[1,22,6],[1,23,8],[2,0,1],[2,1,6],[2,2,4],[2,3,4],[2,4,4],[2,5,6],[2,6,2],[2,7,1],[2,8,4],[2,9,0],[2,10,4],[2,11,2],[2,12,4],[2,13,2],[2,14,3],[2,15,6],[2,16,1],[2,17,3],[2,18,7],[2,19,6],[2,20,0],[2,21,6],[2,22,3],[2,23,1],[3,0,1],[3,1,1],[3,2,6],[3,3,6],[3,4,2],[3,5,8],[3,6,3],[3,7,2],[3,8,2],[3,9,6],[3,10,0],[3,11,5],[3,12,1],[3,13,6],[3,14,2],[3,15,4],[3,16,1],[3,17,2],[3,18,5],[3,19,3],[3,20,0],[3,21,4],[3,22,6],[3,23,7]]];function Compare(e,o,s){return e.findIndex(r=>r[0]===o&&r[1]===s)}function CalcMouseOver(e,o,s){let r=[],[a,i]=o,[t,d]=s;if(t-a>=0&&d-i>=0)for(let l=a;l<=t;l++)for(let n=i;n<=d;n++)r.push(Compare(e,l,n));else if(t-a<0&&d-i>=0)for(let l=t;l<=a;l++)for(let n=i;n<=d;n++)r.push(Compare(e,l,n));else if(t-a>=0&&d-i<0)for(let l=a;l<=t;l++)for(let n=d;n<=i;n++)r.push(Compare(e,l,n));else for(let l=t;l<=a;l++)for(let n=d;n<=i;n++)r.push(Compare(e,l,n));return r}function LeftOrRight(e,o,s){let r=[];if(e.zone<o.zone){let a=o.zone-e.zone;for(let i=0;i<=a;i++)if(i===0){let t=[o.x,o.y],d=[0,e.y],l=CalcMouseOver(s[o.zone],t,d);r.push({zone:o.zone,index:l})}else if(i>0&&i<a){let t=[minutes.length-1,o.y],d=[0,e.y],l=CalcMouseOver(s[o.zone-i],t,d);r.push({zone:o.zone-i,index:l})}else{let t=[minutes.length-1,o.y],d=[e.x,e.y],l=CalcMouseOver(s[e.zone],t,d);r.push({zone:e.zone,index:l})}}else if(e.zone>o.zone){let a=e.zone-o.zone;for(let i=0;i<=a;i++)if(i===0){let t=[o.x,o.y],d=[minutes.length-1,e.y],l=CalcMouseOver(s[o.zone],t,d);r.push({zone:o.zone,index:l})}else if(i>0&&i<a){let t=[0,o.y],d=[minutes.length-1,e.y],l=CalcMouseOver(s[o.zone+i],t,d);r.push({zone:o.zone+i,index:l})}else{let t=[0,o.y],d=[e.x,e.y],l=CalcMouseOver(s[e.zone],t,d);r.push({zone:e.zone,index:l})}}else{let a=[o.x,o.y],i=[e.x,e.y],t=CalcMouseOver(s[e.zone],a,i);r.push({zone:e.zone,index:t})}return r}option={title:{text:"计划"},tooltip:{position:"top"},animation:!1,grid:[{left:"50",width:"220",top:"50",bottom:"20",containLabel:!0},{left:"290",width:"220",top:"50",bottom:"20",containLabel:!0},{left:"520",width:"220",top:"50",bottom:"20",containLabel:!0}],xAxis:[{gridIndex:0,offset:0,position:"top",type:"category",data:minutes,nameLocation:"center",nameTextStyle:{fontWeight:"bold",fontSize:"16",padding:[3,4,15,6],color:"#606060"},axisLabel:{interval:0,rotate:0},splitArea:{show:!0}},{gridIndex:1,offset:1,position:"top",type:"category",data:minutes,nameLocation:"center",nameTextStyle:{fontWeight:"bold",fontSize:"16",padding:[3,4,15,6],color:"#606060"},axisLabel:{interval:0,rotate:0},splitArea:{show:!0}},{gridIndex:2,offset:2,position:"top",type:"category",data:minutes,nameLocation:"center",nameTextStyle:{fontWeight:"bold",fontSize:"16",padding:[3,4,15,6],color:"#606060"},axisLabel:{interval:0,rotate:0},splitArea:{show:!0}}],yAxis:[{type:"category",gridIndex:0,data:["23:00","22:00","21:00","20:00","19:00","18:00","17:00","16:00","15:00","14:00","13:00","12:00","11:00","10:00","09:00","08:00","07:00","06:00","05:00","04:00","03:00","02:00","01:00","00:00"],axisLine:{lineStyle:{color:"#000"}},axisLabel:{interval:0,rotate:0},splitArea:{show:!0}},{type:"category",gridIndex:1,data:["23:00","22:00","21:00","20:00","19:00","18:00","17:00","16:00","15:00","14:00","13:00","12:00","11:00","10:00","09:00","08:00","07:00","06:00","05:00","04:00","03:00","02:00","01:00","00:00"],axisLine:{lineStyle:{color:"#000"}},axisLabel:{interval:0,rotate:0},splitArea:{show:!0}},{type:"category",gridIndex:2,data:["23:00","22:00","21:00","20:00","19:00","18:00","17:00","16:00","15:00","14:00","13:00","12:00","11:00","10:00","09:00","08:00","07:00","06:00","05:00","04:00","03:00","02:00","01:00","00:00"],axisLine:{lineStyle:{color:"#000"}},axisLabel:{interval:0,rotate:0},splitArea:{show:!0}}],visualMap:{show:!0,right:0,top:10,align:"left",pieces:[{value:0,label:"费率0",color:"#c1232b"},{value:1,label:"费率1",color:"#27727b"},{value:2,label:"费率2",color:"#e87c25"},{value:3,label:"费率3",color:"#b5c334"},{value:4,label:"费率4",color:"#fe8463"},{value:5,label:"费率5",color:"#9bca63"},{value:6,label:"费率6",color:"#fad860"},{value:7,label:"费率7",color:"#f3a43b"},{value:8,label:"费率8",color:"#60c0dd"},{value:9,label:"费率9",color:"#d7504b"}]},series:[{name:"星期一",type:"heatmap",data:data[0],label:{normal:{show:!1}},gridIndex:0,xAxisIndex:0,yAxisIndex:0,itemStyle:{emphasis:{shadowBlur:5,borderWidth:2,borderColor:"white"},borderWidth:.5,borderType:"solid",borderColor:"#ffffff"}},{name:"星期二",type:"heatmap",data:data[1],label:{normal:{show:!1}},gridIndex:1,xAxisIndex:1,yAxisIndex:1,itemStyle:{emphasis:{shadowBlur:5,borderWidth:2,borderColor:"white"},borderWidth:.5,borderType:"solid",borderColor:"#ffffff"}},{name:"星期三",type:"heatmap",data:data[2],label:{normal:{show:!1}},gridIndex:2,xAxisIndex:2,yAxisIndex:2,itemStyle:{emphasis:{shadowBlur:5,borderWidth:2,borderColor:"white"},borderWidth:.5,borderType:"solid",borderColor:"#ffffff"}}]},myChart.on("click","series",function(e){fee_rule_color!=-1&&(data[e.seriesIndex][e.dataIndex][2]=fee_rule_color,myChart.setOption({series:[{name:"星期一",type:"heatmap",data:data[0],label:{normal:{show:!1}},gridIndex:0,xAxisIndex:0,yAxisIndex:0,itemStyle:{emphasis:{shadowBlur:5,borderWidth:2,borderColor:"white"},borderWidth:.5,borderType:"solid",borderColor:"#ffffff"}},{name:"星期一",type:"heatmap",data:data[1],label:{normal:{show:!1}},gridIndex:1,xAxisIndex:1,yAxisIndex:1,itemStyle:{emphasis:{shadowBlur:5,borderWidth:2,borderColor:"white"},borderWidth:.5,borderType:"solid",borderColor:"#ffffff"}},{name:"星期三",type:"heatmap",data:data[2],label:{normal:{show:!1}},gridIndex:2,xAxisIndex:2,yAxisIndex:2,itemStyle:{emphasis:{shadowBlur:5,borderWidth:2,borderColor:"white"},borderWidth:.5,borderType:"solid",borderColor:"#ffffff"}}]}))}),myChart.on("mousedown","series",function(e){mouseDown=1,currentIndex={x:e.value[0],y:e.value[1],zone:e.seriesIndex},startIndex=currentIndex,myChart.dispatchAction({type:"hideTip"})}),myChart.on("mousemove","series",function(e){mouseDown==1&&(currentIndex={x:e.value[0],y:e.value[1],zone:e.seriesIndex},dataIndexArray=LeftOrRight(currentIndex,startIndex,data),SelectedDataIndex(myChart))}),myChart.on("mouseup","series",function(e){mouseDown=0,SelectedCancelDataIndex(myChart),fee_rule_color>0&&(dataIndexArray.forEach(o=>{o.index.forEach(s=>{data[o.zone][s][2]=fee_rule_color})}),myChart.setOption({series:[{name:"星期一",type:"heatmap",data:data[0],label:{normal:{show:!1}},gridIndex:0,xAxisIndex:0,yAxisIndex:0,itemStyle:{emphasis:{shadowBlur:5,borderWidth:2,borderColor:"white"},borderWidth:.5,borderType:"solid",borderColor:"#ffffff"}},{name:"星期二",type:"heatmap",data:data[1],label:{normal:{show:!1}},gridIndex:1,xAxisIndex:1,yAxisIndex:1,itemStyle:{emphasis:{shadowBlur:5,borderWidth:2,borderColor:"white"},borderWidth:.5,borderType:"solid",borderColor:"#ffffff"}},{name:"星期三",type:"heatmap",data:data[2],label:{normal:{show:!1}},gridIndex:2,xAxisIndex:2,yAxisIndex:2,itemStyle:{emphasis:{shadowBlur:5,borderWidth:2,borderColor:"white"},borderWidth:.5,borderType:"solid",borderColor:"#ffffff"}}]}),dataIndexArray=[])});function SelectedDataIndex(e){e.dispatchAction({type:"downplay"}),dataIndexArray.forEach(o=>{e.dispatchAction({type:"highlight",seriesIndex:o.zone,dataIndex:o.index})}),e.dispatchAction({type:"hideTip"})}function SelectedCancelDataIndex(e){e.dispatchAction({type:"downplay"})}
