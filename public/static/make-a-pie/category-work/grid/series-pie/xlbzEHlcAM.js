data=[{name:"数据1",value:754},{name:"数据2",value:611},{name:"数据3",value:450},{name:"数据4",value:400},{name:"数据5",value:300},{name:"数据6",value:200}],legend_data={数据1:" 数据1  8 | 4%"},colors=["RGB(15,204,152)","RGB(54,197,246)","RGB(1,149,233)","RGB(195,231,3)","RGB(238,190,59)","RGB(248,44,96)"],arrName=getArrayValue(data,"name"),arrValue=getArrayValue(data,"value"),sumValue=data.reduce((e,o)=>e+o.value,0),console.log(sumValue),objData=array2obj(data,"name"),optionData=getData(data);function getArrayValue(e,a){var a=a||"value",t=[];return e&&e.forEach(function(l){t.push(l[a])}),t}function array2obj(e,o){for(var a={},t=0;t<e.length;t++)a[e[t][o]]=e[t];return a}function getData(e){var o={series:[],yAxis:[]};for(let a=0;a<e.length;a++)o.series.push({name:"学历",type:"pie",clockWise:!0,z:2,hoverAnimation:!1,radius:[70-a*12+"%",68-a*12+"%"],center:["50%","55%"],label:{show:!0,formatter:"{d}%",color:"RGB(246,175,101)",fontSize:25,position:"inside"},labelLine:{show:!1},data:[{value:e[a].value,name:e[a].name,itemStyle:{color:colors[a]}},{value:sumValue-e[a].value,name:"",itemStyle:{color:"rgba(0,0,0,0)",borderWidth:0},tooltip:{show:!1},label:{show:!1},hoverAnimation:!1}]}),o.series.push({name:"背景线",type:"pie",silent:!0,z:1,clockWise:!0,hoverAnimation:!1,radius:[70-a*12+"%",68-a*12+"%"],center:["50%","55%"],label:{show:!1},itemStyle:{label:{show:!1},labelLine:{show:!1},borderWidth:5},data:[{value:100,itemStyle:{color:"RGB(13,46,49)",borderWidth:0},tooltip:{show:!1},hoverAnimation:!1}]}),o.yAxis.push(e[a].name);return o}option={backgroundColor:"RGB(0,10,16)",color:[{type:"linear",x:0,y:0,x2:1,y2:1,colorStops:[{offset:0,color:"rgba(10,31,95,1)"},{offset:1,color:"rgba(1,232,254,1)"}],global:!1}],grid:{top:"16%",bottom:"54%",left:"50%",containLabel:!1},legend:[{x:"70%",y:"3%",icon:"rect",data:["数据1"],formatter:function(e){return console.log(e),legend_data[e]},textStyle:{color:colors[0]}},{x:"85%",y:"3%",data:["数据2"],formatter:function(e){return console.log(e),"Legend "+name}},{x:"right",y:"6%",data:["数据3","数据4"]},{x:"right",y:"8%",data:["数据5","数据6"]}],yAxis:[{type:"category",inverse:!0,z:3,axisLine:{show:!1},axisTick:{show:!1},axisLabel:{interval:0,inside:!1,textStyle:{color:"RGB(78,184,252)",fontSize:25},show:!0},data:optionData.yAxis}],xAxis:[{show:!1}],series:optionData.series};
