for(var xArray=["星期一","星期二","星期三","星期四","星期五","星期六","星期日"],sleepStartArray=[23,22,23,5,20,4,21],sleepEndArray=[8.5,9,7.2,8.1,8.8,7.8,9.4],blockbottomData=[1,3.5],blocktopData=[8.8,10.8],flag1=(blocktopData[0]-blockbottomData[1]).toFixed(2),flag2=(blocktopData[1]-blockbottomData[0]).toFixed(2),zdata=[],hideData=[],flag=0,i=0;i<sleepStartArray.length;i++)sleepStartArray[i]*1>sleepEndArray[i]*1?(hideData.push(sleepStartArray[i]*1-24*1),sleepEndArray[i]=24-sleepStartArray[i]*1+sleepEndArray[i]*1,zdata.push("-")):(hideData.push("-"),flag=1,zdata.push(sleepStartArray[i]*1),sleepEndArray[i]=(sleepEndArray[i]*1-sleepStartArray[i]*1).toFixed(1)*1);function getBarColor(e,t){var a;return t=="yc"?(a=sleepEndArray[e]*1,a<=flag1?"#e0b01e":a<=flag2?"#73bd1e":"#343e75"):(a=t.value,a<=flag1?"#e0b01e":a<=flag2?"#73bd1e":"#343e75")}var option={title:{text:"演示睡眠分析（单位:小时）",subtext:"起床时间",sublink:"https://www.cnblogs.com/lightmusic/p/12761239.html"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(e){var t=e[1];return t.name+"<br/>"+t.seriesName+" : "+t.value+"小时"}},grid:{left:"3%",right:"6%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",axisLabel:{color:"#ADADAD",fontSize:"11"},axisLine:{lineStyle:{color:"#ADADAD"}},axisTick:{show:!1,lineStyle:{color:"#ADADAD"}},data:xArray}],yAxis:[{type:"value",splitLine:{show:!0,lineStyle:{color:"#ADADAD"}},axisLabel:{show:!0,interval:"auto",color:"#ADADAD",fontSize:"11"},axisLine:{lineStyle:{color:"#ADADAD",width:1}},axisTick:{show:!1},axisLabel:{formatter:function(e,t){return console.log(e,t),e*1<0?24-Math.abs(e*1)+" :00":e+":00"}}}],series:[{name:"睡觉时间0点之前",type:"bar",stack:"总量",itemStyle:{normal:{color:function(e){return getBarColor(e.dataIndex,"yc")}}},data:hideData},{name:"遮挡数据0点之后",stack:"总量",type:"bar",barGap:"-100%",itemStyle:{color:"#f3f3f3",borderColor:"#f3f3f3"},tooltip:{show:!1},z:0,data:zdata},{name:"睡眠时长",type:"bar",stack:"总量",itemStyle:{normal:{color:function(e){return getBarColor(null,e)}}},label:{show:!0,position:"inside"},tooltip:{show:!0},data:sleepEndArray,z:0,markArea:{silent:!1,itemStyle:{color:"rgba(45,105,132,.4)"},label:{show:!0,position:"right",rotate:"-60",fontSize:"10"},data:[[{name:"标域一",x:"星期一",yAxis:blocktopData[0]},{x:"星期日  ",yAxis:blocktopData[1]}],[{name:"标域二",x:"星期一",yAxis:blockbottomData[0]},{x:"星期日",yAxis:blockbottomData[1]}]]}}]};console.log("垫底的数据",hideData),console.log("结束时间",sleepEndArray),console.log("zdata",zdata),console.log("标值",flag1,flag2);
