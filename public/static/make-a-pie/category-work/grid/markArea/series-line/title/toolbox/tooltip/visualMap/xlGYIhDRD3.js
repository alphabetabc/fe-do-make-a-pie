option={title:{text:"一天用电量分布",subtext:"纯属虚构"},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},toolbox:{show:!0,feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:["00:00","01:15","02:30","03:45","05:00","06:15","07:30","08:45","10:00","11:15","12:30","13:45","15:00","16:15","17:30","18:45","20:00","21:15","22:30","23:45"]},yAxis:{type:"value",axisLabel:{formatter:"{value} W"},axisPointer:{snap:!0}},visualMap:[],series:[{name:"用电量",type:"line",smooth:!0,data:[300,280,250,260,270,300,550,500,400,390,380,390,400,500,600,750,800,700,600,400]},{name:"用电量",type:"line",smooth:!0,data:[30,28,25,26,27,30,55,50,40,39,38,39,40,50,60,75,80,70,60,40]}]};let startIndex=[],endIndex=[];myChart.on("mousedown",function({data:o,dataIndex:s,name:t,seriesIndex:a}){startIndex=[o,s,t]}),myChart.on("mouseup",function({data:o,dataIndex:s,name:t,seriesIndex:a,...i}){console.log(i);const e=[];endIndex=[o,s,t],startIndex[1]===endIndex[1]?(e.push({max:startIndex[1],color:"green"}),e.push({min:startIndex[1],max:startIndex[1]+1,color:"red"}),e.push({min:startIndex[1]+1,color:"green"})):startIndex[1]>=endIndex[1]?(e.push({max:endIndex[1],color:"green"}),e.push({min:endIndex[1],max:startIndex[1],color:"red"}),e.push({min:startIndex[1],color:"green"})):(e.push({max:startIndex[1],color:"green"}),e.push({min:startIndex[1],max:endIndex[1],color:"red"}),e.push({min:endIndex[1],color:"green"})),option.series.forEach((n,l)=>{const p=n.yAxisIndex;let r=JSON.parse(JSON.stringify(e));r[0].color="green",r[2].color="green",option.visualMap.push({show:!1,dimension:0,pieces:r,seriesIndex:l}),n.markArea={itemStyle:{color:"rgba(255, 173, 177, 0.4)"},data:[[{name:"异常数据",xAxis:startIndex[2]},{xAxis:endIndex[2]}]]},myChart.setOption(option)})});
