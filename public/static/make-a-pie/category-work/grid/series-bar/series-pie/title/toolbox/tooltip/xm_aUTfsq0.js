for(var bTestData=[],cTestData=[],i=0;i<12;i++){var stdCount=Math.random()*100,totalCount=stdCount+Math.random()*150;bTestData.push([i,(stdCount/totalCount*100).toFixed(2),stdCount.toFixed(0),totalCount.toFixed(0)])}for(var i=0;i<12;i++){var stdCount=Math.random()*100,totalCount=stdCount+Math.random()*150;cTestData.push([i,(stdCount/totalCount*100).toFixed(2),stdCount.toFixed(0),totalCount.toFixed(0)])}for(var resonArr=["设计","安装","物流","工厂"],bPieData=[],i=0;i<resonArr.length;i++)bPieData.push({name:resonArr[i],value:i%2?Math.round(Math.random()*1e3):0});var cPieData=[];function cp1(){cPieData=[];for(var t=0;t<resonArr.length;t++)cPieData.push({name:resonArr[t],value:Math.round(Math.random()*1e3)});return cPieData}option={title:[{id:"barTitle",text:"2019年补单占比统计图",x:"center"},{id:"pieTitle1",text:"9月销售补单下单原因占比",x:"25%",y:"59%",textAlign:"center"},{id:"pieTitle2",text:"9月售后补单下单原因占比",x:"75%",y:"59%",textAlign:"center"}],toolbox:{feature:{dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}},formatter:"柱状图专用"},grid:{bottom:"46%",containLabel:!1,left:"50",right:"30"},xAxis:[{type:"category",data:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],axisPointer:{type:"shadow"}}],yAxis:{type:"value",name:"单数",axisLabel:{formatter:"{value}"}},series:[{name:"B单占比",type:"bar",data:bTestData,label:{show:!0,position:"top",formatter:"{@[1]} %"}},{name:"C单占比",type:"bar",data:cTestData,label:{show:!0,position:"top",formatter:"{@[1]} %"}},{name:"销售补单下单原因占比",type:"pie",radius:"28%",center:["25%","83%"],label:{formatter:"{b}: {d}%"},data:bPieData,tooltip:{trigger:"item",formatter:"饼图专用<br/>{a}/{b}/{c}/{d}"}},{name:"售后补单下单原因占比",type:"pie",radius:"28%",center:["75%","83%"],label:{formatter:"{b}:{c}单 {d}%"},data:cp1(),tooltip:{trigger:"item",formatter:"饼图专用<br/>{a}/{b}/{c}/{d}"}}]},myChart.getZr().on("click",t=>{console.log("点击zr");const a=[t.offsetX,t.offsetY];if(myChart.containPixel("grid",a)){let e=myChart.convertFromPixel({seriesIndex:0},[t.offsetX,t.offsetY])[0];console.log(e),myChart.setOption({title:[{id:"pieTitle1",text:e+1+"月饼图1"},{id:"pieTitle2",text:e+1+"月饼图2"}],series:{name:"售后补单下单原因占比",data:cp1()}})}});
