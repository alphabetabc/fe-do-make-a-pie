var bird="image://https://raw.githubusercontent.com/jackshawn/pics-by-echarts/master/img/bird.png",option={title:{text:"按空格键进行游戏",left:"center",textStyle:{color:"#fff"},z:9},grid:{left:0,right:0,bottom:0,top:0},xAxis:[{data:[],show:!1},{data:[],show:!1},{data:[],show:!1},{data:[],boundaryGap:!1,show:!1},{data:[],show:!1}],yAxis:[{splitLine:!1,max:0,min:-100},{splitLine:!1,max:100},{splitLine:!1,max:100},{splitLine:!1,max:50},{splitLine:!1,max:50}],series:[{name:"bird",type:"pictorialBar",symbolPosition:"end",data:function(){var e=new Array(200).fill(0);return e[50]={value:50,symbol:bird,symbolSize:50,symbolOffset:["-75%","-50%"]},e}(),xAxisIndex:2,yAxisIndex:2,zlevel:2,animationDelay:function(e){return e+2e3}},{name:"topBar",type:"bar",data:new Array(200),xAxisIndex:0,yAxisIndex:0,animation:!0,z:5},{name:"bottomBar",type:"bar",data:new Array(200),xAxisIndex:1,yAxisIndex:1,animation:!0,z:5},{name:"cloudsBottom",type:"line",data:[15,15],xAxisIndex:3,yAxisIndex:3,animation:!0,showSymbol:!1,areaStyle:{normal:{color:"#fff",opacity:1}},lineStyle:{normal:{color:"#fff"}},animationDelay:700,animationDuration:1550},{name:"clouds",type:"graph",xAxisIndex:3,yAxisIndex:3,data:function(){for(var e=[{x:0,y:0,symbolSize:0},{x:150,y:100,symbolSize:0}],a=0;a<15;a++)e.push({x:a*10,y:70,symbolSize:100+75*Math.random()});return e}(),itemStyle:{normal:{color:"#fff",borderWidth:0}},silent:!0,left:-100,right:-100,bottom:0,top:0,animation:!0,animationDelay:function(e){return e*100+500}},{name:"buildings",step:"middle",type:"line",data:function(){for(var e=[],a=0;a<100;a++)e.push(10+5*Math.random());return e}(),lineStyle:{normal:{color:"#bcd1c0"}},areaStyle:{normal:{color:"#c7e6c7",opacity:1}},symbolSize:0,xAxisIndex:4,yAxisIndex:4,animation:!0,z:3,animationDelay:800,animationDuration:1500},{name:"bushesBottom",type:"line",data:[5,5],xAxisIndex:3,yAxisIndex:3,animation:!0,showSymbol:!1,lineStyle:{normal:{color:"#87e189",opacity:1}},areaStyle:{normal:{color:"#87e189",opacity:1}},z:4,animationDelay:300},{name:"bushes",type:"graph",xAxisIndex:3,yAxisIndex:3,data:function(){for(var e=[{x:0,y:0,symbolSize:0},{x:150,y:100,symbolSize:0}],a=0;a<15;a++)e.push({x:a*10,y:90,symbolSize:100+75*Math.random()});return e}(),itemStyle:{normal:{color:"#87e189",borderWidth:0}},silent:!0,left:-100,right:-100,bottom:0,top:0,z:4,animation:!0,animationDelay:function(e){return e*100}},{name:"ground",type:"line",data:[1,1],xAxisIndex:3,yAxisIndex:3,animation:!0,showSymbol:!1,areaStyle:{normal:{color:"#ddd58c",opacity:1}},lineStyle:{normal:{color:"#72881c"}},z:5}],silent:!0,backgroundColor:"#71c5cf"};document.onkeydown=function(e){if(e&&e.keyCode==32){for(var a=2,o=0,s=0,l=0,d=localStorage.getItem("bestScore")||0,m,y=function(){clearInterval(m),s>d&&localStorage.setItem("bestScore",s),document.onkeydown=""},n=1;n<option.series.length;n++)option.series[n].animation=!1;m=setInterval(function(){if(option.title.text="得分 : "+s+" ; 时间 : "+(l/1e3).toFixed(2)+"s ; 最高得分 : "+d,option.series[0].data[50].value>0){var i=Math.random()*80;if(option.series[1].data.shift(),option.series[2].data.shift(),o%50==0){var u=-i,f=80-i,r="#77a138";option.series[1].data.push({value:u,itemStyle:{normal:{color:r,borderWidth:40,borderColor:r}}}),option.series[2].data.push({value:f,itemStyle:{normal:{color:r,borderWidth:40,borderColor:r}}})}else option.series[1].data.push(0),option.series[2].data.push(0);option.series[4].data[option.series[4].data.length-1].x<140&&option.series[4].data.push({x:150,y:70,symbolSize:100+75*Math.random()});for(var t=3;t<option.series[4].data.length;t++)option.series[4].data[t].x>0&&(option.series[4].data[t].x-=.05);o%20==0&&(option.series[5].data.shift(),option.series[5].data.push(10+5*Math.random())),option.series[7].data[option.series[7].data.length-1].x<140&&option.series[7].data.push({x:150,y:90,symbolSize:100+75*Math.random()});for(var t=3;t<option.series[7].data.length;t++)option.series[7].data[t].x>0&&(option.series[7].data[t].x-=.2);if(myChart.setOption(option),a+=.25,option.series[0].data[50].value-=a,a==2.25?option.series[0].data[50].symbolRotate=0:option.series[0].data[50].symbolRotate-=a,option.series[2].data[50]&&option.series[2].data[50].value>0){var x=option.series[0].data[50].value-option.series[2].data[50].value;x>0&&x<10?s+=10:y()}}else y();o++,l+=125},125),document.onkeydown=function(i){i&&i.keyCode==32&&option.series[0].data[50].value>0&&option.series[0].data[50].value<90&&(option.series[0].data[50].value+=15,option.series[0].data[50].symbolRotate=45,a=2)}}};
