let unit="千人",dataArr=[{code:"1003",name:"刑释解教人员",num:4},{code:"1009",name:"社区矫正人员",num:5},{code:"1011",name:"精神病患者",num:3},{code:"1012",name:"信教人员",num:4}],TData=dataArr.map(o=>Number(o.num)),max=Math.max(...TData),dataShadow=[];for(var i=0;i<dataArr.length;i++)dataShadow.push((max*100+100)/100);const CubeLeft=echarts.graphic.extendShape({shape:{x:0,y:0},buildPath:function(o,e){const t=e.xAxisPoint,a=[e.x,e.y],l=[e.x-20,e.y-4],n=[t[0]-20,t[1]-4],c=[t[0],t[1]];o.moveTo(a[0],a[1]).lineTo(l[0],l[1]).lineTo(n[0],n[1]).lineTo(c[0],c[1]).closePath()}}),CubeRight=echarts.graphic.extendShape({shape:{x:0,y:0},buildPath:function(o,e){const t=e.xAxisPoint,a=[e.x-5,e.y],l=[t[0]-5,t[1]],n=[t[0]+10,t[1]-4],c=[e.x+10,e.y-4];o.moveTo(a[0],a[1]).lineTo(l[0],l[1]).lineTo(n[0],n[1]).lineTo(c[0],c[1]).closePath()}}),CubeTop=echarts.graphic.extendShape({shape:{x:0,y:0},buildPath:function(o,e){const t=[e.x-5,e.y],a=[e.x+10,e.y-4],l=[e.x-5,e.y-8],n=[e.x-20,e.y-4];o.moveTo(t[0],t[1]).lineTo(a[0],a[1]).lineTo(l[0],l[1]).lineTo(n[0],n[1]).closePath()}});echarts.graphic.registerShape("CubeLeft",CubeLeft),echarts.graphic.registerShape("CubeRight",CubeRight),echarts.graphic.registerShape("CubeTop",CubeTop),option={backgroundColor:"#080b30",title:{text:"重点人群",textStyle:{align:"center",color:"#fff",fontSize:20},top:"3%",left:"center"},grid:{left:"5%",right:10,top:"15%",bottom:25,containLabel:!0},tooltip:{formatter:"{b}: {c}"+unit},xAxis:[{type:"category",data:dataArr.map(o=>o.name),axisLabel:{interval:0,rotate:dataArr.length>5?15:0,color:"rgba(255,255,255,.8)",fontSize:14,align:"center",padding:dataArr.length>5?[30,0,0,-24]:[0,0,0,-24]},axisTick:{show:!1},axisLine:{lineStyle:{color:"rgba(135,142,148,0.5)"}}}],yAxis:{type:"value",name:"单位（"+unit+"）",nameTextStyle:{fontSize:14,color:"#9ca2a8",padding:[0,0,10,-30]},scale:!1,axisLabel:{color:"#a0a5ab",fontSize:12},splitLine:{show:!0,lineStyle:{color:"rgba(255,255,255,.1)"}},axisLine:{show:!1},axisTick:{show:!1}},series:[{type:"custom",zlevel:2,renderItem:(o,e)=>{const t=e.coord([e.value(0),e.value(1)]);return{type:"group",children:[{type:"CubeLeft",shape:{api:e,xValue:e.value(0),yValue:e.value(1),x:t[0],y:t[1],xAxisPoint:e.coord([e.value(0),0])},style:{fill:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:.4,color:"#93D884"},{offset:1,color:"rgba(0,0,0,0)"}])}},{type:"CubeRight",shape:{api:e,xValue:e.value(0),yValue:e.value(1),x:t[0],y:t[1],xAxisPoint:e.coord([e.value(0),0])},style:{fill:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:.4,color:"#3FBB70"},{offset:1,color:"rgba(0,0,0,0)"}])}},{type:"CubeTop",shape:{api:e,xValue:e.value(0),yValue:e.value(1),x:t[0],y:t[1],xAxisPoint:e.coord([e.value(0),0])},style:{fill:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#cbec8a"},{offset:1,color:"#cbec8a"}])}}]}},data:TData},{type:"bar",label:{normal:{show:!0,position:"top",distance:10,fontSize:16,color:"#97af58"}},barWidth:20,itemStyle:{color:"transparent"},data:TData},{type:"bar",itemStyle:{borderColor:"rgba(151,175,88,0.5)",color:"rgba(0,0,0,0)"},barWidth:20*2.4,barGap:"-155%",tooltip:{show:!1},cursor:"default",data:dataShadow,animation:!1}]};
