for(var data=[200,-320,-30,400,200,-300,-800],help=[],positive=[],negative=[],min=Number.MAX_VALUE,i=1,sum=0;i<data.length+1;++i)sum+=data[i-1],sum<min&&(min=sum);console.log("min",min);for(var i=0,sum=-min;i<data.length;++i)data[i]>=0?(positive.push(data[i]),negative.push("-")):(positive.push("-"),negative.push(-data[i])),i===0?(console.log("sum",sum),help.push(-min)):(console.log(data[i-1],"+",sum,"=",data[i-1]+sum),sum+=data[i-1],data[i]<0?(console.log("sum",sum+data[i]),help.push(sum+data[i])):(console.log("sum",sum),help.push(sum)));option={title:{text:"根据数据自动计算出的阶梯瀑布图"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",splitLine:{show:!1},axisTick:{show:!1},axisLine:{show:!1},axisLabel:{color:"#bbb"},data:function(){for(var e=[],a=1;a<=11;a++)e.push("11月"+a+"日");return e}()},yAxis:{type:"value",axisLine:{show:!1},splitLine:{show:!1},min:0,axisLabel:{color:"#b2b2b2",formatter:function(e){return e+min+"亿"}},axisTick:{show:!1}},series:[{name:"辅助",type:"bar",stack:"总量",itemStyle:{barBorderColor:"rgba(0,0,0,0)",color:"rgba(0,0,0,0)"},emphasis:{itemStyle:{barBorderColor:"rgba(0,0,0,0)",color:"rgba(0,0,0,0)"}},data:help},{name:"收入",type:"bar",stack:"总量",data:positive,itemStyle:{color:"#d06c65"}},{name:"支出",type:"bar",stack:"总量",data:negative,itemStyle:{color:"#6fb672"}}]};
