var build=["C1","C2","C3A","C3B"],myColor=["#21BF57","#999999","#F57474"],data=[[{name:"1F",all:307,on:255,off:45,error:7},{name:"2F",all:221,on:200,off:10,error:11},{name:"3F",all:352,on:344,off:1,error:7},{name:"4F",all:307,on:255,off:45,error:7},{name:"5F",all:307,on:255,off:45,error:7},{name:"6F",all:307,on:255,off:45,error:7}],[{name:"1F",all:307,on:255,off:45,error:7},{name:"2F",all:307,on:255,off:45,error:7},{name:"3F",all:307,on:255,off:45,error:7},{name:"4F",all:307,on:255,off:45,error:7},{name:"5F",all:221,on:200,off:10,error:11},{name:"6F",all:352,on:344,off:1,error:7}],[{name:"1F",all:307,on:255,off:45,error:7},{name:"2F",all:221,on:200,off:10,error:11},{name:"3F",all:307,on:255,off:45,error:7},{name:"4F",all:307,on:255,off:45,error:7},{name:"5F",all:352,on:344,off:1,error:7},{name:"6F",all:307,on:255,off:45,error:7}],[{name:"1F",all:307,on:255,off:45,error:7},{name:"2F",all:352,on:344,off:1,error:7},{name:"3F",all:307,on:255,off:45,error:7},{name:"4F",all:221,on:200,off:10,error:11},{name:"5F",all:307,on:255,off:45,error:7},{name:"6F",all:307,on:255,off:45,error:7}]];optionTime={timeline:{data:build,axisType:"category",autoPlay:!0,playInterval:3e3,left:"10%",right:"10%",bottom:"3%",width:"80%",label:{normal:{textStyle:{color:"#ddd"}},emphasis:{textStyle:{color:"#fff"}}},symbolSize:10,lineStyle:{color:"#555"},checkpointStyle:{borderColor:"#777",borderWidth:2},controlStyle:{showNextBtn:!0,showPrevBtn:!0,normal:{color:"#666",borderColor:"#666"},emphasis:{color:"#aaa",borderColor:"#aaa"}}},baseOption:{animation:!0,animationDuration:1e3,animationEasing:"cubicInOut",animationDurationUpdate:1e3,animationEasingUpdate:"cubicInOut",grid:{right:"1%",top:"15%",bottom:"10%",width:"20%"},tooltip:{trigger:"axis",axisPointer:{type:"shadow",shadowStyle:{color:"rgba(150,150,150,0.1)"}},formatter:function(o){if(console.log(o),o instanceof Array){let t=[];return t.push(o[0].name+"-"+o[0].axisValue),t.push(o[1].marker+"  "+o[1].seriesName+":"+data[o[0].data.order][o[0].dataIndex].on),t.push(o[2].marker+"  "+o[2].seriesName+":"+data[o[0].data.order][o[0].dataIndex].off),t.push(o[3].marker+"  "+o[3].seriesName+":"+data[o[0].data.order][o[0].dataIndex].error),t.join("</br>")}else return o.name}}},options:[]};for(let o=0;o<data.length;o++)optionTime.options.push(getOption(data[o],build[o],o));myChart.setOption(optionTime);function getOption(o,t,s){let a=[],n=[],l=[],i=[],f=[],m=[],d=[],u=[];for(let r=0;r<o.length;r++)a.push({value:1,name:t,order:s}),n.push((o[r].on/o[r].all).toFixed(2)),l.push((o[r].off/o[r].all).toFixed(2)),i.push((o[r].error/o[r].all).toFixed(2)),m.push(o[r].on),d.push(o[r].off),u.push(o[r].error),f.push(o[r].name);var h={backgroundColor:"#05274C",title:{top:"2%",left:"center",text:"智慧照明楼层开关显示",textStyle:{align:"center",color:"#4DCEF8",fontSize:18}},grid:{left:"130",right:"100"},xAxis:{show:!1},yAxis:{type:"category",axisLabel:{margin:30,show:!0,color:"#4DCEF8",fontSize:14},axisTick:{show:!1},axisLine:{show:!1},data:f},series:[{type:"bar",barGap:"-65%",label:{normal:{show:!0,position:"right",color:"#fff",fontSize:14,formatter:function(r){var e=o[r.dataIndex].all;return e}}},barWidth:"30%",itemStyle:{normal:{borderColor:"#4DCEF8",borderWidth:2,barBorderRadius:15,color:"rgba(102, 102, 102,0)"}},z:1,data:a},{name:"开启",type:"bar",barGap:"-85%",stack:"one",barWidth:"21%",itemStyle:{normal:{barBorderRadius:16,color:myColor[0]}},max:1,label:{normal:{show:!0,position:"inside",formatter:function(r){var e=o[r.dataIndex].on;return r.data<Number(.05)&&(e=""),e}}},labelLine:{show:!0},z:2,data:n},{name:"关闭",type:"bar",barGap:"-85%",stack:"one",barWidth:"21%",itemStyle:{normal:{barBorderRadius:16,color:myColor[1]}},max:1,label:{normal:{show:!0,position:"inside",formatter:function(r){var e=o[r.dataIndex].off;return r.data<Number(.05)&&(e=""),e}}},labelLine:{show:!0},z:2,data:l},{name:"掉线",type:"bar",barGap:"-85%",stack:"one",barWidth:"21%",itemStyle:{normal:{barBorderRadius:16,color:myColor[2]}},max:1,label:{normal:{show:!0,position:"inside",formatter:function(r){var e=o[r.dataIndex].error;return r.data<Number(.05)&&(e=""),e}}},labelLine:{show:!0},z:2,data:i}]};return h}
