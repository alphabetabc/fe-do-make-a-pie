var data=[{product:"111",今年:800,去年:158},{product:"222",今年:200,去年:951},{product:"333",今年:600,去年:528},{product:"444",今年:500,去年:561},{product:"555",今年:400,去年:111}];option={color:["#3398DB"],tooltip:{trigger:"axis",textStyle:{color:"white"},axisPointer:{type:"shadow"},formatter:function(r){var i=r[0].name,a=[];return r.forEach(e=>{a.push({seriesName:e.seriesName,value:e.value,marker:e.marker})}),`
                                ${i}</br>
                                ${a[1].marker}${a[0].seriesName}:${a[0].value+a[1].value}</br>
                                ${a[3].marker}${a[2].seriesName}:${a[2].value+a[3].value}
                            `}},grid:{left:"0%",right:"0%",bottom:"0%",containLabel:!0},xAxis:{type:"category",axisLabel:{color:"black"},data:data.map(r=>r.product)},yAxis:{type:"value",axisLabel:{color:"black"},splitLine:{lineStyle:{color:["#162b5f"]}}},series:[{name:"今年",type:"bar",stack:"this",barWidth:30,itemStyle:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#44f0ff"},{offset:1,color:"#3487da"}])},animationDelay:0,animationDuration:0,animationDurationUpdate:0},{name:"今年Bg",type:"bar",stack:"this",barWidth:30,itemStyle:{color:"#44f0ff",opacity:.5},animationDelay:0,animationDuration:0,animationDurationUpdate:0},{name:"去年",type:"bar",stack:"last",barWidth:30,itemStyle:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#fb387e"},{offset:1,color:"#3586da"}])},animationDelay:0,animationDuration:0,animationDurationUpdate:0},{name:"去年Bg",type:"bar",stack:"last",barWidth:30,itemStyle:{color:"#fb387e",opacity:.5},animationDelay:0,animationDuration:0,animationDurationUpdate:0}]},riseAnimation(data,myChart,option,5,50);function riseAnimation(r,i,a,e,m){var u={norm:r.map(t=>t.今年),data1:new Array(5).fill(0),data2:[]},y={norm:r.map(t=>t.去年),data1:new Array(5).fill(0),data2:[]};i.myOption=a,i.thisYearData=u,i.lastYearData=y;function c(t){var n=t.norm,o=t.data1,p=t.data2;return p=n.map((l,s)=>{var f=l/(e*1e3/m);return o[s]+=f,o[s]>=l&&(o[s]=0),l-o[s]}),[o,p]}setInterval(function(){var t=c(this.thisYearData),n=c(this.lastYearData);this.myOption.series[0].data=t[0],this.myOption.series[1].data=t[1],this.myOption.series[2].data=n[0],this.myOption.series[3].data=n[1],this.setOption(this.myOption)}.bind(i),m)}
