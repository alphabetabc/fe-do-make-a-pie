app.title="堆叠条形图联动饼状图";var data=[[56,36,25,39,95,99],[26,86,65,49,45,39],[28,46,35,89,15,79],[16,56,85,29,75,49]],arr=["product","桐庐","城南","旧县","城乡","固始","千岛湖"];option={legend:{},tooltip:{trigger:"axis",showContent:!0,position:"inside"},dataset:{source:[arr,["心电",56,36,25,39,95,99],["血压",26,86,65,49,45,39],["心率",28,46,35,89,15,79],["化验",16,56,85,29,75,49]]},xAxis:{type:"category"},yAxis:{gridIndex:0},grid:{top:"20%",right:"45%"},series:[{type:"bar",stack:"总量",label:{normal:{show:!0,position:"insideRight"}},smooth:!0,seriesLayoutBy:"row"},{type:"bar",smooth:!0,stack:"总量",label:{normal:{show:!0,position:"insideRight"}},seriesLayoutBy:"row"},{type:"bar",smooth:!0,stack:"总量",label:{normal:{show:!0,position:"insideRight"}},seriesLayoutBy:"row"},{type:"bar",smooth:!0,stack:"总量",label:{normal:{show:!0,position:"insideRight"}},seriesLayoutBy:"row"},{name:"总计",type:"line",data:function(){let e=[];for(let o in data)for(let t in data[o])e[t]||(e[t]=0),e[t]+=data[o][t];return e}(),itemStyle:{opacity:0},lineStyle:{opacity:0},markLine:{data:[{type:"average",name:"平均数",label:{normal:{position:"end",formatter:"{b}: {c}"}}}]}},{tooltip:{trigger:"item",showContent:!0,alwaysShowContent:!0,position:"inside"},type:"pie",id:"pie",radius:"24%",center:["78%","50%"],label:{formatter:"{b}: {@旧县} ({d}%)"},encode:{itemName:"product",value:"旧县",tooltip:"旧县"}}]},myChart.on("updateAxisPointer",function(e){var o=e.axesInfo[0];if(o){var t=o.value+1;myChart.setOption({series:{name:arr[t],id:"pie",label:{formatter:"{a} {b}: {@["+t+"]} ({d}%)"},encode:{value:t,tooltip:t}}})}});
