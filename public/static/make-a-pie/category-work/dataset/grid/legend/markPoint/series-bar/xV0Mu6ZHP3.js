option={grid:{top:"60",left:"7%",right:"7%",bottom:"60",containLabel:!0},xAxis:[{type:"category",axisLabel:{interval:1}}],yAxis:[{type:"value"}],legend:{show:!0,type:"scroll",bottom:0,textStyle:{fontSize:12}},series:[{name:"一、营业总收入",type:"bar"}],dataset:[{source:[["Product","B"],["2016年01月",22567550991e-2],["2016年02月",26471041786e-2],["2016年03月",77744793751e-2]]}],customConfig:{customSymbols:[{seriesIndex:0,dataIndex:2,data:[]},{seriesIndex:0,dataIndex:1,data:[{calcSymbol:"<",value1:"0",value2:"",suffix:"",prefix:"",iconName:"red_curve_right_bottom",color:" #ff2814",symbol:"M13.811,11h3.918l-6.855,7L4.021,11H8.036c0-5-1.568-8.5-4.993-11C7.937,1,12.833,4,13.811,11Z"},{calcSymbol:">",value1:"0",value2:"",suffix:"",prefix:"",iconName:"green_curve_right_top",color:"#22C72D",symbol:"M13.811,7h3.918L10.874,0,4.021,7H8.036c0,5-1.568,8.5-4.993,11C7.937,17,12.833,14,13.811,7Z"},{calcSymbol:"==",value1:"0",value2:"",suffix:"",prefix:"",iconName:"green_equal",color:" #22c72d",symbol:"M22.1,6.157H1.579A1.579,1.579,0,1,1,1.579,3H22.1a1.579,1.579,0,0,1,0,3.157ZM1.579,11.189H22.1a1.579,1.579,0,1,1,0,3.157H1.579a1.579,1.579,0,1,1,0-3.157Z"}]}]}};function setBarSymbols(e){let l=e.customConfig&&e.customConfig.customSymbols,a=e.dataset.find(o=>o.hasOwnProperty("source")),r=a?a.source:[];l&&l.length&&e.series.forEach((o,y)=>{if(o.type==="bar"){let s=l.filter(t=>t.seriesIndex===y),c=[],f=[];s&&s.length&&s.forEach(t=>{if(!r[t.dataIndex+1])return;let u=r[t.dataIndex+1][t.seriesIndex+1];for(let n=0;n<t.data.length;n++){let d=!1;try{d=confirmCondition(t.data[n],u)}catch{}if(d){let v=getMarkPointItem(t.data[n],t.dataIndex,u);c.push(v),f.includes(t.dataIndex)||f.push(t.dataIndex),console.log(" 有一个成立，跳过");break}}}),o.markPoint={data:c},byKeySetValue(o,"itemStyle,normal","color",t=>{if(!f.includes(t.dataIndex))return t.color})}})}function confirmCondition(condition,value=0){return condition.calcSymbol==="<>"?condition.value1<=value&&value<=condition.value2:eval(value+condition.calcSymbol+condition.value1)}function getMarkPointItem(e,l,a){return{coord:[l,a],symbolOffset:[0,20],symbol:"path://"+e.symbol,silent:!0,itemStyle:{color:e.color},value:(e.prefix||"")+a+(e.suffix||""),label:{position:"top",color:e.color}}}function byKeySetValue(e,l,a,r){isArray(e)?e.forEach(o=>{isHasAttribute(o,l,a,r)}):e&&isHasAttribute(e,l,a,r)}function isHasAttribute(obj,field,key,value){let fields=field.split(",");if(fields.length===1)obj[field]=value;else if(fields.length>1){let evalSt="obj.",has="hasOwnProperty(fields[i])";for(let i=0;i<fields.length;i++)if(i===0)obj.hasOwnProperty(fields[i])||(obj[fields[i]]={});else if(i>0){evalSt+=fields[i-1]+".";let is="!"+evalSt+has;if(eval(is)){let str=evalSt.substring(0,evalSt.length-1);eval(str+"[fields[i]]={}")}i===fields.length-1&&(evalSt=evalSt+fields[i]+"[key]=value",eval(evalSt))}}}function getType(e){return Object.prototype.toString.call(e)}function isArray(e){return getType(e)==="[object Array]"}setBarSymbols(option);
