let canvas=document.createElement("canvas"),mapChart=echarts.init(canvas,null,{width:4096,height:2048});mapChart.setOption({series:[{type:"map",map:"world",top:0,left:0,right:0,bottom:0,boundingCoords:[[-180,90],[180,-90]]}]}),option={title:{text:"点击地球获取该区域地图",textStyle:{color:"#fff"}},backgroundColor:"#7bc3ef",tooltip:{show:!0},visualMap:[{type:"continuous",seriesIndex:0,text:["scatter3D"],textStyle:{color:"#fff"},calculable:!0,max:3e3,inRange:{color:["#87aa66","#eba438","#d94d4c"]}}],globe:{baseTexture:mapChart,environment:new echarts.graphic.LinearGradient(0,1,1,1,[{offset:0,color:"#000000"},{offset:0,color:"#000000"},{offset:0,color:"#000000"}],!0),light:{main:{color:"#fff",intensity:1.2,shadow:!1,alpha:40,beta:-30},ambient:{intensity:.5}},viewControl:{alpha:30,beta:160,autoRotate:!0,autoRotateAfterStill:10,distance:240}},series:[{name:"lines3D",type:"lines3D",coordinateSystem:"globe",effect:{show:!0},blendMode:"lighter",lineStyle:{width:2},data:[],silent:!1}]};for(let t=0;t<500;t++)option.series[0].data=option.series[0].data.concat(rodamData());function rodamData(){let t="随机点"+Math.random().toFixed(5)*1e5,e=105.18,n=Math.random()*360-180,a=37.51,o=Math.random()*180-90;return{coords:[[n,o],[e,a]],value:(Math.random()*3e3).toFixed(2)}}$('<canvas id="sMap" style="position: absolute; top: 0; left: 0; width: 100%; height: calc(100% + 30px); background: #333; z-index: -1"></canvas>').appendTo($("#chart-panel")),$("#sMap").on("dblclick",()=>{$("#sMap").css("z-index","-1")});let sMap=echarts.init(document.getElementById("sMap"),null,{width:$("#sMap").width(),height:$("#sMap").height()});mapChart.on("click",function(t){let e=t.name,n="https://raw.githubusercontent.com/Mying666/EC-JSON/gh-pages/json/"+e+".json";$("#sMap").css("z-index","999"),sMap.showLoading(),$.getJSON(n,a=>{let o=[];a.features.forEach(i=>{o.push({name:i.properties.name,value:(Math.random()*3e3).toFixed(2)})}),echarts.registerMap(e,a),sMap.setOption({title:{text:"双击返回上一层",textStyle:{color:"#fff"}},visualMap:[{show:!1,type:"continuous",seriesIndex:0,text:["scatter3D"],textStyle:{color:"#fff"},calculable:!0,max:3e3,inRange:{color:["#87aa66","#eba438","#d94d4c"]}}],series:[{type:"map",map:e,zoom:1,top:0,left:0,right:0,bottom:0,data:o}]}),sMap.hideLoading()})});
