function getImgData(l,e,n={x:0,y:0}){return new Promise(s=>{const o=document.createElement("canvas"),a=o.getContext("2d"),r=new Image;r.crossOrigin="";const t=2*e;r.onload=function(){o.width=t,o.height=t,a.clearRect(0,0,t,t),a.save(),a.beginPath(),a.arc(e,e,e,0,2*Math.PI),a.clip(),a.drawImage(r,n.x-e,n.y-e,t,t,0,0,t,t),a.restore(),s(o.toDataURL("image/png",1))},r.src=l})}let p1=getImgData("https://i.loli.net/2018/12/11/5c0f26233b7c9.jpeg",60,{x:150,y:80}),p2=getImgData("https://i.loli.net/2019/03/29/5c9e005315d58.jpg",45,{x:70,y:70}),p3=getImgData("https://i.loli.net/2018/12/11/5c0f5d927472d.jpeg",300,{x:400,y:500});var data=[{fixed:!0,x:100,y:myChart.getHeight()/2,symbolSize:100,id:"0",name:"left"},{fixed:!0,x:myChart.getWidth()-100,y:myChart.getHeight()/2,symbolSize:100,id:"1",name:"right"}],edges=[];let i=2;do i%4===0&&(edges.push({source:"0",target:i,value:i}),edges.push({source:i,target:i+1,value:i}),edges.push({source:i+1,target:1,value:i}),edges.push({source:0,target:i+2,value:i}),edges.push({source:i+2,target:1,value:i}),edges.push({source:0,target:i+3,value:i}),edges.push({source:i+3,target:1,value:i})),data.push({id:i++,symbolSize:i%3===0?60:i%3===1?70:80,name:i,legendHoverLink:!0});while(i<52);option={series:[{type:"graph",layout:"force",animation:!1,data,force:{repulsion:800,edgeLength:[80,200],layoutAnimation:!0},focusNodeAdjacency:!0,edges,edgeLabel:{normal:{show:!0,formatter:"{c}",backgroundColor:"red",color:"#ffffff",padding:[2,5],borderRadius:4}},lineStyle:{normal:{color:"#8DBFFF",type:"dashed",opacity:1}}}]},Promise.all([p1,p2,p3]).then(l=>{let e=0;do data[e++].symbol=`image://${l[e%3]}`;while(e<52);myChart.setOption(option)});
