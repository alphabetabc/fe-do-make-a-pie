option={title:{text:"审核流程 "},tooltip:{},animationDurationUpdate:1500,animationEasingUpdate:"quinticInOut",series:[{type:"graph",layout:"none",symbolSize:50,roam:!0,label:{show:!0},edgeSymbol:["circle","arrow"],edgeSymbolSize:[4,8],edgeLabel:{fontSize:10},data:[],links:[],lineStyle:{color:"#12b5d0",opacity:.9,width:1,curveness:0,type:"dashed"},itemStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,1,0,[{offset:0,color:"#157eff"},{offset:1,color:"#35c2ff"}])}}}]};var end=[{name:"结束",x:100,y:0}],start=[{name:"开始",x:100,y:100}],iList=[],eList=[],data=[{nodeDo:"初审",nodeSort:1,nodeTypeName:"并行",userRoleName:"副经理"},{nodeDo:"终审",nodeSort:1,nodeTypeName:"并行",userRoleName:"经理"},{nodeDo:"复审",nodeSort:2,nodeTypeName:"分行",userRoleName:"主管"},{nodeDo:"终审",nodeSort:3,nodeTypeName:"并行",userRoleName:"刘副总经理"},{nodeDo:"终审",nodeSort:3,nodeTypeName:"并行",userRoleName:"张副总经理"},{nodeDo:"终审",nodeSort:3,nodeTypeName:"并行",userRoleName:"李副总经理"},{nodeDo:"复审",nodeSort:4,nodeTypeName:"分行",userRoleName:"总经理"}];function fun_Ilist(e){iList.map(o=>{obj={source:"",target:""},newData[o].nodeSort===newData[e].nodeSort-1&&(obj.source=newData[o].name,obj.target=newData[e].name,option.series[0].links=[...option.series[0].links,obj])})}function fun_Elist(e){eList.map(o=>{obj.source=newData[o].name,obj.target=newData[e].name})}var newData=[...start,...data,...end];for(let e=0;e<newData.length;e++){for(let o in newData[e])o==="userRoleName"&&(newData[e].name=newData[e][o],newData[e].x=100,newData[e].y=100);var obj={source:"",target:""};e===0&&eList.push(e),e>0&&(newData[e].nodeTypeName==="并行"&&e==newData[e].nodeSort?(iList.push(e),newData[e].x=newData[e-1].x+100,newData[e].y=newData[e].y+100*newData[e].nodeSort,obj.source=newData[e-1].name,obj.target=newData[e].name):newData[e].nodeTypeName==="并行"&&newData[e].nodeSort<e?(newData[e].x=newData[e-1].x+100,newData[e].y=newData[e].y+100*newData[e].nodeSort,fun_Elist(e),newData[e].nodeSort-1===newData[e-1].nodeSort&&(obj.source=newData[e-1].name,obj.target=newData[e].name),iList.push(e)):newData[e].nodeSort?(eList.push(e),newData[e].x=100,newData[e].y=newData[e].y+100*newData[e].nodeSort,obj.source=newData[e-1].name,obj.target=newData[e].name,newData[e].nodeSort-1===newData[e-1].nodeSort&&(obj.source=newData[e-1].name,obj.target=newData[e].name),fun_Ilist(e)):(newData[e].x=100,newData[e].y=newData[e].y+100*newData[e-1].nodeSort+200,obj.source=newData[e-1].name,obj.target=newData[e].name)),option.series[0].links.push(obj)}option.series[0].data=newData;
