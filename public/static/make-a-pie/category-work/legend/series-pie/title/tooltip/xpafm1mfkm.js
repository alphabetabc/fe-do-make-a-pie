data=[{name:"通讯接口测试",value:100},{name:"第三方接口",value:75},{name:"计算分摊结果",value:50},{name:"机票价格",value:25}],arrName=getArrayValue(data,"name"),arrValue=getArrayValue(data,"value"),sumValue=133.33,objData=array2obj(data,"name"),optionData=getData(data);function getArrayValue(e,t){var t=t||"value",a=[];return e&&e.forEach(function(r){a.push(r[t])}),a}function array2obj(e,o){for(var t={},a=0;a<e.length;a++)t[e[a][o]]=e[a];return t}function inr(e){return 35-e*10+"%"}function outr(e){return 40-e*10+"%"}function getData(e){var o={series:[],yAxis:[]};for(let t=0;t<e.length;t++)o.series.push({name:"",type:"pie",clockWise:!0,hoverAnimation:!1,radius:[inr(t),outr(t)],center:["50%","55%"],label:{show:!1},itemStyle:{borderRadius:100,label:{show:!1},labelLine:{show:!1},borderWidth:5},data:[{value:e[t].value,name:e[t].name},{value:sumValue-e[t].value,name:"",itemStyle:{color:"rgba(0,0,0,0)",borderWidth:0},tooltip:{show:!1},hoverAnimation:!1}]}),o.series.push({name:"",type:"pie",silent:!0,z:1,clockWise:!0,hoverAnimation:!1,radius:[inr(t),outr(t)],center:["50%","55%"],label:{show:!1},itemStyle:{borderRadius:100,label:{show:!1},labelLine:{show:!1},borderWidth:5},data:[{value:7.5,itemStyle:{color:"#F0F0F0",borderWidth:0},tooltip:{show:!1},hoverAnimation:!1},{value:2.5,name:"",itemStyle:{color:"rgba(0,0,0,0)",borderWidth:0},tooltip:{show:!1},hoverAnimation:!1}]});return o}option={backgroundColor:"#fff",title:{text:"历史调用规则成功次数Top5",top:"30%",left:"25%"},legend:{show:!0,icon:"none",top:"center",top:"35.5%",left:"29%",data:arrName,width:300,padding:[0,16],itemGap:29,formatter:function(e){return"{title|"+e+"} {value|"+objData[e].value+"次}"},textStyle:{rich:{title:{fontSize:14,lineHeight:20,color:"rgb(0, 0, 0)",width:130,fontWeight:"bold"},value:{fontSize:14,lineHeight:20,width:40,color:"#495057",align:"right"}}}},tooltip:{show:!0,trigger:"item",formatter:"{b}:{c}"},color:["#4A9DEB","#4A9DEB","#4A9DEB","#4A9DEB","#4A9DEB"],xAxis:[{show:!1}],series:optionData.series};
