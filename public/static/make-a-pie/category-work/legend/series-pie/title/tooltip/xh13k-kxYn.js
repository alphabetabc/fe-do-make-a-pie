var data=[{name:"计算机科学与技术",value:5394},{name:"物联网工程",value:4584},{name:"土木工程",value:3231}];function array2obj(e,a){for(var t={},r=0;r<e.length;r++)t[e[r][a]]=e[r];return t}var nameValues=data.map(e=>e.name),valValues=data.map(e=>e.value),sumValue=valValues.reduce(function(e,a){return e+a}),objData=array2obj(data,"name");console.log(sumValue);var series=[],calcRateObjs=[];for(let e=0;e<data.length;e++)series.push({name:"",type:"pie",clockWise:!1,hoverAnimation:!1,radius:[73-e*15+"%",68-e*15+"%"],center:["50%","50%"],label:{show:!1},data:[{value:data[e].value,name:data[e].name},{value:sumValue-data[e].value,name:"",itemStyle:{color:"rgba(0,0,0,0)",borderWidth:0},tooltip:{show:!1},hoverAnimation:!1}]}),calcRateObjs.push({name:data[e].name,value:(data[e].value/sumValue*100).toFixed(2)+"%"});option={backgroundColor:"rgb(43, 51, 59)",title:{show:!0,text:"专业人数统计"},legend:{show:!0,icon:"circle",top:"13.5%",bottom:"53%",left:"28.5%",data:nameValues,width:40,padding:[0,220],itemGap:46,formatter:function(e){var a=calcRateObjs.find(function(t){if(e===t.name)return t});return"{title|"+e+"}: {value|"+objData[e].value+"} {value|("+a.value+")}"},textStyle:{rich:{title:{fontSize:14,lineHeight:40,color:"rgb(0, 178, 246)"},value:{fontSize:18,lineHeight:20,color:"rgb(207, 220, 40)"}}}},tooltip:{show:!0,trigger:"item",formatter:"{a}<br>{b}:{c}({d}%)"},color:["rgb(9,187,247)","rgb(184,254,165)","rgb(253,218,23)","rgb(252,152,12)"],xAxis:[{show:!1}],series};
