let moduleDependencies={admin:[],apush:[],article:["xdevApi","lark2","atit","buc","zsearch"],atit:["xdevApi","tagRelation","userStatistics","lark2","buc","category","socialSystem","notification","apush","admin","theme","themeRelation","pointFlow","draft"],bet:["userStatistics","basement"],booth:["boothRelation","userBehavior"],boothRelation:[],buc:[],cache_or_config:[],category:[],college:["cache_or_config","atit","xdevApi","themeRelation"],comment:["interaction","feedback","buc","notification","dingtalk","theme","basement","xdevApi","question","peerBonus","admin"],converter:[],dingtalk:["cache_or_config","epaas","theme","dingtalkMsgLog"],draft:["xdevApi","converter","lark2"],epaas:[],feedback:["buc","notification","theme","productCategory","pointFlow","userStatistics","xdevApi","product","dingtalk","basement","interaction","comment"],gift:["userStatistics","pointFlow","basement"],interaction:[],lark:[],lark2:["product","lark","feedback"],linke:["cache_or_config"],notification:["atit","qa","basement","pointFlow","themeRelation","theme","apush","buc"],peerBonus:["userBehavior","interaction","xdevApi","buc","epaas"],pointFlow:["userStatistics","buc"],problemSources:["category"],product:["theme"],productCategory:["theme","product"],question:["category","tagRelation","userBehavior","admin","product","theme","interaction","comment","productCategory","cache_or_config","buc","zsearch"],socialSystem:["userStatistics"],tagRelation:[],task:[],theme:["productCategory","tagRelation","themeModule","themeRelation","product","category","userBehavior","atit","xdevApi","themeStudyGuideSection","buc","admin"],themeRelation:["buc","notification","pointFlow","userStatistics","theme","xdevApi","atit","dingtalk","qa"],themeStudyGuideSection:["category"],tool:["userTool"],userBehavior:[],userStatistics:["buc","gift","pointFlow","task","notification","themeRelation","feedback","bet","basement","atit","kbaseUgcStatistics","xdevApi","cache_or_config","socialSystem"],userTool:["tool"],xdevApi:["converter"],zsearch:["queryPlanStrategy","comment"]},data={nodes:[],links:[]};const defaultSymbolSize=50,color1="#006acc",color2="#ff7d18",color3="#10a050";for(var[key,modules]of Object.entries(moduleDependencies))data.nodes.push({name:key,symbolSize:defaultSymbolSize,category:0});for(var[key,modules]of Object.entries(moduleDependencies))modules.length>0&&modules.forEach(t=>{data.links.push({source:key,target:t,name:"depend"}),data.nodes.forEach(o=>{o.name===t&&(o.symbolSize+=8)})});data.nodes.forEach(e=>{e.category===0&&(e.itemStyle={color:color1}),e.symbolSize===0&&(e.symbolSize=defaultSymbolSize)}),data.links.forEach(e=>{e.label={align:"center",fontSize:12},e.name==="depend"&&(e.lineStyle={color:color1})});let categories=[{name:"模块",itemStyle:{color:color1}}];option={title:{text:"知识图谱"},legend:[{data:categories.map(e=>e.name)}],series:[{type:"graph",layout:"force",symbolSize:defaultSymbolSize,draggable:!0,roam:!0,focusNodeAdjacency:!0,categories,edgeSymbol:["","arrow"],edgeLabel:{normal:{show:!0,textStyle:{fontSize:20},formatter(e){return e.data.name}}},label:{show:!0},force:{repulsion:2e3,edgeLength:120},data:data.nodes,links:data.links}]};
