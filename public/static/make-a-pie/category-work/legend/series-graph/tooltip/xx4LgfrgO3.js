let data=[{id:1,personNo:"10020160141568900",focusName:"唐孟先",contactName:"王贵元",message:"13948572295",relation:"通联关系"},{id:2,personNo:"10020160141568900",focusName:"唐孟先",contactName:"谢飞",message:"乾隆首府B12栋",relation:"同户关系"},{id:3,personNo:"10020160141568900",focusName:"唐孟先",contactName:"陈诚",message:"乾隆首府B12栋458室",relation:"同住关系"},{id:4,personNo:"10020160141568900",focusName:"唐孟先",contactName:"陈诚",message:"18455294052",relation:"通联关系"},{id:5,personNo:"10020160141568900",focusName:"唐孟先",contactName:"张华",message:"铁道学院-开福寺",relation:"同行关系"}],seriesList=[],seriesData=[],categories=[],linksData=[],legendData=[];data.forEach((e,a)=>{seriesList.indexOf(e.focusName)===-1&&seriesList.push(e.focusName),seriesList.indexOf(e.contactName)===-1?(seriesList.push(e.contactName),seriesData.push({name:e.contactName,category:e.relation,message:e.message,draggable:!0}),linksData.push({source:e.focusName,target:e.contactName,value:e.relation})):(seriesList.push(e.contactName+" "),seriesData.push({name:e.contactName+" ",category:e.relation,message:e.message,draggable:!0}),linksData.push({source:e.focusName,target:e.contactName+" ",value:e.relation})),categories.indexOf(e.relation)===-1&&legendData.push(e.relation),categories.push({name:e.relation})}),seriesData.push({name:data[0].focusName,draggable:!0,category:data[0].category}),console.log(seriesList),console.log(seriesData),console.log(categories),console.log(linksData),console.log(legendData),option={color:["#199855","#FF8C40","#1EB0C1","#C11E5B","#0E4583"],tooltip:{trigger:"item",formatter:e=>{console.log(e);let{data:a,dataType:o}=e;if(o==="node"){let t=a.message?`: ${a.message}`:"";return a.name+t}return""},backgroundColor:"#ff7f50",textStyle:{color:"#fff"}},animationDurationUpdate:1500,animationEasingUpdate:"quinticInOut",label:{normal:{show:!0,textStyle:{fontSize:12}}},legend:{right:50,top:50,show:!0,data:legendData,textStyle:{}},series:[{type:"graph",layout:"force",symbolSize:45,focusNodeAdjacency:!0,roam:!0,categories,label:{normal:{show:!0,textStyle:{fontSize:12}}},force:{repulsion:1e3},edgeSymbolSize:[4,50],edgeLabel:{normal:{show:!0,textStyle:{fontSize:10},formatter:"{c}"}},data:seriesData,links:linksData,lineStyle:{normal:{opacity:.9,width:1,curveness:0}}}]};
