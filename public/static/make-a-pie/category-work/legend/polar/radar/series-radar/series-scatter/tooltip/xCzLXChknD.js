var maxSpeed=2.5;const conf={radius_step:.02,angle_step:3};var srcData=[[2,225,.9],[2.3,282,.85],[1.5,176,.5],[.5,0,.3],[1.5,22.5,.01],[1,45,.03],[2,45,.02],[1.5,210,.7],[1,195,.6],[2,330,.3],[2,120,.2],[1.7,300,.8],[1,270,.5]],data=interpolation(srcData);console.log(data.length);function interpolation(a){for(var n=.6,e=[],t=0;t<a.length;t++){for(var l=[],o=0;o<a.length;o++){var r=a[t][0],s=a[t][1],u=a[o][0],h=a[o][1],f=Math.abs(u-r)*30,g=Math.min(Math.abs(h-s),360-Math.abs(h-s))*.5,p=Math.sqrt(Math.pow(g,2)+Math.pow(f,2));l.push(1/(1+Math.pow(p,n)))}e.push(l)}e=math.inv(e);for(var i=[],v=conf.radius_step;v<=maxSpeed;v+=conf.radius_step)for(var m=0;m<360;m+=conf.angle_step/v){for(var c=0,d=[],b=[],t=0;t<a.length;t++){var w=a[t][0],x=a[t][1],y=a[t][2],f=Math.abs(v-w)*30,g=Math.min(Math.abs(m-x),360-Math.abs(m-x))*.5,p=Math.sqrt(Math.pow(g,2)+Math.pow(f,2));d.push(1/(1+Math.pow(p,n))),b.push([y])}var M=[];M.push(d);var L=math.multiply(math.multiply(M,e),b);c=L[0][0],i.push([v,m,c])}return i}option={legend:{data:["Punch Card"],left:"right"},polar:{},tooltip:{formatter:function(a){return"AQI="+Math.ceil(500*a.value[2])+"<br>风向="+Math.ceil(100*a.value[1])/100+"<br>风速="+Math.ceil(100*a.value[0])/100}},angleAxis:{type:"value",min:0,max:360,splitLine:{show:!1,lineStyle:{color:"#999",type:"dashed"}},axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1}},radiusAxis:{type:"value",min:0,max:maxSpeed,axisLine:{show:!0},splitLine:{show:!1},zlevel:1e4,z:1e4},radar:{shape:"",radius:"80%",name:{textStyle:{color:"black",borderRadius:3,padding:[3,5]}},indicator:[{name:"北",max:maxSpeed},{name:"北东北",max:maxSpeed},{name:"东北",max:maxSpeed},{name:"东东北",max:maxSpeed},{name:"东",max:maxSpeed},{name:"东东南",max:maxSpeed},{name:"东南",max:maxSpeed},{name:"南东南",max:maxSpeed},{name:"南",max:maxSpeed},{name:"南西南",max:maxSpeed},{name:"西南",max:maxSpeed},{name:"西西南",max:maxSpeed},{name:"西",max:maxSpeed},{name:"西西北",max:maxSpeed},{name:"西北",max:maxSpeed},{name:"北西北",max:maxSpeed}],zlevel:1e4,z:1e4},series:[{name:"Punch Card",type:"scatter",coordinateSystem:"polar",symbolSize:function(a){return 8},data,animationDelay:function(a){return a*5},itemStyle:{color:function(a){var n=a.value[2]*500;return n>500&&(n=500),getAqiColor(n)}}},{name:"预算 vs 开销（Budget vs spending）",type:"radar",data:[]}]};function getAqiColor(a){var n=["#ccc","rgb(0,228,0)","rgb(255,255,0)","rgb(255,126,0)","rgb(255,0,0)","rgb(153,0,76)","rgb(126,0,35)"],e=[0,50,100,150,200,300,500],t=[204,0,255,255,255,153,126],l=[204,228,255,126,0,0,0],o=[204,0,0,0,0,76,35];if(a>=e[e.length-1])return n[e.length-1];if(a<=e[0])return n[0];for(var r=0;r<n.length;r++){if(e[r]==a)return n[r];if(a>e[r]&&a<e[r+1]){var s=(t[r+1]-t[r])/(e[r+1]-e[r])*(a-e[r])+t[r],u=(l[r+1]-l[r])/(e[r+1]-e[r])*(a-e[r])+l[r],h=(o[r+1]-o[r])/(e[r+1]-e[r])*(a-e[r])+o[r];return"rgb("+s+","+u+","+h+")"}}return"white"}const _gConfig={};var COLOR=["#ccc","rgb(0,228,0)","rgb(255,255,0)","rgb(255,126,0)","rgb(255,0,0)","rgb(153,0,76)","rgb(126,0,35)"],AQI=[0,50,100,150,200,300,1e4];_gConfig.AQI_LEVEL=[0,50,100,150,200,300,400,500];function getIAQIColor(a,n,e){var t=getAQILevel(n);return typeof t.color>"u"?COLOR[0]:t.color}function getAQILevel(a){for(var n={},e=_gConfig.AQI_LEVEL,t=0;t<e.length;t++)if(a<=e[t]){t>6?n.color=COLOR[6]:n.color=COLOR[t];break}return n.color=="#ccc"&&(n.color="#00E400"),n}
