var color=new echarts.graphic.LinearGradient(0,1,1,1,[{offset:0,color:"rgba(205,133,63, .3)"},{offset:.5,color:"rgba(205,133,63, .5)"},{offset:1,color:"rgba(205,133,63, 1)"}]),val=60,fontColor=val>30?"red":"green";const sourceData=[{name:"10",value:10},{name:"20",value:10},{name:"30",value:10},{name:"40",value:10},{name:"50",value:10},{name:"60",value:10},{name:"70",value:10},{name:"80",value:10},{name:"90",value:10},{name:"100",value:10},{name:"",value:90}],total=sourceData.reduce((e,a)=>(e+=a.value,e),0),inSplitValue=Math.floor(total/400),outSplitValue=Math.floor(total/400),valueTotal=total+inSplitValue*sourceData.length;function getTextAngle(e,a){return e=e+a,console.log("currentAngle",e),90-e}const outValueData=sourceData.reduce((e,a,s)=>{const l=e.reduce((t,r)=>(t+=r.value,t),0),o=360*(l/valueTotal),n=360*(a.value/valueTotal)/2;return e.push({name:a.name,value:a.value,label:{color:"rgb(160, 60, 60)",position:"inside",align:"center",rotate:getTextAngle(o,n)}},{name:"",value:outSplitValue,itemStyle:{color:"transparent",opacity:0},label:{show:!1},labelLine:{show:!1}}),e},[]);option={backgroundColor:"#fff",title:{text:val+"%",x:"center",y:"50%",textStyle:{fontSize:35,color:fontColor},subtext:"您的计划可行性",subtextStyle:{fontSize:20}},series:[{type:"gauge",startAngle:180,endAngle:0,center:["50%","60%"],min:5,max:100,splitNumber:9,axisLine:{roundCap:!0,lineStyle:{width:16,color:[[1,color]]}},pointer:{length:"10%",width:10,offsetCenter:[0,"-58%"],itemStyle:{color:"orange"}},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1,formatter:e=>{if(e)return e},color:"orange"},detail:{show:!1},data:[{value:val}]},{type:"pie",radius:"45%",animation:!1,color:["#fff","#fff"],startAngle:180,endAngle:0,silent:!0,label:{normal:{position:"center"}},labelLine:{show:!1},center:["50%","60%"],data:[{value:50,itemStyle:{shadowColor:"rgba(205,133,63, .3)",shadowBlur:5,shadowOffsetY:-5}},{value:50}]},{type:"pie",startAngle:180,endAngle:0,radius:["40%","80%"],center:["50%","60%"],itemStyle:{opacity:1,color:"transparent"},label:{show:!0,formatter(e){return"{a|"+e.data.name+"}"},rich:{a:{color:"#dedede"}}},labelLine:{show:!1},data:outValueData}]};
