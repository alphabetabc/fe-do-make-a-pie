var mainData=[];mainData.push({name:"充值收入",value:342305,prevalue:382305,hismax:455898}),mainData.push({name:"包月收入",value:1332042,prevalue:1552305,hismax:1896900}),mainData.push({name:"道具消费",value:305652,prevalue:323305,hismax:446783}),mainData.push({name:"新增用户",value:31861,prevalue:30805,hismax:77598}),mainData.push({name:"活跃用户",value:114553,prevalue:120105,hismax:145898});function createSeries(r){for(var u=[],o={normal:{position:"center",formatter:function(t){return t.name=="other"?"":t.value+`
`+t.name},textStyle:{fontStyle:"normal",fontWeight:"normal",fontSize:18}}},n={normal:{show:!1}},a={normal:{color:"#ccc"}},e=0;e<r.length;e++){var l=r[e].value>r[e].prevalue;u.push({type:"pie",center:[e*20+10+"%","30%"],radius:["15%","18%"],label:o,data:[{name:"other",value:r[e].hismax-r[e].value,itemStyle:a},{name:r[e].name,value:r[e].value,prevalue:r[e].prevalue}],markPoint:{data:[{symbol:"triangle",symbolSize:15,symbolRotate:l?0:180,itemStyle:{normal:{color:l?"red":"green"}},name:r[e].name,value:((r[e].value-r[e].prevalue)*100/r[e].prevalue).toFixed(2)+"%",x:myChart.getWidth()*(e+.5)/5-15,y:myChart.getHeight()*.45+15,label:{normal:{show:!0,position:"right",formatter:function(t){return t.value},textStyle:{color:l?"red":"green"}}}}]}})}return u}option={title:{text:"关键指标",subtext:"这是你最关心的数据了吧？",x:"left"},toolbox:{show:!0,feature:{dataView:{show:!0,readOnly:!0},restore:{show:!0},saveAsImage:{show:!0}}},series:createSeries(mainData)};
