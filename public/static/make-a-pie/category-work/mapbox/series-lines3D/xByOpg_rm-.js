mapboxgl.accessToken="pk.eyJ1IjoicGlzc2FuZyIsImEiOiJjaXBnaGYxcW8wMDFodWNtNDc4NzdqMWR2In0.4XUWeduDltiCbsIiS-U8Lg",$.get("/asset/get/s/data-1497886591658-rJOKkdH7W.txt",function(l){for(var d=decodeFlightPathData(l),a=[],i=0;i<4;i++)a=a.concat(d.map(function(n){return{name:n.name,coords:n.coords.map(function(c){return c.slice()})}}));myChart.setOption({mapbox:{center:[0,51.5],zoom:8,pitch:60,altitudeScale:5,style:"mapbox://styles/mapbox/dark-v9",postEffect:{enable:!0,bloom:{intensity:.4}}},series:[{type:"lines3D",coordinateSystem:"mapbox",effect:{show:!0,constantSpeed:40,trailWidth:2,trailLength:.15,trailOpacity:1},blendMode:"lighter",polyline:!0,lineStyle:{width:1,color:"rgb(50, 60, 170)",opacity:.1},data:a}]}),window.addEventListener("keydown",function(){myChart.dispatchAction({type:"lines3DToggleEffect",seriesIndex:0})})});function decodePolyline(l,d){for(var a=0,i=0,n=0,c=[],o=0,t=0,e=null,s,r,u=Math.pow(10,d||5);a<l.length;){e=null,o=0,t=0;do e=l.charCodeAt(a++)-63,t|=(e&31)<<o,o+=5;while(e>=32);s=t&1?~(t>>1):t>>1,o=t=0;do e=l.charCodeAt(a++)-63,t|=(e&31)<<o,o+=5;while(e>=32);r=t&1?~(t>>1):t>>1,i+=s,n+=r,c.push([n/u,i/u])}return c}function decodeFlightPathData(l){var d=l.split(`
`),a=[];return d.forEach(function(i){if(!!i){var n=i.split("	"),c=n[2].split("").map(function(e){return decodePolyline(e,5)}),o=n[3].split("").map(function(e){return decodePolyline(e,1)}),t=[];c.forEach(function(e,s){for(var r=1;r<e.length;r++){var u=c[s][r-1],h=o[s][r-1],p=c[s][r],f=o[s][r];t.push([u[0],u[1],h[0]],[p[0],p[1],f[0]])}}),a.push({name:n[0],country:n[1],coords:t})}}),a}
