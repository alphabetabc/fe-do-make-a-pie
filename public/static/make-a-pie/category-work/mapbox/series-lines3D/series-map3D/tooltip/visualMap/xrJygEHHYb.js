$.getJSON("/asset/get/s/data-1504165783912-rylo1HSFb.json",function(t){mapboxgl.accessToken="pk.eyJ1IjoiYWFyb242NjYiLCJhIjoiY2o2M2NmZmJ4MWc0ZDJxbnI3dmZ5OXB2MSJ9.T3trJ5Tu66Kw-w-1ELpzBA";var i="mapbox://styles/mapbox/dark-v9",a=[120.30327558517455,31.55755415024492];echarts.registerMap("buildings",t),myChart.hideLoading();var o=t.features.map(function(e){return{name:e.properties.name,value:e.properties.height,height:+e.properties.height*10+.1,emphasis:{label:{show:!0}}}}),r=t.features.map(function(e){return{name:e.properties.name,value:e.properties.height,coords:e.geometry.coordinates}});myChart.setOption({visualMap:{show:!1,min:2,max:35,inRange:{color:["#696868","#594e76","#635177","#7b5675","#94596d","#da6b58","#ff6029","#f23e19","#e42e16"]}},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)",triggerOn:"mousemove",position:[10,10]},mapbox:{center:a,zoom:16,pitch:50,bearing:-10,style:i,shading:"realistic",postEffect:{enable:!0,SSAO:{enable:!0,intensity:1.3,radius:5,quality:"low"},depthOfField:{enable:!1,blurRadius:1,focalDistance:90,quality:"low"}},light:{main:{intensity:.5,shadow:!1,alpha:10,beta:-10},ambient:{intensity:.2},ambientCubemap:{texture:"./img_mapbox/sunlight.hdr",exposure:.5,diffuseIntensity:.5,specularIntensity:2}},zlevel:10},series:[{type:"lines3D",coordinateSystem:"mapbox",effect:{show:!0,constantSpeed:24,trailWidth:2,trailLength:.5,trailOpacity:1,trailColor:"#ff8022",spotIntensity:2},lineStyle:{width:1,color:"#ff8022",opacity:.1},blendMode:"realistic",polyline:!0,data:r,zlevel:-99},{type:"map3D",silent:!1,name:"buildings",coordinateSystem:"mapbox",map:"buildings",data:o,shading:"realistic",instancing:!0,realisticMaterial:{metalness:0,roughness:.5},label:{show:!1,distance:10,formatter:"{b}: {c}",textStyle:{color:"#272727",borderWidth:0,fontFamily:"sans-serif",fontWeight:"lighter",fontSize:12}},itemStyle:{opacity:1},emphasis:{label:{show:!0,distance:2,formatter:"{b}: {c}",textStyle:{color:"#272727",borderWidth:0,fontFamily:"sans-serif",fontWeight:"lighter",fontSize:12}},itemStyle:{opacity:1,borderWidth:1,borderColor:"#ff8022"}},zlevel:-100}]})});
