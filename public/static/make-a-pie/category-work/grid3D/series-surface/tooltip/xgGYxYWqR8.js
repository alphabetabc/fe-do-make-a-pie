let selectedIndex="",hoveredIndex="";option=getPie3D([{name:"cc",value:47,itemStyle:{color:"#f77b66"}},{name:"aa",value:44,itemStyle:{color:"#3edce0"}},{name:"bb",value:32,itemStyle:{color:"#f94e76"}},{name:"ee",value:16,itemStyle:{color:"#018ef1"}},{name:"dd",value:23,itemStyle:{color:"#9e60f9"}}],.59);function getParametricEquation(t,a,o,l,s,r){const f=(t+a)/2,p=t*Math.PI*2,d=a*Math.PI*2,e=f*Math.PI*2;t===0&&a===1&&(o=!1),s=typeof s<"u"?s:1/3;const h=o?Math.cos(e)*.1:0,c=o?Math.sin(e)*.1:0,m=l?1.05:1;return{u:{min:-Math.PI,max:Math.PI*3,step:Math.PI/32},v:{min:0,max:Math.PI*2,step:Math.PI/20},x(n,u){return n<p?h+Math.cos(p)*(1+Math.cos(u)*s)*m:n>d?h+Math.cos(d)*(1+Math.cos(u)*s)*m:h+Math.cos(n)*(1+Math.cos(u)*s)*m},y(n,u){return n<p?c+Math.sin(p)*(1+Math.cos(u)*s)*m:n>d?c+Math.sin(d)*(1+Math.cos(u)*s)*m:c+Math.sin(n)*(1+Math.cos(u)*s)*m},z(n,u){return n<-Math.PI*.5?Math.sin(n):n>Math.PI*2.5?Math.sin(n)*r*.1:Math.sin(u)>0?1*r*.1:-1}}}function getPie3D(t,a){const o=[];let l=0,s=0,r=0;const f=[],p=typeof a<"u"?(1-a)/(1+a):1/3;for(let e=0;e<t.length;e+=1){l+=t[e].value;const h={name:typeof t[e].name>"u"?`series${e}`:t[e].name,type:"surface",parametric:!0,wireframe:{show:!1},pieData:t[e],pieStatus:{selected:!1,hovered:!1,k:p}};if(typeof t[e].itemStyle<"u"){const{itemStyle:c}=t[e];typeof t[e].itemStyle.color<"u"&&(c.color=t[e].itemStyle.color),typeof t[e].itemStyle.opacity<"u"&&(c.opacity=t[e].itemStyle.opacity),h.itemStyle=c}o.push(h)}console.log(o);for(let e=0;e<o.length;e+=1)r=s+o[e].pieData.value,o[e].pieData.startRatio=s/l,o[e].pieData.endRatio=r/l,o[e].parametricEquation=getParametricEquation(o[e].pieData.startRatio,o[e].pieData.endRatio,!1,!1,p,o[e].pieData.value===o[0].pieData.value?35:10),s=r,f.push(o[e].name);const d={tooltip:{formatter:e=>e.seriesName!=="mouseoutSeries"?`${e.seriesName}<br/><span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:${e.color};"></span>${d.series[e.seriesIndex].pieData.value}`:""},xAxis3D:{min:-1,max:1},yAxis3D:{min:-1,max:1},zAxis3D:{min:-1,max:1},grid3D:{show:!1,boxHeight:5,top:"-20%",viewControl:{alpha:35,rotateSensitivity:1,zoomSensitivity:0,panSensitivity:0,autoRotate:!0,distance:150},postEffect:{enable:!1,bloom:{enable:!0,bloomIntensity:.1},SSAO:{enable:!0,quality:"medium",radius:2}}},series:o};return d}myChart.on("mouseover",function(t){let a,o,l,s,r,f;hoveredIndex!==t.seriesIndex&&(hoveredIndex!==""&&(a=option.series[hoveredIndex].pieStatus.selected,o=!1,l=option.series[hoveredIndex].pieData.startRatio,s=option.series[hoveredIndex].pieData.endRatio,r=option.series[hoveredIndex].pieStatus.k,f=option.series[hoveredIndex].pieData.value===option.series[0].pieData.value?35:10,option.series[hoveredIndex].parametricEquation=getParametricEquation(l,s,a,o,r,f),option.series[hoveredIndex].pieStatus.hovered=o,hoveredIndex=""),t.seriesName!=="mouseoutSeries"&&(a=option.series[t.seriesIndex].pieStatus.selected,o=!0,l=option.series[t.seriesIndex].pieData.startRatio,s=option.series[t.seriesIndex].pieData.endRatio,r=option.series[t.seriesIndex].pieStatus.k,option.series[t.seriesIndex].parametricEquation=getParametricEquation(l,s,a,o,r,option.series[t.seriesIndex].pieData.value+5),option.series[t.seriesIndex].pieStatus.hovered=o,hoveredIndex=t.seriesIndex),myChart.setOption(option))}),myChart.on("globalout",function(){hoveredIndex!==""&&(isSelected=option.series[hoveredIndex].pieStatus.selected,isHovered=!1,k=option.series[hoveredIndex].pieStatus.k,startRatio=option.series[hoveredIndex].pieData.startRatio,endRatio=option.series[hoveredIndex].pieData.endRatio,i=option.series[hoveredIndex].pieData.value===option.series[0].pieData.value?35:10,option.series[hoveredIndex].parametricEquation=getParametricEquation(startRatio,endRatio,isSelected,isHovered,k,i),option.series[hoveredIndex].pieStatus.hovered=isHovered,hoveredIndex=""),myChart.setOption(option)});
