function getParametricEquation(t,n,u,p,s,d){const i=(t+n)/2,l=t*Math.PI*2,r=n*Math.PI*2,f=i*Math.PI*2;t===0&&n===1&&(u=!1),s=1;const h=u?Math.cos(f)*.1:0,c=u?Math.sin(f)*.1:0,e=p?1.05:1;return{u:{min:-Math.PI,max:Math.PI*3,step:Math.PI/32},v:{min:0,max:Math.PI*2,step:Math.PI/20},x:function(a,o){return a<l?h+Math.cos(l)*(1+Math.cos(o)*s)*e:a>r?h+Math.cos(r)*(1+Math.cos(o)*s)*e:h+Math.cos(a)*(1+Math.cos(o)*s)*e},y:function(a,o){return a<l?c+Math.sin(l)*(1+Math.cos(o)*s)*e:a>r?c+Math.sin(r)*(1+Math.cos(o)*s)*e:c+Math.sin(a)*(1+Math.cos(o)*s)*e},z:function(a,o){return a<-Math.PI*.5?Math.sin(a):a>Math.PI*2.5?Math.sin(a)*d*.1:Math.sin(o)>0?1*d*.1:-1}}}function getPie3D(t,n,u,p,s,d=1){const i=[];let l=0,r=0,f=0;const h=[],c=typeof n<"u"?(1-n)/(1+n):1/3;for(let e=0;e<t.length;e+=1){l+=t[e].value;const a={name:typeof t[e].name>"u"?`series${e}`:t[e].name,type:"surface",parametric:!0,wireframe:{show:!1},pieData:t[e],pieStatus:{selected:!1,hovered:!1,k:c}};if(typeof t[e].itemStyle<"u"){const o={};typeof t[e].itemStyle.color<"u"&&(o.color=t[e].itemStyle.color),typeof t[e].itemStyle.opacity<"u"&&(o.opacity=t[e].itemStyle.opacity),a.itemStyle=o}i.push(a)}for(let e=0;e<i.length;e+=1)f=r+i[e].pieData.value,i[e].pieData.startRatio=r/l,i[e].pieData.endRatio=f/l,console.log(i[e].pieData.startRatio,i[e].pieData.endRatio,!1,!1,c,i[e].pieData.value),i[e].parametricEquation=getParametricEquation(i[e].pieData.startRatio,i[e].pieData.endRatio,!1,!1,c,i[e].pieData.value),r=f,h.push(i[e].name);return i}const optionsData=[{name:"aa",value:11,itemStyle:{color:"#41adf8"}},{name:"cc",value:33,itemStyle:{color:"#ffa100"}},{name:"bb",value:22,itemStyle:{color:"#2acf81"}}],series=getPie3D(optionsData,.8,240,28,26,.5);series.push({name:"pie2d",type:"pie",label:{opacity:1,fontSize:13,lineHeight:20},labelLine:{length:30,length2:30},startAngle:-30,clockwise:!1,radius:["20%","50%"],center:["50%","50%"],data:optionsData,itemStyle:{opacity:0}}),option={legend:{tooltip:{show:!0},data:["aa","bb","cc"],bottom:"10%",textStyle:{color:"#fff",fontSize:12}},tooltip:{formatter:t=>{if(t.seriesName!=="mouseoutSeries"&&t.seriesName!=="pie2d"){let n=((option.series[t.seriesIndex].pieData.endRatio-option.series[t.seriesIndex].pieData.startRatio)*100).toFixed(2);return`${t.seriesName}<br/><span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:${t.color};"></span>${n}%`}}},title:{text:"3D 饼图",x:"center",top:"20",textStyle:{color:"#fff",fontSize:22}},backgroundColor:"#333",labelLine:{show:!0,lineStyle:{color:"#7BC0CB"}},label:{show:!0,position:"outside",formatter:`{b} 
{c} {d}%`},xAxis3D:{min:-1,max:1},yAxis3D:{min:-1,max:1},zAxis3D:{min:-1,max:1},grid3D:{show:!1,boxHeight:30,viewControl:{alpha:40,beta:40,distance:500,rotateSensitivity:0,zoomSensitivity:0,panSensitivity:0,autoRotate:!1}},series};
