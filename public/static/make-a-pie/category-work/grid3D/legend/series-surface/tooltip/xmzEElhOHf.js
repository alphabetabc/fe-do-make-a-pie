function getParametricEquation(i,l,t,h,n,c,u){let d=(i+l)/2,r=i*Math.PI*2,e=l*Math.PI*2,m=d*Math.PI*2;u===1&&(r=0),console.log("endRatio",i,l),i===0&&l===1&&(t=!1),n=1;let s=t?Math.cos(m)*.1:0,M=t?Math.sin(m)*.1:0,f=h?1.05:1;return{u:{min:-Math.PI,max:Math.PI*3,step:Math.PI/32},v:{min:0,max:Math.PI*2,step:Math.PI/20},x:function(a,o){return a<r?s+Math.cos(r)*(1+Math.cos(o)*n)*f:a>e?s+Math.cos(e)*(1+Math.cos(o)*n)*f:s+Math.cos(a)*(1+Math.cos(o)*n)*f},y:function(a,o){return a<r?M+Math.sin(r)*(1+Math.cos(o)*n)*f:a>e?M+Math.sin(e)*(1+Math.cos(o)*n)*f:M+Math.sin(a)*(1+Math.cos(o)*n)*f},z:function(a,o){return a<-Math.PI*.5||a>Math.PI*2.5?Math.sin(a):u===0?Math.sin(o)>0?4:1:Math.sin(o)>0?1:-1}}}function getPie3D(i,l){let t=[],h=0,n=0,c=0,u=[],d=typeof l<"u"?(1-l)/(1+l):1/3;for(let e=0;e<i.length;e++){h+=i[e].value;let m={name:typeof i[e].name>"u"?`series${e}`:i[e].name,type:"surface",parametric:!0,wireframe:{show:!1},pieData:i[e],pieStatus:{selected:!1,hovered:!1,k:d}};if(typeof i[e].itemStyle<"u"){let s={};typeof i[e].itemStyle.color<"u"&&(s.color=i[e].itemStyle.color),typeof i[e].itemStyle.opacity<"u"&&(s.opacity=i[e].itemStyle.opacity),m.itemStyle=s}t.push(m)}for(let e=0;e<t.length;e++)c=n+t[e].pieData.value,console.log(t[e]),t[e].pieData.startRatio=n/h,t[e].pieData.endRatio=c/h,t[e].parametricEquation=getParametricEquation(t[e].pieData.startRatio,t[e].pieData.endRatio,!1,!1,d,t[e].pieData.value,e),n=c,u.push(t[e].name);let r={backgroundColor:"#000",tooltip:{formatter:e=>{if(e.seriesName!=="mouseoutSeries")return`${e.seriesName}<br/><span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:${e.color};"></span>${r.series[e.seriesIndex].pieData.value}`}},legend:{data:u,textStyle:{color:"#fff",fontSize:26}},xAxis3D:{min:-1,max:1},yAxis3D:{min:-1,max:1},zAxis3D:{min:-1,max:1},grid3D:{show:!1,boxHeight:10,bottom:"50%",light:{ambient:{color:"red",intensity:.2}},viewControl:{distance:300,alpha:25,beta:130,autoRotate:!1,damping:1,zoomSensitivity:0,rotateSensitivity:0}},series:t};return r}option=getPie3D([{name:"已消除",value:4,itemStyle:{color:"#74f3b5"}},{name:"未消除",value:2,itemStyle:{color:"#00b7f7"}}],2);
