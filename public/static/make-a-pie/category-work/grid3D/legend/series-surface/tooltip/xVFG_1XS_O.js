function getParametricEquation(a,l,t,h,i){let m=(a+l)/2,u=a*Math.PI*2,f=l*Math.PI*2,c=m*Math.PI*2;a===0&&l===1&&(t=!1),i=typeof i<"u"?i:1/3;let e=t?Math.cos(c)*.1:0,n=t?Math.sin(c)*.1:0,r=h?1.05:1;return{u:{min:-Math.PI,max:Math.PI*3,step:Math.PI/32},v:{min:0,max:Math.PI*2,step:Math.PI/20},x:function(o,s){return o<u?e+Math.cos(u)*(1+Math.cos(s)*i)*r:o>f?e+Math.cos(f)*(1+Math.cos(s)*i)*r:e+Math.cos(o)*(1+Math.cos(s)*i)*r},y:function(o,s){return o<u?n+Math.sin(u)*(1+Math.cos(s)*i)*r:o>f?n+Math.sin(f)*(1+Math.cos(s)*i)*r:n+Math.sin(o)*(1+Math.cos(s)*i)*r},z:function(o,s){return o<-Math.PI*.5||o>Math.PI*2.5?Math.sin(o):Math.sin(s)>0?1:-1}}}function getPie3D(a,l){let t=[],h=0,i=0,m=0,u=[],f=typeof l<"u"?(1-l)/(1+l):1/3;for(let e=0;e<a.length;e++){h+=a[e].value;let n={name:typeof a[e].name>"u"?`series${e}`:a[e].name,type:"surface",parametric:!0,wireframe:{show:!1},pieData:a[e],pieStatus:{selected:!1,hovered:!1,k:f}};if(typeof a[e].itemStyle<"u"){let r={};typeof a[e].itemStyle.color<"u"&&(r.color=a[e].itemStyle.color),typeof a[e].itemStyle.opacity<"u"&&(r.opacity=a[e].itemStyle.opacity),n.itemStyle=r}t.push(n)}for(let e=0;e<t.length;e++)m=i+t[e].pieData.value,t[e].pieData.startRatio=i/h,t[e].pieData.endRatio=m/h,t[e].parametricEquation=getParametricEquation(t[e].pieData.startRatio,t[e].pieData.endRatio,!0,!1,1),i=m,u.push(t[e].name);t.push({name:"mouseoutSeries",type:"surface",parametric:!0,wireframe:{show:!1},itemStyle:{opacity:1,color:"rgba(18,236,252,.5)"},parametricEquation:{u:{min:0,max:Math.PI*2,step:Math.PI/20},v:{min:0,max:Math.PI,step:Math.PI/1.4},x:function(e,n){return Math.sin(n)*Math.sin(e)+Math.sin(e)},y:function(e,n){return Math.sin(n)*Math.cos(e)+Math.cos(e)},z:function(e,n){return Math.cos(n)>0?.1:-.1}}});let c={legend:{show:!0,data:u},tooltip:{formatter:e=>{if(e.seriesName!=="mouseoutSeries")return`${e.seriesName}<br/><span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:${e.color};"></span>${c.series[e.seriesIndex].pieData.value}`}},xAxis3D:{min:-1.3,max:1.3},yAxis3D:{min:-1.3,max:1.3},zAxis3D:{min:-1.3,max:1.3},grid3D:{show:!1,boxHeight:10,left:"0",bottom:"50%",viewControl:{alpha:20,rotateSensitivity:0,zoomSensitivity:0,panSensitivity:0,autoRotate:!0}},series:t};return c}option=getPie3D([{name:"a",value:25,itemStyle:{color:"#00d8ff"}},{name:"b",value:5,itemStyle:{color:"#018ef1"}},{name:"c",value:4,itemStyle:{color:"#f8bc87"}},{name:"d",value:3,itemStyle:{color:"#ffa130"}},{name:"e",value:2,itemStyle:{color:"#c23531"}},{name:"f",value:1,itemStyle:{color:"#fd5d48"}}],.59);
