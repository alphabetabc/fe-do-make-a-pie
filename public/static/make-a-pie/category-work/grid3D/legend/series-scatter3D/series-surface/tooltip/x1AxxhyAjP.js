function getParametricEquation(i,s,t,m,n,f){let M=(i+s)/2,u=i*Math.PI*2,h=s*Math.PI*2,c=M*Math.PI*2;i===0&&s===1&&(t=!1),n=typeof n<"u"?n:1/3;let e=t?Math.cos(c)*.1:0,a=t?Math.sin(c)*.1:0,l=m?1.05:1;return{u:{min:-Math.PI,max:Math.PI*3,step:Math.PI/32},v:{min:0,max:Math.PI*2,step:Math.PI/20},x:function(o,r){return o<u?e+Math.cos(u)*(1+Math.cos(r)*n)*l:o>h?e+Math.cos(h)*(1+Math.cos(r)*n)*l:e+Math.cos(o)*(1+Math.cos(r)*n)*l},y:function(o,r){return o<u?a+Math.sin(u)*(1+Math.cos(r)*n)*l:o>h?a+Math.sin(h)*(1+Math.cos(r)*n)*l:a+Math.sin(o)*(1+Math.cos(r)*n)*l},z:function(o,r){return o<-Math.PI*.5||o>Math.PI*2.5?Math.sin(o):Math.sin(r)>0?1*f:-1}}}function getPie3D(i,s){let t=[],m=0,n=0,f=0,M=[],u=typeof s<"u"?(1-s)/(1+s):1/3;for(let e=0;e<i.length;e++){m+=i[e].value;let a={name:typeof i[e].name>"u"?`series${e}`:i[e].name,type:"surface",parametric:!0,wireframe:{show:!1},pieData:i[e],pieStatus:{selected:!1,hovered:!1,k:u}};if(typeof i[e].itemStyle<"u"){let l={};typeof i[e].itemStyle.color<"u"&&(l.color=i[e].itemStyle.color),typeof i[e].itemStyle.opacity<"u"&&(l.opacity=i[e].itemStyle.opacity),a.itemStyle=l}t.push(a)}let h=[];for(let e=0;e<t.length;e++){f=n+t[e].pieData.value,t[e].pieData.startRatio=n/m,t[e].pieData.endRatio=f/m,t[e].parametricEquation=getParametricEquation(t[e].pieData.startRatio,t[e].pieData.endRatio,!1,!1,u,t[e].pieData.value),n=f;let a=(t[e].pieData.endRatio+t[e].pieData.startRatio)*Math.PI,l=Math.cos(a)*(1+Math.cos(Math.PI/2)),o=Math.sin(a)*(1+Math.cos(Math.PI/2)),r=Math.log(Math.abs(t[e].pieData.value+1))*.1,p=a>=0&&a<=Math.PI/3||a>=2*Math.PI/2&&a<=Math.PI*2?1:-1,d=i[e].itemStyle.color,y=[l*1.8+e*.1*p+(p<0?-.5:0),o*1.8+e*.1*p+(p<0?-.5:0),r*2];h.push({type:"scatter3D",label:{position:"top",show:!0,textStyle:{color:d,backgroundColor:"transparent"},formatter:function(S){return""}},symbolSize:0,data:[{name:t[e].name,text:t[e].pieData.value,value:y}]}),M.push({name:t[e].name,textStyle:{color:d,fontSize:14}})}t=t.concat(h),t.push({name:"mouseoutSeries",type:"surface",parametric:!0,wireframe:{show:!1},itemStyle:{opacity:0},parametricEquation:{u:{min:0,max:Math.PI*2,step:Math.PI/50},v:{min:0,max:Math.PI,step:Math.PI/20},x:function(e,a){return Math.sin(a)*Math.sin(e)+Math.sin(e)},y:function(e,a){return Math.sin(a)*Math.cos(e)+Math.cos(e)},z:function(e,a){return Math.cos(a)>0?.1:-.1}}});let c={legend:{data:M,selectedMode:!1,orient:"vertical",right:"10%",top:"25%",itemGap:20},tooltip:{formatter:e=>{if(e.seriesName!=="mouseoutSeries")return`${e.seriesName}<br/><span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:${e.color};"></span>${c.series[e.seriesIndex].pieData.value}`}},xAxis3D:{min:-1,max:1},yAxis3D:{min:-1,max:1},zAxis3D:{min:-1,max:1},grid3D:{show:!1,left:"left",boxHeight:1,viewControl:{alpha:30,rotateSensitivity:0,zoomSensitivity:0,panSensitivity:0,autoRotate:!1},postEffect:{enable:!0,bloom:{enable:!0,bloomIntensity:.1},SSAO:{enable:!0,quality:"medium",radius:2}}},series:t};return c}option=getPie3D([{name:"跳远",value:30,itemStyle:{color:"#f77b66"}},{name:"跳高",value:17,itemStyle:{color:"#3edce0"}},{name:"拔河",value:20,itemStyle:{color:"#f94e76"}},{name:"铅球",value:13,itemStyle:{color:"#9e60f9"}},{name:"铁饼",value:20,itemStyle:{color:"#018ef1"}}],.59);
