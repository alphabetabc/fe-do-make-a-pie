var uploadedDataURL="/asset/get/s/data-1464010965793-ByCCuFlX.csv";function calculateMA(n,t){for(var r=[],a=0,e=t.length;a<e;a++){if(a<n){r.push("-");continue}for(var l=0,o=0;o<n;o++)l+=t[a-o][1];r.push(l/n)}return r}myChart.showLoading(),$.get(uploadedDataURL,function(n){myChart.hideLoading();var t=Papa.parse(n).data.slice(2);console.log(Papa.parse(n)),t=t.reverse();var r=t.map(function(e){return e[0]}),a=t.map(function(e){return[+e[1],+e[2],+e[5],+e[6]]});myChart.setOption(option={legend:{data:["日K","MA5","MA10","MA20","MA30"]},tooltip:{trigger:"axis"},xAxis:{type:"category",data:r},yAxis:{scale:!0,scale:!0},dataZoom:[{},{type:"inside"}],animation:!1,series:[{type:"candlestick",name:"日K",data:a},{name:"MA5",type:"line",data:calculateMA(5,a),smooth:!0,lineStyle:{normal:{width:1}}},{name:"MA10",type:"line",data:calculateMA(10,a),smooth:!0,lineStyle:{normal:{width:1}}},{name:"MA20",type:"line",data:calculateMA(20,a),smooth:!0,lineStyle:{normal:{width:1}}},{name:"MA30",type:"line",data:calculateMA(30,a),smooth:!0,lineStyle:{normal:{width:1}}}]})});
