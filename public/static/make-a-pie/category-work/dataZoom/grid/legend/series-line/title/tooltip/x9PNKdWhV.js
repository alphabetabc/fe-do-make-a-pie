function jsonp(e,o,n){window[n]=o;var t=document.createElement("script");t.src=e,t.type="text/javascript",document.getElementsByTagName("body")[0].appendChild(t),setTimeout(function(){document.body.removeChild(t)},500)}var jsonpURL="https://m.look.360.cn/events/feiyan?sv=&version=&market=&device=2&net=4&stype=&scene=&sub_scene=&refer_scene=&refer_subscene=&f=jsonp&location=true&_=1583145636129&callback=jsonp2";jsonp(jsonpURL,function(data){console.log(data.country);var chartsJSON=data.country,provinceName=[],diagnosed=[],diffDiagnosed=[],cured=[],died=[];chartsJSON.forEach(function(e,o){provinceName.push(e.provinceName),diagnosed.push(e.diagnosed),diffDiagnosed.push(e.diffDiagnosed),cured.push(e.cured),died.push(e.died)});var sumDiagnosed=eval(diagnosed.join("+")),sumDiffDiagnosed=eval(diffDiagnosed.join("+")),sumCured=eval(cured.join("+")),sumDied=eval(died.join("+"));console.log("数据来源：%chttps://m.look.360.cn","color:#00cc00"),console.log("海外累计确诊：%c"+sumDiagnosed,"color:rgb(224, 32, 32)"),console.log("海外新增确诊：%c"+sumDiffDiagnosed,"color:#ff6600"),console.log("海外累计治愈：%c"+sumCured,"color:rgb(17, 191, 199)"),console.log("海外累计死亡：%c"+sumDied,"color:gray");const mydate=new Date;var jsonMonth=mydate.getMonth()+1,subDay=mydate.getDate();subDay<10?subDay="0"+subDay:subDay=subDay;var subDate=mydate.getFullYear()+"年"+jsonMonth+"月"+subDay+"日",subFunc=["截止: "+subDate+`
累计确诊: {a| `+sumDiagnosed+"}","新增确诊: {b| "+sumDiffDiagnosed+"}","累计治愈: {c| "+sumCured+"}","累计死亡: {d| "+sumDied+"}"].join("  ");option={backgroundColor:"#f8f8f8",title:{text:"海外疫情病例趋势图",textStyle:{color:"#000",fontSize:18},itemGap:5,subtext:subFunc,subtextStyle:{color:"#333",fontSize:14,rich:{a:{color:"#b61e33",fontSize:15},b:{color:"#ff6600",fontSize:15},c:{color:"rgb(17, 191, 199)",fontSize:15},d:{color:"gray",fontSize:15}}},x:"center"},tooltip:{trigger:"axis",axisPointer:{type:"line",lineStyle:{color:"#c9caca",width:1,type:"dotted"}},x:"left",textStyle:{fontSize:14}},grid:{top:"12%",right:"2%",bottom:"10%",left:"7%"},legend:{data:["确诊","新增确诊","治愈","死亡"],x:"right"},xAxis:{type:"category",axisLabel:{rotate:45,interval:0,textStyle:{color:"#333",fontSize:12},formatter:"{value}"},axisLine:{lineStyle:{color:"#ccc",width:1}},splitLine:{show:!0,lineStyle:{color:"rgba(102,102,102,.1)",width:1,type:"dashed"}},axisTick:{show:!0},data:provinceName},yAxis:{type:"value",axisLabel:{show:!0,textStyle:{color:"#333",fontSize:12},formatter:"{value}"},splitNumber:4,axisLine:{lineStyle:{color:"#ccc",width:1}},splitLine:{show:!0,lineStyle:{color:"rgba(102,102,102,.1)",width:1,type:"dashed"}}},color:["#b61e33","rgb(255, 160, 25)","rgb(17, 191, 199)","rgba(77, 80, 84, 0.7)"],dataZoom:[{type:"inside",start:0,end:7}],series:[{name:"确诊",type:"line",symbol:"pin",symbolSize:12,label:{normal:{show:!0,position:"top"}},lineStyle:{normal:{width:2}},smooth:!0,data:diagnosed},{name:"新增确诊",type:"line",symbol:"pin",symbolSize:12,label:{normal:{show:!0,position:"top"}},lineStyle:{normal:{width:2}},smooth:!0,data:diffDiagnosed},{name:"治愈",type:"line",symbol:"pin",symbolSize:12,label:{normal:{show:!0,position:"top"}},lineStyle:{normal:{width:2}},smooth:!0,data:cured},{name:"死亡",type:"line",symbol:"pin",symbolSize:12,label:{normal:{show:!0,position:"top"}},lineStyle:{normal:{width:2}},smooth:!0,data:died}]},myChart.setOption(option);var app={currentIndex:-1};setInterval(function(){var e=option.series[0].data.length;myChart.dispatchAction({type:"downplay",seriesIndex:0,dataIndex:app.currentIndex}),app.currentIndex>option.dataZoom[0].end/100*e-2&&(option.dataZoom[0].start=app.currentIndex/e*100,option.dataZoom[0].end=app.currentIndex/e*100+7),myChart.setOption(option),app.currentIndex=(app.currentIndex+1)%e,myChart.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:app.currentIndex}),myChart.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:app.currentIndex})},3e3)},"jsonp2");
