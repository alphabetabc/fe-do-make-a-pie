const mockData={xdata:[...new Array(33)].map((t,o)=>`南城街道${o+1}`),result:[{name:"已开通",data:[...new Array(33)].map((t,o)=>+(Math.random(0,10)*1e3).toFixed(0))},{name:"未开通",data:[...new Array(33)].map((t,o)=>+(Math.random(0,.5)*1e3).toFixed(0))}]},color=[[{offset:0,color:"rgba(239, 255, 55, .85)"},{offset:.5,color:"rgba(239, 255, 55, .85)"},{offset:.5,color:"rgba(213, 231, 0, .9)"},{offset:1,color:"rgba(213, 231, 0, .9)"}],[{offset:0,color:"rgba(50, 255, 238, .85)"},{offset:.5,color:"rgba(50, 255, 238, .85)"},{offset:.5,color:"rgba(0, 216, 198, .9)"},{offset:1,color:"rgba(0, 216, 198, .9)"}]],color2=["#efff37","#32ffee"],tooltip={trigger:"axis",textStyle:{fontSize:"100%"},formatter:t=>t.map(e=>`<div>${e.seriesName}: ${e.value}</div>`).join("")},legend={data:["已开通","未开通"],textStyle:{fontSize:12,color:"#fff"},itemWidth:24,itemHeight:15,itemGap:15,top:"2%",right:"2%",selectedMode:!1},grid={top:"15%",left:"12%",right:"2%",bottom:"25%"},xAxis={axisTick:{show:!0},axisLine:{lineStyle:{color:"rgba(255,255,255, .2)"}},axisLabel:{rotate:60,textStyle:{fontSize:12,color:"#fff"}},data:mockData.xdata},yAxis=[{axisTick:{show:!1},axisLine:{show:!1},splitLine:{lineStyle:{color:"rgba(255,255,255, .05)"}},axisLabel:{textStyle:{fontSize:14,color:"#fff"}}},{show:!1,splitLine:{show:!1},axisLine:{show:!1},axisTick:{show:!1}}],diamondData=mockData.result.reduce((t,o,e)=>(t[e]=o.data.map((a,l)=>a+(t[e-1]?t[e-1][l]:0)),t),[]);let series=mockData.result.reduce((t,o,e,a)=>(t.push({z:e+1,stack:"总量",type:"bar",name:o.name,barGap:"-100%",barWidth:24,data:o.data,itemStyle:{color:{type:"linear",x:0,x2:1,y:0,y2:0,colorStops:color[e]}}},{z:e+10,type:"pictorialBar",symbolPosition:"end",symbol:"diamond",symbolOffset:[0,"-50%"],symbolSize:[24,10],data:diamondData[e],itemStyle:{color:color2[e]},tooltip:{show:!1}}),t.length===a.length*2&&t.push({z:a.length*2,type:"pictorialBar",symbolPosition:"start",data:mockData.result[0].data,symbol:"diamond",symbolOffset:["0%","50%"],symbolSize:[24,10],itemStyle:{color:{type:"linear",x:0,x2:1,y:0,y2:0,colorStops:color[0]}},tooltip:{show:!1}}),t),[]);const dataZoom=[{show:!1,type:"slider",startValue:0,endValue:7,moveOnMouseWheel:!0,moveOnMouseMove:!0,zoomOnMouseWheel:!1}];option={tooltip,legend,xAxis,yAxis,series,grid,dataZoom,backgroundColor:"rgba(0, 0, 0, .8)"};let timer=null;function poll(t=0,o=7){timer=setInterval(()=>{o>=33?myChart.dispatchAction({type:"dataZoom",startValue:t=0,endValue:o=7}):myChart.dispatchAction({type:"dataZoom",startValue:t+=7,endValue:o+=7})},3*1e3)}myChart.on("mouseover",function(){clearInterval(timer)}),myChart.on("mouseout",function(){const{startValue:t,endValue:o}=myChart.getModel().option.dataZoom[0];poll(t,o)}),poll(0,7);
