var yearCount=7,categoryCount=30,xAxisData=[],customData=[],legendData=[],dataList=[];legendData.push("trend");for(var encodeY=[],i=0;i<yearCount;i++)legendData.push(2010+i+""),dataList.push([]),encodeY.push(1+i);for(var i=0;i<categoryCount;i++){var val=Math.random()*1e3;xAxisData.push("category"+i);var customVal=[i];customData.push(customVal);for(var j=0;j<dataList.length;j++){var value=j===0?echarts.number.round(val,2):echarts.number.round(Math.max(0,dataList[j-1][i]+(Math.random()-.5)*200),2);dataList[j].push(value),customVal.push(value)}}function renderItem(e,r){for(var u=r.value(0),t=r.currentSeriesIndices(),d=r.barLayout({barGap:"30%",barCategoryGap:"20%",count:t.length-1}),o=[],a=0;a<t.length;a++){var s=t[a];if(s!==e.seriesIndex){var n=r.coord([u,r.value(s)]);n[0]+=d[a-1].offsetCenter,n[1]-=20,o.push(n)}}var l=r.style({stroke:r.visual("color"),fill:null});return{type:"polyline",shape:{points:o},style:l}}option={tooltip:{trigger:"axis"},legend:{data:legendData},dataZoom:[{type:"slider",start:50,end:70},{type:"inside",start:50,end:70}],xAxis:{data:xAxisData},yAxis:{},series:[{type:"custom",name:"trend",renderItem,itemStyle:{borderWidth:2},encode:{x:0,y:encodeY},data:customData,z:100}].concat(echarts.util.map(dataList,function(e,r){return{type:"bar",animation:!1,name:legendData[r+1],itemStyle:{opacity:.5},data:e}}))};
