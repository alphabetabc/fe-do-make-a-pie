let IndexGlobe=null,datas={datas_line:{colors:["rgba(255, 201, 13","rgba(52, 249, 177","rgba(255, 69, 69","rgba(255, 114, 0"],lineX:["测试1","测试2","测试3","测试4","测试5","测试6","测试7","测试8"],names:["2020","2021"],value:[[100,90,90,80,70,60,50,40],[99,89,109,69,59,48,39,95]]},datas_bar:{colors:["rgba(56, 223, 238, 1)","rgba(125, 56, 238, 1)"],lineX:["测试1","测试2","测试3","测试4","测试5","测试6","测试7","测试8"],names:["2020","2021"],value:[[21,21,16,95,14,11,32,34],[34,33,27,25,23,19,39,40]]}},seriesArr=[],legendArr=[];legendArr.push({top:"0%",data:datas.datas_line.names,textStyle:{fontSize:14,color:"F1F1F3"},left:"70",itemWidth:10,itemHeight:10}),legendArr.push({top:"0%",data:datas.datas_bar.names,textStyle:{fontSize:14,color:"F1F1F3"},left:"70",itemWidth:10,itemHeight:10}),datas.datas_line.value.forEach(function(o,e){seriesArr.push({name:datas.datas_line.names[e],type:"line",xAxisIndex:1,yAxisIndex:1,color:datas.datas_line.colors[e]+",1)",symbolSize:0,symbol:"circle",smooth:!1,areaStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:datas.datas_line.colors[e]+", 0.3)"},{offset:.8,color:datas.datas_line.colors[e]+", 0)"}],!1),shadowColor:"rgba(0, 0, 0, 0.1)",shadowBlur:10}},data:datas.datas_line.value[e],label:{show:!0,position:"top",textStyle:{color:"#ffffff"},formatter:function(t){return t.dataIndex==IndexGlobe?t.value:""}}})}),datas.datas_bar.value.forEach(function(o,e){seriesArr.push({name:datas.datas_bar.names[e],type:"bar",barWidth:"15",itemStyle:{normal:{color:datas.datas_bar.colors[e],barBorderRadius:[12,12,0,0]}},data:o,label:{show:!0,position:"top",textStyle:{color:"#ffffff"},formatter:function(t){return t.dataIndex==IndexGlobe?t.value:""}}})}),option={backgroundColor:"rgba(0,0,0,1)",tooltip:{trigger:"axis",axisPointer:{type:"shadow"},backgroundColor:"rgba(0,0,0,0.7)",textStyle:{color:"#ffffff"},borderWidth:0,formatter:function(o){debugger;let e="";e+=o[0].name+`
`;debugger;for(let t=0;t<datas.datas_line.names.length;t++)e+="<div>"+datas.datas_line.names[t]+": "+datas.datas_line.value[t][o[0].dataIndex]+"</div>";e+="<div style='margin-top:10px'></div>";for(let t=0;t<datas.datas_bar.names.length;t++)e+="<div>"+datas.datas_bar.names[t]+": "+datas.datas_bar.value[t][o[0].dataIndex]+"</div>";return IndexGlobe=o[0].dataIndex,myChart.setOption(option),e}},axisPointer:{link:[{xAxisIndex:[0,1],yAxisName:"someName"}]},dataZoom:[{show:!1,height:0,xAxisIndex:[0,1],bottom:30,start:0,end:40,handleStyle:{color:"rgba(0,0,0,0)"},textStyle:{color:"rgba(204,187,225,0)"},fillerColor:"rgba(67,55,160,0)",borderColor:"rgba(204,187,225,0)"},{show:!1,height:0,xAxisIndex:[0,1],bottom:30,start:0,end:20,handleStyle:{color:"rgba(0,0,0,0)"},textStyle:{color:"rgba(204,187,225,0)"},fillerColor:"rgba(67,55,160,0)",borderColor:"rgba(204,187,225,0)"}],legend:legendArr,grid:[{top:"50",left:"4%",right:"4%",bottom:"50%",containLabel:!0},{top:"55%",left:"4%",right:"4%",bottom:"25",containLabel:!0}],xAxis:[{type:"category",data:datas.datas_line.lineX,axisLabel:{textStyle:{color:"#7CAAFB",fontSize:12},interval:0},splitLine:{show:!0,lineStyle:{color:"#2883E0"}},axisLine:{show:!0,lineStyle:{color:"#2883E0"}}},{type:"category",gridIndex:1,data:datas.datas_bar.lineX,axisLabel:{textStyle:{color:"#7CAAFB",fontSize:12},interval:0},splitLine:{show:!0,lineStyle:{color:"#2883E0"}},axisLine:{show:!0,lineStyle:{color:"#2883E0"}}}],yAxis:[{type:"value",axisLabel:{textStyle:{color:"#7CAAFB",fontSize:12}},splitLine:{show:!0,lineStyle:{color:"#2883E0"}},axisLine:{show:!0,lineStyle:{color:"#2883E0"}}},{type:"value",gridIndex:1,axisLabel:{textStyle:{color:"#7CAAFB",fontSize:12}},splitLine:{show:!0,lineStyle:{color:"#2883E0"}},axisLine:{show:!0,lineStyle:{color:"#2883E0"}}}],series:seriesArr};var timeOut=null;myChart.on("mouseover",stop),myChart.on("mouseout",goMove),autoMove();function autoMove(){timeOut=setInterval(()=>{Number(option.dataZoom[0].end)>100?(option.dataZoom[0].end=40,option.dataZoom[0].start=0):(option.dataZoom[0].end=option.dataZoom[0].end+1*(100/option.series[0].data.length),option.dataZoom[0].start=option.dataZoom[0].start+1*(100/option.series[0].data.length)),myChart.setOption(option)},2500)}function stop(){clearInterval(timeOut)}function goMove(){autoMove()}
