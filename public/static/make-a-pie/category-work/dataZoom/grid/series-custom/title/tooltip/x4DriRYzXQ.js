var data=[],dataCount=10,startTime=+new Date,categories=["categoryA","categoryB","categoryC"],types=[{name:"JS Heap",color:"#7b9ce1"},{name:"Documents",color:"#bd6d6c"},{name:"Nodes",color:"#75d874"},{name:"Listeners",color:"#e0bc78"},{name:"GPU Memory",color:"#dc77dc"},{name:"GPU",color:"#72b362"}];categories.forEach(function(e,t){for(var r=startTime,o=0;o<dataCount;o++){var c=types[Math.round(Math.random()*(types.length-1))],a=Math.round(Math.random()*1e4);data.push({name:c.name,value:[t,r,r+=a,a],itemStyle:{normal:{color:c.color}}}),r+=Math.round(Math.random()*2e3)}});function renderItem(e,t){var r=t.value(0),o=t.coord([t.value(1),r]),c=t.coord([t.value(2),r]),a=t.size([0,1])[1]*.6,n=echarts.graphic.clipRectByRect({x:o[0],y:o[1]-a/2,width:c[0]-o[0],height:a},{x:e.coordSys.x,y:e.coordSys.y,width:e.coordSys.width,height:e.coordSys.height});return n&&{type:"rect",transition:["shape"],shape:n,style:t.style()}}option={tooltip:{formatter:function(e){return e.marker+e.name+": "+e.value[3]+" ms"}},title:{text:"2021-9-10 性能分析",left:"center"},dataZoom:[{type:"slider",filterMode:"weakFilter",showDataShadow:!1,top:10,labelFormatter:""},{type:"inside",filterMode:"weakFilter"}],grid:{height:300},xAxis:{min:startTime,scale:!0,axisLabel:{formatter:function(e){return Math.max(0,e-startTime)+"ms"}}},yAxis:{data:categories},series:[{type:"custom",renderItem,itemStyle:{opacity:.8},encode:{x:[1,2],y:0},data}]};
