var data1=[{name:"个人贷记卡利息收入",value:1e5},{name:"违约金",value:13e3},{name:"分期收入",value:15e4}].sort((e,a)=>a.value-e.value),data2=[{name:"发卡方收入",value:9e4},{name:"年费",value:2e4},{name:"取现费",value:4e4},{name:"收单业务",value:600},{name:"其他收入",value:-11e3}].sort((e,a)=>a.value-e.value),data=data1.concat(data2);console.log(data);function getNum(e,a){let l=data[0].value,o=data[data.length-1].value,r=5,n=1,t=(l-o)/(r-n),u=r-l/t;return+(e/t+u).toFixed(2)}function sum(e,a){let l=0,o=data.slice(e,a);for(let r=0;r<o.length;r++)l+=o[r].value;return l}var getColor1=function(e,a,l){return{type:"radial",x:e,y:a,r:l,colorStops:[{offset:0,color:"rgba(0, 42, 254, 0)"},{offset:1,color:"rgba(0, 180, 255, 0.3)"}]}},getColor2=function(e,a,l){return{type:"radial",x:e,y:a,r:l,colorStops:[{offset:1,color:"rgba(0, 245, 254, 0.3)"},{offset:0,color:"rgba(0, 180, 255, 0)"}]}},colorList=[getColor1(.18,1.1,.8),getColor1(-.1,.26,.8),getColor1(0,0,.8),getColor2(.8,0,.8),getColor2(.8,.35,.8),getColor2(.8,.65,.8),getColor2(.6,.75,.8),getColor2(.6,.65,.8)],lineLength=[[10,0],[-20,-0],[-100,0],[-30,0],[-60,0],[-100,0],[-120,0],[-130,0]],text=["个人贷记卡利息收入","违约金","分期收入","发卡方收入","年费","取现费","收单业务","其他收入"];data=data.map((e,a)=>({name:e.name,value:getNum(e.value),value1:e.value,itemStyle:{color:colorList[a]},labelLine:{length:lineLength[a][0],length2:lineLength[a][1]}}));var option={backgroundColor:"#000",color:["yellow","blue","red","rgba(0,0,0,0)","rgba(0,0,0,0)","rgba(0,0,0,0)","rgba(0,0,0,0)","rgba(0,0,0,0)","rgba(0,0,0,0)"],series:[{type:"pie",radius:["28%","31%"],startAngle:100,data:[{name:"利息收入",value:sum(0,3),value1:21e5,itemStyle:{color:"#00d8ff"}},{name:"中间业务收入",value:sum(3),value1:1150500,itemStyle:{color:"#00fe5e"}}],label:{formatter:function(e){return"{n|"+e.name+`}
{hr|}
{d|`+e.data.value1+"}{unit| 万元}"},rich:{hr:{borderColor:"#fff",width:"100%",borderWidth:2,height:0},n:{fontSize:16,color:"#fff",padding:7},d:{fontSize:23,color:"#ffb400",fontFamily:"DINCond-Regular",fontWeight:"bold",padding:4},unit:{fontSize:9,color:"#ffb400"}}},labelLine:{show:!0,lineStyle:{color:"#fff"}},z:3},{type:"pie",startAngle:100,radius:["31%","75%"],roseType:"radius",labelLine:{show:!1},label:{color:"#fff",formatter:function(e){return"{n|"+e.name+`}
{d|`+e.data.value1+"}"},rich:{n:{fontSize:10,color:"#fff"},d:{fontSize:12,color:"#fff",padding:[4,0]},unit:{fontSize:9,color:"#ffb400"}}},itemStyle:{color:colorList},data},{type:"pie",roseType:"radius",radius:["80%","84%"],data:[data.map(e=>({value:e.value,itemStyle:{color:"rgba(0,0,0,0)",borderColor:"black",borderWidth:2}}))[0],{value:3250500-data[0].value,itemStyle:{borderWidth:20,borderColor:"black",color:"rgba(0,0,0,0)",opacity:0}}],labelLine:{show:!1},label:{show:!1}}]};
