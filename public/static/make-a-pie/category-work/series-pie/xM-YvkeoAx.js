option={series:[{type:"pie",data:[{value:1048,name:"搜索引擎"},{value:735,name:"直接访问"},{value:580,name:"邮件营销"},{value:484,name:"联盟广告"},{value:300,name:"视频广告"}]}]};let statu=!1,last=[],shape={},waits=!0;function mousedown(a){shape=a.event.target.shape,statu=!0}function mouseup(a){statu=!1,last=[]}function getDirection(a,n){let e=a[0]*n[1]-n[0]*a[1];return e>0?-1:e<0?1:0}function mousemove(a){if(statu&&waits){waits=!1;let n=a.event;if(last.length===0)last=[n.offsetX-shape.cx,n.offsetY-shape.cy];else{let e=last,t=[n.offsetX-shape.cx,n.offsetY-shape.cy],o=getDirection(e,t)*(180/Math.PI)*Math.acos(Math.min(1,(t[1]*e[1]+t[0]*e[0])/(Math.sqrt(t[0]*t[0]+t[1]*t[1])*Math.sqrt(e[0]*e[0]+e[1]*e[1]))))+myChart.getOption().series[0].startAngle;console.log("mousemove -> angle",o),myChart.setOption({series:{startAngle:o}}),last=t}waits=!0}}myChart.on("mouseup",mouseup),myChart.on("mouseout",mouseup),myChart.on("mousedown",mousedown),myChart.on("mousemove",mousemove);
