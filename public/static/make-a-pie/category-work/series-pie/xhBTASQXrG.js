var data=[{name:"装备制造",val1:80,val2:120},{name:"现代材料",val1:44,val2:60},{name:"新能源",val1:35,val2:60},{name:"新一代信息技术",val1:30,val2:60},{name:"商贸物流",val1:20,val2:60},{name:"装备制造",val1:80,val2:280},{name:"现代材料",val1:44,val2:60},{name:"新能源",val1:35,val2:60},{name:"新一代信息技术",val1:30,val2:60},{name:"商贸物流",val1:20,val2:60}],sumVal1=0,sumVal2=0,lineCount=5,titleArr=[],seriesArr=[],showMax=9;colors=["#ff6633","#6699cc"];var rowPercent;data.forEach(function(a,l){if(sumVal1+=a.val1,sumVal2+=a.val2,!(l>=showMax)){var e=Math.round(a.val1/a.val2*100),r=100-e;rowPercent=Math.round(Math.ceil((l+1)/lineCount)/(Math.ceil(data.length/lineCount)+1)*100);var n=Math.ceil((l+1)/lineCount)==1?26:38;seriesArr.push({name:a.name,type:"pie",clockWise:!1,radius:[45,70],itemStyle:{normal:{color:colors[0],shadowColor:colors[0],shadowBlur:0,label:{show:!1},labelLine:{show:!1}}},hoverAnimation:!1,center:[l%lineCount*16+n+"%",rowPercent+"%"],data:[{value:e},{value:r,name:"invisible",itemStyle:{normal:{color:colors[1]},emphasis:{color:colors[1]}},label:{normal:{formatter:function(o){return o.seriesName+`
`+o.value+"%"},position:"center",show:!0,textStyle:{fontSize:"20",fontWeight:"bold",color:colors[1]}}}}]})}}),seriesArr.push({name:"合计",type:"pie",clockWise:!1,radius:[55,90],itemStyle:{normal:{color:colors[0],shadowColor:colors[0],shadowBlur:0,label:{show:!1},labelLine:{show:!1}}},hoverAnimation:!1,center:[0%lineCount*16+18+"%",rowPercent-3+"%"],data:[{value:Math.round(sumVal1/sumVal2*100)},{value:Math.round((1-sumVal1/sumVal2)*100),name:"invisible",itemStyle:{normal:{color:colors[1]},emphasis:{color:colors[1]}},label:{normal:{formatter:function(a){return a.seriesName+`
`+a.value+"%"},position:"center",show:!0,textStyle:{fontSize:"20",fontWeight:"bold",color:colors[1]}}}}]}),option={backgroundColor:"#fff",title:titleArr,series:seriesArr};
