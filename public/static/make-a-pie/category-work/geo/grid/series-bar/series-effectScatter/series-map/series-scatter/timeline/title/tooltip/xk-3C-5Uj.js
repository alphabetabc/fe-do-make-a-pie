var shanxi="/asset/get/s/data-1528970298351-HyzB32JZ7.json",geoCoordMap={西安:[108.848,34.0631],宝鸡:[107.1448,34.3693],铜川:[108.9796,35.3165],咸阳:[108.3051,34.8334],渭南:[109.8028,34.5993],延安:[109.4908,36.5965],汉中:[107.0286,33.0776],榆林:[109.7411,38.2901],安康:[109.0292,32.6903],商洛:[109.9397,33.6683]},colors=[["#1DE9B6","#F46E36","#04B9FF","#5DBD32","#FFC809","#FB95D5","#BDA29A","#6E7074","#546570","#C4CCD3"],["#37A2DA","#67E0E3","#32C5E9","#9FE6B8","#FFDB5C","#FF9F7F","#FB7293","#E062AE","#E690D1","#E7BCF3","#9D96F5","#8378EA","#8378EA"],["#DD6B66","#759AA0","#E69D87","#8DC1A9","#EA7E53","#EEDD78","#73A373","#73B9BC","#7289AB","#91CA8C","#F49F42"]],colorIndex=0;$(function(){var t=["2014","2015","2016","2017","2018"],a=[[],[],[],[],[],[]],c=[],h=[];for(var s in geoCoordMap)c.push(s),a[0].push({year:"2014",name:s,value:randomNum(100,300)}),a[1].push({year:"2015",name:s,value:randomNum(100,300)}),a[2].push({year:"2016",name:s,value:randomNum(100,300)}),a[3].push({year:"2017",name:s,value:randomNum(100,300)}),a[4].push({year:"2018",name:s,value:randomNum(100,300)});for(var i=0;i<a.length;i++){h.push([]);for(var u=0;u<a[i].length;u++)h[i].push(a[i][u].value)}$.getJSON(shanxi,function(y){echarts.registerMap("shanxi",y);var p=function(e){for(var l=[],r=0;r<e.length;r++){var n=geoCoordMap[e[r].name];n&&l.push({name:e[r].name,value:n.concat(e[r].value)})}console.log(l);debugger;return l},v=function(e,l){for(var r=[],n=0;n<e.length;n++){var m=e[n],f=geoCoordMap[m.name],d=l;f&&d&&r.push([{coord:f,value:m.value},{coord:d}])}return r};optionXyMap01={timeline:{data:t,axisType:"category",autoPlay:!0,playInterval:3e3,left:"10%",right:"10%",bottom:"2%",width:"80%",label:{normal:{textStyle:{color:"#ddd"}},emphasis:{textStyle:{color:"#fff"}}},symbolSize:10,lineStyle:{color:"#555"},checkpointStyle:{borderColor:"#777",borderWidth:2},controlStyle:{showNextBtn:!0,showPrevBtn:!0,normal:{color:"#666",borderColor:"#666"},emphasis:{color:"#aaa",borderColor:"#aaa"}}},baseOption:{animation:!0,animationDuration:1e3,animationEasing:"cubicInOut",animationDurationUpdate:1e3,animationEasingUpdate:"cubicInOut",grid:{right:"10%",top:"18%",bottom:"10%",width:"25%"},tooltip:{trigger:"axis",axisPointer:{type:"shadow",shadowStyle:{color:"rgba(150,150,150,0.1)"}}},geo:{show:!0,map:"shanxi",roam:!0,zoom:1,center:[110.948,35.2631],label:{emphasis:{show:!1}},itemStyle:{normal:{borderColor:"rgba(147, 235, 248, 1)",borderWidth:1,areaColor:{type:"radial",x:.5,y:.5,r:.8,colorStops:[{offset:0,color:"rgba(147, 235, 248, 0)"},{offset:1,color:"rgba(147, 235, 248, .2)"}],globalCoord:!1},shadowColor:"rgba(128, 217, 248, 1)",shadowOffsetX:-2,shadowOffsetY:2,shadowBlur:10},emphasis:{areaColor:"#389BB7",borderWidth:0}}}},options:[]};for(var o=0;o<t.length;o++)optionXyMap01.options.push({backgroundColor:"#051b4a",title:[{},{id:"statistic",text:t[o]+"年数据统计情况",left:"60%",top:"8%",textStyle:{color:"#fff",fontSize:24}}],xAxis:{type:"value",scale:!0,position:"top",min:0,boundaryGap:!1,splitLine:{show:!1},axisLine:{show:!1},axisTick:{show:!1},axisLabel:{margin:2,textStyle:{color:"#aaa"}}},yAxis:{type:"category",nameGap:16,axisLine:{show:!0,lineStyle:{color:"#ddd"}},axisTick:{show:!1,lineStyle:{color:"#ddd"}},axisLabel:{interval:0,textStyle:{color:"#ddd"}},data:c},series:[{name:"light",type:"scatter",coordinateSystem:"geo",data:p(a[o]),symbol:"pin",symbolSize:function(e){return 40},label:{normal:{formatter:"{@[2]}",color:"#fff",fontSize:9,show:!0},emphasis:{show:!0}},itemStyle:{normal:{color:"#F62157"}}},{type:"map",map:"shanxi",geoIndex:0,aspectScale:.75,showLegendSymbol:!1,label:{normal:{show:!1},emphasis:{show:!1,textStyle:{color:"#fff"}}},roam:!0,itemStyle:{normal:{areaColor:"#031525",borderColor:"#FFFFFF"},emphasis:{areaColor:"#2B91B7"}},animation:!1,data:a},{type:"effectScatter",coordinateSystem:"geo",data:p(a[o].sort(function(e,l){return l.value-e.value}).slice(0,20)),symbolSize:function(e){return 10},showEffectOn:"render",rippleEffect:{brushType:"stroke"},hoverAnimation:!0,label:{normal:{formatter:"{b}",position:"right",show:!0}},itemStyle:{normal:{color:colors[colorIndex][o],shadowBlur:10,shadowColor:colors[colorIndex][o]}},zlevel:1},{zlevel:1.5,type:"bar",symbol:"none",itemStyle:{normal:{color:colors[colorIndex][o]}},data:h[o]}]});myChart.setOption(optionXyMap01)})});function randomNum(t,a){switch(arguments.length){case 1:return parseInt(Math.random()*t+1,10);case 2:return parseInt(Math.random()*(a-t+1)+t,10);default:return 0}}
