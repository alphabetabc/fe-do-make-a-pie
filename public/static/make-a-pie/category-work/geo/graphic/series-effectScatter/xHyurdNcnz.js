var beijing="/asset/get/s/data-1499156198404-H1AJkAOEZ.json",chaoyang="/asset/get/s/data-1518338860057-By447tpLf.json",haidian="/asset/get/s/data-1518338852969-Hy677KTIf.json",xicheng="/asset/get/s/data-1518338838010-SyAzQYTIf.json",dongcheng="/asset/get/s/data-1518338829670-H1UfQYa8G.json",fengtai="/asset/get/s/data-1518338823093-HkyMQtpUf.json",daxing="/asset/get/s/data-1518338805373-S1Temta8G.json",mentougou="/asset/get/s/data-1518338799987-S1deQFTLz.json",changping="/asset/get/s/data-1518338783915-HJOJXtaLf.json",shijingshan="/asset/get/s/data-1518338772507-BJnAMKTIz.json",tongzhou="/asset/get/s/data-1518338763250-S17RfKpLM.json",yanqing="/asset/get/s/data-1518338684239-S1EFGtp8f.json";echarts.extendsMap=function(v,r){var n=this.init(document.getElementById(v)),p={},g={大兴区:daxing,昌平区:changping,丰台区:fengtai,门头沟:mentougou,西城区:xicheng,朝阳区:chaoyang,通州区:tongzhou,石景山区:shijingshan,海淀区:haidian,延庆区:yanqing,东城区:dongcheng},y={大兴:[116.344144,39.736553],昌平:[116.23606,40.228372],丰台:[116.294702,39.867817],门头沟:[116.108429,39.947516],西城:[116.37174,39.917861],朝阳:[116.448204,39.927157],通州:[116.663222,39.916533],石景山:[116.223412,39.913434],海淀:[116.3039,39.967869],延庆:[115.981373,40.464599],东城:[116.422908,39.936452]},b={1:"rgba(241, 109, 115, .8)",2:"rgba(255, 235, 59, .7)",3:"rgba(147, 235, 248, 1)"},x={mapName:"china",goDown:!1,bgColor:"#404a59",activeArea:[],data:[],callback:function(e,t,a){}};r&&(r=this.util.extend(x,r));var l=[r.mapName],d=0,f={leftPlus:115,leftCur:150,left:198,top:50},C=[[0,0],[8,11],[0,22]],h={font:'18px "Microsoft YaHei", sans-serif',textColor:"#eee",lineColor:"rgba(147, 235, 248, .8)"},s={resetOption:function(e,t,a){var o=this.createBreadcrumb(a),i=l.indexOf(a),m=t.graphic.length;if(i<0){if(t.graphic.push(o),t.graphic[0].children[0].shape.x2=145,t.graphic[0].children[1].shape.x2=145,t.graphic.length>2)for(var u=0;u<r.data.length;u++)if(a===r.data[u].name+"区"){t.series[0].data=s.initSeriesData([r.data[u]]);break}else t.series[0].data=[];l.push(a),d++}else t.graphic.splice(i+2,m),t.graphic.length<=2&&(t.graphic[0].children[0].shape.x2=60,t.graphic[0].children[1].shape.x2=60,t.series[0].data=s.initSeriesData(r.data)),l.splice(i+1,m),d=i,f.leftCur-=f.leftPlus*(m-i-1);t.geo.map=a,t.geo.zoom=.4,e.clear(),e.setOption(t),this.zoomAnimation(),r.callback(a,t,e)},initSeriesData:function(e){for(var t=[],a=0;a<e.length;a++){var o=y[e[a].name];o&&t.push({name:e[a].name,value:o.concat(e[a].value,e[a].level)})}return t},zoomAnimation:function(){var e=null,t=function(a){e||(e=a),e=e+a,n.setOption({geo:{zoom:e}}),e<1&&window.requestAnimationFrame(function(){t(.2)})};window.requestAnimationFrame(function(){t(.2)})}},c={backgroundColor:r.bgColor,graphic:[{type:"group",left:f.left,top:f.top-4,children:[{type:"line",left:0,top:-20,shape:{x1:0,y1:0,x2:60,y2:0},style:{stroke:h.lineColor}},{type:"line",left:0,top:20,shape:{x1:0,y1:0,x2:60,y2:0},style:{stroke:h.lineColor}}]},{id:l[d],type:"group",left:f.left+2,top:f.top,children:[{type:"polyline",left:90,top:-12,shape:{points:C},style:{stroke:"transparent",key:l[0]},onclick:function(){var e=this.style.key;s.resetOption(n,c,e)}},{type:"text",left:0,top:"middle",style:{text:l[0]==="北京"?"北京市":l[0],textAlign:"center",fill:h.textColor,font:h.font},onclick:function(){s.resetOption(n,c,"北京")}},{type:"text",left:0,top:10,style:{text:"BEIJING",textAlign:"center",fill:h.textColor,font:'12px "Microsoft YaHei", sans-serif'},onclick:function(){s.resetOption(n,c,"北京")}}]}],geo:{map:r.mapName,zoom:1,label:{normal:{show:!0,textStyle:{color:"#fff"}},emphasis:{textStyle:{color:"#fff"}}},itemStyle:{normal:{borderColor:"rgba(147, 235, 248, 1)",borderWidth:1,areaColor:{type:"radial",x:.5,y:.5,r:.8,colorStops:[{offset:0,color:"rgba(147, 235, 248, 0)"},{offset:1,color:"rgba(147, 235, 248, .2)"}],globalCoord:!1},shadowColor:"rgba(128, 217, 248, 1)",shadowOffsetX:-2,shadowOffsetY:2,shadowBlur:10},emphasis:{areaColor:"#389BB7",borderWidth:0}},regions:r.activeArea.map(function(e){return typeof e!="string"?{name:e.name,itemStyle:{normal:{areaColor:e.areaColor||"#389BB7"}},label:{normal:{show:e.showLabel,textStyle:{color:"#fff"}}}}:{name:e,itemStyle:{normal:{borderColor:"#91e6ff",areaColor:"#389BB7"}}}})},series:[{type:"effectScatter",coordinateSystem:"geo",showEffectOn:"render",rippleEffect:{period:15,scale:6,brushType:"fill"},hoverAnimation:!0,itemStyle:{normal:{color:function(e){return b[e.value[3]]},shadowBlur:10,shadowColor:"#333"}},data:s.initSeriesData(r.data)}]};return n.setOption(c),n.on("click",function(e){var t=this;if(r.goDown&&e.name!==l[d]&&g[e.name]){var a=g[e.name];$.get(a,function(o){p=o,echarts.registerMap(e.name,o),s.resetOption(t,c,e.name)})}}),n.setMap=function(e){var t=this;e.indexOf("区")<0&&(e=e+"区");var a=g[e];if(a){var o="./map/"+a+".json";$.get(o,function(i){p=i,echarts.registerMap(e,i),s.resetOption(t,c,e)})}},n},$.getJSON(beijing,function(v){echarts.registerMap("北京",v);var r=echarts.extendsMap("chart-panel",{bgColor:"#154e90",mapName:"北京",goDown:!0,callback:function(n,p,g){console.log(n,p,g)},data:[{name:"大兴",value:10,level:1},{name:"昌平",value:12,level:2},{name:"丰台",value:11,level:3},{name:"通州",value:16,level:2},{name:"石景山",value:12,level:1}]})});
