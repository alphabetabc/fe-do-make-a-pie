var uploadedDataURL="/asset/get/s/data-1601021532008-U4ZFkS5F6.json",binzhou="/asset/get/s/data-1601021540178-NiBsf8MaK.json",dezhou="/asset/get/s/data-1601021547981-xolcQQS1D.json",dongying="/asset/get/s/data-1601021556252-ESxdx992q.json",heze="/asset/get/s/data-1601021563431-m3hYupITe.json",jinan="/asset/get/s/data-1601021569915-1-ngeLwCt.json",jining="/asset/get/s/data-1601021577714-cacGjTBsc.json",liaocheng="/asset/get/s/data-1601021586973-WB2Kffdki.json",linyi="/asset/get/s/data-1601021594426-EW-H7jDah.json",qingdao="/asset/get/s/data-1601021607761-cQcitEozj.json",rizhao="/asset/get/s/data-1601021619254-rPoZAKGBW.json",taian="/asset/get/s/data-1601021628580-fYXBtMSrC.json",weihai="/asset/get/s/data-1601021640122-Kr919ft63.json",yantai="/asset/get/s/data-1601021647171-vp0ep01T5.json",yongfang="/asset/get/s/data-1601021654936-PLnJUWQZP.json",zaozhuang="/asset/get/s/data-1601021660971-AJ2g1_9r9.json",zibo="/asset/get/s/data-1601021666722-_IBRD8nVV.json";$.get(uploadedDataURL,function(F){myChart.hideLoading(),echarts.registerMap("山东",F);var m={济南市:jinan,菏泽市:heze,德州市:dezhou,聊城市:liaocheng,泰安市:taian,临沂市:linyi,淄博市:zibo,枣庄市:zaozhuang,滨州市:binzhou,潍坊市:yongfang,东营市:dongying,青岛市:qingdao,烟台市:yantai,威海市:weihai,日照市:rizhao,济宁市:jining},c={济南市:[117.121225,36.66466],菏泽市:[115.480656,35.23375],德州市:[116.39,37.45],聊城市:[115.97,36.45],泰安市:[117.13,36.18],临沂市:[118.35,35.05],淄博市:[118.05,36.78],枣庄市:[117.57,34.86],滨州市:[118.03,37.36],潍坊市:[119.1,36.62],东营市:[118.49,37.46],青岛市:[120.3,36.62],烟台市:[120.9,37.32],威海市:[122.1,37.2],日照市:[119.1,35.62],济宁市:[116.7,35.42]},v=[[{name:"济南市",value:10}],[{name:"菏泽市",value:0}],[{name:"德州市",value:0}],[{name:"聊城市",value:0}],[{name:"泰安市",value:1.3}],[{name:"临沂市",value:.2}],[{name:"淄博市",value:.4}],[{name:"枣庄市",value:.6}],[{name:"滨州市",value:.8}],[{name:"潍坊市",value:.4}],[{name:"东营市",value:.8}],[{name:"青岛市",value:.2}],[{name:"烟台市",value:1.3}],[{name:"威海市",value:0}],[{name:"日照市",value:0}],[{name:"济宁市",value:0}]],p=[{name:"中国铁路济南局集团有限公司济南供电段",value:[116.98,36.67,.5]}],g=[{name:"菏泽供电公司万福供电所",value:[115.38,35.28,.5]}],y=[{name:"德州袁桥供电所",value:[116.4,37.44,.5]},{name:"长官供电所",value:[116.92,37.79,1]},{name:"德州赵虎供电所",value:[116.49,37.51,1]},{name:"尚堂供电所",value:[117.41,37.71,.1]},{name:"尹屯供电所",value:[116.57,37.13,.4]}],x=[{name:"聊城供电公司沙镇供电所",value:[115.8,36.34,.5]}],C=[{name:"泰安徂徕供电所",value:[117.28,36.11,.5]},{name:"泰安道朗供电所",value:[116.92,36.21,1]},{name:"泰安崅峪供电所",value:[117.42,36.18,1]}],b=[{name:"山东省临沂市蒙阴县野店供电所",value:[118.1,35.88,.5]},{name:"山东省临沂市蒙阴县岱崮供电所",value:[118.17,35.95,1]},{name:"山东省临沂市兰山区城西供电所",value:[118.31,35.1,1]}],O=[{name:"金岭供电所",value:[118.23,36.8,.5]},{name:"唐坊供电所",value:[118,37.19,1]},{name:"博山源泉供电所",value:[118.05,36.43,1]}],z=[{name:"枣庄供电公司",value:[117.32,34.8,.5]},{name:"国家电网枣庄市中供电",value:[117.55,34.87,1]}],k=[{name:"滨州无棣县供电公司",value:[117.61,37.74,.5]},{name:"滨州沾化区供电公司",value:[118.12,37.69,1]}],j=[{name:"潍坊开发区供电所",value:[119.41,36.82,.5]},{name:"国网潍坊市寒亭区供电",value:[119.2,36.77,1]}],w=[{name:"东营市广北供电所",value:[118.68,37.26,.5]},{name:"东营港供电",value:[118.92,38.08,1]}],S=[{name:"国网青岛市黄岛区供电公司",value:[120.04,35.87,.5]},{name:"国网山东省电力公司青岛市黄岛区供电公司",value:[120.04,35.87,1]}],T=[{name:"国网烟台供电公司",value:[121.4,37.54,.5]},{name:"烟台开发区供电公司",value:[121.26,37.56,1]},{name:"国网烟台市福山区供电公司",value:[121.28,37.51,1]}],D=[{name:"国网威海供电公司",value:[122.11,37.51,.5]},{name:"威海乳山市供电公司",value:[121.52,36.92,1]}],A=[{name:"日照岚山供电营业厅",value:[119.32,35.12,.5]},{name:"国家电网日照城关供电营业厅",value:[119.44,35.44,1]}],M=[{name:"济宁嘉祥供电营业厅",value:[116.34,35.41,.5]},{name:"济宁金乡供电营业厅",value:[116.3,35.08,1]}],B={bgColor:"#013954",mapName:"山东",goDown:!0,callback:function(a,e,t){console.log(a,e,t),a=="山东"?(e.series[0].data=q(v),e.series[1].data=v.map(function(r){return{name:r[0].name,value:c[r[0].name].concat([r[0].value])}}),myChart.setOption(e,!0),setTimeout(()=>{myChart.setOption(e,!0)},500)):a=="济南市"?(e.series[0].data=s(p),e.series[1].data=p,myChart.setOption(e,!0),setTimeout(()=>{myChart.setOption(e,!0)},500)):a=="菏泽市"?(e.series[0].data=s(g),e.series[1].data=g,myChart.setOption(e,!0),setTimeout(()=>{myChart.setOption(e,!0)},500)):a=="德州市"?(e.series[0].data=s(y),e.series[1].data=y,myChart.setOption(e,!0),setTimeout(()=>{myChart.setOption(e,!0)},500)):a=="聊城市"?(e.series[0].data=s(x),e.series[1].data=x,myChart.setOption(e,!0),setTimeout(()=>{myChart.setOption(e,!0)},500)):a=="泰安市"?(e.series[0].data=s(C),e.series[1].data=C,myChart.setOption(e,!0),setTimeout(()=>{myChart.setOption(e,!0)},500)):a=="临沂市"?(e.series[0].data=s(b),e.series[1].data=b,myChart.setOption(e,!0),setTimeout(()=>{myChart.setOption(e,!0)},500)):a=="淄博市"?(e.series[0].data=s(O),e.series[1].data=O,myChart.setOption(e,!0),setTimeout(()=>{myChart.setOption(e,!0)},500)):a=="枣庄市"?(e.series[0].data=s(z),e.series[1].data=z,myChart.setOption(e,!0),setTimeout(()=>{myChart.setOption(e,!0)},500)):a=="滨州市"?(e.series[0].data=s(k),e.series[1].data=k,myChart.setOption(e,!0),setTimeout(()=>{myChart.setOption(e,!0)},500)):a=="潍坊市"?(e.series[0].data=s(j),e.series[1].data=j,myChart.setOption(e,!0),setTimeout(()=>{myChart.setOption(e,!0)},500)):a=="东营市"?(e.series[0].data=s(w),e.series[1].data=w,myChart.setOption(e,!0),setTimeout(()=>{myChart.setOption(e,!0)},500)):a=="青岛市"?(e.series[0].data=s(S),e.series[1].data=S,myChart.setOption(e,!0),setTimeout(()=>{myChart.setOption(e,!0)},500)):a=="烟台市"?(e.series[0].data=s(T),e.series[1].data=T,myChart.setOption(e,!0),setTimeout(()=>{myChart.setOption(e,!0)},500)):a=="威海市"?(e.series[0].data=s(D),e.series[1].data=D,myChart.setOption(e,!0),setTimeout(()=>{myChart.setOption(e,!0)},500)):a=="日照市"?(e.series[0].data=s(A),e.series[1].data=A,myChart.setOption(e,!0),setTimeout(()=>{myChart.setOption(e,!0)},500)):a=="济宁市"&&(e.series[0].data=s(M),e.series[1].data=M,myChart.setOption(e,!0),setTimeout(()=>{myChart.setOption(e,!0)},500))},data:[]},N={1:"#f44336",2:"#fc9700",3:"#ffde00",4:"#00eaff"},L={mapName:"china",goDown:!1,bgColor:"#013954",activeArea:[],data:[],callback:function(a,e,t){}};B&&(opt1=$.extend(L,B));var d=[opt1.mapName],h=0,n={leftPlus:55,leftCur:50,left:10,top:10},P=[[0,0],[8,11],[0,22]],f={font:'18px "Microsoft YaHei", sans-serif',textColor:"#eee",lineColor:"rgba(147, 235, 248, .8)"},o={resetOption:function(a,e,t){console.log(a),console.log(e),console.log(t);var r=this.createBreadcrumb(t),l=d.indexOf(t),u=e.graphic.length;if(l<0){if(console.log("jinru1"),e.graphic.push(r),e.graphic[0].children[0].shape.x2=195,e.graphic[0].children[1].shape.x2=195,e.graphic.length>2)for(var i=0;i<opt1.data.length;i++)if(t===opt1.data[i].name+"市"){e.series[0].data=o.initSeriesData(opt1.data[i].data);break}else e.series[0].data=[];d.push(t),h++}else console.log("jinru2",l),e.graphic.splice(l+2,u),e.graphic.length<=2&&(e.graphic[0].children[0].shape.x2=85,e.graphic[0].children[1].shape.x2=85,e.series[0].data=o.initSeriesData(v)),d.splice(l+1,u),h=l,n.leftCur-=n.leftPlus*(u-l-1);e.geo.map=t,e.geo.zoom=1,a.clear(),a.setOption(e),this.zoomAnimation(),opt1.callback(t,e,a)},createBreadcrumb:function(a){var e={济南市:"jinan",菏泽市:"heze",德州市:"dezhou",聊城市:"liaocheng",泰安市:"taian",临沂市:"linyi",淄博市:"zibo",枣庄市:"zaozhuang",滨州市:"binzhou",潍坊市:"yongfang",东营市:"dongying",青岛市:"qingdao",烟台市:"yantai",威海市:"weihai",日照市:"rizhao",济宁市:"jining"},t={type:"group",id:a,left:n.leftCur+n.leftPlus,top:n.top+3,children:[{type:"polyline",left:-90,top:-5,shape:{points:P},style:{stroke:"#fff",key:a},onclick:function(){var r=this.style.key;o.resetOption(myChart,option,r)}},{type:"text",left:-68,top:"middle",style:{text:a,textAlign:"center",fill:f.textColor,font:f.font},onclick:function(){var r=this.style.text;o.resetOption(myChart,option,r)}},{type:"text",left:-68,top:10,style:{name:a,text:e[a]?e[a].toUpperCase():"",textAlign:"center",fill:f.textColor,font:'12px "Microsoft YaHei", sans-serif'},onclick:function(){var r=this.style.name;o.resetOption(myChart,option,r)}}]};return n.leftCur+=n.leftPlus,t},initSeriesData:function(a){console.log(a,"22222222222");for(var e=[],t=0;t<a.length;t++){var r=c[a[t].name];r&&e.push({name:a[t].name,value:r.concat(a[t].value,a[t].level)})}return e},zoomAnimation:function(){var a=null,e=function(t){a||(a=t),a=a+t,myChart.setOption({geo:{zoom:a}}),a<1&&window.requestAnimationFrame(function(){e(.2)})};window.requestAnimationFrame(function(){e(.2)})}},q=function(a){for(var e=[],t=0;t<a.length;t++){var r=a[t],l=r[0].name,u=c[r[0].name],i=[117.000923,36.675807];u&&i&&e.push([{name:l,coord:u,value:r[0].value},{coord:i}])}return e},s=function(a){for(var e=[],t=0;t<a.length;t++){var r=a[t],l=r.name,u=a[0].value.slice(0,2),i=r.value.slice(0,2);u&&i&&e.push([{name:l,coord:u,value:r.value[2]},{coord:i}])}return e},E=[];[["济南市",v]].forEach(function(a,e){console.log(a),E.push({type:"lines",zlevel:1,effect:{show:!0,period:3,trailLength:.7,color:"#fff",symbolSize:3},lineStyle:{normal:{width:.1,opacity:.2,curveness:.3}},data:q(a[1])},{type:"effectScatter",coordinateSystem:"geo",zlevel:2,rippleEffect:{period:4,brushType:"stroke",scale:4},label:{normal:{show:!1,position:"right",offset:[5,0],formatter:function(t){return t.data.name},fontSize:19},emphasis:{show:!0}},symbol:"circle",symbolSize:function(t){return 10+t[2]*0},itemStyle:{normal:{show:!1,color:"#f00"}},data:a[1].map(function(t){return{name:t[0].name,value:c[t[0].name].concat([t[0].value])}})},{type:"scatter",coordinateSystem:"geo",zlevel:2,rippleEffect:{period:4,brushType:"stroke",scale:4},label:{normal:{show:!1,position:"right",color:"#0f0",formatter:"{b}",textStyle:{color:"#0f0"}},emphasis:{show:!1,color:"#f60"}}})}),option={tooltip:{trigger:"item",backgroundColor:"rgba(0,0,0,0)",formatter:function(a){if(console.log(a,"item!!!!"),a.componentSubType==="lines"){var e="";return e='<div style="background:#fff;border-radius:10px;padding-top:10px;box-shadow:0 0 10px #666"><div style="color:#fff;height:20px;border-radius:6px;font-size:12px;line-height:20px;background-color:#5861a2;text-align:center;margin:0 2px;">'+a.data.name+'</div><div style="text-align:center;color:#494949;padding:8px 6px"><span style="font-size:18px;font-weight:bold;">总测试设备：'+a.data.value+" </span></div></div>",e}else if(a.componentSubType==="effectScatter"){var t="";return t='<div style="background:#fff;border-radius:10px;padding-top:10px;box-shadow:0 0 10px #666"><div style="color:#fff;height:20px;border-radius:6px;font-size:12px;line-height:20px;background-color:#5861a2;text-align:center;margin:0 2px;">'+a.data.name+'</div><div style="text-align:center;color:#494949;padding:8px 6px"><span style="font-size:18px;font-weight:bold;">总测试设备：'+a.data.value[2]+" </span></div></div>",t}else if(a.componentSubType==="scatter"){var r="";return r='<div style="background:#fff;border-radius:10px;padding-top:10px;box-shadow:0 0 10px #666"><div style="color:#fff;height:20px;border-radius:6px;font-size:12px;line-height:20px;background-color:#5861a2;text-align:center;margin:0 2px;">'+a.data.name+'</div><div style="text-align:center;color:#494949;padding:8px 6px"><span style="font-size:18px;font-weight:bold;">总测试设备：'+a.data.value[2]+" </span></div></div>",r}}},backgroundColor:"#013954",graphic:[{type:"group",left:n.left,top:n.top-4,children:[{type:"line",left:0,top:-20,shape:{x1:0,y1:0,x2:85,y2:0},style:{stroke:f.lineColor}},{type:"line",left:0,top:20,shape:{x1:0,y1:0,x2:85,y2:0},style:{stroke:f.lineColor}}]},{id:d[h],type:"group",left:n.left+2,top:n.top,children:[{type:"polyline",left:90,top:-12,shape:{points:P},style:{stroke:"transparent",key:d[0]},onclick:function(){var a=this.style.key;console.log(a,"111111"),o.resetOption(myChart,option,a)}},{type:"text",left:0,top:"middle",style:{text:d[0]==="山东"?"山东省":d[0],textAlign:"center",fill:f.textColor,font:f.font},onclick:function(){o.resetOption(myChart,option,"山东")}},{type:"text",left:0,top:10,style:{text:"SHANDONG",textAlign:"center",fill:f.textColor,font:'12px "Microsoft YaHei", sans-serif'},onclick:function(){o.resetOption(myChart,option,"山东")}}]}],visualMap:{min:0,max:1,calculable:!0,show:!1,color:["#f44336","#fc9700","#ffde00","#ffde00","#00eaff"],textStyle:{color:"#fff"}},geo:{map:"山东",layoutCenter:["55%","50%"],layoutSize:"109%",label:{normal:{show:!0,textStyle:{color:"#fff"}},emphasis:{textStyle:{color:"#fff"}}},roam:!0,mapLocation:{width:"110%",height:"97%"},itemStyle:{normal:{borderColor:"rgba(147, 235, 248, 1)",borderWidth:1,areaColor:{type:"radial",x:.5,y:.5,r:.8,colorStops:[{offset:0,color:"rgba(147, 235, 248, 0)"},{offset:1,color:"rgba(147, 235, 248, .2)"}],globalCoord:!1},shadowColor:"rgba(128, 217, 248, 1)",shadowOffsetX:-2,shadowOffsetY:2,shadowBlur:10},emphasis:{itemStyle:{areaColor:"#FFD181",borderColor:"#404a59",borderWidth:1}}}},series:E},myChart.setOption(option),myChart.on("click",function(a){console.log(a);var e=this;if(m[a.name]){var t=m[a.name];$.get(t,function(r){curGeoJson=r,echarts.registerMap(a.name,r),o.resetOption(e,option,a.name)})}})});
