var getGunagdong="/asset/get/s/data-1594284662649-U9sGdO2Bp.json",getChinaJson="./asset/get/s/data-1594284556862-IpnXS2CV7.json";let chinaJson=null,gunagdong=null;$.getJSON(getChinaJson,function(r){chinaJson=r,$.getJSON(getGunagdong,function(n){gunagdong=n;const s=[{name:"广东省",data:gunagdong,alone:["深圳","东莞","佛山"]}],o=JSON.parse(JSON.stringify(chinaJson));o.features.forEach(e=>{s.forEach(t=>{e.properties.name==t.name&&(e.geometry.coordinates=[],t.data.features.forEach(a=>{t.alone.includes(a.properties.name)?o.features.push(a):e.geometry.coordinates=e.geometry.coordinates.concat(a.geometry.coordinates)}))})}),console.log(gunagdong,99),echarts.registerMap("china",o),option={tooltip:{triggerOn:"mousemove",formatter:function(e){return isNaN(e.value)&&(e.value=0),e.name+"："+e.value}},roam:!0,visualMap:{min:0,max:100,left:"auto",right:0,bottom:40,showLabel:!0,text:["完成率"],pieces:[{gt:90,label:"90%以上",color:"#5473E9"},{gte:60,lte:89,label:"60-90%",color:"#80A5E8"},{gte:30,lt:59,label:"30-60%",color:"#AEC7F5"},{gt:0,lt:29,label:"30%以下",color:"#D5E2FA"}],show:!0},geo:{map:"china",scaleLimit:{min:1,max:5},zoom:1,left:0,label:{normal:{show:!0,fontSize:"14",color:"rgba(0,0,0,0.7)"}},itemStyle:{normal:{areaColor:"#f00",borderColor:"rgba(0, 0, 0, 0.2)"},emphasis:{areaColor:"#f0f",shadowOffsetX:0,shadowOffsetY:0,borderWidth:0}}},series:[{name:"机构完成率",type:"map",geoIndex:0,data:this.dataJson}]},myChart.setOption(option)})});
