for(var geoCoordMap={北京:[116.4551,40.2539],天津:[117.4219,39.4189],河北:[114.4995,38.1006],山西:[112.3352,37.9413],内蒙古:[111.4124,40.4901],辽宁:[123.1238,42.1216],吉林:[125.8154,44.2584],黑龙江:[127.9688,45.368],上海:[121.4648,31.2891],江苏:[118.8062,31.9208],浙江:[119.5313,29.8773],安徽:[117.29,32.0581],福建:[119.4543,25.9222],江西:[116.0046,28.6633],山东:[117.1582,36.8701],河南:[113.4668,34.6234],湖北:[114.3896,30.6628],湖南:[113.0823,28.2568],广东:[113.5107,23.2196],广西:[108.479,23.1152],海南:[110.3893,19.8516],重庆:[107.7539,30.1904],四川:[103.9526,30.7617],贵州:[106.6992,26.7682],云南:[102.9199,25.4663],西藏:[91.1865,30.1465],陕西:[109.1162,34.2004],甘肃:[103.5901,36.3043],青海:[101.4038,36.8207],宁夏:[106.3586,38.1775],新疆:[87.9236,43.5883],新疆兵团:[85.42,41.82]},list=[{name:"北京",cons:100,apct:100},{name:"天津",cons:30,apct:30},{name:"河北",cons:30,apct:30},{name:"山西",cons:30,apct:30},{name:"内蒙古",cons:30,apct:30},{name:"辽宁",cons:30,apct:30},{name:"吉林",cons:30,apct:30},{name:"黑龙江",cons:30,apct:30},{name:"上海",cons:30,apct:30},{name:"江苏",cons:30,apct:30},{name:"浙江",cons:30,apct:30},{name:"安徽",cons:30,apct:30},{name:"福建",cons:30,apct:30},{name:"江西",cons:30,apct:30},{name:"山东",cons:30,apct:30},{name:"河南",cons:30,apct:30},{name:"湖北",cons:30,apct:30},{name:"湖南",cons:30,apct:30},{name:"广东",cons:30,apct:30},{name:"广西",cons:30,apct:30},{name:"海南",cons:30,apct:30},{name:"重庆",cons:30,apct:30},{name:"四川",cons:30,apct:30},{name:"贵州",cons:30,apct:30},{name:"云南",cons:30,apct:30},{name:"西藏",cons:30,apct:30},{name:"陕西",cons:30,apct:30},{name:"甘肃",cons:30,apct:30},{name:"青海",cons:30,apct:30},{name:"宁夏",cons:30,apct:30},{name:"新疆",cons:30,apct:30},{name:"新疆兵团",cons:30,apct:30}],convertData=function(e){var o=[];return o=e.map(function(t){var n={},c=geoCoordMap[t.name],r=geoCoordMap.北京,l=c&&r;return c&&r?{fromName:t.name,toName:"北京",coords:[c,r]}:n}),o},color=["#5E7AA9","#1e90ff","#46bee9"],series=[],key=["cons","acpt"],keyname=["建设项目","验收项目"],i=0;i<key.length;i++)series.push({name:keyname[i],type:"lines",zlevel:2,effect:{show:!0,period:6,constantSpeed:100,trailLength:.4,color:"#F9FAFD",symbolSize:5},lineStyle:{normal:{color:color[i],width:0,curveness:.2}},data:convertData(list)},{name:keyname[i],type:"lines",zlevel:1,effect:{show:!0,period:6,trailLength:0,symbol:"image://",symbolSize:15},label:{emphasis:{show:!0}},lineStyle:{normal:{color:color[i],width:2,opacity:.8,curveness:.2},emphasis:{color:color[i],shadowColor:"rgba(0, 0, 0, 0.5)",shadowBlur:10,width:6}},data:convertData(list)},{name:keyname[i],type:"effectScatter",coordinateSystem:"geo",zlevel:2,rippleEffect:{period:5,scale:8,brushType:"stroke"},symbolSize:function(e){return[e[0],e[1]].toString()==geoCoordMap.北京.toString()?13:5},itemStyle:{normal:{color:color[i]}},data:list.map(function(e){return{name:e.name,value:geoCoordMap[e.name].concat([e[key[i]]])}})},{name:keyname[i],type:"map",mapType:"china",zlevel:0,roam:!1,zoom:1.2,selectedMode:"single",label:{normal:{show:!1},emphasis:{show:!1}},itemStyle:{normal:{areaColor:"#F0F2F5",borderColor:"red"},emphasis:{areaColor:"#F79092"}},data:list.map(function(e){return{name:e.name,value:e[key[i]]}})});console.log(series),option={title:{text:"模拟迁徙",subtext:"数据纯属虚构",left:"center",textStyle:{color:"#fff"}},tooltip:{trigger:"item",formatter:function(e){var o=e.seriesName+"<br/>";if(e.seriesType=="lines"){o+=e.data.fromName+" > "+e.data.toName;for(var t=option.series,n=0;n<t.length;n++)if(t[n].name==e.seriesName&&t[n].type=="effectScatter")for(var c=0;c<t[n].data.length;c++)t[n].data[c].name==e.data.fromName&&(o+="："+t[n].data[c].value[2]+"个")}else e.seriesType=="effectScatter"?o+=e.data.name+"："+e.data.value[2]+"个":e.seriesType=="map"&&(o+=e.data.name+"："+e.data.value+"个");return o}},legend:{orient:"vertical",top:"bottom",left:"right",data:["建设项目","验收项目"],textStyle:{color:"#fff"},selectedMode:"single"},geo:{map:"china",label:{emphasis:{show:!1}},roam:!1,zoom:1.2,itemStyle:{normal:{areaColor:"#F0F2F5",borderColor:"red"},emphasis:{areaColor:"#F79092"}}},series},myChart.on("mapselectchanged",function(e){var o="",t=e.selected;for(var n in t)t[n]&&(o=n);console.log("选择的省份是："+o),console.log(e)});var a=0;setInterval(function(){var e=a%2,o=["建设项目","验收项目"];myChart.dispatchAction({type:"legendSelect",name:o[e]}),a++},2100);
