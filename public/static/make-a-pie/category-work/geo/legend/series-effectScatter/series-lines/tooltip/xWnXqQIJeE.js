var geoList=[{name:"石嘴山",longitude:106.333447,latitude:38.981052,value:1,status:"到报"},{name:"银川",longitude:106.204666,latitude:38.491113,value:1,status:"缺报"},{name:"吴忠",longitude:106.241461,latitude:38.070551,value:1,status:"到报"},{name:"中卫",longitude:105.229609,latitude:37.501102,value:1,status:"缺报"},{name:"固原",longitude:106.223063,latitude:36.05075,value:1,status:"故障"}],series=[],convertData=function(e,t){for(var r=[],o=0;o<e.length;o++){var l=e[o],a=[106.223063,37.427776],n=[l.longitude,l.latitude];l.status===t&&a&&n&&r.push({toName:l.name,coords:[a,n]})}return r},convertDataStatus=function(e,t){for(var r=[],o=0;o<e.length;o++){var l=e[o],a=[l.longitude,l.latitude];l.status===t&&a&&r.push({name:l.name,value:a.concat(l.value)})}return r},planePath="path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z";[["银川",geoList]].forEach(function(e,t){series.push({name:"到报拖尾",type:"lines",zlevel:1,silent:!0,effect:{show:!0,period:6,trailLength:.7,color:"#0f0",symbolSize:3},lineStyle:{normal:{color:"#fff",width:0,curveness:.2}},data:convertData(e[1],"到报")},{name:"到报线",type:"lines",silent:!0,zlevel:2,effect:{show:!0,period:6,trailLength:0,symbol:"arrow",symbolSize:10},lineStyle:{normal:{color:"#0f0",width:2,opacity:.5,curveness:.2}},data:convertData(e[1],"到报")},{name:"缺报线",type:"lines",zlevel:2,silent:!0,effect:{show:!0,period:6,trailLength:0,symbol:"triangle",symbolSize:10},lineStyle:{normal:{color:"#ff0",width:2,opacity:.5,curveness:.2}},data:convertData(e[1],"缺报")},{name:"中心点",type:"effectScatter",coordinateSystem:"geo",zlevel:3,rippleEffect:{brushType:"stroke"},label:{normal:{show:!0,position:"right",formatter:"{b}",textStyle:{fontSize:15,fontWeight:"bolder"}}},symbolSize:20,itemStyle:{normal:{color:"#fff"}},data:[{name:"数据中心",value:[106.223063,37.427776,"数据中心"]}]},{name:"到报",type:"effectScatter",coordinateSystem:"geo",zlevel:3,rippleEffect:{brushType:"stroke"},label:{normal:{show:!0,position:"right",formatter:"{b}"}},symbolSize:10,itemStyle:{normal:{color:"#0f0"}},data:convertDataStatus(e[1],"到报")},{name:"缺报",type:"effectScatter",coordinateSystem:"geo",zlevel:3,rippleEffect:{brushType:"stroke"},label:{normal:{show:!0,position:"right",formatter:"{b}"}},symbolSize:10,itemStyle:{normal:{color:"#ff0"}},data:convertDataStatus(e[1],"缺报")},{name:"故障",type:"effectScatter",coordinateSystem:"geo",zlevel:3,rippleEffect:{brushType:"stroke"},label:{normal:{show:!0,position:"right",formatter:"{b}"}},symbolSize:10,itemStyle:{normal:{color:"#f00"}},data:convertDataStatus(e[1],"故障")})}),option={backgroundColor:"#20263f",tooltip:{trigger:"item",formatter:function(e){if(e.componentSubType==="effectScatter"){var t="台站名称: "+e.name+"<br/>";return t+=e.marker+"经度: "+e.value[0]+"<br/>",t+=e.marker+"纬度: "+e.value[1]+"<br/>",t+=e.marker+"所属值: "+e.value[2]+"<br/>",t}}},legend:{orient:"vertical",top:"bottom",left:"right",data:["到报","缺报","故障"],textStyle:{color:"#fff"}},geo:{map:"宁夏",zoom:1.1,label:{show:!1,textStyle:{color:"#fff",fontSize:16,opacity:1,backgroundColor:"rgba(53,171,199,0)"},emphasis:{show:!1,textStyle:{color:"#fff",fontSize:16,opacity:1,backgroundColor:"rgba(53,171,199,0)"}}},roam:!0,itemStyle:{normal:{areaColor:"#2158c9",borderWidth:2,borderColor:"#03a2fe",shadowOffsetX:-10,shadowColor:"#2158c9",shadowBlur:1},emphasis:{areaColor:"#2464ae"}}},series},myChart.setOption(option),myChart.on("legendselectchanged",function(e){var t=e.selected[e.name];e.name==="到报"&&!t?myChart.setOption({legend:{selected:{到报拖尾:!1,到报线:!1}}}):e.name==="到报"&&t?myChart.setOption({legend:{selected:{到报拖尾:!0,到报线:!0}}}):e.name==="缺报"&&!t?myChart.setOption({legend:{selected:{缺报线:!1}}}):e.name==="缺报"&&t&&myChart.setOption({legend:{selected:{缺报线:!0}}})});
