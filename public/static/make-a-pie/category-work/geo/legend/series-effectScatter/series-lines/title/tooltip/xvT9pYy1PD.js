var uploadedDataURL="/asset/get/s/data-1509940365453-SkScnUTCW.json";myChart.showLoading(),$.getJSON(uploadedDataURL,function(i){echarts.registerMap("jiangxi",i),myChart.hideLoading();var o={赣州市:[114.940278,25.85097],吉安市:[114.986373,27.111699],上饶市:[117.971185,28.44442],九江市:[115.992811,29.712034],抚州市:[116.358351,27.98385],宜春市:[114.391136,27.8043],南昌市:[115.892151,28.676493],景德镇市:[117.214664,29.29256],萍乡市:[113.852186,27.622946],鹰潭市:[117.033838,28.238638],新余市:[114.930835,27.810834]},s=[[{name:"赣州市"},{name:"吉安市",value:1}],[{name:"南昌市"},{name:"上饶市",value:90}],[{name:"九江市"},{name:"赣州市",value:80}],[{name:"赣州市"},{name:"抚州市",value:70}],[{name:"赣州市"},{name:"宜春市",value:60}],[{name:"赣州市"},{name:"九江市",value:50}],[{name:"赣州市"},{name:"南昌市",value:50}],[{name:"赣州市"},{name:"景德镇市",value:40}],[{name:"赣州市"},{name:"萍乡市",value:30}],[{name:"赣州市"},{name:"鹰潭市",value:20}],[{name:"赣州市"},{name:"新余市",value:10}]],c=[[{name:"南昌市"},{name:"吉安市",value:95}],[{name:"南昌市"},{name:"上饶市",value:90}],[{name:"南昌市"},{name:"九江市",value:80}],[{name:"南昌市"},{name:"抚州市",value:70}],[{name:"南昌市"},{name:"宜春市",value:60}],[{name:"南昌市"},{name:"赣州市",value:50}],[{name:"南昌市"},{name:"景德镇市",value:40}],[{name:"鹰潭市"},{name:"南昌市",value:10}],[{name:"南昌市"},{name:"鹰潭市",value:20}],[{name:"南昌市"},{name:"新余市",value:10}]],f=[[{name:"吉安市"},{name:"南昌市",value:100}],[{name:"吉安市"},{name:"上饶市",value:90}],[{name:"吉安市"},{name:"九江市",value:80}],[{name:"吉安市"},{name:"抚州市",value:70}],[{name:""},{name:"宜春市",value:60}],[{name:"赣州市"},{name:"吉安市",value:50}],[{name:"吉安市"},{name:"景德镇市",value:40}],[{name:"吉安市"},{name:"萍乡市",value:30}],[{name:"吉安市"},{name:"鹰潭市",value:20}],[{name:"吉安市"},{name:"赣州市",value:20}],[{name:"吉安市"},{name:"新余市",value:10}]],m=function(e){console.log(e);for(var n=[],a=0;a<e.length;a++){var l=e[a],u=o[l[0].name],v=o[l[1].name];u&&v&&n.push({fromName:l[0].name,toName:l[1].name,coords:[u,v],value:l[1].value})}return n},t=["#a6c84c","#ffa022","#46bee9"],r=[];[["双喜(软经典)",s],["真龙(巴马天成)",f],["红梅(软黄)",c]].forEach(function(e,n){r.push({name:e[0],type:"lines",zlevel:1,effect:{show:!0,period:6,trailLength:.7,color:"#fff",symbolSize:3},lineStyle:{normal:{color:t[n],width:0,curveness:.2}},data:m(e[1])},{name:e[0],type:"lines",zlevel:2,symbol:["none","arrow"],symbolSize:10,effect:{show:!0,period:6,trailLength:0,symbol:"arrow",symbolSize:8},lineStyle:{normal:{color:t[n],width:1,opacity:.6,curveness:.2}},data:m(e[1])},{name:e[0],type:"effectScatter",coordinateSystem:"geo",zlevel:2,rippleEffect:{brushType:"stroke"},label:{normal:{show:!0,position:"right",formatter:"{b}"}},symbolSize:function(a){return a[2]/8},itemStyle:{normal:{color:t[n]}},data:e[1].map(function(a){return{name:a[1].name,value:o[a[1].name].concat([a[1].value])}})})}),console.log(r),option={backgroundColor:"#404a59",title:{text:"烟草省内外流",subtext:"数据流向",left:"center",textStyle:{color:"#fff"}},tooltip:{trigger:"item",formatter:function(e,n,a){return console.log(e),e.seriesType=="effectScatter"?"线路："+e.data.name+e.data.value[2]:e.seriesType=="lines"?e.data.fromName+">"+e.data.toName+"<br />"+e.data.value+"条":e.name}},legend:{orient:"vertical",top:"bottom",left:"right",data:["双喜(软经典)","真龙(巴马天成)","红梅(软黄)"],textStyle:{color:"#fff"},selectedMode:"single"},geo:{show:!0,map:"jiangxi",label:{emphasis:{show:!0,color:"#fff"}},roam:!0,itemStyle:{normal:{areaColor:"#323c48",borderColor:"#404a59"},emphasis:{areaColor:"#2a333d"}}},series:r},myChart.setOption(option)});
