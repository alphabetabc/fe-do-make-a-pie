let data=[{name:"Shenzhen",value:20},{name:"Xiamen",value:20},{name:"Shantou",value:20},{name:"Hainan",value:20}],data_2=[{name:"Shanghai",value:20},{name:"Dalian",value:20},{name:"Qinhuangdao",value:20},{name:"Tianjin",value:20},{name:"Yantai",value:20},{name:"Qingdao",value:20},{name:"Lianyungang",value:20},{name:"Nantong",value:20},{name:"Ningbo",value:20},{name:"Wenzhou",value:20},{name:"Fuzhou",value:20}],special_data_1=[{name:"Zhuhai",value:20}],special_data_2=[{name:"Zhanjiang",value:20}],special_data_3=[{name:"Guangzhou",value:20},{name:"Beihai",value:20}],geoCoordMap={Qingdao:[120.33,36.07],Shanghai:[121.48,31.22],Xiamen:[118.1,24.46],Shantou:[116.69,23.39],Lianyungang:[119.16,34.59],Shenzhen:[114.07,22.62],Zhuhai:[113.52,22.3],Dalian:[121.62,38.92],Beihai:[109.12,21.49],Tianjin:[117.2,39.13],Yantai:[121.39,37.52],Nantong:[121.05,32.08],Ningbo:[121.56,29.86],Wenzhou:[120.65,28.01],Guangzhou:[113.23,23.16],Hainan:[110.37,19.1],Zhanjiang:[110.359377,21.270708],Qinhuangdao:[119.57,39.95]},convertData=function(a){let t=[];for(let e=0;e<a.length;e++){let n=geoCoordMap[a[e].name];n&&t.push({name:a[e].name,value:n.concat(a[e].value)})}return t},left=!1,top=!1,priority="top",config={ecBoxId:"chart-panel",lineColor:"#f4e925",L1:{time:.3,long:40},L2:{time:.3,long:40},text:{time:.5,text:"",font:"14px Arial",color:"#f4e925",padding:[10,10],width:120,height:60,lineHeight:24,backgroundColor:"rgba(50, 50, 50, 0.9)"}};option={title:{text:"Chart 3: China Special Economic Zone and Coastal Open City",textStyle:{fontWeight:"bolder",fontSize:18,textShadowBlur:0},color:"#000000",padding:[80,240]},backgroundColor:"#FFFFFF",tooltip:{trigger:"item",triggerOn:"click",backgroundColor:"transparent",alwaysShowContent:!0,position(a){return getPosOrSize("pos",a)},formatter(a,t,e){canvasAnimation(a);let n=getPosOrSize("size");return`<canvas id="tCanvas" width="${n.width}" height="${n.height}">123</canvas>`}},legend:{show:!0,top:200,orient:"vertical",z:2},geo:{map:"china",label:{emphasis:{show:!1}},roam:!1,itemStyle:{normal:{areaColor:"#CCCCCC",borderColor:"#FFFFFF"},emphasis:{areaColor:"#00CC33"}}},series:[{name:"Special Economic Zone",type:"effectScatter",coordinateSystem:"geo",data:convertData(data.sort(function(a,t){return t.value-a.value}).slice(0,50)),symbolSize:function(a){return a[2]/5},label:{normal:{formatter:"{b}",position:"right",show:!0}},itemStyle:{normal:{color:"#003399",shadowBlur:10,shadowColor:"#333"}},zlevel:1},{name:"Special Economic Zone",type:"effectScatter",coordinateSystem:"geo",data:convertData(special_data_1.sort(function(a,t){return t.value-a.value}).slice(0,50)),symbolSize:function(a){return a[2]/5},label:{normal:{formatter:"{b}",position:"bottom",show:!0}},itemStyle:{normal:{color:"#003399",shadowBlur:10,shadowColor:"#333"}},zlevel:1},{name:"Coastal Open City",type:"effectScatter",coordinateSystem:"geo",data:convertData(data_2.sort(function(a,t){return t.value-a.value}).slice(0,50)),symbolSize:function(a){return a[2]/5},label:{normal:{formatter:"{b}",position:"right",show:!0}},itemStyle:{normal:{color:"#CC6666",shadowBlur:10,shadowColor:"#333"}},zlevel:1},{name:"Coastal Open City",type:"effectScatter",coordinateSystem:"geo",data:convertData(special_data_2.sort(function(a,t){return t.value-a.value}).slice(0,50)),symbolSize:function(a){return a[2]/5},label:{normal:{formatter:"{b}",position:"bottom",show:!0}},itemStyle:{normal:{color:"#CC6666",shadowBlur:10,shadowColor:"#333"}},zlevel:1},{name:"Coastal Open City",type:"effectScatter",coordinateSystem:"geo",data:convertData(special_data_3.sort(function(a,t){return t.value-a.value}).slice(0,50)),symbolSize:function(a){return a[2]/5},label:{normal:{formatter:"{b}",position:"top",show:!0}},itemStyle:{normal:{color:"#CC6666",shadowBlur:10,shadowColor:"#333"}},zlevel:1}]};const getPosOrSize=(a,t)=>{let e=config.L1.long*Math.sin(Math.PI/4),n=e+config.L2.long+config.text.width,o=e+config.text.height/2;if(a==="size")return config.width=n,config.height=o,{width:n,height:o};{let i=document.getElementById(config.ecBoxId),l=i.offsetWidth,h=i.offsetHeight,r=t[0],s=t[1];return left=!1,r+n>=l/1.2&&(r=r-n-5,left=!0),priority==="top"?(top=!0,s=s-o-5,s<=0&&(s=t[1],top=!1),[r,s]):(top=!1,s+o>=h&&(s=s-o-5,top=!0),[r,s])}};class myTooltip{constructor(t,e){this.config=e,this.totalTime=0,this.stage=new createjs.Stage(t),this.timeline=new TimelineMax({repeat:0}),this.g=new createjs.Graphics,this.lineShape=new createjs.Shape(this.g),this.textShape=new createjs.Shape,this.stage.addChild(this.lineShape,this.textShape),this.init(),this.begin(),this.update()}init(){this.start=[0,0],left&&(this.start[0]=this.config.width),top&&(this.start[1]=this.config.height)}begin(){this.L1(),this.L2(),this.addText()}L1(){let t=this,e=t.config,n=new TimelineMax,o={s:0},i=e.L1.long*Math.sin(Math.PI/4);left?top?this.L1End=[t.start[0]-i,t.start[1]-i]:this.L1End=[t.start[0]-i,t.start[1]+i]:top?this.L1End=[i,t.start[1]-i]:this.L1End=[i,i],n.to(o,e.L1.time,{s:1,onUpdate(){let l=o.s;left?top?t.g.c().s(e.lineColor).mt(...t.start).lt(t.start[0]-i*l,t.start[1]-i*l):t.g.c().s(e.lineColor).mt(...t.start).lt(t.start[0]-i*l,t.start[1]+i*l):top?t.g.c().s(e.lineColor).mt(...t.start).lt(i*l,t.start[1]-i*l):t.g.c().s(e.lineColor).mt(...t.start).lt(i*l,i*l),t.update()}}),this.timeline.add(n,this.totalTime),this.totalTime+=e.L1.time}L2(){let t=this,e=t.config,n=new TimelineMax,o={s:0};n.to(o,e.L2.time,{s:1,onUpdate(){let i=o.s;left?t.g.c().s(e.lineColor).mt(...t.start).lt(...t.L1End).lt(t.L1End[0]-e.L2.long*i,t.L1End[1]):t.g.c().s(e.lineColor).mt(...t.start).lt(...t.L1End).lt(t.L1End[0]+e.L2.long*i,t.L1End[1]),t.update()}}),this.timeline.add(n,this.totalTime),this.totalTime+=e.L2.time}addText(){let t=this,e=t.config,n=new TimelineMax,o={s:0},i=[t.L1End[0]+e.L2.long,t.L1End[1]];left&&(i=[t.L1End[0]-e.L2.long,t.L1End[1]]),n.to(o,e.text.time,{s:1,onStart(){let l=0,h=0;left?l=i[0]-e.text.width:l=i[0],t.g.c().s(e.lineColor).mt(...t.start).lt(...t.L1End).lt(...i),t.text=new createjs.Text(e.text.text,e.text.font,e.text.color),t.text.alpha=0,t.text.lineHeight=e.text.lineHeight,t.text.x=l+e.text.padding[0],t.text.y=i[1]-e.text.height/2+e.text.padding[1],t.stage.addChild(t.text),t.textShape.graphics.c().f(e.text.backgroundColor).rr(l,i[1]-e.text.height/2,e.text.width,e.text.height,5),t.textShape.alpha=0,t.update()},onUpdate(){typeof t.text!="string"&&(t.text.alpha=o.s,t.textShape.alpha=o.s,t.update())}}),this.timeline.add(n,this.totalTime)}update(){this.stage.update()}}let EC=echarts.getInstanceByDom(document.getElementById("chart-panel"));var index=0;setInterval(a=>{EC.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:index}),index++,index>=data.length+data_2.length&&(index=0)},3e3),window.addEventListener("resize",a=>{let t=document.getElementById("tCanvas");t&&(t.style.display="none")});
