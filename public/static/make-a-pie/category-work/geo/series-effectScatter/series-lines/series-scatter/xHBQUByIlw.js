var datasJSON="/asset/get/s/data-1626235059731-_1Z3kz9Wj.json",mapJSON="/asset/get/s/data-1626233214001-gxlJKZykZ.json",mapOuterJSON="/asset/get/s/data-1626233206360-0r-gjDCUj.json",centerImgBG="",centerImgIcon="",centerDatas;$.get(datasJSON,function(e){centerImgBG=e.centerImgBG,centerImgIcon=e.centerImgIcon,centerDatas=e.mapData});var geoCoordMap={},mapDatas=[],fromData={center:[118.1064,29.0004],name:"市外"},fromImgBg=centerImgBG,fromImgIcon=centerImgIcon,series=[{type:"scatter",coordinateSystem:"geo",zlevel:3,label:{show:!1},symbol:"image://"+fromImgBg,symbolSize:[196,196],itemStyle:{normal:{show:!1,color:"#34c6bb"}},data:[{name:fromData.name,value:fromData.center}]},{type:"scatter",coordinateSystem:"geo",zlevel:3,label:{show:!0,position:"inside",color:"#fff",fontSize:36,fontWeight:"bold",formatter:function(e){return fromData.name}},symbol:"image://"+fromImgIcon,symbolSize:[118,86],itemStyle:{normal:{show:!1,color:"#34c6bb"}},data:[{name:fromData.name,value:fromData.center}]}];$.each(centerDatas,function(e,o){geoCoordMap[o.name]=o.center,mapDatas.push([o])});var convertData=function(e){for(var o=[],a=0;a<e.length;a++){var t=e[a],r=geoCoordMap[t[0].name],l=fromData.center;r&&l&&o.push([{coord:l},{coord:r,value:t[0].value}])}return o};[[fromData.name,mapDatas]].forEach(function(e,o){series.push({type:"lines",zlevel:3,effect:{show:!0,period:4,trailLength:.1,symbol:"arrow",symbolSize:5},lineStyle:{normal:{color:"#00FFF6",width:1,opacity:1,curveness:.3}},data:convertData(e[1])},{type:"effectScatter",coordinateSystem:"geo",zlevel:4,rippleEffect:{period:4,brushType:"stroke",scale:4},label:{normal:{show:!0,position:"bottom",color:"#fff",fontSize:16,offset:[0,0],formatter:function(a){return console.log(a),[a.data.name,a.data.value[2]+"/"+(a.data.value[3].total||0)].join(`
`)},fontSize:13},emphasis:{show:!0}},symbol:"circle",symbolSize:function(a){return 5+a[2]*5},itemStyle:{normal:{color:"#00FFF6"}},data:e[1].map(function(a){return{name:a[0].name,value:geoCoordMap[a[0].name].concat([a[0].value,a[0]])}})})}),$.get(mapOuterJSON,function(e){echarts.registerMap("lsMap2",e)}),$.get(mapJSON,function(e){echarts.registerMap("lsMap",e),option={backgroundColor:"transparent",geo:[{boundingCoords:[[118.1964,29.3104],[120.4706,27.3864]],map:"lsMap",aspectScale:.9,roam:!1,layoutSize:"100%",layoutCenter:["55%","50%"],itemStyle:{areaColor:"transparent",borderColor:"rgba(68,157,255,1)",borderWidth:2},emphasis:{itemStyle:{areaColor:"#3c98ff"},label:{show:!1}},zlevel:2},{boundingCoords:[[118.1964,29.3104],[120.4706,27.3864]],map:"lsMap2",aspectScale:.9,roam:!1,layoutSize:"100%",layoutCenter:["55%","50%"],itemStyle:{areaColor:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#008AFF"},{offset:1,color:"#1638C4"}],global:!1},borderColor:"#1493FF",borderWidth:2},zlevel:1,silent:!0}],series},myChart.setOption(option)});
