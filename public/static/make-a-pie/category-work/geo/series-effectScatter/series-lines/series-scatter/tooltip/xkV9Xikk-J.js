var uploadedDataURL="/asset/get/s/data-1558504999148-FYury9CCf.json",target="乌鲁木齐市",data=[{name:"乌鲁木齐市",value:"20.18"},{name:"巴音郭楞蒙古自治州",value:"10.18"},{name:"克拉玛依市",value:"30.18"},{name:"克孜勒苏柯尔克孜自治州",value:"40.18"},{name:"哈密市",value:"50.18"},{name:"和田地区",value:"0.18"},{name:"博尔塔拉蒙古自治州",value:"80.18"}],chart=echarts.init(document.getElementById("chart-panel")),getColor=function(t){return t<=20?"#00ffff":t<=40?"#00ff00":t<=60?"#ffff00":t<=80?"#ffa500":t<=100?"#ff3333":"#ddd"},geoJson;$.ajax({url:uploadedDataURL,dataType:"json",success:function(t){geoJson=t,echarts.registerMap("XJ",t),chart.on("click",function(a){a.seriesName=="city"&&(target=a.data.name,setData())}),setData()}});function setData(){var t=[],a=[],f=[],n=geoJson.features,l;$.each(n,function(e,r){if(target==r.properties.name)return l=r.properties.center,!1}),$.each(data,function(e,r){$.each(n,function(i,o){if(o.properties.name===r.name)return r.name!==target&&a.push({coords:[o.properties.center,l],lineStyle:{color:getColor(r.value)}}),t.push({name:r.name,value:o.properties.center.concat(r.name,r.value)}),!1})});var s={backgroundColor:"#162838",tooltip:{trigger:"item"},geo:{show:!0,map:"XJ",label:{normal:{show:!1},emphasis:{show:!1}},roam:!0,itemStyle:{normal:{areaColor:"#001425",borderColor:"#999",borderWidth:2},emphasis:{areaColor:"#001425"}}},series:[{name:"city",type:"scatter",coordinateSystem:"geo",symbol:"circle",symbolSize:function(e){return e[2]==target?25:15},itemStyle:{normal:{color:function(e){return getColor(e.data.value[3])}}},zlevel:9,data:t,tooltip:{formatter:function(e){var r=e.data.name==target?"本地排放：":"区域输送：",i=e.data.name+"<br/>"+r+e.data.value[3];return i}}},{type:"effectScatter",coordinateSystem:"geo",data:t,symbolSize:5,showEffectOn:"render",rippleEffect:{brushType:"stroke",scale:10},hoverAnimation:!1,itemStyle:{normal:{color:function(e){return getColor(e.value[3])},shadowBlur:20}},zlevel:5,label:{normal:{show:!0,position:"bottom",offset:[0,10],formatter:function(e){return e.name},textStyle:{color:"#fff",fontSize:12}}}},{type:"lines",zlevel:1,effect:{symbol:"arrow",show:!0,period:6,trailLength:.5,color:"#fff",symbolSize:8},lineStyle:{normal:{color:"#c2f555",width:0,curveness:.2}},data:a},{type:"lines",zlevel:2,symbol:"none",symbolSize:10,effect:{show:!0,period:6,trailLength:0,symbol:"arrow",symbolSize:15},lineStyle:{normal:{color:"#c2f555",width:3,opacity:.6,curveness:.2}},data:a}]};chart.setOption(s)}
