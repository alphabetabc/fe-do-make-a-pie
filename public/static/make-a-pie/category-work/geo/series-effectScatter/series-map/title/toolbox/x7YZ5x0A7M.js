var mapName="china",chinaJson=echarts.getMap(mapName).geoJson;function registerAllMap(e,t){echarts.registerMap(e,t),$.each(t.features,function(){echarts.registerMap(this.properties.name,{type:"FeatureCollection",features:[this]})})}registerAllMap(mapName,chinaJson);function getMapOption(e){var t={},a=echarts.getMap(e).geoJson;$.each(a.features,function(){t[this.properties.name]=this.properties.cp});var s=[];$.each(a.features,function(){s.push({name:this.properties.name,value:1})});var i=function(o){for(var f=[],r=0;r<o.length;r++){var n=t[o[r].name];if(n){var p={name:o[r].name,value:n.concat(o[r].value)};f.push(p)}}return f},c=.85,l=.6;return{title:{text:e,left:"center"},toolbox:{feature:{myBack:{show:!1,title:"返回",icon:"path://M473.2 276.9v-133c-4-18.4-11.7-27-20.2-30.3-17.2-6.7-37.8 8.5-37.8 8.5L95.9 395.4c-70.1 48.4-4.8 84.7-4.8 84.7L405.5 751c62.9 46 67.7-24.2 67.7-24.2V603.4c319.3-99.2 449.9 297.5 449.9 297.5 12.1 21.8 19.3 0 19.3 0 123.4-595-469.2-624-469.2-624z m0 0",iconStyle:{color:"#1aaef6",borderColor:"#1aaef6"},onclick:function(){var o=getMapOption(e);o.toolbox.feature.myBack.show=!1,myChart.setOption(o)}}}},geo:{map:e,top:0,bottom:0,aspectScale:c,zoom:l,itemStyle:{normal:{borderWidth:1,borderColor:"#75cef9",shadowColor:"#5daee2",shadowOffsetY:10,shadowOffsetX:8}}},series:[{type:"map",top:0,z:2,bottom:0,mapType:e,selectedMode:"single",aspectScale:c,zoom:l,roam:!1,label:{show:!1},itemStyle:{borderWidth:1,borderColor:"#75cef9",areaColor:{type:"linear",x:0,y:0,x2:0,y2:800,colorStops:[{offset:0,color:"#0770d5"},{offset:1,color:"#43bef6"}],global:!0}},emphasis:{label:{show:!1},itemStyle:{areaColor:"#ff9a2c"}},data:s},{name:"Top 3",type:"effectScatter",coordinateSystem:"geo",symbolSize:4,z:3,label:{show:!0,position:"right",color:"#abfffc",fontSize:14,formatter:"{b}",offset:[5,0]},rippleEffect:{brushType:"fill",scale:8},itemStyle:{color:"#01fafe"},emphasis:{label:{color:"#092550"}},silent:1,data:i(s)}]}}option=getMapOption(mapName),myChart.on("mapselectchanged",function(e){var t=e.batch[0].name;if(e.batch[0].selected[t]){var a=getMapOption(t);a.toolbox.feature.myBack.show=!0,myChart.setOption(a)}});
