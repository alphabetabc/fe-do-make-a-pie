var uploadedDataURL="/asset/get/s/data-1576205687024-qrBjXoL5.json",clickMod=new Set,clickModName=[],flyDataPushed=!1;$.get(uploadedDataURL,function(v){echarts.registerMap("zhejiang",v);var n={杭州市:[119.553576,29.987459],湖州市:[120.102398,30.667198],嘉兴市:[120.750865,30.462653],绍兴市:[120.582112,29.697117],宁波市:[121.549792,29.668388],舟山市:[122.106863,30.216028],衢州市:[118.37263,29.041708],金华市:[120.149506,29.089524],台州市:[121.428599,28.861378],丽水市:[119.921786,28.251993],温州市:[120.672111,28.200575]},m=[{name:"杭州市",value:99},{name:"湖州市",value:39},{name:"嘉兴市",value:52},{name:"绍兴市",value:29},{name:"宁波市",value:89},{name:"舟山市",value:52},{name:"衢州市",value:9},{name:"金华市",value:32},{name:"台州市",value:99},{name:"丽水市",value:39},{name:"温州市",value:80}],t=[{name:"杭州市",value:5},{name:"湖州市",value:5},{name:"嘉兴市",value:5},{name:"绍兴市",value:5},{name:"宁波市",value:5},{name:"舟山市",value:5},{name:"衢州市",value:5},{name:"金华市",value:5},{name:"台州市",value:5},{name:"丽水市",value:5},{name:"温州市",value:5}],h=[[{name:"杭州市"},{id:1,name:"温州市",value:99}]],p=[[{name:"温州市"},{id:2,name:"杭州市",value:200}]],u="path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z",d=function(a){for(var l,e,o=0;o<a.length;o++){var r=a[o];if(r[1].id==1)return l=.2,l;if(r[1].id==2)return e=-.2,e}},f=function(a){for(var l=[],e=0;e<a.length;e++){var o=n[a[e].name];o&&l.push({name:a[e].name,value:o.concat(a[e].value),visualMap:!1})}return l},c=function(a){var l=[];for(let i=0;i<a.length;i++){var e=a[i],o=n[e[0].name],r=n[e[1].name];e[1].id==1?o&&r&&l.push([{coord:o},{coord:r,value:e[1].value}]):e[1].id==2&&o&&r&&l.push([{coord:o},{coord:r}])}return l},s=[{type:"scatter",coordinateSystem:"geo",zlevel:9,symbol:"pin",symbolSize:function(a){return a[2]/2},label:{normal:{show:!0,textStyle:{color:"#fff",fontSize:9},formatter:function(a){return a.value[2]}}},itemStyle:{normal:{show:!0,color:"#F62157"}},data:f(m)},{type:"scatter",coordinateSystem:"geo",zlevel:9,data:f(m),symbolSize:function(a){return .1},label:{normal:{formatter:"{b}",position:"right",show:!0},emphasis:{show:!0}},itemStyle:{normal:{color:"#05C3F9"}}},{type:"map",map:"zhejiang",data:t,zlevel:3,zoom:1.24,roam:!1,label:{show:!0,normal:{show:!1,color:"#fff"},emphasis:{show:!0,fontSize:16,color:"#fff"}},itemStyle:{normal:{areaColor:"#323c48",borderColor:"#111"},emphasis:{areaColor:"#f46d43"}}}];option={dataRange:{show:!1,x:"left",y:"bottom",splitList:[{start:5,end:5,color:"rgba(255,255,255,0.1)"},{start:10,end:10,color:"#ff6300"},{start:15,end:15,color:"#ccc"}]},backgroundColor:"#404a59",tooltip:{trigger:"item",formatter:"{b}"},visualMap:{show:!1,min:0,max:300,color:["#02e817","#e80202","#0233e8"]},geo:{map:"zhejiang",zoom:1.24,label:{normal:{show:!1,position:"right",textStyle:{color:"#fff"}},emphasis:{textStyle:{color:"#fff"}}},roam:!0,itemStyle:{normal:{borderColor:"rgba(147, 235, 248, 1)",borderWidth:1,areaColor:{type:"radial",x:.8,y:.5,r:.8,colorStops:[{offset:0,color:"rgba(175,238,238, 0)"},{offset:1,color:"rgba(	47,79,79, .2)"}],globalCoord:!1},shadowColor:"rgba(128, 217, 248, 1)",shadowOffsetX:-2,shadowOffsetY:2,shadowBlur:10},emphasis:{areaColor:"#389BB7",borderWidth:0}}},series:s},myChart.setOption(option),myChart.on("click",a=>{for(let e=0;e<t.length;e++)a.name==t[e].name&&(t[e].value=10,clickMod.add(a.name));if(clickMod.size>2){for(let e=0;e<t.length;e++)t[e].value=5,clickMod.clear();flyDataPushed&&(s.pop(),flyDataPushed=!1)}clickModName=[];for(let e of clickMod.values())clickModName.push(e);var l=[[]];clickModName.length===2&&!flyDataPushed&&(l[0].push({name:clickModName[0]},{id:1,name:clickModName[1]}),s.push({type:"lines",zlevel:99,effect:{show:!0,period:6,trailLength:0,symbol:u,symbolSize:10},lineStyle:{normal:{width:1,opacity:.4,curveness:.2,color:"#fff"}},data:c(l)}),flyDataPushed=!0),console.log(l),myChart.setOption(option)})});
