var planePath="path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z",provs=[{name:"北京",order_count:12e4,mail_count:91e3,clct_count:78e3,clct_ratio:87.01},{name:"上海",order_count:1e5,mail_count:71e3,clct_count:58e3,clct_ratio:87.01},{name:"江苏",order_count:9e4,mail_count:71e3,clct_count:58e3,clct_ratio:87.01},{name:"浙江",order_count:8e4,mail_count:61e3,clct_count:58e3,clct_ratio:87.01},{name:"广东",order_count:6e4,mail_count:41e3,clct_count:3e4,clct_ratio:87.01},{name:"湖北",order_count:4e4,mail_count:21e3,clct_count:18e3,clct_ratio:87.01},{name:"湖南",order_count:2e4,mail_count:9100,clct_count:7800,clct_ratio:87.01},{name:"四川",order_count:1e4,mail_count:9100,clct_count:7800,clct_ratio:87.01}],geoCoordMap={上海:[121.4648,31.2891],新疆:[87.9236,43.5883],甘肃:[103.5901,36.3043],总部:[70.4551,50.2539],北京:[116.4551,40.2539],江苏:[118.8062,31.9208],广西:[108.479,23.1152],江西:[116.0046,28.6633],安徽:[117.29,32.0581],内蒙古:[111.4124,40.4901],黑龙江:[127.9688,45.368],天津:[117.4219,39.4189],山西:[112.3352,37.9413],广东:[113.5107,23.2196],四川:[103.9526,30.7617],西藏:[91.1865,30.1465],云南:[102.9199,25.4663],浙江:[119.5313,29.8773],湖北:[114.3896,30.6628],辽宁:[123.1238,42.1216],山东:[117.1582,36.8701],海南:[110.3893,19.8516],河北:[114.4995,38.1006],福建:[119.4543,25.9222],青海:[101.4038,36.8207],陕西:[109.1162,34.2004],贵州:[106.6992,26.7682],河南:[113.4668,34.6234],重庆:[107.7539,30.1904],宁夏:[106.3586,38.1775],吉林:[125.8154,44.2584],湖南:[113.0823,28.2568]},convertData=function(e){for(var n=[],a=0;a<e.length;a++){var o=geoCoordMap[e[a].name];o&&n.push({name:e[a].name,value:o.concat(e[a].value)})}return n},convertData2=function(e){for(var n=[],a=0;a<e.length;a++){var o=e[a],t=geoCoordMap[o[0].name],l=geoCoordMap[o[1].name];t&&l&&n.push({fromName:o[0].name,toName:o[1].name,coords:[t,l]})}return n};option={backgroundColor:"#404a59",title:{text:"全国主要城市空气质量",subtext:"data from PM25.in",sublink:"http://www.pm25.in",x:"center",textStyle:{color:"#fff"}},tooltip:{trigger:"item",formatter:function(e){var n="";return provs.forEach(function(a){a.name==e.name&&(n="订单量："+a.order_count/1e3+"K<br>邮件量："+a.mail_count/1e3+"K<br>收寄量："+a.clct_count/1e3+"K<br>收寄率："+a.clct_ratio+"%")}),n}},geo:{map:"china",label:{emphasis:{show:!1}},roam:!0,itemStyle:{normal:{areaColor:"#323c48",borderColor:"#111"},emphasis:{areaColor:"#2a333d"}}},dataRange:{show:!1,min:0,max:12e4,x:"left",y:"bottom",text:["低","高"],calculable:!0,color:["#ff3333","orange","yellow","lime","aqua"]},series:[{name:"pm2.5",type:"scatter",coordinateSystem:"geo",data:convertData(function(){for(var e=[],n=0;n<provs.length;n++)e.push({name:provs[n].name,value:provs[n].order_count});return e}()),symbolSize:function(e){return 50+e[2]/5e3},label:{normal:{show:!0,formatter:function(e){return e.name+`
`+e.value[2]}},emphasis:{show:!1}},itemStyle:{emphasis:{borderColor:"#fff",borderWidth:1}}},{name:" Top10",type:"lines",zlevel:1,effect:{show:!0,period:6,trailLength:.7,color:"#fff",symbolSize:3},lineStyle:{normal:{color:"#a6c84c",width:0,curveness:.2}},data:convertData2([[{name:"上海"},{name:"北京",value:95}],[{name:"上海"},{name:"广东",value:90}],[{name:"上海"},{name:"四川",value:80}],[{name:"四川"},{name:"上海",value:80}],[{name:"北京"},{name:"广东",value:80}],[{name:"广东"},{name:"北京",value:80}]])},{name:" Top10",type:"lines",zlevel:2,symbol:["none","arrow"],symbolSize:10,effect:{show:!0,period:6,trailLength:0,symbol:planePath,symbolSize:15},lineStyle:{normal:{width:"",color:"#a6c84c",curveness:.2}},data:convertData2([[{name:"上海"},{name:"北京",value:95}],[{name:"上海"},{name:"广东",value:90}],[{name:"上海"},{name:"四川",value:80}],[{name:"四川"},{name:"上海",value:80}],[{name:"北京"},{name:"广东",value:80}],[{name:"广东"},{name:"北京",value:80}]])}]},console.info(convertData2([[{name:"上海"},{name:"北京",value:95}],[{name:"上海"},{name:"广东",value:90}],[{name:"上海"},{name:"四川",value:80}]]));
