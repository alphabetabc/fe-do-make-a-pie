var uploadedDataURL="/asset/get/s/data-1531447156625-SJ6uPKrXX.json",geocc="/asset/get/s/data-1519279347346-BkslpCjwf.json";myChart.showLoading(),$.getJSON(geocc,function(s){echarts.registerMap("jiangxi",s),myChart.hideLoading(),$.getJSON(uploadedDataURL,function(e){var i={马鞍山市健康大药房有限公司雨山店:[117.37,31.786],南山矿医院:[117.37,31.386],马鞍山诗城中医骨伤医院:[116.27,31.786],协和医院:[118.07,32.486],马鞍山市第四人民医院:[117.27,33.086],马鞍山市宝芝林大药房连锁有限公司大治村店:[116.67,32.786],马鞍山市金陵医院:[117.77,33.486],马鞍山微创医院:[116.67,33.686],Home:[116.27,33.386]};console.log(e);var r=function(t){for(var l=[],a=0;a<t.length;a++){var n=i[t[a].name];n&&l.push({name:t[a].name,value:n.concat(t[a].value)})}return l};option={baseOption:{timeline:{axisType:"category",orient:"vertical",autoPlay:!0,inverse:!0,playInterval:4e3,left:null,right:0,top:20,bottom:20,width:55,height:null,label:{normal:{textStyle:{color:"#999"}},emphasis:{textStyle:{color:"#fff"}}},symbol:"none",lineStyle:{color:"#555"},checkpointStyle:{color:"#bbb",borderColor:"#777",borderWidth:2},controlStyle:{showNextBtn:!1,showPrevBtn:!1,normal:{color:"#666",borderColor:"#666"},emphasis:{color:"#aaa",borderColor:"#aaa"}},data:[]},backgroundColor:"#404a59",title:[{text:e.date[0],textAlign:"center",left:"50%",top:"90%",textStyle:{fontSize:50,color:"rgba(255, 255, 255, 0.7)"}},{text:"病人迁移图例",left:"center",top:10,textStyle:{color:"#aaa",fontWeight:"normal",fontSize:20}}],grid:{top:100,containLabel:!0,left:30,right:"110"},geo:{show:!0,map:"jiangxi",label:{normal:{show:!1},emphasis:{show:!1}},roam:!0,itemStyle:{normal:{areaColor:"transparent",borderColor:"#3fdaff",borderWidth:2,shadowColor:"rgba(63, 218, 255, 0.5)",shadowBlur:30},emphasis:{areaColor:"#2B91B7"}}},visualMap:{show:!1,min:0,max:500,left:"left",top:"bottom",text:["高","低"],calculable:!0,seriesIndex:[1],inRange:{}},series:[{name:"light",type:"scatter",coordinateSystem:"geo",data:r(e.geodata[0]),symbolSize:function(t){return t[2]},label:{normal:{formatter:"{b}",position:"right",show:!0},emphasis:{show:!0}},itemStyle:{normal:{color:"#F4E925"}}},{name:"线路",type:"lines",coordinateSystem:"geo",zlevel:2,large:!0,effect:{show:!0,constantSpeed:100,symbol:"arrow",symbolSize:10,trailLength:.1},lineStyle:{normal:{color:"#0fff17",width:2,opacity:1,curveness:.15}},data:e.moveline[0]}],animationDurationUpdate:800,animationEasingUpdate:"quinticInOut"},options:[]};for(var o=0;o<e.date.length;o++)option.baseOption.timeline.data.push(e.date[o]),option.options.push({title:{show:!0,text:e.date[o]+""},series:[{name:"light",type:"scatter",coordinateSystem:"geo",data:r(e.geodata[o]),symbolSize:function(t){return t[2]},label:{normal:{formatter:"{b}",position:"right",show:!0},emphasis:{show:!0}},itemStyle:{normal:{color:"#F4E925"}}},{name:"线路",type:"lines",coordinateSystem:"geo",zlevel:2,large:!0,effect:{show:!0,constantSpeed:100,symbol:"arrow",symbolSize:10,trailLength:.1},lineStyle:{normal:{color:"#0fff17",width:2,opacity:1,curveness:.15}},data:e.moveline[o]}]});myChart.setOption(option)})});
