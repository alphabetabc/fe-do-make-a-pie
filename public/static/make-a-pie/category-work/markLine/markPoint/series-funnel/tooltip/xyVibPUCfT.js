const funnelData=[{value:60,name:"访问",type:"funnel"},{value:50,name:"咨询",type:"funnel"},{value:20,name:"订单",type:"funnel",itemStyle:{normal:{color:"#E25424"}}},{value:80,name:"点击",type:"funnel"},{value:100,name:"展现",type:"funnel",itemStyle:{normal:{color:{type:"linear",x:0,y:0,x2:1,y2:1,colorStops:[{offset:0,color:"red"},{offset:1,color:"blue"}],globalCoord:!1}}}}],cvsWidth=950,cvsHeight=793,optTop=60,optBottom=60,maxs=80,maxSize=maxs+"%",colorList=["#E25424","#FCBB13","6DC0AC","#22B14C","#B5E61D"],rx=10+maxs+"%",lx="10%";let lineData=[],pointData=[{name:"总转化率10%",x:"50%",y:10,symbol:"roundRect",symbolSize:[110,25],symbolOffset:[0,5],itemStyle:{normal:{color:"#ffffff",align:"right"}},label:{normal:{color:"#000000",fontSize:16,align:"center"},emphasis:{color:"#007DFD"}}}];const funnelHeight=cvsHeight-optTop-optBottom,funnelItemHeight=funnelHeight/funnelData.length;funnelData.sort((e,l)=>e.value<l.value).forEach((e,l)=>{const t=e.value*(maxs/125),o=l*funnelItemHeight+funnelItemHeight/2+optTop;lineData.push([{name:"两个屏幕坐标之间的标线",x:50+t/2+"%",y:o},{x:rx,y:o,symbolSize:[1,1]}]),lineData.push([{name:"两个屏幕坐标之间的标线",x:50-t/2+"%",y:o},{x:lx,y:o,symbolSize:[1,1]}]),pointData.push({name:"",x:rx,y:o-10,symbol:"circle",symbolSize:[10,10],symbolOffset:[15,10],itemStyle:{normal:{color:colorList[l]}}}),pointData.push({name:"进入列表名称",x:rx,y:o-10,symbol:"circle",symbolSize:[0,1],symbolOffset:[35,0],label:{normal:{color:"#7D7D7D",align:"left",fontSize:14}}}),pointData.push({name:"10000000000",x:rx,y:o-10,symbol:"circle",symbolSize:[0,1],symbolOffset:[35,25],label:{normal:{color:"#000000",fontSize:24,align:"left"}}}),pointData.push({name:"转化率",x:lx,y:o-10,symbol:"circle",symbolSize:[0,1],symbolOffset:[-15,0],label:{normal:{color:"#7D7D7D",align:"right",fontSize:14}}}),pointData.push({type:"converRate",name:"90%",x:lx,y:o-10,symbol:"roundRect",symbolSize:[60,25],symbolOffset:[-35,25],itemStyle:{normal:{color:"#ffffff",align:"right"}},label:{normal:{color:"#000000",fontSize:24,align:"right",position:[55,0]},emphasis:{color:"#007DFD"}}})}),option={tooltip:{trigger:"item",formatter:function(e){return e.data.type==="funnel"?e.value:""}},calculable:!0,series:[{name:"漏斗图",type:"funnel",top:optTop,bottom:optBottom,min:0,max:100,minSize:"0%",maxSize,sort:"descending",markPoint:{label:{normal:{show:!0,formatter:function(e){return e.name}}},data:pointData},markLine:{silent:!0,lineStyle:{normal:{color:"#eeeeee",type:"solid"}},label:{normal:{show:!1}},data:lineData},gap:2,label:{normal:{show:!1},emphasis:{show:!1,textStyle:{fontSize:20}}},data:funnelData}]},myChart.on("click",function(e){e.data.type==="converRate"&&console.log(e,"converRate")});
