var title="年龄分布",xdata=["≥0月～﹤1月","≥1月～﹤6岁","≥6岁～﹤14岁","≥14岁～﹤20岁","≥20岁～﹤30岁","≥30岁～﹤40岁","≥40岁～﹤50岁","≥50岁～﹤60岁","≥60岁～﹤70岁","≥70岁以上"],ydata=["2013","2014","2015","2016"],legenddata=ydata,vdata=[[1,43,88,375,5780,5804,8129,5113,6607,8149],[22,563,955,2398,24126,16625,26580,16060,18148,17869],[33,736,1396,2879,31640,20220,34652,21985,24707,23849],[109,2899,4166,7134,61125,35392,48528,32253,33669,32073]],flag=!0,myChart=echarts.init(document.getElementById("chart-panel"));(function(){drawFun01()})();function drawFun01(r){var n=[];$.each(vdata,function(a,i){var s={name:ydata[a],type:"bar",data:i,itemStyle:{normal:{color:""}},label:{normal:{show:!0,position:"top"}},barWidth:""};n.push(s)}),r={title:{text:title,right:"center"},toolbox:{right:30,feature:{myFormula:{show:!0,title:"图表切换",icon:"path://M512 8.448a501.248 501.248 0 1 0 501.248 501.248A503.04 503.04 0 0 0 512 8.448z m0 743.68a38.912 38.912 0 0 1-55.04-55.04 28.672 28.672 0 0 1 22.016-11.008 37.632 37.632 0 0 1 38.656 38.656 25.6 25.6 0 0 1-5.632 27.392z m110.08-314.112a220.416 220.416 0 0 1-60.672 66.048 162.048 162.048 0 0 0-44.032 44.032 103.68 103.68 0 0 0-11.008 44.032v27.648h-55.04v-27.392a198.144 198.144 0 0 1 11.008-60.672 123.648 123.648 0 0 1 55.04-49.664 210.432 210.432 0 0 0 49.664-49.664 93.184 93.184 0 0 0 16.64-55.04 70.656 70.656 0 0 0-22.016-55.04 92.416 92.416 0 0 0-66.048-16.64 174.848 174.848 0 0 0-110.08 44.032v-65.792a230.4 230.4 0 0 1 115.456-33.024 134.656 134.656 0 0 1 99.072 33.024 119.808 119.808 0 0 1 38.656 88.064 146.688 146.688 0 0 1-16.64 66.048z",onclick:function(){changeType()}}}},legend:{data:legenddata,type:"scroll",top:"8%"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{top:"20%",left:"5%",right:"4%",bottom:"12%",containLabel:!0},xAxis:[{type:"category",axisLine:{lineStyle:{color:"#000"}},data:xdata,axisLabel:{interval:0,rotate:50,textStyle:{color:"#000"}}}],yAxis:[{name:"",type:"value",axisLine:{lineStyle:{color:"#000"}},axisLabel:{textStyle:{color:"#000"},formatter:function(a){return a>=1e8?a/1e8+" 亿":a>=1e6?a/1e4+" 万":a+""}}}],dataZoom:[{show:!0,height:30,bottom:10,startValue:xdata[0],endValue:xdata[9],handleSize:"100%"},{type:"inside"}],series:n},myChart.setOption(r),window.onresize=myChart.resize}function drawFun02(){var r=0,n=[],a=[],i=[];$.each(xdata,function(e,t){var o={value:t,textStyle:{fontSize:16,fontWeight:"bold"}};n.push(o)}),$.each(vdata,function(e,t){var o={type:"bar",name:ydata[e],data:t,coordinateSystem:"polar",stack:"a",itemStyle:{normal:{borderWidth:4,borderColor:"#ffffff"},emphasis:{borderWidth:0,shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}};i.push(o)}),$.each(vdata,function(e,t){var o={name:ydata[e],value:t[0]};a.push(o)});var s={name:"该年龄段年份占比",type:"pie",radius:["85%","90%"],avoidLabelOverlap:!1,label:{normal:{show:!0,position:"outside",formatter:"{b} : {c} ({d}%)"},emphasis:{show:!0,textStyle:{fontSize:"15",fontWeight:"normal"}}},labelLine:{normal:{show:!1}},data:a,legend:{show:!1,orient:"vertical",x:"right",y:"top",data:[ydata[0],ydata[1],ydata[2],ydata[3]]},itemStyle:{normal:{borderWidth:3,borderColor:"#ffffff"},emphasis:{borderWidth:3,shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}};i.push(s);var l={title:{text:title,textAlign:"left"},toolbox:{right:30,feature:{myFormula:{show:!0,title:"图表切换",icon:"path://M512 8.448a501.248 501.248 0 1 0 501.248 501.248A503.04 503.04 0 0 0 512 8.448z m0 743.68a38.912 38.912 0 0 1-55.04-55.04 28.672 28.672 0 0 1 22.016-11.008 37.632 37.632 0 0 1 38.656 38.656 25.6 25.6 0 0 1-5.632 27.392z m110.08-314.112a220.416 220.416 0 0 1-60.672 66.048 162.048 162.048 0 0 0-44.032 44.032 103.68 103.68 0 0 0-11.008 44.032v27.648h-55.04v-27.392a198.144 198.144 0 0 1 11.008-60.672 123.648 123.648 0 0 1 55.04-49.664 210.432 210.432 0 0 0 49.664-49.664 93.184 93.184 0 0 0 16.64-55.04 70.656 70.656 0 0 0-22.016-55.04 92.416 92.416 0 0 0-66.048-16.64 174.848 174.848 0 0 0-110.08 44.032v-65.792a230.4 230.4 0 0 1 115.456-33.024 134.656 134.656 0 0 1 99.072 33.024 119.808 119.808 0 0 1 38.656 88.064 146.688 146.688 0 0 1-16.64 66.048z",onclick:function(){changeType()}}}},tooltip:{trigger:"item",padding:10,backgroundColor:"#222",borderColor:"#777",borderWidth:1,formatter:d},angleAxis:{type:"category",data:n,z:10},polar:{center:["50%","50%"],radius:260},radiusAxis:{},series:i};function d(e){var t=[];return e.componentSubType=="pie"?t.push('<div style="border-bottom: 1px solid rgba(255,255,255,.3); font-size: 18px;padding-bottom: 7px;margin-bottom: 7px">'+l.angleAxis.data[r].value+'<br></div><span style="color:'+e.color+'">'+e.name+"</span>: "+e.value):t.push('<div style="border-bottom: 1px solid rgba(255,255,255,.3); font-size: 18px;padding-bottom: 7px;margin-bottom: 7px">'+e.seriesName+'年</div><span style="color:'+e.color+'">'+e.name+"</span>: "+e.value+"<br>"),t}myChart.on("click",function(e){if(e.componentSubType!="pie"){r=e.dataIndex;var t=i.length-1;$.each(vdata,function(o,h){l.series[t].data[o].value=h[r],l.series[t].data[o].name=ydata[o]}),myChart.setOption(l)}}),myChart.setOption(l),window.onresize=myChart.resize}function changeType(){myChart.clear(),flag?drawFun02():drawFun01(),flag=!flag}
