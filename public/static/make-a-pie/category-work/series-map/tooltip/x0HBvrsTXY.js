$('<div class="back">返回</div>').appendTo($("#chart-panel")),$(".back").css({position:"absolute",left:"17px",top:"25px",color:"rgb(222,222,222)","font-size":"15px",cursor:"pointer","z-index":"100"}),$(".back").click(function(){renderChina()});var neimenggu="/asset/get/s/data-1636337430226-jP0NQTylZ.json",shanxi="/asset/get/s/data-1636337387463-rURPysXKY.json",china="/asset/get/s/data-1594281065688-80dQTMwuL.json",urlMap={陕西省:{name:"shanxisheng",url:shanxi},内蒙古自治区:{name:"neimenggu",url:neimenggu}},data=[{province:"陕西省",city:"榆林市",value:200},{province:"陕西省",city:"延安市",value:90},{province:"陕西省",city:"铜川市",value:160},{province:"陕西省",city:"西安市",value:280},{province:"陕西省",city:"咸阳市",value:180},{province:"陕西省",city:"汉中市",value:80},{province:"陕西省",city:"安康市",value:90},{province:"内蒙古自治区",city:"阿拉善盟",value:160},{province:"内蒙古自治区",city:"赤峰市",value:120}];function getProvinceData(){const e={};data.forEach(a=>{e[a.province]?e[a.province]+=a.value:e[a.province]=a.value});const t=[];for(const a in e)t.push({name:a,value:e[a]});return t}function renderChina(){$.getJSON(china,function(e){echarts.registerMap("china",e);var t={tooltip:{trigger:"item",formatter:"{b}: {c}"},series:[{type:"map",map:"china",data:getProvinceData()}]};myChart.setOption(t),myChart.off("click"),myChart.on("click",chinaClick)})}function chinaClick(e){renderProvince(e.name)}function renderProvince(e){$.getJSON(urlMap[e].url,function(t){echarts.registerMap(urlMap[e].name,t);var a={tooltip:{trigger:"item",formatter:"{b}: {c}"},series:[{type:"map",map:urlMap[e].name,data:getCityData(e),label:{show:!0,formatter:"{b}: {c}"}}]};myChart.setOption(a)})}function getCityData(e){return data.filter(a=>a.province===e).map(a=>({name:a.city,value:a.value}))}renderChina();
