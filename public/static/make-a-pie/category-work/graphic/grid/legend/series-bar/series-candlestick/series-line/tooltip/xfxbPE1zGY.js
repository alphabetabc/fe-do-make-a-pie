function calculateMA(e,i){for(var t=[],a=0,r=i.length;a<r;a++){if(a<e){t.push("-");continue}for(var o=0,l=0;l<e;l++)o+=i[a-l][1];t.push((o/e).toFixed(2))}return t}var dates=["2016-03-29","2016-03-30","2016-03-31","2016-04-01","2016-04-04","2016-04-05","2016-04-06","2016-04-07","2016-04-08","2016-04-11","2016-04-12","2016-04-13","2016-04-14","2016-04-15","2016-04-18","2016-04-19","2016-04-20","2016-04-21","2016-04-22","2016-04-25","2016-04-26","2016-04-27","2016-04-28","2016-04-29","2016-05-02","2016-05-03","2016-05-04","2016-05-05","2016-05-06","2016-05-09","2016-05-10","2016-05-11","2016-05-12","2016-05-13","2016-05-16","2016-05-17","2016-05-18","2016-05-19","2016-05-20","2016-05-23","2016-05-24","2016-05-25","2016-05-26","2016-05-27","2016-05-31","2016-06-01","2016-06-02","2016-06-03","2016-06-06","2016-06-07","2016-06-08","2016-06-09","2016-06-10","2016-06-13","2016-06-14","2016-06-15","2016-06-16","2016-06-17","2016-06-20","2016-06-21","2016-06-22"],data=[[17512.58,17633.11,17434.27,17642.81,8616e4],[17652.36,17716.66,17652.36,17790.11,7933e4],[17716.05,17685.09,17669.72,17755.7,1026e5],[17661.74,17792.75,17568.02,17811.48,10489e4],[17799.39,17737,17710.67,17806.38,8523e4],[17718.03,17603.32,17579.56,17718.03,11523e4],[17605.45,17716.05,17542.54,17723.55,9941e4],[17687.28,17541.96,17484.23,17687.28,9012e4],[17555.39,17576.96,17528.16,17694.51,7999e4],[17586.48,17556.41,17555.9,17731.63,1071e5],[17571.34,17721.25,17553.57,17744.43,8102e4],[17741.66,17908.28,17741.66,17918.35,9171e4],[17912.25,17926.43,17885.44,17962.14,8451e4],[17925.95,17897.46,17867.41,17937.65,11816e4],[17890.2,18004.16,17848.22,18009.53,8939e4],[18012.1,18053.6,17984.43,18103.46,8982e4],[18059.49,18096.27,18031.21,18167.63,10021e4],[18092.84,17982.52,17963.89,18107.29,10272e4],[17985.05,18003.75,17909.89,18026.85,13412e4],[17990.94,17977.24,17855.55,17990.94,8377e4],[17987.38,17990.32,17934.17,18043.77,9257e4],[17996.14,18041.55,17920.26,18084.66,10909e4],[18023.88,17830.76,17796.55,18035.73,10092e4],[17813.09,17773.64,17651.98,17814.83,13667e4],[17783.78,17891.16,17773.71,17912.35,801e5],[17870.75,17750.91,17670.88,17870.75,9706e4],[17735.02,17651.26,17609.01,17738.06,9502e4],[17664.48,17660.71,17615.82,17736.11,8153e4],[17650.3,17740.63,17580.38,17744.54,8002e4],[17743.85,17705.91,17668.38,17783.16,8559e4],[17726.66,17928.35,17726.66,17934.61,7579e4],[17919.03,17711.12,17711.05,17919.03,8739e4],[17711.12,17720.5,17625.38,17798.19,8856e4],[17711.12,17535.32,17512.48,17734.74,8664e4],[17531.76,17710.71,17531.76,17755.8,8844e4],[17701.46,17529.98,17469.92,17701.46,10326e4],[17501.28,17526.62,17418.21,17636.22,7912e4],[17514.16,17435.4,17331.07,17514.16,9553e4],[17437.32,17500.94,17437.32,17571.75,11199e4],[17507.04,17492.93,17480.05,17550.7,8779e4],[17525.19,17706.05,17525.19,17742.59,8648e4],[17735.09,17851.51,17735.09,17891.71,7918e4],[17859.52,17828.29,17803.82,17888.66,6894e4],[17826.85,17873.22,17824.73,17873.22,7319e4],[17891.5,17787.2,17724.03,17899.24,14739e4],[17754.55,17789.67,17664.79,17809.18,7853e4],[17789.05,17838.56,17703.55,17838.56,7556e4],[17799.8,17807.06,17689.68,17833.17,8227e4],[17825.69,17920.33,17822.81,17949.68,7187e4],[17936.22,17938.28,17936.22,18003.23,7875e4],[17931.91,18005.05,17931.91,18016,7126e4],[17969.98,17985.19,17915.88,18005.22,6969e4],[17938.82,17865.34,17812.34,17938.82,9054e4],[17830.5,17732.48,17731.35,17893.28,10169e4],[17710.77,17674.82,17595.79,17733.92,9374e4],[17703.65,17640.17,17629.01,17762.96,9413e4],[17602.23,17733.1,17471.29,17754.91,9195e4],[17733.44,17675.16,17602.78,17733.44,24868e4],[17736.87,17804.87,17736.87,17946.36,9938e4],[17827.33,17829.73,17799.8,17877.84,8513e4],[17832.67,17780.83,17770.36,17920.16,8944e4]],volumns=[8616e4,7933e4,1026e5,10489e4,8523e4,11523e4,9941e4,9012e4,7999e4,1071e5,8102e4,9171e4,8451e4,11816e4,8939e4,8982e4,10021e4,10272e4,13412e4,8377e4,9257e4,10909e4,10092e4,13667e4,801e5,9706e4,9502e4,8153e4,8002e4,8559e4,7579e4,8739e4,8856e4,8664e4,8844e4,10326e4,7912e4,9553e4,11199e4,8779e4,8648e4,7918e4,6894e4,7319e4,14739e4,7853e4,7556e4,8227e4,7187e4,7875e4,7126e4,6969e4,9054e4,10169e4,9374e4,9413e4,9195e4,24868e4,9938e4,8513e4,8944e4],dataMA5=calculateMA(5,data),dataMA10=calculateMA(10,data),dataMA20=calculateMA(20,data);option={legend:{data:["最大值","最小值","平均值"]},tooltip:{backgroundColor:"rgba(255,255,255,0.9)",textStyle:{fontSize:12,color:"#a4a4a4"}},xAxis:[{type:"category",data:dates,boundaryGap:!1,axisLine:{show:!1},axisTick:{show:!1},axisLabel:{formatter:function(e){return echarts.format.formatTime("MM-dd",e)}},min:"dataMin",max:"dataMax",axisPointer:{show:!0}},{type:"category",boundaryGap:!1,gridIndex:1,data:dates,splitLine:{show:!1},axisLabel:{show:!1},axisTick:{show:!1},axisLine:{lineStyle:{color:"#a4a4a4"}},splitNumber:20,min:"dataMin",max:"dataMax"}],yAxis:[{scale:!0,splitNumber:2,axisLine:{lineStyle:{color:"#a4a4a4"}},splitLine:{show:!0},axisTick:{show:!1},axisLabel:{inside:!0,formatter:`{value}
`}},{scale:!0,gridIndex:1,splitNumber:2,axisLine:{show:!1},axisLabel:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}],grid:[{left:20,right:20,top:30,height:120},{left:20,right:20,height:40,top:180}],graphic:[{type:"group",left:"center",top:70,width:300,bounding:"raw",children:[{id:"MA5",type:"text",style:{fill:"#2f4554",font:"bold 12px Sans-serif"},left:0},{id:"MA10",type:"text",style:{fill:"#61a0a8",font:"bold 12px Sans-serif"},left:"center"},{id:"MA20",type:"text",style:{fill:"#d48265",font:"bold 12px Sans-serif"},right:0}]}],series:[{name:"极差",type:"bar",xAxisIndex:1,yAxisIndex:1,itemStyle:{normal:{color:"#669fef"},emphasis:{color:"#85d5ff"}},data:volumns},{type:"candlestick",name:"K线",data,itemStyle:{normal:{color:"#ef232a",color0:"#669fef",borderColor:"#ef232a",borderColor0:"#669fef"}}},{name:"最大值",type:"line",data:dataMA5,smooth:!0,showSymbol:!1,lineStyle:{normal:{width:1}}},{name:"最小值",type:"line",data:dataMA10,smooth:!0,showSymbol:!1,lineStyle:{normal:{width:1}}},{name:"平均值",type:"line",data:dataMA20,smooth:!0,showSymbol:!1,lineStyle:{normal:{width:1}}}]};
