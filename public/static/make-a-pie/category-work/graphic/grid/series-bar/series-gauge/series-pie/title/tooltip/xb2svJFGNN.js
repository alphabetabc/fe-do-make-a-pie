var symbolSize=100,data=[[.5,2]];option={title:{text:"Try Dragging these Points"},tooltip:{triggerOn:"none",formatter:function(e){return"上下拖动调节亮度"}},grid:{},xAxis:{min:0,max:1,type:"value",axisLine:{onZero:!1}},yAxis:{min:0,max:3,type:"value",axisLine:{onZero:!1}},series:[{id:"a",type:"bar",smooth:!0,hoverAnimation:!1,symbolSize,data,itemStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#0dc2fe"},{offset:1,color:"blue"}],global:!1},barBorderRadius:20}},{type:"pie",data:[1],radius:"5%",center:["50%","86%"],hoverAnimation:!1,color:["#46d3f3","rgba(203,203,203,.2)"],labelLine:{normal:{show:!1}}},{id:"lightLine",type:"gauge",splitNumber:10,min:0,max:1,radius:"8%",center:["50%","86%"],startAngle:90,endAngle:-269.9999,axisLine:{show:!1,lineStyle:{width:0,shadowBlur:0,color:[[1,"#0dc2fe"]]}},axisTick:{show:!1,lineStyle:{color:"auto",width:1},length:20,splitNumber:5},splitLine:{show:!0,length:-20,lineStyle:{color:"auto"}},axisLabel:{show:!1},pointer:{show:0},detail:{show:0},z:2e3}]},app.inNode||(setTimeout(function(){myChart.setOption({graphic:echarts.util.map(data,function(e,i){return{type:"rect",position:myChart.convertToPixel("grid",e),left:"center",bounding:"all",shape:{r:20,width:500,height:100},style:{fill:"#000",lineWidth:4},invisible:!1,draggable:!0,ondrag:echarts.util.curry(onPointDragging,i),onmouseover:echarts.util.curry(showTooltip,i),onmouseout:echarts.util.curry(hideTooltip,i),ondragend:echarts.util.curry(dragend,i),z:1e3}})})},0),window.addEventListener("resize",updatePosition)),myChart.on("dataZoom",updatePosition);function updatePosition(){console.log("updatePosition"),myChart.setOption({graphic:echarts.util.map(data,function(e,i){return{position:myChart.convertToPixel("grid",e)}})})}function dragend(e){var i=-100;myChart.setOption({graphic:echarts.util.map(data,function(o,t){return console.log(o),o[1]!==0&&(i=100),o[1]<0&&(o[1]=.5),{type:"rect",position:myChart.convertToPixel("grid",o),left:"center",shape:{x:.5,y:.5,r:20,width:500,height:i},style:{fill:"#000",lineWidth:4},invisible:!0,draggable:!0,ondrag:echarts.util.curry(onPointDragging,o[1]),onmouseover:echarts.util.curry(showTooltip,t),onmouseout:echarts.util.curry(hideTooltip,t),ondragend:echarts.util.curry(dragend,o[1]),z:1e3}})})}function showTooltip(e){myChart.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:e})}function hideTooltip(e){myChart.dispatchAction({type:"hideTip"})}function onPointDragging(e,i,o){e==.5&&(e=0);var t=myChart.convertFromPixel("grid",this.position);t[0]=.5,t[1]<e?t[1]=e-Math.ceil(Math.abs(t[1]-e)):t[1]=e+Math.ceil(Math.abs(t[1]-e)),t[1]>3&&(t[1]=3),t[1]<=0&&(t[1]=.5),data[0]=t;var r=-5;t[1]!=.5&&(r=(t[1]+1)*-5),myChart.setOption({series:[{id:"a",data},{id:"lightLine",splitLine:{show:!0,length:r,lineStyle:{color:"auto"}}}]})}
