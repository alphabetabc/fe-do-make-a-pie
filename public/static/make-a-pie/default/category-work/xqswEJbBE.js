var blackJuimage="/asset/get/s/data-1576055383730-yw87bo2L.jpg",blackMimage="/asset/get/s/data-1576055391916-hRrZjCak.jpg",blackPimage="/asset/get/s/data-1576055397138-MkZaxN0P.jpg",blackShiimage="/asset/get/s/data-1576055401328-Nu1AOCC_.jpg",blackXimage="/asset/get/s/data-1576055405517-cFV2PomZ.jpg",blackZimage="/asset/get/s/data-1576055410277-VShVIAsy.jpg",redBimage="/asset/get/s/data-1576055414269-8HhjCI8k.jpg",redMimage="/asset/get/s/data-1576055418481-pM9V69MN.jpg",redPimage="/asset/get/s/data-1576055422744-uYEoHpmm.jpg",redSimage="/asset/get/s/data-1576055425912-sVVsyVyM.jpg",redShiimage="/asset/get/s/data-1576055431575-UBEqXUH1.jpg",redXimage="/asset/get/s/data-1576055434725-7GvfxDh5.jpg",blackJimage="/asset/get/s/data-1576055321930-fB42iADN.jpg",qipan="/asset/get/s/data-1576054841141-Ge_RYvPZ.jpg",redCimage="/asset/get/s/data-1576054917502-CtKE_uSn.jpg";document.getElementById("chart-panel").innerHTML="<div id='echarts1' style='width: 500px;height: 667px; background: url("+qipan+") no-repeat 0% 50%;float: left'></div><div id='show' style='width: 300px;height: 667px; float: left;padding-left: 20px;background-color: #ffffff;'><div style='width: 100px;height: 100px;padding-top: 200px;'>        <img id='selectQ' src='"+redCimage+"' width='100px' height='99px'></div><div style='width: 100px;height: 10px;text-align: center;padding-top: 20px;'><span id='playerName'>红方</span></div><div style='width: 100px;height: 10px;text-align: center;padding-top: 20px;'><span id='message'></span></div></div>";var myChart1=echarts.init(document.getElementById("echarts1")),zuobiao=[[0,1],[1,1],[2,1],[3,1],[4,1],[5,1],[6,1],[7,1],[8,1],[0,2],[2,2],[3,2],[4,2],[5,2],[6,2],[8,2],[1,3],[3,3],[5,3],[7,3],[0,4],[1,4],[2,4],[3,4],[4,4],[5,4],[6,4],[7,4],[8,4],[0,5],[1,5],[2,5],[3,5],[4,5],[5,5],[6,5],[7,5],[8,5],[1,6],[3,6],[5,6],[7,6],[0,7],[2,7],[3,7],[4,7],[5,7],[6,7],[8,7],[0,8],[1,8],[2,8],[3,8],[4,8],[5,8],[6,8],[7,8],[8,8]],blackJu=[[0,0],[8,0]],blackM=[[1,0],[7,0]],blackX=[[2,0],[6,0]],blackShi=[[3,0],[5,0]],blackJ=[[4,0]],blackP=[[1,2],[7,2]],blackZ=[[0,3],[2,3],[4,3],[6,3],[8,3]],redC=[[0,9],[8,9]],redM=[[1,9],[7,9]],redX=[[2,9],[6,9]],redShi=[[3,9],[5,9]],redS=[[4,9]],redP=[[1,7],[7,7]],redB=[[0,6],[2,6],[4,6],[6,6],[8,6]],moveBefore=[0,0],oldReturnValues,selectStatus=0,qiziType,player=1;echars1();function echars1(){var s={grid:{top:"17%",left:"2.5%",bottom:"9.7%",right:"10%",containLabel:!0},toolbox:{feature:{myTool1:{show:!0,title:"重新开始",icon:"path://M940.032 623.104c-9.728 0-18.432 3.584-25.088 9.728-5.12 4.096-8.704 9.728-11.264 16.384-58.368 166.4-215.552 278.016-391.68 278.016s-333.312-111.616-391.68-277.504c-7.168-18.432-27.136-27.648-46.08-22.016-19.968 6.144-31.232 27.136-25.088 47.104 69.12 196.608 254.464 328.192 462.848 328.192 156.16 0 299.52-73.728 390.656-193.536v2.56c0 20.992 16.896 37.888 37.888 37.888 20.992 0 37.888-16.896 37.888-37.888V660.48c-0.512-20.48-17.408-37.376-38.4-37.376zM83.968 402.432c16.384 0 30.208-10.752 35.328-25.088v-0.512C161.28 256 256.512 160.768 377.344 119.296c216.576-74.24 452.608 40.96 527.36 257.536 5.12 15.36 19.456 25.6 35.84 25.6 4.096 0 8.192-0.512 12.288-2.048 19.456-6.656 30.208-28.16 23.04-48.128C926.72 209.92 814.592 97.28 671.232 48.128 465.92-22.528 246.272 51.2 121.344 215.04v-1.024c0-20.992-16.896-37.888-37.888-37.888S46.08 193.024 46.08 214.016v151.04c0 20.48 16.896 37.376 37.888 37.376z",onclick:function(){refresh()}}}},xAxis:{type:"value",min:0,max:8,minInterval:1,maxInterval:1,axisTick:{show:!1},axisLabel:{show:!0,margin:35,color:"rgba(188,159,253,1)"},axisLine:{show:!0},splitLine:{show:!0}},yAxis:{type:"value",min:0,max:9,minInterval:1,maxInterval:1,axisTick:{show:!1},axisLabel:{show:!0,margin:35,color:"rgba(188,159,253,1)"},axisLine:{show:!0},splitLine:{show:!0}},series:[{type:"scatter",itemStyle:{color:"rgba(188,159,253,0)"},symbolSize:30,data:zuobiao},{name:"黑車",type:"scatter",animation:!1,symbol:"image://./asset/get/s/data-1576055383730-yw87bo2L.jpg",symbolSize:40,data:blackJu},{name:"黑马",type:"scatter",animation:!1,symbol:"image://./asset/get/s/data-1576055391916-hRrZjCak.jpg",symbolSize:40,data:blackM},{name:"黑象",type:"scatter",animation:!1,symbol:"image://./asset/get/s/data-1576055405517-cFV2PomZ.jpg",symbolSize:40,data:blackX},{name:"黑士",type:"scatter",animation:!1,symbol:"image://./asset/get/s/data-1576055401328-Nu1AOCC_.jpg",symbolSize:40,data:blackShi},{name:"黑将",type:"scatter",animation:!1,symbol:"image://./asset/get/s/data-1576055321930-fB42iADN.jpg",symbolSize:40,data:blackJ},{name:"黑炮",type:"scatter",animation:!1,symbol:"image://./asset/get/s/data-1576055397138-MkZaxN0P.jpg",symbolSize:40,data:blackP},{name:"黑卒",type:"scatter",animation:!1,symbol:"image://./asset/get/s/data-1576055410277-VShVIAsy.jpg",symbolSize:40,data:blackZ},{name:"红车",type:"scatter",animation:!1,symbol:"image://./asset/get/s/data-1576054917502-CtKE_uSn.jpg",symbolSize:40,data:redC},{name:"红马",type:"scatter",animation:!1,symbol:"image://./asset/get/s/data-1576055418481-pM9V69MN.jpg",symbolSize:40,data:redM},{name:"红象",type:"scatter",animation:!1,symbol:"image://./asset/get/s/data-1576055434725-7GvfxDh5.jpg",symbolSize:40,data:redX},{name:"红士",type:"scatter",animation:!1,symbol:"image://./asset/get/s/data-1576055431575-UBEqXUH1.jpg",symbolSize:40,data:redShi},{name:"红帅",type:"scatter",animation:!1,symbol:"image://./asset/get/s/data-1576055425912-sVVsyVyM.jpg",symbolSize:40,data:redS},{name:"红炮",type:"scatter",animation:!1,symbol:"image://./asset/get/s/data-1576055422744-uYEoHpmm.jpg",symbolSize:40,data:redP},{name:"红兵",type:"scatter",animation:!1,symbol:"image://./asset/get/s/data-1576055414269-8HhjCI8k.jpg",symbolSize:40,data:redB}]};myChart1.setOption(s),myChart1.on("click",function(t){var a=winORlose();a&&echarts1Clik(t.data)})}function echarts1Clik(s){var t=seekQ(s),a=t.split("-");if(selectStatus==1){if(player==1)if(a[0]=="r")a[1]=="C"?document.getElementById("selectQ").src=redCimage:a[1]=="M"?document.getElementById("selectQ").src=redMimage:a[1]=="X"?document.getElementById("selectQ").src=redXimage:a[1]=="Shi"?document.getElementById("selectQ").src=redShiimage:a[1]=="S"?document.getElementById("selectQ").src=redSimage:a[1]=="P"?document.getElementById("selectQ").src=redPimage:a[1]=="B"&&(document.getElementById("selectQ").src=redBimage),selectStatus=1,moveBefore=s,oldReturnValues=a,qiziType=a[1];else{var r=moveRule(qiziType,moveBefore,s,t);r?(moveQizi(oldReturnValues[0],oldReturnValues[1],oldReturnValues[2],moveBefore,s),player=2,selectStatus=0,document.getElementById("message").innerHTML="红方执棋完毕",document.getElementById("playerName").innerHTML="黑方",t!=-1&&deleteQizi(a[0],a[1],a[2],s),myChart1.setOption({series:[{data:zuobiao},{data:blackJu},{data:blackM},{data:blackX},{data:blackShi},{data:blackJ},{data:blackP},{data:blackZ},{data:redC},{data:redM},{data:redX},{data:redShi},{data:redS},{data:redP},{data:redB}]})):document.getElementById("message").innerHTML="棋子到不了指定位置"}else if(player==2)if(a[0]=="b")a[1]=="Ju"?document.getElementById("selectQ").src=blackJuimage:a[1]=="M"?document.getElementById("selectQ").src=blackMimage:a[1]=="X"?document.getElementById("selectQ").src=blackXimage:a[1]=="Shi"?document.getElementById("selectQ").src=blackShiimage:a[1]=="J"?document.getElementById("selectQ").src=blackJimage:a[1]=="P"?document.getElementById("selectQ").src=blackPimage:a[1]=="Z"&&(document.getElementById("selectQ").src=blackZimage),selectStatus=1,moveBefore=s,oldReturnValues=a,qiziType=a[1];else{var r=moveRule(qiziType,moveBefore,s,t);r?(moveQizi(oldReturnValues[0],oldReturnValues[1],oldReturnValues[2],moveBefore,s),player=1,selectStatus=0,document.getElementById("message").innerHTML="黑方执棋完毕",document.getElementById("playerName").innerHTML="红方",t!=-1&&deleteQizi(a[0],a[1],a[2],s),myChart1.setOption({series:[{data:zuobiao},{data:blackJu},{data:blackM},{data:blackX},{data:blackShi},{data:blackJ},{data:blackP},{data:blackZ},{data:redC},{data:redM},{data:redX},{data:redShi},{data:redS},{data:redP},{data:redB}]})):document.getElementById("message").innerHTML="棋子到不了指定位置"}}else selectStatus==0&&(player==1?a[0]=="r"?(a[1]=="C"?document.getElementById("selectQ").src=redCimage:a[1]=="M"?document.getElementById("selectQ").src=redMimage:a[1]=="X"?document.getElementById("selectQ").src=redXimage:a[1]=="Shi"?document.getElementById("selectQ").src=redShiimage:a[1]=="S"?document.getElementById("selectQ").src=redSimage:a[1]=="P"?document.getElementById("selectQ").src=redPimage:a[1]=="B"&&(document.getElementById("selectQ").src=redBimage),selectStatus=1,moveBefore=s,oldReturnValues=a,qiziType=a[1]):document.getElementById("message").innerHTML="请选择棋子":player==2&&(a[0]=="b"?(a[1]=="Ju"?document.getElementById("selectQ").src=blackJuimage:a[1]=="M"?document.getElementById("selectQ").src=blackMimage:a[1]=="X"?document.getElementById("selectQ").src=blackXimage:a[1]=="Shi"?document.getElementById("selectQ").src=blackShiimage:a[1]=="J"?document.getElementById("selectQ").src=blackJimage:a[1]=="P"?document.getElementById("selectQ").src=blackPimage:a[1]=="Z"&&(document.getElementById("selectQ").src=blackZimage),selectStatus=1,moveBefore=s,oldReturnValues=a,qiziType=a[1]):document.getElementById("message").innerHTML="请选择棋子"))}function deleteArray(s){var t=indexOf(s);return t>-1?(zuobiao.splice(t,1),1):t}function seekQ(s){for(var t="-1",a=0;a<blackJu.length;a++)blackJu[a].toString()==s.toString()&&(t="b-Ju-"+a);for(var a=0;a<blackM.length;a++)blackM[a].toString()==s.toString()&&(t="b-M-"+a);for(var a=0;a<blackX.length;a++)blackX[a].toString()==s.toString()&&(t="b-X-"+a);for(var a=0;a<blackShi.length;a++)blackShi[a].toString()==s.toString()&&(t="b-Shi-"+a);for(var a=0;a<blackJ.length;a++)blackJ[a].toString()==s.toString()&&(t="b-J-"+a);for(var a=0;a<blackP.length;a++)blackP[a].toString()==s.toString()&&(t="b-P-"+a);for(var a=0;a<blackZ.length;a++)blackZ[a].toString()==s.toString()&&(t="b-Z-"+a);for(var a=0;a<redC.length;a++)redC[a].toString()==s.toString()&&(t="r-C-"+a);for(var a=0;a<redM.length;a++)redM[a].toString()==s.toString()&&(t="r-M-"+a);for(var a=0;a<redX.length;a++)redX[a].toString()==s.toString()&&(t="r-X-"+a);for(var a=0;a<redShi.length;a++)redShi[a].toString()==s.toString()&&(t="r-Shi-"+a);for(var a=0;a<redS.length;a++)redS[a].toString()==s.toString()&&(t="r-S-"+a);for(var a=0;a<redP.length;a++)redP[a].toString()==s.toString()&&(t="r-P-"+a);for(var a=0;a<redB.length;a++)redB[a].toString()==s.toString()&&(t="r-B-"+a);return t}function indexOf(s){for(var t=0;t<zuobiao.length;t++)if(zuobiao[t].toString()==s.toString())return t;return-1}function moveRule(s,t,a,r){if(s=="Ju"||s=="C")if(t[0]==a[0]){for(var n=new Array,i=0;i<zuobiao.length;i++){var e=zuobiao[i];parseInt(t[1])-parseInt(a[1])>0?e[0]==t[0]&&e[1]<parseInt(t[1])&&e[1]>=parseInt(a[1])&&n.push(e):e[0]==t[0]&&e[1]>parseInt(t[1])&&e[1]<=parseInt(a[1])&&n.push(e)}var d=Math.abs(parseInt(t[1])-parseInt(a[1])),u;return r==-1?u=n.length:u=n.length+1,d==u}else if(t[1]==a[1]){for(var p=new Array,i=0;i<zuobiao.length;i++){var e=zuobiao[i];parseInt(t[0])-parseInt(a[0])>0?e[1]==a[1]&&e[0]<parseInt(t[0])&&e[0]>=parseInt(a[0])&&p.push(e):e[1]==a[1]&&e[0]>parseInt(t[0])&&e[0]<=parseInt(a[0])&&p.push(e)}var d=Math.abs(parseInt(t[0])-parseInt(a[0])),I;return r==-1?I=p.length:I=p.length+1,d==I}else return!1;if(s=="M"){var l=Math.abs(parseInt(t[0])-parseInt(a[0])),c=Math.abs(parseInt(t[1])-parseInt(a[1]));if(l==1&&c==2)if(parseInt(t[1])-parseInt(a[1])>0){var g=moveinde(t[0],parseInt(t[1])-1);return g>-1}else{var g=moveinde(t[0],parseInt(t[1])+1);return g>-1}else if(l==2&&c==1)if(parseInt(t[0])-parseInt(a[0])>0){var g=moveinde(parseInt(t[0])-1,t[1]);return g>-1}else{var g=moveinde(parseInt(t[0])+1,t[1]);return g>-1}else return!1}if(s=="X"){var l=Math.abs(parseInt(t[0])-parseInt(a[0])),c=Math.abs(parseInt(t[1])-parseInt(a[1]));if(l==2&&c==2)if(t[1]<=4&&a[1]<=4||t[1]>4&&a[1]>4){if(parseInt(t[0])-parseInt(a[0])>0&&parseInt(t[1])-parseInt(a[1])>0){var g=moveinde(parseInt(t[0])-1,parseInt(t[1])-1);return g>-1}else if(parseInt(t[0])-parseInt(a[0])>0&&parseInt(t[1])-parseInt(a[1])<0){var g=moveinde(parseInt(t[0])-1,parseInt(t[1])+1);return g>-1}else if(parseInt(t[0])-parseInt(a[0])<0&&parseInt(t[1])-parseInt(a[1])>0){var g=moveinde(parseInt(t[0])+1,parseInt(t[1])-1);return g>-1}else if(parseInt(t[0])-parseInt(a[0])<0&&parseInt(t[1])-parseInt(a[1])<0){var g=moveinde(parseInt(t[0])+1,parseInt(t[1])+1);return g>-1}}else return!1;else return!1}if(s=="Shi"){var l=Math.abs(parseInt(t[0])-parseInt(a[0])),c=Math.abs(parseInt(t[1])-parseInt(a[1]));return l==1&&c==1&&a[0]>2&&a[0]<6?a[1]>=0&&a[1]<3||a[1]<=9&&a[1]>6:!1}if(s=="J"||s=="S"){var l=Math.abs(parseInt(t[0])-parseInt(a[0])),c=Math.abs(parseInt(t[1])-parseInt(a[1])),f=r.split("-");if(f[1]=="J"||f[1]=="S"){var h=new Array;if(t[0]==a[0]){for(var i=0;i<zuobiao.length;i++){var e=zuobiao[i];parseInt(t[1])>parseInt(a[1])?e[0]==t[0]&&e[1]>a[1]&&e[1]<t[1]&&h.push(e):parseInt(t[1])<parseInt(a[1])&&e[0]==t[0]&&e[1]>t[1]&&e[1]<a[1]&&h.push(e)}return c-h.length==1}else return!1}else return(l==1&&c==0||l==0&&c==1)&&a[0]>2&&a[0]<6?a[1]>=0&&a[1]<3||a[1]<=9&&a[1]>6:!1}if(s=="P")if(t[0]==a[0]){for(var n=new Array,i=0;i<zuobiao.length;i++){var e=zuobiao[i];parseInt(t[1])-parseInt(a[1])>0?e[0]==t[0]&&e[1]<parseInt(t[1])&&e[1]>=parseInt(a[1])&&n.push(e):e[0]==t[0]&&e[1]>parseInt(t[1])&&e[1]<=parseInt(a[1])&&n.push(e)}var d=Math.abs(parseInt(t[1])-parseInt(a[1])),u;return r==-1?u=n.length:u=n.length+2,d==u}else if(t[1]==a[1]){for(var p=new Array,i=0;i<zuobiao.length;i++){var e=zuobiao[i];parseInt(t[0])-parseInt(a[0])>0?e[1]==a[1]&&e[0]<parseInt(t[0])&&e[0]>=parseInt(a[0])&&p.push(e):e[1]==a[1]&&e[0]>parseInt(t[0])&&e[0]<=parseInt(a[0])&&p.push(e)}var d=Math.abs(parseInt(t[0])-parseInt(a[0])),I;return r==-1?I=p.length:I=p.length+2,d==I}else return!1;if(s=="Z"||s=="B"){var l=Math.abs(parseInt(t[0])-parseInt(a[0])),c=Math.abs(parseInt(t[1])-parseInt(a[1])),y=seekQ(t),b=y.split("-");return b[0]=="r"?t[1]>4&&parseInt(t[1])-parseInt(a[1])==1&&l==0?!0:t[1]<5&&(parseInt(t[1])-parseInt(a[1])==1&&l==0||l==1&&c==0):t[1]<5&&parseInt(a[1])-parseInt(t[1])==1&&l==0?!0:t[1]>4&&(parseInt(a[1])-parseInt(t[1])==1&&l==0||l==1&&c==0)}}function moveinde(s,t){for(var a=0;a<zuobiao.length;a++){var r=zuobiao[a];if(r[0]==s&&r[1]==t)return a}return-1}function moveQizi(s,t,a,r,n){var i;s=="b"&&(t=="Ju"?blackJu.splice(a,1,n):t=="M"?blackM.splice(a,1,n):t=="X"?blackX.splice(a,1,n):t=="Shi"?blackShi.splice(a,1,n):t=="J"?blackJ.splice(a,1,n):t=="P"?blackP.splice(a,1,n):t=="Z"&&blackZ.splice(a,1,n)),s=="r"&&(t=="C"?redC.splice(a,1,n):t=="M"?redM.splice(a,1,n):t=="X"?redX.splice(a,1,n):t=="Shi"?redShi.splice(a,1,n):t=="S"?redS.splice(a,1,n):t=="P"?redP.splice(a,1,n):t=="B"&&redB.splice(a,1,n));for(var e=0;e<zuobiao.length;e++)zuobiao[e].toString()==n.toString()&&(i=e);zuobiao.splice(i,1,r)}function deleteQizi(s,t,a,r){s=="b"&&(t=="Ju"?blackJu.splice(a,1):t=="M"?blackM.splice(a,1):t=="X"?blackX.splice(a,1):t=="Shi"?blackShi.splice(a,1):t=="J"?(blackJ.splice(a,1),winORlose()):t=="P"?blackP.splice(a,1):t=="Z"&&blackZ.splice(a,1)),s=="r"&&(t=="C"?redC.splice(a,1):t=="M"?redM.splice(a,1):t=="X"?redX.splice(a,1):t=="Shi"?redShi.splice(a,1):t=="S"?(redS.splice(a,1),winORlose()):t=="P"?redP.splice(a,1):t=="B"&&redB.splice(a,1)),zuobiao.push(r)}function winORlose(){var s=!0;return redS.length==0&&(alert("黑方获胜"),s=!1),blackJ.length==0&&(alert("红方获胜"),s=!1),s?!0:confirm("是否开始新一局")?(refresh(),!0):!1}function refresh(){zuobiao=[[0,1],[1,1],[2,1],[3,1],[4,1],[5,1],[6,1],[7,1],[8,1],[0,2],[2,2],[3,2],[4,2],[5,2],[6,2],[8,2],[1,3],[3,3],[5,3],[7,3],[0,4],[1,4],[2,4],[3,4],[4,4],[5,4],[6,4],[7,4],[8,4],[0,5],[1,5],[2,5],[3,5],[4,5],[5,5],[6,5],[7,5],[8,5],[1,6],[3,6],[5,6],[7,6],[0,7],[2,7],[3,7],[4,7],[5,7],[6,7],[8,7],[0,8],[1,8],[2,8],[3,8],[4,8],[5,8],[6,8],[7,8],[8,8]],blackJu=[[0,0],[8,0]],blackM=[[1,0],[7,0]],blackX=[[2,0],[6,0]],blackShi=[[3,0],[5,0]],blackJ=[[4,0]],blackP=[[1,2],[7,2]],blackZ=[[0,3],[2,3],[4,3],[6,3],[8,3]],redC=[[0,9],[8,9]],redM=[[1,9],[7,9]],redX=[[2,9],[6,9]],redShi=[[3,9],[5,9]],redS=[[4,9]],redP=[[1,7],[7,7]],redB=[[0,6],[2,6],[4,6],[6,6],[8,6]],player=1,selectStatus=0,document.getElementById("message").innerHTML=" ",document.getElementById("playerName").innerHTML="红方",myChart1.setOption({series:[{data:zuobiao},{data:blackJu},{data:blackM},{data:blackX},{data:blackShi},{data:blackJ},{data:blackP},{data:blackZ},{data:redC},{data:redM},{data:redX},{data:redShi},{data:redS},{data:redP},{data:redB}]})}
