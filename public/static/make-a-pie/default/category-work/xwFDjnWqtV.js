var map=new AMap.Map("chart-panel",{mapStyle:"amap://styles/3217e099bb7b1bb4a8e063ce169bbb5b",pitch:52,zoom:7,center:[116.472804,39.995725],viewMode:"3D",buildingAnimation:!0,cursor:"pointer",features:["road","building","point"]});map.on("complete",function(){map.plugin(["AMap.ControlBar"],function(){var e=new AMap.ControlBar({position:{right:"0",bottom:"-173px"}});map.addControl(e)}),map.plugin(["AMap.MapType"],function(){var e=new AMap.MapType({liteStyle:!0});map.addControl(e)}),map.plugin(["AMap.Scale"],function(){var e=new AMap.Scale;map.addControl(e)}),map.plugin(["AMap.ToolBar"],function(){var e=new AMap.ToolBar;map.addControl(e)}),map.plugin(["AMap.DistrictLayer"],function(){var e=new AMap.DistrictLayer.Country({SOC:"CHN",depth:2,styles:{"province-stroke":"cornflowerblue","city-stroke":"white","county-stroke":"white",fill:"rgba(0,0,0,0)"}});e.setMap(map)});var o=new AMap.TileLayer({zIndex:-1,getTileUrl:"https://t{0,1,2,3,4,5,6,7}.tianditu.gov.cn/DataServer?tk=95f31e3625a164fbdc09ef6ba9b971ad&T=ter_w&x=[x]&y=[y]&l=[z]"});o.setMap(map),map.on("dblclick",function(){map.remove(o),o=new AMap.TileLayer({zIndex:-1,getTileUrl:"http://106.38.83.13/ArcGIS/rest/services/JJJSlope/MapServer/tile/[z]/[y]/[x]"}),o.setMap(map)});function u(){$.getJSON("/asset/get/s/data-1544592880173-tRoZbKmvl.json",function(e){var i=Loca.create(map),n=Loca.visualLayer({container:i,type:"point",shape:"circle"});n.setData(e),n.setOptions({lnglat:function(a){var t=a.value,r=[t.longitude,t.latitude];return r},style:{unit:"meter",opacity:.521,radius:2,fill:function(a){var t=a.value.aqi,r="gray";return t<=50?r="#43ce17":t<=100?r="#efdc31":t<=150?r="#fa0":t<=200?r="#ff401a":t<=300?r="#d20040":r="#9c0a4e",r}}}),n.render()})}u();const f=["河北省","北京市","天津市"];map.plugin(["AMap.DistrictSearch"],function(){const e=new AMap.DistrictSearch({subdistrict:0,extensions:"all"});let i=[];n();function n(a){a||(a=0);let t=f[a];if(t)e.search(t,function(c,l){i=i.concat(l.districtList[0].boundaries),a++,n(a)});else{let c=function(l){var s=new AMap.Object3D.Wall({path:l,height:5e3,color:"#0088ffcc"});s.transparent=!0;var p=new AMap.Object3DLayer({zIndex:1});p.add(s),p.setMap(map);var d=l.map(function(v){return[v]});map.setMask(d)};var r=c;c(i)}}})});
