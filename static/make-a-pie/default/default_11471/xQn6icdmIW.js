const lineOpt=({timeList:t,alist:e,blist:a,clist:r})=>({title:{text:"区间滑动动态更新多图表数据"},legend:{orient:"horizontal",x:"center",y:"60"},tooltip:{trigger:"axis",transitionDuration:0,confine:!0,bordeRadius:4,borderWidth:1,borderColor:"#333",backgroundColor:"rgba(255,255,255,0.9)",textStyle:{fontSize:12,color:"#333"},formatter:function(o){return`<div><time>${o[0].axisValue}</time><br/>`+o.map(n=>`<p>${n.marker+n.seriesName}: ${n.data[1]}</p>`).join("")}},axisPointer:{type:"shadow",link:{xAxisIndex:"all"}},toolbox:{show:!0,x:"right",y:"50",feature:{saveAsImage:{show:!0}}},grid:[{top:100,height:100,right:50},{top:240,height:100,right:50}],xAxis:[{type:"category",gridIndex:0,axisTick:{alignWithLabel:!0},axisLabel:{show:!1}},{type:"category",gridIndex:1,axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value",name:"a",gridIndex:0,axisLabel:{formatter:"{value}"}},{type:"value",name:"b",axisLabel:{formatter:"{value}"},gridIndex:1},{type:"value",name:"c",axisLabel:{formatter:"{value}"},gridIndex:0}],dataZoom:[{type:"slider",xAxisIndex:[0,1],filterMode:"filter",zoomLock:!1,realtime:!1,start:0,end:10,top:30}],series:[genSeriesItem(t,e,{name:"a数据",type:"line",yAxisIndex:0,xAxisIndex:0}),genSeriesItem(t,a,{name:"b数据",type:"line",yAxisIndex:1,xAxisIndex:1}),genSeriesItem(t,r,{name:"c数据",type:"line",yAxisIndex:2,xAxisIndex:0})]}),genSeriesItem=(t,e,a)=>({...a,data:t.map((r,i)=>[unixTimestamp(r),e[i]])}),unixTimestamp=t=>{var e=new Date;return e.setTime(t),`${e.getHours()}:${e.getMinutes()}:${e.getSeconds()}`};var now=new Date().getTime();function getData(t){for(var e=[],a=[],r=[],i=[],o=0;o<100;o++)i.push(t+o*1e3),e.push(Math.floor(Math.random()*1e3)),a.push(Math.floor(Math.random()*100)),r.push(Math.floor(Math.random()*1800));return{t:i,a:e,b:a,c:r}}var data=getData(now+=1e5);myChart.setOption(lineOpt({timeList:data.t,alist:data.a,blist:data.b,clist:data.c}),!0),myChart.on("datazoom",t=>{if(t.end===100){var e=getData(now+=1e5);const a=myChart.getOption().dataZoom[0],r=a.startValue,i=a.endValue;myChart.appendData(genSeriesItem(e.t,e.a,{seriesIndex:0})),myChart.appendData(genSeriesItem(e.t,e.b,{seriesIndex:1})),myChart.appendData(genSeriesItem(e.t,e.c,{seriesIndex:2})),myChart.dispatchAction({type:"dataZoom",startValue:r,endValue:i})}});
