option={series:[]};var zr=myChart.getZr(),average_fps=[],fpsValue=0,circles=[],data=[],numEl=new echarts.graphic.Text({style:{text:"",font:"40px Helvetica",textAlign:"left",textBaseline:"top"},position:[10,10]}),fpsEl=new echarts.graphic.Text({style:{text:0,font:"40px Helvetica",textAlign:"left",textBaseline:"top"},position:[10,60]});zr.add(numEl),zr.add(fpsEl);function mapX(t){return(t+5)/10*zr.getWidth()}function mapY(t){return(t+5)/10*zr.getHeight()}time0=Date.now(),zr.animation.on("frame",function(){if(fpsValue>24){for(var t=0;t<10;t++){data.push({xloc:0,yloc:0,xvel:0,yvel:0});var i=new echarts.graphic.Rect({shape:{x:10,y:10},style:{fill:"red"}});circles.push(i),zr.add(i)}numEl.setStyle("text",data.length)}data.forEach(function(e,l){e.xloc+=e.xvel,e.yloc+=e.yvel,e.xvel+=.04*(Math.random()-.5)-.05*e.xvel-5e-4*e.xloc,e.yvel+=.04*(Math.random()-.5)-.05*e.yvel-5e-4*e.yloc;var o=Math.min(1+1e3*Math.abs(e.xvel*e.yvel),10);circles[l].setShape("width",o),circles[l].setShape("height",o),circles[l].position=[mapX(e.xloc),mapY(e.yloc)]}),time1=Date.now();var n=Math.round(1e3/(time1-time0));if(!isNaN(n)&&(average_fps.push(n),average_fps.length===10)){for(var r=0,a=0;a<average_fps.length;a++)r+=average_fps[a];fpsValue=r/average_fps.length,fpsEl.setStyle("text",fpsValue),average_fps=[]}time0=time1});
