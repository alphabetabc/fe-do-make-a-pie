function scatterPlot(a,r,t){var e=echarts.getInstanceByDom(document.getElementById(a));e!=null&&echarts.dispose(e);var o=document.getElementById(a),n=echarts.init(o),m={backgroundColor:"rgba(14, 22, 71, 0.3)",tooltip:{show:!0},series:[{type:"graph",layout:"none",roam:!1,center:["50%","50%"],draggable:!1,focusNodeAdjacency:!0,tooltip:{formatter:function(l){return l.data.name}},data:r,links:t,lineStyle:{normal:{color:"#342832",curveness:0,type:"solid"}},itemStyle:{normal:{color:function(l){return l.data.mark=="department"?"#090d3d":"#37130c"},borderColor:"#ffe4bc",borderWidth:1,borderType:"solid",opacity:1}},label:{normal:{color:"#fff",show:!0,position:"top",formatter:function(l){return l.data.show?l.data.name:""},z:4}}}]};n.setOption(m)}function scatterPlotPink(a){var r=document.getElementById(a),t=echarts.getInstanceByDom(r);if(t!=null){var e=t.getOption();echarts.util.map(e.series[0].data,function(o,n){n<9&&n>0&&e.series.push({id:o.organizeID+"pie",type:"pie",center:t.convertToPixel({seriesIndex:0},[o.x,o.y]),tooltip:{show:!1},legend:{show:!1},z:3,radius:[10,20],hoverAnimation:!1,data:[{value:o.value,itemStyle:{normal:{color:o.mark=="department"?"#ca8622":"#e86435"}},label:{show:!0,formatter:"{c}%",color:"#fff",fontWight:"normal",position:"center"}},{value:100-o.value,itemStyle:{normal:{color:"transparent"}},label:{show:!1}}]})}),t.setOption(e)}}function arrMaxToMinSort(a){return function(r,t){var e=r[a],o=t[a];return o>e?1:o<e?-1:0}}var excChartInfos=[{organizeID:"黑龙江省",mark:"province",overallTotalQua:1e4,orgFullName:"黑龙江省",orgShortName:"黑龙",totalQua:50},{organizeID:"甘肃省",mark:"province",overallTotalQua:1e4,orgFullName:"甘肃省",orgShortName:"甘肃",totalQua:50},{organizeID:"生产建设兵团",mark:"province",overallTotalQua:1e4,orgFullName:"生产建设兵团",orgShortName:"兵团",totalQua:10},{organizeID:"重庆市",mark:"province",overallTotalQua:1e4,orgFullName:"重庆市",orgShortName:"重庆",totalQua:500},{organizeID:"新疆维吾尔自治区",mark:"province",overallTotalQua:1e4,orgFullName:"新疆维吾尔自治区",orgShortName:"新疆",totalQua:10},{organizeID:"环保部",mark:"department",overallTotalQua:1e4,orgFullName:"环保部",orgShortName:"环保",totalQua:10},{organizeID:"国安部",mark:"department",overallTotalQua:1e4,orgFullName:"国安部",orgShortName:"国安",totalQua:70},{organizeID:"陕西省",mark:"province",overallTotalQua:1e4,orgFullName:"陕西省",orgShortName:"陕西",totalQua:500},{organizeID:"河南省",mark:"province",overallTotalQua:1e4,orgFullName:"河南省",orgShortName:"河南",totalQua:5e3},{organizeID:"浙江省",mark:"province",overallTotalQua:1e4,orgFullName:"浙江省",orgShortName:"浙江",totalQua:3e3},{organizeID:"扶贫办",mark:"department",overallTotalQua:1e4,orgFullName:"扶贫办",orgShortName:"扶贫",totalQua:20},{organizeID:"体育总局",mark:"department",overallTotalQua:1e4,orgFullName:"体育总局",orgShortName:"体育",totalQua:20},{organizeID:"监察部",mark:"department",overallTotalQua:1e4,orgFullName:"监察部",orgShortName:"监察",totalQua:20},{organizeID:"教育部",mark:"department",overallTotalQua:1e4,orgFullName:"教育部",orgShortName:"教育",totalQua:20},{organizeID:"民政部",mark:"department",overallTotalQua:1e4,orgFullName:"民政部",orgShortName:"民政",totalQua:180},{organizeID:"宗教局",mark:"department",overallTotalQua:1e4,orgFullName:"宗教局",orgShortName:"宗教",totalQua:20},{organizeID:"测绘局",mark:"department",overallTotalQua:1e4,orgFullName:"测绘局",orgShortName:"地信",totalQua:20},{organizeID:"法制办",mark:"department",overallTotalQua:1e4,orgFullName:"法制办",orgShortName:"法制",totalQua:20}],id="chart-panel",organizeFullName="国务院",links=[],H=parseInt($("#"+id).height()),W=parseInt($("#"+id).width()),pointer=[{x:W/2-120,y:H/2},{x:W/2-100,y:H/2-80},{x:W/2,y:H/2-100},{x:W/2+60,y:H/2-80},{x:W/2+100,y:H/2},{x:W/2+60,y:H/2+80},{x:W/2,y:H/2+100},{x:W/2-100,y:H/2+80}];excChartInfos.sort(arrMaxToMinSort("totalQua")),excChartInfos.forEach(function(a,r){if(a.overallTotalQua===0?a.totalPer=0:a.totalPer=Math.round(a.totalQua/a.overallTotalQua*100),r<8)a.symbolSize=40,a.show=!0,a.x=pointer[r].x,a.y=pointer[r].y;else{a.symbolSize=5,a.show=!1;do a.x=Math.random()*W,a.y=Math.random()*H;while(W/2-140<a.x&&a.x<W/2+140&&H/2-120<a.y&&a.y<H/2+120)}a.name=a.orgFullName,a.draggable=!1,a.value=a.totalPer,links.push({source:organizeFullName,target:a.orgFullName,value:Math.round(Math.random()*10)+"%"})}),excChartInfos.unshift({name:organizeFullName,value:20,subtext:organizeFullName,symbol:"image://http://www.liuvweb.com/visualView/img/graph_center.png",symbolSize:70,roam:!1,label:{normal:{show:!0,position:"inside",formatter:function(a){return a.data.name},fontSize:15}},itemStyle:{normal:{color:"#090d3d",borderType:"solid",opacity:1,borderWidth:"1px",borderColor:"#fff",shadowColor:"rgba(255, 255, 255, 0.8)",shadowBlur:30}},x:W/2,y:H/2,fixed:!0}),scatterPlot(id,excChartInfos,links),scatterPlotPink(id);
