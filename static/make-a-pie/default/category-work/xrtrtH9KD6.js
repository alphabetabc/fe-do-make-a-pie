var map;function initMap(n){var t=mars3d.Util.merge(n,{scene:{center:{y:26.197302,x:112.783136,z:59339109e-1,heading:355.6,pitch:-80.3}}});map=new mars3d.Map("mars3dContainer",t),createEchartsLayer()}function createEchartsLayer(){var n=getEchartsOption(),t=new mars3d.layer.EchartsLayer(n);map.addLayer(t)}function getEchartsOption(){var n={安徽省:[117.17,31.52],北京市:[116.24,39.55],重庆市:[106.54,29.59],福建省:[119.18,26.05],甘肃省:[103.51,36.04],广东省:[113.14,23.08],广西壮族自治区:[108.19,22.48],贵州省:[106.42,26.35],海南省:[110.2,20.02],河北省:[114.3,38.02],河南省:[113.4,34.46],黑龙江省:[128.36,45.44],湖北省:[112.27,30.15],湖南省:[112.59,28.12],吉林省:[125.19,43.54],江苏省:[118.46,32.03],江西省:[115.55,28.4],辽宁省:[123.25,41.48],内蒙古:[108.41,40.48],宁夏回族自治区:[106.16,38.27],青海省:[101.48,36.38],山东省:[118,36.4],山西省:[112.33,37.54],陕西省:[108.57,34.17],上海市:[121.29,31.14],海南:[108.77,19.1],四川省:[104.04,30.4],天津市:[117.12,39.02],西藏自治区:[91.08,29.39],新疆维吾尔自治区:[87.36,43.45],云南省:[102.42,25.04],浙江省:[120.1,30.16],澳门:[115.07,21.33],台湾省:[121.21,23.53]},t=[[{name:"北京市"},{name:"上海市",value:195}],[{name:"北京市"},{name:"广东省",value:90}],[{name:"北京市"},{name:"辽宁省",value:80}],[{name:"北京市"},{name:"湖北省",value:70}],[{name:"北京市"},{name:"内蒙古",value:70}],[{name:"北京市"},{name:"江苏省",value:60}],[{name:"北京市"},{name:"新疆维吾尔自治区",value:70}],[{name:"北京市"},{name:"四川省",value:40}],[{name:"北京市"},{name:"云南省",value:130}],[{name:"北京市"},{name:"黑龙江省",value:130}],[{name:"北京市"},{name:"甘肃省",value:200}],[{name:"北京市"},{name:"西藏自治区",value:60}]],l=function(e){for(var o=[],a=0;a<e.length;a++){var r=e[a],c=n[r[0].name],m=n[r[1].name];c&&m&&o.push({fromName:r[0].name,toName:r[1].name,coords:[c,m]})}return o},i=["#a6c84c","#ffa022","#46bee9"],s=[];[["",t]].forEach(function(e,o){s.push({name:e[0],type:"lines",coordinateSystem:"GLMap",zlevel:1,effect:{show:!0,period:6,trailLength:.7,color:"#fff",symbolSize:3},lineStyle:{normal:{color:i[0],width:0,curveness:.2}},data:l(e[1])},{name:e[0],type:"lines",coordinateSystem:"GLMap",zlevel:2,effect:{show:!0,period:6,trailLength:.1,symbol:"arrow",symbolSize:5},lineStyle:{normal:{color:i[1],width:1,opacity:.4,curveness:.2}},data:l(e[1])},{name:e[0],type:"effectScatter",coordinateSystem:"GLMap",zlevel:2,rippleEffect:{brushType:"stroke"},label:{normal:{show:!0,position:"right",formatter:"{b}"}},symbolSize:function(a){return a[2]/6},itemStyle:{normal:{color:function(a){var r=a.data.value[2];return r<100?"green":r>150?"red":"yellow"}}},data:e[1].map(function(a){return{name:a[1].name,value:n[a[1].name].concat([a[1].value])}})})});var u={animation:!1,backgroundColor:"rgba(116, 112, 124, 0.2)",title:{text:"北京病人就诊流向图",subtext:"(1月份统计结果)",left:"center",textStyle:{color:"#fff"},subtextStyle:{color:"yellow",fontWeight:"bold"}},tooltip:{trigger:"item",formatter:function(e){if(e.seriesIndex===2||e.seriesIndex===5||e.seriesIndex===8)return e.name+" "+e.seriesName+" "+e.data.value[2]+" 人次";if(e.seriesIndex===1||e.seriesIndex===4||e.seriesIndex===7)return e.data.fromName+"→"+e.data.toName}},legend:{orient:"vertical",top:"6%",left:"center",data:["北京市"],textStyle:{color:"#fff"},selectedMode:"single"},GLMap:{},series:s};return u}
