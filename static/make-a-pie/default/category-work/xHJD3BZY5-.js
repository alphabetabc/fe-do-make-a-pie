$.getJSON("/asset/get/s/data-1505455520728-HkKia1tqW.json",function(l){buildGrid(l,function(t,a){for(var e=[],r=0,u=0,i=1/0,s=0;s<t.ny;s++)for(var y=0;y<t.nx;y++){var p=a[s][y][0],n=a[s][y][1],f=Math.sqrt(p*p+n*n),o=y/t.nx*360;o>=180&&(o=180-o),e.push([o,90-s/t.ny*180,p,n,f]),u=Math.max(f,u),i=Math.min(f,i)}myChart.setOption({visualMap:{left:"right",min:i,max:u,dimension:4,inRange:{color:["#313695","#4575b4","#74add1","#abd9e9","#e0f3f8","#ffffbf","#fee090","#fdae61","#f46d43","#d73027","#a50026"]},realtime:!1,calculable:!0,textStyle:{color:"#fff"}},bmap:{center:[0,0],zoom:1,roam:!0,mapStyle:{styleJson:[{featureType:"water",elementType:"all",stylers:{color:"#031628"}},{featureType:"land",elementType:"geometry",stylers:{color:"#000102"}},{featureType:"highway",elementType:"all",stylers:{visibility:"off"}},{featureType:"arterial",elementType:"geometry.fill",stylers:{color:"#000000"}},{featureType:"arterial",elementType:"geometry.stroke",stylers:{color:"#0b3d51"}},{featureType:"local",elementType:"geometry",stylers:{color:"#000000"}},{featureType:"railway",elementType:"geometry.fill",stylers:{color:"#000000"}},{featureType:"railway",elementType:"geometry.stroke",stylers:{color:"#08304b"}},{featureType:"subway",elementType:"geometry",stylers:{lightness:-70}},{featureType:"building",elementType:"geometry.fill",stylers:{color:"#000000"}},{featureType:"all",elementType:"labels.text.fill",stylers:{color:"#857f7f"}},{featureType:"all",elementType:"labels.text.stroke",stylers:{color:"#000000"}},{featureType:"building",elementType:"geometry",stylers:{color:"#022338"}},{featureType:"green",elementType:"geometry",stylers:{color:"#062032"}},{featureType:"boundary",elementType:"all",stylers:{color:"#465b6c"}},{featureType:"manmade",elementType:"all",stylers:{color:"#022338"}},{featureType:"label",elementType:"all",stylers:{visibility:"off"}}]}},series:[{type:"flowGL",coordinateSystem:"bmap",data:e,particleDensity:256,particleSpeed:2,particleSize:1,itemStyle:{opacity:.7}}]})})});var createWindBuilder=function(l,t){var a=l.data,e=t.data;return{header:l.header,data:function(r){return[a[r],e[r]]}}},createBuilder=function(l){var t=null,a=null,e=null;return l.forEach(function(r){switch(r.header.parameterCategory+","+r.header.parameterNumber){case"2,2":t=r;break;case"2,3":a=r;break;default:e=r}}),createWindBuilder(t,a)},buildGrid=function(l,t){var a=createBuilder(l),e=a.header,r=e.lo1,u=e.la1,i=e.dx,s=e.dy,y=e.nx,p=e.ny,n=new Date(e.refTime);n.setHours(n.getHours()+e.forecastTime);for(var f=[],o=0,d=Math.floor(y*i)>=360,c=0;c<p;c++){for(var m=[],T=0;T<y;T++,o++)m[T]=a.data(o);d&&m.push(m[0]),f[c]=m}t(e,f)};
