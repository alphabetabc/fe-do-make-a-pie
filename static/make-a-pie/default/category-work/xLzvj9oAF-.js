let _token=null,_taskId=null,_index1=20,_index2=40,_index3=60,_links=[],_hlinks=[],_index4=15,_index5=35,_index6=55;var ldata=[{}],tips=0,m=0,mm=1;let startAngle=70,dolitData=generateData(100,25,20,"rgb(126,190,255)"),threeData=generateData(6,40,10,"#2dc0c9"),dataArr=[];start();function start(){option=getOption(),setInterval(function(){console.log(11111),_links=new Array,_(0)},2e3)}function getOption(){return{grid:{top:"120",left:"215",width:"300",height:"300"},yAxis:{show:!1,type:"value",max:1,min:-1},xAxis:{show:!1,type:"value",max:1,min:-1},animation:!0,series:[{name:"节点",type:"graph",roam:!0,draggable:!0,itemStyle:{normal:{color:"#694d9f"}},lineStyle:{normal:{color:"#694d9f",curveness:.1,opacity:.2,width:3}},effect:{show:!0,period:4,trailLength:.02,symbol:"circle",symbolSize:15,color:"#fff"},symbol:"circle",symbolSize:5,top:"120",left:"215",width:"300",height:"300",data:roundDatas1(1)},{name:1e4,type:"graph",roam:!1,draggable:!1,itemStyle:{normal:{color:"#694d9f"}},lineStyle:{normal:{color:"#694d9f",curveness:1,opacity:.2}},symbol:"circle",symbolSize:0,top:"400",left:"400",width:"10",height:"10",data:roundDatasroot(1)},{animation:!1,animationThreshold:100,animationDurationUpdate:function(r){return r*1e3},name:"loading",type:"pie",radius:["48%","52%"],center:["50%","50%"],hoverAnimation:!1,label:{normal:{show:!1}},data:[]},{type:"pie",name:"旋转圆",zlevel:20,silent:!0,radius:["50%","48%"],hoverAnimation:!1,startAngle,data:threeData,label:{normal:{show:!1}},labelLine:{normal:{show:!1}}},{name:"线图",type:"lines",hoverAnimation:!1,silent:!1,cursor:"default",coordinateSystem:"cartesian2d",polyline:!1,z:1,lineStyle:{width:1,curveness:.2},effect:{show:!0,period:8,symbolSize:10,trailLength:.3,smooth:!0},emphasis:{lineStyle:{type:"dashed"}},data:dataArr},{name:"环线线图",type:"lines",hoverAnimation:!1,silent:!1,cursor:"default",coordinateSystem:"cartesian2d",polyline:!1,z:1,symbol:["none","arrow"],label:{show:!0,position:"middle",fontSize:20},lineStyle:{width:1,curveness:.3},effect:{show:!0,period:8,symbol:"arrow",symbolSize:10,trailLength:.4,smooth:!0},emphasis:{lineStyle:{type:"dashed"}},data:dataArr}]}}function _(o){var r=new Date;let t=new Array,s=new Array;var e,a,l=0;e=_index1+1,_index1=e,a=_index2+1,_index2=a,l=_index3+1,_index3=l;var i=Math.cos(6*e*Math.PI/180),h=Math.cos(6*a*Math.PI/180),d=Math.cos(6*l*Math.PI/180),u=Math.sin(6*e*Math.PI/180),c=Math.sin(6*a*Math.PI/180),y=Math.sin(6*l*Math.PI/180);option.series[o].data=new Array;for(var n=0;n<360;n++){var p=Math.cos(6*n*Math.PI/180),v=Math.sin(6*n*Math.PI/180);option.series[o].data[n]={name:n,symbolSize:0,x:v,y:-p}}for(var n=59;n>360;n--){var p=Math.cos(6*n*Math.PI/180),v=Math.sin(6*n*Math.PI/180);option.series[o].data[n]={name:n,symbolSize:0,x:v,y:-p}}option.series[o].data[1]={name:1e3,symbolSize:10,x:.04,y:.04},option.series[o].data[e]={symbolSize:50,x:u,y:-i},option.series[o].data[a]={symbolSize:50,x:c,y:-h},option.series[o].data[l]={symbolSize:50,x:y,y:-d},new Array().push({source:e,target:1},{source:a,target:1},{source:l,target:1}),e=_index4+1,_index4=e,a=_index5+1,_index5=a,l=_index6+1,_index6=l,i=Math.cos(6*e*Math.PI/180),h=Math.cos(6*a*Math.PI/180),d=Math.cos(6*l*Math.PI/180),u=Math.sin(6*e*Math.PI/180),c=Math.sin(6*a*Math.PI/180),y=Math.sin(6*l*Math.PI/180),s.push(getLink2(-i,u,-h,c,"深入溯源")),s.push(getLink2(-h,c,-d,y,"关联")),s.push(getLink2(-d,y,-i,u,"提示服务质量"));let f=getLink(0,0,-i,u);t.push(f),f=getLink(0,0,-h,c),t.push(f),f=getLink(0,0,-d,y),t.push(f),option.series[4].data=t,option.series[5].data=s,tips==100?(tips=0,m=0):tips<=10?(++tips,++m):tips=tips+1.85,startAngle=startAngle-6,option.series[3].startAngle=startAngle,option.series[3].data=generateData(6,20,10,"#2dc0c9"),myChart.setOption(option,!0)}function getLink(o,r,t,s){let e=new Array;return e.push([o,r]),e.push([t,s]),e}function getLink2(o,r,t,s,e){let a=new Array;a.push([o,r]),a.push([t,s]);let l={};return l.coords=a,l.name=e,l}function loading(){return[{value:tips,itemStyle:{normal:{color:"rgba(0,0,0,0)"}}},{value:m,itemStyle:{normal:{borderWidth:5,borderColor:{type:"linear",x:0,y:0,x2:0,y2:4,colorStops:[{offset:0,color:"rgba(255,255,255,0.7)"},{offset:.3,color:"rgba(255,255,255,1)"},{offset:.6,color:"rgba(255,255,255,1)"},{offset:.8,color:"rgba(255,255,255,1)"},{offset:1,color:"rgba(255,255,255,1)"}],globalCoord:!1},color:"rgba(255,255,255,0)",shadowBlur:30,shadowColor:"rgba(255,255,255,1)"}}},{value:100-tips,itemStyle:{normal:{color:"rgba(0,0,0,0)"}}}]}function roundDatas1(o){for(var r=[],t=0;t<o;t++){var s=Math.cos(6*t*Math.PI/180),e=Math.sin(6*t*Math.PI/180);r.push({name:t,x:e,y:-s})}return r}function roundDatasroot(o){for(var r=[],t=0;t<o;t++){var s=Math.cos(6*t*Math.PI/180),e=Math.sin(6*t*Math.PI/180);r.push({name:"rootnode",x:e,y:-s})}return r}function generateData(o,r,t,s){let e=[];for(var a=0;a<o;a++)a%2===0?e.push({name:(a+1).toString(),value:r,itemStyle:{normal:{color:s,borderWidth:0}}}):e.push({name:(a+1).toString(),value:t,itemStyle:{normal:{color:"rgba(0,0,0,0)",borderWidth:0}}});return e}
