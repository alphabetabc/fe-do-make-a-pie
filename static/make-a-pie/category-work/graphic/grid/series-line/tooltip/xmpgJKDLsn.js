var seriesData=[820,932,901,934,1290,1330,1320],seriesData2=[],top=50,left=100,bottom=50,right=50;option={grid:[{top,left,bottom,right}],xAxis:[{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],axisTick:{alignWithLabel:!0}}],tooltip:{trigger:"axis"},yAxis:{type:"value"},series:[{id:"bb",data:seriesData,type:"line",symbolSize:20}],graphic:[{id:"aa",type:"polyline",shape:{points:[]}}]};var moveFn;let initDownX="";var xAxisItem=null,pointsArr=[],arr=[],myChartWidth=myChart.getWidth()-left-right,myChartHeight=myChart.getHeight()-top-bottom;myChart.getZr().on("mousedown",t=>{initDownX=xAxisItem=t.offsetX,pointsArr=[],arr=[],myChart.getZr().on("mousemove",moveFn)});function moveFn(t){if(!!initDownX&&Math.abs(t.offsetX-xAxisItem)>=5){xAxisItem=t.offsetX,pointsArr.push([t.offsetX,t.offsetY]);let i=(t.offsetX-left)/myChartWidth*seriesData.length;var r=myChart.convertFromPixel("grid",[t.offsetX,t.offsetY])[1];let e={x:i,y:r};arr.push(e);let o=t.offsetX-initDownX;t.offsetX<initDownX&&(o=initDownX-t.offsetX),o>=myChartWidth/seriesData.length&&myChart.setOption({graphic:[{id:"aa",shape:{points:pointsArr},style:{stroke:"red"}}]})}}myChart.getZr().on("mouseup",t=>{if(myChart.getZr().off("mousemove",moveFn),!initDownX||!arr.length)return;initDownX="",arr[0].x>arr[arr.length-1].x&&arr.reverse();let r=parseInt(arr[0].x),i=parseInt(arr[arr.length-1].x);for(;r<=i;){let a=r+.5;for(var e=0;e<arr.length&&arr[e+1];e++)if(arr[e].x<=a&&a<=arr[e+1].x){var o=((arr[e].y+arr[e+1].y)/2).toFixed(2);seriesData[r]=o;break}r++}myChart.setOption({series:[{id:"bb",data:seriesData}],graphic:[{id:"aa",shape:{points:[]}}]})});
