var getname=["教育","心理","政法","经管","商学院","建筑工程","艺术设计","士官"],getseries=["学院(部)转出比率","学院(部)转入比率"],getvalue=[[11,22,33,44,55,66,77,88],[55,44,66,25,44,13,22,80]],data=getseries.map((A,r)=>({name:getseries[r],value:getvalue[r]})),barWidth=20,imgurl="data:image/png;base64,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",imgwidth=myChart.getWidth()*.96,colorsBottom={"学院(部)转出比率":new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#61E9C1"},{offset:1,color:"#0BC991"}]),"学院(部)转入比率":new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#4EA4F3"},{offset:1,color:"#0A79DF"}])},colorsTop={"学院(部)转出比率":"rgba(122, 240, 205, 1)","学院(部)转入比率":"rgba(128, 195, 255, 1)"},colorsTip={"学院(部)转出比率":"rgba(122, 240, 205, .2)","学院(部)转入比率":"rgba(128, 195, 255, .2)"},colorsTopLine={"学院(部)转出比率":"orange","学院(部)转入比率":"#db4040"},colorsLineColor={"学院(部)转出比率":"orange","学院(部)转入比率":"#db4040"};function getLegend(){let A=[];return getseries.map(r=>{A.push({name:r,icon:"roundRect"}),A.push({name:r.replace("学院(部)","")+"均值",icon:"line"})}),A}var colors=[new echarts.graphic.LinearGradient(0,1,0,0,[{offset:0,color:"rgba(10, 121, 223, 1)"},{offset:1,color:"rgba(78, 164, 243, 1)"}]),new echarts.graphic.LinearGradient(0,1,0,0,[{offset:0,color:"rgba(97, 233, 193, 1)"},{offset:1,color:"rgba(11, 201, 145, 1)"}]),new echarts.graphic.LinearGradient(0,1,0,0,[{offset:0,color:"rgba(255, 189, 111, 1)"},{offset:1,color:"rgba(255, 161, 38, 1)"}])],option=chuliData(data,barWidth);function chuliData(A,r){let i=A.length==3?0:1.5/A.length;console.log(A);var n=[];A.forEach((t,e)=>{var t={name:A[e].name,type:"bar",barWidth:r,barGap:"50%",data:A[e].value,itemStyle:{normal:{barBorderRadius:[0,0,9,9],color:colorsBottom[A[e].name],label:{show:!0,position:"top",align:"center",lineHeight:28,textStyle:{fontSize:16},formatter:l=>`{circle|${l.data}}`,rich:{circle:{width:28,backgroundColor:colorsTip[A[e].name],color:"#FFFFFF",color:colorsTop[A[e].name],borderRadius:3,fontSize:14,padding:[0,0,2,0]}}}}}},B={name:A[e].name,type:"pictorialBar",symbolSize:[r,r*.5],symbolOffset:[i*r+(e-1)*r*1.5,r*.25],z:12,silent:!0,barWidth:20,itemStyle:{normal:{color:colorsBottom[t.name]}},data:A[e].value},s={name:A[e].name,type:"pictorialBar",symbolSize:[r,r*.75],symbolOffset:[i*r+(e-1)*r*1.5,-r*.45],z:12,symbolPosition:"end",silent:!0,itemStyle:{normal:{color:colorsTop[t.name]}},data:A[e].value};n.push(t),n.push(s)});let o=A.map(a=>({name:a.name.replace("学院(部)","")+"均值",type:"line",xAxisIndex:0,data:a.value,lineStyle:{type:"dashed",color:"rgba(0,0,0,0)"},symbolSize:1e-7,silent:!0,label:{show:!1},color:colorsTopLine[a.name],symbol:"none",markLine:{silent:!0,data:[{type:"average",name:"平均值"}],lineStyle:{color:colorsLineColor[a.name],textStyle:{color:"red"}},symbol:"none",label:{show:!0,position:"end",align:"center",lineHeight:28,padding:[-10,0,0,-50],textStyle:{fontSize:16},formatter:e=>(console.log("markLine",e),`{circle|${e.value}}
`),rich:{circle:{backgroundColor:colorsTopLine[a.name],color:"#FFFFFF",borderRadius:3,fontSize:14,padding:[0,5,2,5]},mb:{padding:[0,0,20,0]}}}},markArea:{data:[[{yAxis:"average",itemStyle:{color:"#FFA387",opacity:.1}},{yAxis:"0"}]]}}));for(var E=0,C=0,g=0;g<o[0].data.length;g++)E=E+o[0].data[g];for(var g=0;g<o[1].data.length;g++)C=C+o[1].data[g];var Q=E/o[0].data.length,I=C/o[1].data.length,f={color:colors,tooltip:{show:!0,trigger:"axis",axisPointer:{type:"none"},backgroundColor:"rgba(21, 64, 92, 0.9)",formatter:function(a){var e="";e+="<div>"+a[0].name+"</div>";for(var t=0;t<a.length;t++)e="<span>"+a[0].name+'</span></br><span style="display:inline-block;float:left;width:12px;height:12px;margin-top:5px;background:#61E9C1;color:#fff;border-radius:30%;"></span><span>&nbsp&nbsp学院(部)转出比率：</span><span style="display:block;width:60px;float:right;text-align:right;color:rgba(0, 255, 252, 1);">'+getvalue[0][a[t].dataIndex]+'</span></br><span style="display:inline-block;float:left;width:12px;height:12px;margin-top:5px;background:#0A79DF;color:#fff;border-radius:30%;"></span><span>&nbsp&nbsp学院(部)转入比率：</span><span style="display:block;width:60px;float:right;text-align:right;color:rgba(0, 255, 252, 1);">'+getvalue[1][a[t].dataIndex]+'</span></br><span style="display:inline-block;float:left;width:12px;height:12px;margin-top:5px;background:orange;color:#fff;border-radius:30%;"></span><span>&nbsp&nbsp转出比率均值：</span><span style="display:block;width:60px;float:right;text-align:right;color:rgba(0, 255, 252, 1);">'+Q.toFixed(2)+'</span></br><span style="display:inline-block;float:left;width:12px;height:12px;margin-top:5px;background:#db4040;color:#fff;border-radius:30%;"></span><span>&nbsp&nbsp转入比率均值：</span><span style="display:block;width:60px;float:right;text-align:right;color:rgba(0, 255, 252, 1);">'+I.toFixed(2)+"</span></br>";return e}},grid:{top:"33",right:"15",left:"50",bottom:"55"},legend:{show:!0,selectedMode:!0,orient:"horizontal",right:20,itemWidth:16,itemHeight:16,textStyle:{color:"rgba(102, 102, 102, 1)",fontSize:14},data:getLegend()},graphic:{type:"image",id:"logo",left:50,right:30,bottom:45,z:-1,style:{image:imgurl,width:imgwidth,height:50}},xAxis:[{data:getname,axisLabel:{formatter:function(a){var e="",t=4,B=a.length,s=Math.ceil(B/t);if(s>1){for(var l=0;l<s;l++){var c="",p=l*t,d=p+t;c=a.substring(p,d)+`
`,e+=c}return e}else return a},margin:20,color:"#666666",textStyle:{fontSize:13},axisLine:{lineStyle:{color:"#B0C5DB"}},axisTick:{show:!1}},axisLine:{show:!1},axisTick:{show:!1},boundaryGap:!0,splitLine:{show:!1,width:.08,lineStyle:{type:"solid",color:"#03202E"}}}],yAxis:[{name:"%",nameTextStyle:{color:"#999999",fontSize:13,padding:[0,0,0,20]},axisLabel:{color:"#666666",textStyle:{fontSize:13}},axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{color:"#CCDBEB",type:"dashed",opacity:.5}}}],series:[...n,...o]};return f}myChart.setOption(option),myChart.on("legendselectchanged",function(A){const r=[];data.forEach((n,o)=>{A.selected[n.name]&&r.push(n)});var i=chuliData(r,30);myChart.setOption(i)});
