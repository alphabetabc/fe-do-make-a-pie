var secretNumList=function(){for(var t=["0","1","2","3","4","5","6","7","8","9"],n=[],e=0;e<4;e++)n.push(t.splice(Math.round(Math.random()*(t.length-1)),1)[0]);return n}(),times=8;msgList=["请猜1个四位数字（数字不重复）：",""];function graphicObj(t,n){for(var e=[],s=0;s<4;s++)e.push({type:"group",id:"textGroup"+s,left:50+s*60,top:50,children:[{type:"rect",z:100,left:"center",top:"center",shape:{width:40,height:50},style:{fill:"#fff",stroke:"#999",lineWidth:2,shadowBlur:8,shadowOffsetX:3,shadowOffsetY:3,shadowColor:"rgba(0,0,0,0.3)"}},{type:"text",z:100,top:"middle",left:"center",style:{text:typeof t[t.length-4+s]>"u"?"":t[t.length-4+s],font:'20px "STHeiti", sans-serif'}}]});return e.push({type:"text",z:100,top:"50",left:"400",style:{text:n,font:'20px "STHeiti", sans-serif'}}),e}var categoryX=["0","1","2"],categoryY=["0","1","2","3"],btnData=function(){var t=[];for(i=0;i<3;i++)for(j=0;j<4;j++)j>0?t.push([i,j,""+(j*3+i-2)]):t.push([i,j,""+(0-i)]);return t}(),inputList=[];function getOption(){return option={title:{text:"文曲星词典猜数字游戏"},tooltip:{show:!1},grid:{width:"30%",height:"60%",left:"10px",top:"30%"},xAxis:{show:!1,type:"category",data:categoryX,splitArea:{show:!0}},yAxis:{show:!1,type:"category",data:categoryY,splitArea:{show:!0}},graphic:graphicObj(inputList,msgList),series:[{id:"btnPanel",type:"heatmap",label:{normal:{show:!0,formatter:function(t){return t.data[2]<0?t.data[2]==-1?"⬅":"猜":t.data[2]}}},data:btnData}]},option}myChart.setOption(getOption()),myChart.on("click",function(t){t.seriesId==="btnPanel"&&times>0&&btnClick(t.data[2])});function btnClick(t){if(t==="-1")inputList.pop();else{if(t==="-2")return inputList.length===4?guess(inputList):alert("请先填入 4 个数字再猜！");inputList.length===4?inputList[3]=t:inputList.push(t)}myChart.setOption({graphic:graphicObj(inputList,msgList.join(`
`))})}function guess(t){if(t.length!=4)return alert("请猜4位数字");var n,e=0,s=0;times--;for(var r=0;r<4;r++)secretNumList.indexOf(t[r])===r?e++:secretNumList.indexOf(t[r])!=-1&&s++;e===4?(n=t.join("")+"  猜中了！！！",times=0):n=t.join("")+"  "+e+"A"+s+"B , 你还有"+times+"次机会...",msgList.push(n),inputList=[],myChart.setOption({graphic:graphicObj(inputList,msgList.join(`
`))})}
