const chartData=[{value:520,name:"温度传感器"},{value:280,name:"湿度传感器"},{value:100,name:"UPS"},{value:100,name:"门禁"},{value:100,name:"消防"},{value:100,name:"空调"},{value:100,name:"漏水/水浸"},{value:100,name:"烟雾"}],colorList=["#115FEA","#10EBE3","#10A9EB","#EB9C10","#2E10EB","#9B10EB"],sum=chartData.reduce((e,t)=>e+t.value,0),gap=1*sum/100,pieData1=[],pieData2=[],gapData={name:"",value:gap,itemStyle:{color:"transparent"}};for(let e=0;e<chartData.length;e++)pieData1.push({...chartData[e],itemStyle:{borderRadius:10}}),pieData1.push(gapData),pieData2.push({...chartData[e],itemStyle:{color:colorList[e],opacity:.1}}),pieData2.push(gapData);console.log(pieData2),option={backgroundColor:"#FC7D3F",tooltip:{show:!1},legend:{show:!0,right:"20%",top:"10%",align:"left",itemGap:18,itemWidth:13,itemHeight:7,textStyle:{color:"#D8DDE3",rich:{name:{verticalAlign:"right",align:"left",width:100,fontSize:18,color:"#D8DDE3"},percent:{padding:[0,0,0,8],color:"#D8DDE3"}},borderWidth:53},formatter:e=>{console.log(e),console.log(chartData);const a=(chartData.find(l=>l.name===e).value/sum*100).toFixed(0);return"{name|"+e+"}{percent|"+a+"}个"}},graphic:{elements:[]},grid:{top:35,right:30,bottom:20,left:30},color:colorList,series:[{name:"消息来源",type:"pie",roundCap:!0,radius:["66%","70%"],center:["26%","45%"],label:{show:!1},labelLine:{show:!1},data:pieData1},{type:"pie",radius:["66%","54%"],center:["26%","45%"],gap:1.71,label:{show:!1},labelLine:{show:!1},silent:!0,data:pieData2},{type:"pie",center:["26%","45%"],radius:[0,"45.6%"],label:{show:!1},labelLine:{show:!1},itemStyle:{color:"rgba(75, 126, 203,.1)"},silent:!0,data:[{value:100,name:""}]}]};
