var parentJson=null,parentInfo=[{cityName:"成都市",level:"city",code:510100}];getGeoJson(510100);var timeFn=null;function getGeoJson(t){AMapUI.loadUI(["geo/DistrictExplorer"],a=>{var r=new a;r.loadAreaNode(t,function(o,l){if(o){console.error(o);return}let e=l.getSubFeatures();if(e.length>0)parentJson=e;else if(e.length===0&&(e=parentJson.filter(i=>{if(i.properties.adcode==t)return i}),e.length===0))return;proceData(e)})})}function proceData(t){let a=[{name:"甘孜藏族自治州",cityCode:"513300",value:"460"},{name:"简阳市",cityCode:"511100",value:"11372"},{name:"成都市",cityCode:"510100",value:"4543"}];t.map(o=>{a.forEach(l=>{o.properties.adcode==l.cityCode&&(l.level=o.properties.level)})});let r={};r.features=t,initEcharts(a,r)}function initEcharts(t,a){let r=[];t.map(function(e){r.push(e.value)});let o=Math.max.apply(null,r),l=Math.min.apply(null,r);echarts.registerMap("Map",a),myChart.setOption({backgroundColor:"rgb(20,28,52)",tooltip:{trigger:"item"},visualMap:{type:"piecewise",min:l,max:o,splitNumber:5,left:35,bottom:50,itemWidth:21,itemHeight:8,showLabel:!1,orient:"horizontal",text:["高","低"],itemGap:2,textStyle:{color:"#fff"},inRange:"",color:["rgba(7, 83, 114,0.8)","rgba(7, 183, 114,0.8)","rgba(33, 122, 168,0.8)","rgba(28, 138, 187,0.7)","#02e1ff"],show:!0},series:[{type:"effectScatter",coordinateSystem:"geo",data:[{name:"四川",value:[104.06154145214842,30.647892249117188,100]}],symbolSize:function(e){return e[2]/10},showEffectOn:"render",rippleEffect:{brushType:"stroke"},hoverAnimation:!0,label:{normal:{formatter:"{b}",position:"right",show:!0}},itemStyle:{normal:{color:"#a1edf6",shadowBlur:10}},zlevel:1},{name:"地图",type:"map",map:"Map",roam:!0,zoom:1,aspectScale:.9,data:t,itemStyle:{normal:{borderColor:"#fff",borderWidth:1,areaColor:"#a1edf6",shadowColor:"rgba(128, 217, 248, 1)",shadowOffsetX:-2,shadowOffsetY:2,shadowBlur:10},emphasis:{areaColor:"#389BB7",borderWidth:0}},label:{normal:{show:!0,textStyle:{color:"#000",fontSize:12}},emphasis:{areaColor:"#02e1ff",show:!0,textStyle:{color:"#000"}}}}]},!0)}
