myChart.on("mouseover",function(e){console.dir(e),stopInterval()}),myChart.on("globalout",function(e){console.dir(e),startInterval()}),myChart.on("click",function(e){console.log("click"),console.dir(e),console.log(e.data.id),showSecondTree(e.data.id)});var colors=["#9119FB","#9119FB","#14B2BF","#68B998","#AE9C9C","#D0B34D","#B84DCF"],names=["","test1","test2","test3","test4","test5","test6"],secondTreeNames=["1","2","3","4","5"],secondPosition=[],clickPosition={},position=[{x:0,y:0,angle:0,index:0,zoom:1},{x:0,y:150,angle:0,index:1,zoom:1},{x:130,y:75,angle:60,index:2,zoom:1},{x:130,y:-75,angle:120,index:3,zoom:1},{x:0,y:-150,angle:180,index:4,zoom:1},{x:-130,y:-75,angle:240,index:5,zoom:1},{x:-130,y:75,angle:300,index:6,zoom:1}],intervalId=[],count=0;let intervalIdFirst=setInterval(()=>{drawGraphInterval(),count++},30);intervalId.push(intervalIdFirst);function drawGraphInterval(){position.map(e=>{e.angle=(e.angle+1)%360,e.y=0+150*Math.cos(2*Math.PI/360*e.angle),e.x=0+150*Math.sin(2*Math.PI/360*e.angle)}),drawGraph()}function stopInterval(){let e=count;setTimeout(()=>{console.log("stopInterval"),console.log(intervalId);for(let a=0;a<intervalId.length;a++)clearInterval(intervalId[a]);e==count&&(intervalId=[])},50)}function startInterval(){secondPosition=[],Object.getOwnPropertyNames(clickPosition).length>0&&(position[clickPosition.index]=clickPosition,clickPosition={}),console.log("startInterval");let a=setInterval(()=>{drawGraphInterval(),count++},30);intervalId.push(a),console.log(intervalId)}function showSecondTree(e){if(e>7)return;secondPosition=[];let a=Object.getOwnPropertyNames(clickPosition);var s=s;a.length>0&&(position[clickPosition.index]=clickPosition),clickPosition=position[e],position[e]={x:0,y:0,angle:0,index:e,zoom:1.2};let l=180*Math.sin(2*Math.PI/360*clickPosition.angle),r=180*Math.cos(2*Math.PI/360*clickPosition.angle);for(let o=0;o<5;o++)secondPosition.push({x:o===0?l:l+80*Math.sin(2*Math.PI/360*(360-60*(o-1)+(clickPosition.angle+90)%360)),y:o===0?r:r+80*Math.cos(2*Math.PI/360*(360-60*(o-1)+(clickPosition.angle+90)%360)),angle:o===0?clickPosition.angle:(clickPosition.angle+90)%360,index:position.length+secondPosition.length+1,zoom:o===0?1:.25});drawGraph()}function drawGraph(){var e;let a=Object.getOwnPropertyNames(clickPosition);function s(r){for(var o=[],n=0;n<position.length;n++)o.push({id:n,name:names[n],x:position[n].x,y:position[n].y,symbol:"circle",symbolSize:n===0?0:[120*position[n].zoom,120*position[n].zoom],itemStyle:{color:colors[n]},label:{color:"#FFFFFF",fontSize:18,show:!0}});if(a.length>0)for(let t=0;t<secondPosition.length;t++)o.push({id:t+position.length+1,name:secondTreeNames[t],x:secondPosition[t].x,y:secondPosition[t].y,symbol:"circle",symbolSize:[120*secondPosition[t].zoom,120*secondPosition[t].zoom],itemStyle:{color:t===0?"#9FC9FB":"#CDD4DE"},label:{color:t===0?"#FFFFFF":"#2582D6",fontSize:t===0?18:14,show:!0}});return o}var l=[];l.push({nodes:s()}),e={series:l.map(function(r){return{type:"graph",layout:"force",animation:!0,data:r.nodes,circular:{},force:{gravity:-0,repulsion:0,edgeLength:0}}})},myChart.setOption(e,!0)}
