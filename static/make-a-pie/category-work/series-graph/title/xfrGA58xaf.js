var moon30="/asset/get/s/data-1602120452196-diRVht_ky.jpg",moon29="/asset/get/s/data-1602120447555-I6XrEBYVt.jpg",moon28="/asset/get/s/data-1602120442467-h2lBBYbyw.jpg",moon27="/asset/get/s/data-1602120437703-JrMyM6ett.jpg",moon26="/asset/get/s/data-1602120432130-Q-KUmquR1.jpg",moon25="/asset/get/s/data-1602120427717-NlQDLFtd2.jpg",moon24="/asset/get/s/data-1602120422377-IhSRjoKgy.jpg",moon23="/asset/get/s/data-1602120416446-x5IGnu4Nq.jpg",moon22="/asset/get/s/data-1602118837196-MLg3ZIFyv.jpg",moon21="/asset/get/s/data-1602120411260-fl61S7t_k.jpg",moon20="/asset/get/s/data-1602120403590-6WJ1JW75z.jpg",moon19="/asset/get/s/data-1602120397176-b52bf8Tk1.jpg",moon17="/asset/get/s/data-1602120390574-GpmDmltrH.jpg",moon14="/asset/get/s/data-1602120377250-4UrSO9-le.jpg",moon13="/asset/get/s/data-1602120367881-qXJ-Mp3rG.jpg",moon12="/asset/get/s/data-1602120363941-Y_0jJodWA.jpg",moon11="/asset/get/s/data-1602120358662-8drDAH0d9.jpg",moon10="/asset/get/s/data-1602120352031-53PXxz9Xo.jpg",moon9="/asset/get/s/data-1602120345369-8wu14ZAc9.jpg",moon8="/asset/get/s/data-1602120340614-sPe5NLiZ9.jpg",moon6="/asset/get/s/data-1602120335071-h0zvx2KZ3.jpg",moon5="/asset/get/s/data-1602120329940-rByfQfZOE.jpg",moon4="/asset/get/s/data-1602120325642-LpcR8ebcQ.jpg",moon3="/asset/get/s/data-1602120317270-4kqQ7gjRF.jpg",moon2="/asset/get/s/data-1602120139031-e42DKQK3w.jpg",moon1="/asset/get/s/data-1602120100638-yNWQwhlec.jpg",anum=["(盈凸月)九","(盈凸月)十","(盈凸月)十一","(盈凸月)十二","(盈凸月)十三","(盈凸月)十四","(望/满月)十五","(望/满月)十六","(亏凸月)十七","(亏凸月)十八","(亏凸月)十九","(亏凸月)二十","(亏凸月)廿一","(下弦月)廿二","(下弦月)廿三","(残月)廿四","(残月)廿五","(残月)廿六","(残月)廿七","(残月)廿八","(残月)廿九","(晦)三十","(新月/朔)一","(峨嵋月)二","(峨嵋月)三","(峨嵋月)四","(峨嵋月)五","(峨嵋月)六","(上弦月)七","(上弦月)八"],moons=[moon1,moon2,moon3,moon4,moon5,moon6,moon8,moon8,moon9,moon10,moon11,moon12,moon13,moon14,moon17,moon17,moon19,moon20,moon21,moon22,moon23,moon24,moon24,moon25,moon25,moon26,moon27,moon28,moon29,moon30],dt=new Date,lunarInfo=[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42416,83315,21168,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46752,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,23232,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19195,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448,84835,37744,18936,18800,25776,92326,59984,27424,108228,43744,41696,53987,51552,54615,54432,55888,23893,22176,42704,21972,21200,43448,43344,46240,46758,44368,21920,43940,42416,21168,45683,26928,29495,27296,44368,84821,19296,42352,21732,53600,59752,54560,55968,92838,22224,19168,43476,41680,53584,62034,54560];function lYearDays(t){var e,s=348;for(e=32768;e>8;e>>=1)s+=lunarInfo[t-1900]&e?1:0;return s+leapDays(t)}function leapMonth(t){return lunarInfo[t-1900]&15}function leapDays(t){return leapMonth(t)?lunarInfo[t-1900]&65536?30:29:0}function monthDays(t,e){return e>12||e<1?-1:lunarInfo[t-1900]&65536>>e?30:29}function solar2lunar(o,g,f){if(o<1900||o>2100||o==1900&&g==1&&f<31)return-1;if(o)var x=new Date(o,parseInt(g)-1,f);else var x=new Date;var a,b=0,r=0,o=x.getFullYear(),g=x.getMonth()+1,f=x.getDate(),l=(Date.UTC(x.getFullYear(),x.getMonth(),x.getDate())-Date.UTC(1900,0,31))/864e5;for(a=1900;a<2101&&l>0;a++)r=lYearDays(a),l-=r;l<0&&(l+=r,a--);var i=new Date,p=!1;i.getFullYear()==o&&i.getMonth()+1==g&&i.getDate()==f&&(p=!0);var v=a,b=leapMonth(a),n=!1;for(a=1;a<13&&l>0;a++)b>0&&a==b+1&&n==!1?(--a,n=!0,r=leapDays(v)):r=monthDays(v,a),n==!0&&a==b+1&&(n=!1),l-=r;l==0&&b>0&&a==b+1&&(n?n=!1:(n=!0,--a)),l<0&&(l+=r,--a);var y=a,h=l+1;return{lYear:v,lMonth:y,lDay:h}}var year=dt.getFullYear(),m=dt.getMonth()+1,d=dt.getDate(),lunar=solar2lunar(year,m,d),d1=lunar.lDay;d1<9?day=d1+21:day=d1-9;function roundDatas(t,e,s){var x=[];if(s=="地球"){label=`地球
北极`;for(var a=0;a<t;a++){var r=Math.cos(e*a*Math.PI/180),o=Math.sin(e*a*Math.PI/180);x.push({x:o,y:r,itemStyle:{normal:{color:"#94d6da"}},label:{normal:{show:!0,formatter:label,fontSize:14}}})}}else if(s=="太阳"){label="太阳";for(var a=0;a<t;a++){var r=Math.cos(e*a*Math.PI/180),o=Math.sin(e*a*Math.PI/180);x.push({x:o,y:r,itemStyle:{normal:{color:"#d54a20"}},label:{normal:{show:!0,formatter:label,fontSize:16}}})}}else{label="{b}";for(var a=0;a<t;a++){var r=Math.cos(e*a*Math.PI/180),o=Math.sin(e*a*Math.PI/180);x.push({name:anum[a],x:o,y:r,itemStyle:{normal:{color:"#D3D3D3"}}})}x[day].symbolSize=30,x[day].symbol="image://"+moons[d1-1],x[day].label={normal:{show:!0,formatter:label,fontSize:16,color:"#fff",position:"top"}}}return x}function linkDatas(t){for(var e=[],s=0;s<t;s++)e.push({lineStyle:{normal:{color:"#94d6da",width:2,curveness:.01,opacity:.8,type:"dashed"}},source:s,target:s+1});return e.push({lineStyle:{normal:{color:"#94d6da",type:"dashed",width:2,curveness:.01,opacity:.8}},source:s-1,target:0}),e}option={backgroundColor:"#000",title:{text:"月相",textStyle:{color:"#fff"},subtext:`农历：${lunar.lYear}、${lunar.lMonth}、${lunar.lDay}

人有悲欢离合 月有阴晴圆缺`,subtextStyle:{color:"#eee"},top:"10%",left:"10%"},series:[{name:"太阳",type:"graph",symbol:"circle",symbolSize:60,top:"12%",left:"6%",width:"300",height:"300",data:roundDatas(1,1,"太阳"),links:linkDatas(0)},{name:"地球",type:"graph",symbol:"circle",symbolSize:50,top:"20%",left:"40%",width:"300",height:"300",data:roundDatas(1,1,"地球"),links:linkDatas(0)},{name:"月",type:"graph",edgeSymbol:["","arrow"],edgeSymbolSize:[3,8],symbol:"circle",symbolSize:1,top:"20%",left:"40%",width:"300",height:"300",data:roundDatas(30,12,"m"),links:linkDatas(30)}]};
