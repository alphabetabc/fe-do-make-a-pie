function getParametricEquation(a,l,t,c,i,m){let d=(a+l)/2,r=a*Math.PI*2,s=l*Math.PI*2,e=d*Math.PI*2;a===0&&l===1&&(t=!1),i=typeof i<"u"?i:1/3;let h=t?Math.cos(e)*.1:0,f=t?Math.sin(e)*.1:0,u=c?1.05:1;return{u:{min:-Math.PI,max:Math.PI*3,step:Math.PI/32},v:{min:0,max:Math.PI*2,step:Math.PI/20},x:function(n,o){return n<r?h+Math.cos(r)*(1+Math.cos(o)*i)*u:n>s?h+Math.cos(s)*(1+Math.cos(o)*i)*u:h+Math.cos(n)*(1+Math.cos(o)*i)*u},y:function(n,o){return n<r?f+Math.sin(r)*(1+Math.cos(o)*i)*u:n>s?f+Math.sin(s)*(1+Math.cos(o)*i)*u:f+Math.sin(n)*(1+Math.cos(o)*i)*u},z:function(n,o){return n<-Math.PI*.5||n>Math.PI*2.5?Math.sin(n):Math.sin(o)>0?1*m:-1}}}function getPie3D(a,l){let t=[],c=0,i=0,m=0,d=[],r=typeof l<"u"?(1-l)/(1+l):1/3;for(let e=0;e<a.length;e++){c+=a[e].value;let h={name:typeof a[e].name>"u"?`series${e}`:a[e].name,type:"surface",parametric:!0,wireframe:{show:!1},pieData:a[e],pieStatus:{selected:!1,hovered:!1,k:r}};if(typeof a[e].itemStyle<"u"){let f={};typeof a[e].itemStyle.color<"u"&&(f.color=a[e].itemStyle.color),typeof a[e].itemStyle.opacity<"u"&&(f.opacity=a[e].itemStyle.opacity),h.itemStyle=f}t.push(h)}for(let e=0;e<t.length;e++)m=i+t[e].pieData.value,console.log(t[e]),t[e].pieData.startRatio=i/c,t[e].pieData.endRatio=m/c,t[e].parametricEquation=getParametricEquation(t[e].pieData.startRatio,t[e].pieData.endRatio,!1,!1,r,t[e].pieData.value),i=m,d.push(t[e].name);let s={tooltip:{formatter:e=>{if(e.seriesName!=="mouseoutSeries")return`${e.seriesName}<br/><span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:${e.color};"></span>${s.series[e.seriesIndex].pieData.value}`}},legend:{data:d,textStyle:{color:"#fff",fontSize:26}},xAxis3D:{min:-1,max:1},yAxis3D:{min:-1,max:1},zAxis3D:{min:-1,max:1},grid3D:{show:!1,boxHeight:20,bottom:"50%",environment:"#021041",viewControl:{distance:300,alpha:25,beta:130}},series:t};return s}option=getPie3D([{name:"已消除",value:3,itemStyle:{opacity:.5,color:"rgba(0,127,244,.8)"}},{name:"未消除",value:1,itemStyle:{opacity:.5,color:"rgba(209,126,23,.8)"}}],2);
