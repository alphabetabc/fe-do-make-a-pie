function getParametricEquation(a,r,t,c,i,h){let M=(a+r)/2,l=a*Math.PI*2,u=r*Math.PI*2,e=M*Math.PI*2;a===0&&r===1&&(t=!1),i=typeof i<"u"?i:1/3;let n=t?Math.cos(e)*.1:0,f=t?Math.sin(e)*.1:0,m=c?1.05:.6;return{u:{min:-Math.PI,max:Math.PI*3,step:Math.PI/82},v:{min:0,max:Math.PI*2,step:Math.PI/20},x:function(o,s){return o<l?n+Math.cos(l)*(1+Math.cos(s)*i)*m:o>u?n+Math.cos(u)*(1+Math.cos(s)*i)*m:n+Math.cos(o)*(1+Math.cos(s)*i)*m},y:function(o,s){return o<l?f+Math.sin(l)*(1+Math.cos(s)*i)*m:o>u?f+Math.sin(u)*(1+Math.cos(s)*i)*m:f+Math.sin(o)*(1+Math.cos(s)*i)*m},z:function(o,s){return o<-Math.PI*.5?Math.sin(o):o>Math.PI*2.5?Math.sin(o)*h*.1:Math.sin(s)>0?1*h*.2:-1}}}function getPie3D(a,r){let t=[],c=0,i=0,h=0,M=[],l=typeof r<"u"?(1-r)/(1+r):1/3;for(let e=0;e<a.length;e++){c+=a[e].value;let n={name:typeof a[e].name>"u"?`series${e}`:a[e].name,type:"surface",parametric:!0,wireframe:{show:!1},pieData:a[e],pieStatus:{selected:!1,hovered:!1,k:l}};if(typeof a[e].itemStyle<"u"){let f={};typeof a[e].itemStyle.color<"u"&&(f.color=a[e].itemStyle.color),typeof a[e].itemStyle.opacity<"u"&&(f.opacity=a[e].itemStyle.opacity),n.itemStyle=f}t.push(n)}for(let e=0;e<t.length;e++)h=i+t[e].pieData.value,t[e].pieData.startRatio=i/c,t[e].pieData.endRatio=h/c,t[e].parametricEquation=getParametricEquation(t[e].pieData.startRatio,t[e].pieData.endRatio,!1,!1,l,t[e].pieData.value),i=h,M.push(t[e].name);t.push({name:"mouseoutSeries",type:"surface",parametric:!0,wireframe:{show:!1},itemStyle:{opacity:0},parametricEquation:{u:{min:0,max:Math.PI*2,step:Math.PI/20},v:{min:0,max:Math.PI,step:Math.PI/20},x:function(e,n){return Math.sin(n)*Math.sin(e)+Math.sin(e)},y:function(e,n){return Math.sin(n)*Math.cos(e)+Math.cos(e)},z:function(e,n){return Math.cos(n)>0?.1:-.1}}});let u={animation:!1,legend:{left:400,data:M,show:!1},tooltip:{formatter:e=>{if(e.seriesName!=="mouseoutSeries")return`${e.seriesName}<br/><span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:${e.color};"></span>${u.series[e.seriesIndex].pieData.value}`}},xAxis3D:{min:-1,max:1.5},yAxis3D:{min:-1,max:1.5},zAxis3D:{min:-1,max:1.5},grid3D:{show:!1,boxHeight:10,viewControl:{alpha:50,rotateSensitivity:10,zoomSensitivity:10,panSensitivity:10,autoRotate:!1},postEffect:{enable:!0,bloom:{enable:!0,bloomIntensity:.1},SSAO:{enable:!0,quality:"medium",radius:2}}},series:t};return u}option=getPie3D([{name:"cc",value:37,itemStyle:{color:"#00b5f6"}},{name:"aa",value:24,itemStyle:{color:"#50e4d1"}}],0);
