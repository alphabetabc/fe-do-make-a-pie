function getParametricEquation(a,o,t,m,i,c){let d=(a+o)/2,r=a*Math.PI*2,s=o*Math.PI*2,e=d*Math.PI*2;a===0&&o===1&&(t=!1),i=typeof i<"u"?i:1/3;let h=t?Math.cos(e)*.1:0,f=t?Math.sin(e)*.1:0,u=m?1.05:1;return{u:{min:-Math.PI,max:Math.PI*3,step:Math.PI/32},v:{min:0,max:Math.PI*2,step:Math.PI/20},x:function(n,l){return n<r?h+Math.cos(r)*(1+Math.cos(l)*i)*u:n>s?h+Math.cos(s)*(1+Math.cos(l)*i)*u:h+Math.cos(n)*(1+Math.cos(l)*i)*u},y:function(n,l){return n<r?f+Math.sin(r)*(1+Math.cos(l)*i)*u:n>s?f+Math.sin(s)*(1+Math.cos(l)*i)*u:f+Math.sin(n)*(1+Math.cos(l)*i)*u},z:function(n,l){return n<-Math.PI*.5||n>Math.PI*2.5?Math.sin(n):Math.sin(l)>0?1*c:-1}}}function getPie3D(a,o){let t=[],m=0,i=0,c=0,d=[],r=typeof o<"u"?(1-o)/(1+o):1/3;for(let e=0;e<a.length;e++){m+=a[e].value;let h={name:typeof a[e].name>"u"?`series${e}`:a[e].name,type:"surface",parametric:!0,wireframe:{show:!1},pieData:a[e],pieStatus:{selected:!1,hovered:!1,k:r},labelLine:{show:!0},label:{show:!0}};if(typeof a[e].itemStyle<"u"){let f={};typeof a[e].itemStyle.color<"u"&&(f.color=a[e].itemStyle.color),typeof a[e].itemStyle.opacity<"u"&&(f.opacity=a[e].itemStyle.opacity),h.itemStyle=f}t.push(h)}for(let e=0;e<t.length;e++)c=i+t[e].pieData.value,console.log(t[e]),t[e].pieData.startRatio=i/m,t[e].pieData.endRatio=c/m,t[e].parametricEquation=getParametricEquation(t[e].pieData.startRatio,t[e].pieData.endRatio,!1,!1,r,t[e].pieData.value),i=c,d.push(t[e].name);let s={tooltip:{formatter:e=>{if(e.seriesName!=="mouseoutSeries")return`${e.seriesName}<br/><span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:${e.color};"></span>${s.series[e.seriesIndex].pieData.value}`}},labelLine:{show:!0},label:{show:!0},legend:{data:d,textStyle:{color:"#fff",fontSize:14}},xAxis3D:{min:-1,max:1},yAxis3D:{min:-1,max:1},zAxis3D:{min:-1,max:1},grid3D:{show:!1,boxHeight:20,bottom:"50%",environment:"#021041",viewControl:{distance:300,alpha:25,beta:130}},series:t};return s}option=getPie3D([{name:"已消除",value:3},{name:"未消除",value:2,itemStyle:{color:"rgba(209,126,23,.8)"}},{name:"消除",value:1,itemStyle:{color:"green"}}],0);
