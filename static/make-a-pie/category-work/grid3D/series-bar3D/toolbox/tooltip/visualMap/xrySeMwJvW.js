var simplex=new SimplexNoise;window.onresize=myChart.resize;var UPDATE_DURATION=1e3;function initVisualizer(){var a={numWaves:2,randomize:h,color1:"#000",color2:"#300",color3:"#fff",size:150,roughness:.5,metalness:0};gui=new dat.GUI;for(var e=0;e<2;e++)a["wave"+e+"axisx"]=Math.random(),a["wave"+e+"axisy"]=Math.random(),a["wave"+e+"rounding"]=Math.random(),a["wave"+e+"square"]=Math.random(),gui.add(a,"wave"+e+"axisx",0,1).name("Wave "+(e+1)+" width").onChange(n),gui.add(a,"wave"+e+"axisy",0,1).name("Wave "+(e+1)+" depth").onChange(n),gui.add(a,"wave"+e+"rounding",0,1).name("Wave "+(e+1)+" grow").onChange(n),gui.add(a,"wave"+e+"square",0,1).name("Wave "+(e+1)+" square").onChange(n);gui.addColor(a,"color1").onChange(n),gui.addColor(a,"color2").onChange(n),gui.addColor(a,"color3").onChange(n),gui.add(a,"roughness",0,1).onChange(n),gui.add(a,"metalness",0,1).onChange(n),gui.add(a,"randomize").name("Randomize");function h(){for(var o=0;o<2;o++)a["wave"+o+"axisx"]=Math.random(),a["wave"+o+"axisy"]=Math.random(),a["wave"+o+"rounding"]=Math.random(),a["wave"+o+"square"]=Math.random();for(var o in gui.__controllers)gui.__controllers[o].updateDisplay();n()}function n(){for(var o=[],l=[],d=.1,t=0;t<a.size*a.size;t++){for(var u=t%a.size,m=Math.floor(t/a.size),s=0,r=0;r<a.numWaves;r++){var i=simplex.noise2D(r*213+(-50+u)*d*(1-a["wave"+r+"axisx"])*.5,r*3124+(-50+m)*d*(1-a["wave"+r+"axisy"])*.5);i=Math.pow(i,1.95-1.9*a["wave"+r+"rounding"]);var v=Math.floor((1.1-a["wave"+r+"square"])*100);i=Math.round(i*v)/v,s<i&&(s=i)}l.push([u,m,(s+.1)*2])}myChart.setOption({visualMap:{inRange:{barSize:100/a.size,color:[a.color1,a.color2,a.color3]}},series:[{data:l,realisticMaterial:{roughness:a.roughness,metalness:a.metalness}}]})}n()}var focalRange=40,blurRadius=4;option={toolbox:{left:20,iconStyle:{normal:{borderColor:"#fff"}},feature:{myExportObj:{title:"Export OBJ",icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",onclick:function(){var a=echarts.exportGL2PLY(myChart,{mainType:"grid3D",index:0});download(a,"bar3D.ply","text/plain")}}}},tooltip:{},visualMap:{show:!1,min:.1,max:2.5,inRange:{color:["#000","#300","#fff"]}},xAxis3D:{type:"value"},yAxis3D:{type:"value"},zAxis3D:{type:"value",min:-6,max:6},grid3D:{show:!1,environment:"#000",viewControl:{distance:100,maxDistance:150,minDistance:50,alpha:38,beta:220,minAlpha:10},postEffect:{enable:!0,SSAO:{enable:!0,intensity:1.3,radius:5},screenSpaceReflection:{enable:!0},depthOfField:{enable:!0,blurRadius,focalRange,focalDistance:70}},light:{main:{intensity:1,shadow:!0,shadowQuality:"high",alpha:30},ambient:{intensity:0},ambientCubemap:{texture:"/asset/get/s/data-1491838644249-ry33I7YTe.hdr",exposure:2,diffuseIntensity:1,specularIntensity:1}}},series:[{type:"bar3D",silent:!0,shading:"realistic",realisticMaterial:{roughness:.5,metalness:0},instancing:!0,barSize:.6,data:[],lineStyle:{width:4},itemStyle:{color:"#fff"},animation:!1,animationDurationUpdate:UPDATE_DURATION}]},setTimeout(function(){initVisualizer()});
