var uploadedDataURL="/asset/get/s/data-1563983838043-WPGcC1tDR.mp3",UPDATE_DURATION=100;window.AudioContext=window.AudioContext||window.webkitAudioContext;var audioContext=new AudioContext,oReq=new XMLHttpRequest;oReq.open("GET","uploadedDataURL",!0),oReq.responseType="arraybuffer",oReq.onload=function(d){audioContext.decodeAudioData(oReq.response,initVisualizer)},oReq.send();function initVisualizer(d){inited=!0;var t=audioContext.createBufferSource();t.buffer=d,t.noteOn?t.noteOn(0):t.start(0);var n=audioContext.createAnalyser(),o=audioContext.createGain();n.fftSize=4096,o.gain.value=1,t.connect(o),o.connect(n),n.connect(audioContext.destination);var f=n.frequencyBinCount,v=new Uint8Array(f),a=0;function l(){n.getByteFrequencyData(v);for(var A=[],e=50,c=[],i=0;i<e*e;i++){var p=i%e,h=Math.floor(i/e),s=p-e/2,u=h-e/2,r=Math.atan2(u,s);r<0&&(r=Math.PI*2+r);var m=Math.sqrt(s*s+u*u),y=Math.min(f-1,Math.round(r/Math.PI/2*60+m*60)+100),w=Math.pow(v[y]/100,3);c.push([p,h,Math.max(w,.1)])}myChart.setOption({grid3D:{viewControl:{beta:a,alpha:Math.sin(a/10+40)*(a%10+5)/15*30+30,distance:Math.cos(a/50+20)*(a%10+5)/15*50+80,animationDurationUpdate:UPDATE_DURATION,animationEasingUpdate:"linear"}},series:[{data:c}]}),a+=2,setTimeout(l,UPDATE_DURATION)}l()}option={tooltip:{},visualMap:{show:!1,min:.1,max:4,inRange:{color:["#010103","#2f490c","#b0b70f","#fdff44","#fff"]}},xAxis3D:{type:"value"},yAxis3D:{type:"value"},zAxis3D:{type:"value",min:-6,max:6},grid3D:{show:!1,environment:"#000",viewControl:{distance:100},postEffect:{enable:!0,FXAA:{enable:!0}},light:{main:{shadow:!0,intensity:10,quality:"high"},ambientCubemap:{texture:"data-gl/asset/canyon.hdr",exposure:0,diffuseIntensity:.2}}},series:[{type:"bar3D",silent:!0,shading:"lambert",data:[],barSize:1,lineStyle:{width:4},animationDurationUpdate:UPDATE_DURATION}]};
