var data=[],startTime=new Date("2021-09-14 00:00:00").getTime(),categories=["设备与打印机","设备与设备","设备与平台","",""],types=[{name:"未开启",color:"#dddddd"},{name:"连接",color:"#1ab99b"},{name:"断开",color:"#f15751"}];data=[{name:"未开启",value:[2,startTime,startTime+1e3*60*60,1e3*60*60],itemStyle:{normal:{color:types[0].color}}},{name:"连接",value:[2,startTime+1e3*60*60,startTime+2e3*60*60,1e3*60*60],itemStyle:{normal:{color:types[1].color}}},{name:"未开启",value:[2,startTime+2e3*60*60,startTime+3e3*60*60,1e3*60*60],itemStyle:{normal:{color:types[0].color}}},{name:"未开启",value:[1,startTime,startTime+1e3*60*60,1e3*60*60],itemStyle:{normal:{color:types[0].color}}},{name:"连接",value:[1,startTime+1e3*60*60,startTime+2e3*60*60,1e3*60*60],itemStyle:{normal:{color:types[1].color}}},{name:"断开",value:[1,startTime+2e3*60*60,startTime+3e3*60*60,1e3*60*60],itemStyle:{normal:{color:types[2].color}}},{name:"连接",value:[0,startTime,startTime+1e3*60*60,1e3*60*60],itemStyle:{normal:{color:types[1].color}}},{name:"断开",value:[0,startTime+1e3*60*60,startTime+3e3*60*60,2e3*60*60],itemStyle:{normal:{color:types[2].color}}}];function renderItem(e,t){var o=t.value(0),r=t.coord([t.value(1),o]),i=t.coord([t.value(2),o]),l=16;console.log(o);var a=echarts.graphic.clipRectByRect({x:r[0],y:r[1]-l/2,width:i[0]-r[0],height:l},{x:e.coordSys.x,y:e.coordSys.y,width:e.coordSys.width,height:e.coordSys.height});return a&&{type:"rect",transition:["shape"],shape:a,style:t.style()}}option={tooltip:{formatter:function(e){return e.marker+e.name+": "+e.value[3]+" ms"}},title:{text:"Profile",left:"center"},dataZoom:[{type:"slider",filterMode:"weakFilter",showDataShadow:!1,top:400,labelFormatter:""},{type:"inside",filterMode:"weakFilter"}],grid:{height:300},xAxis:{type:"time",min:startTime,axisLine:{show:!0},axisTick:{show:!0}},yAxis:{data:categories,axisLine:{show:!1},axisTick:{show:!1},axisLabel:{inside:!0,verticalAlign:"bottom",lineHeight:50}},series:[{type:"custom",renderItem,itemStyle:{opacity:.8},encode:{x:[1,2],y:0},data},{type:"scatter",data:[[startTime+1e3*60*60,3],[startTime+2e3*60*60,3],[startTime+3e3*60*60,3]],symbolSize:15},{type:"scatter",data:[[startTime+1e3*60*60,4],[startTime+2e3*60*60,4],[startTime+3e3*60*60,4]],symbolSize:15}]};
