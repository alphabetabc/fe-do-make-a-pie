var uploadedDataURL="/asset/get/s/data-1551866913540-ONANuDLiY.json",lat="35.24",lon="113.6";$.getJSON(uploadedDataURL,function(r){var n={};echarts.util.each(["W","WSW","SW","SSW","S","SSE","SE","ESE","E","ENE","NE","NNE","N","NNW","NW","WNW"],function(t,o){n[t]=Math.PI/8*o});var l=echarts.util.map(r.data,function(t){return[t.time,t.windSpeed,t.R]}),e={time:0,windSpeed:1,R:2},a=18;function d(t,o){var s=o.coord([o.value(e.time),o.value(e.windSpeed)]),i="";return o.value(e.windSpeed)<9?i="#d88273":o.value(e.windSpeed)<10?i="blue":i="red",{type:"path",shape:{pathData:"M22 6 L10 6 L10 16 L22 16 L10 16 L10 46",x:-a/2,y:-a/2,width:a,height:a},rotation:n[o.value(e.R)],position:[s[0],100],style:o.style({stroke:i,fill:"none",lineWidth:1})}}option={title:[{text:"EC模式3小时间隔10米风预报",left:"center"},{text:`lat:+${lat} lon:${lon}`,textStyle:{fontWeight:"normal",color:"red"},top:30,left:70},{text:"2017082912",textStyle:{fontWeight:"normal",color:"blue"},top:30,left:"center"},{text:"000-072",textStyle:{fontWeight:"normal",color:"blue"},top:30,right:"70"},{text:"Aug",textStyle:{fontWeight:"normal",color:"red"},bottom:15,left:"70"},{text:"北京时",textStyle:{fontWeight:"normal"},bottom:15,right:"70"}],tooltip:{trigger:"axis",formatter:function(t){return[echarts.format.formatTime("yyyy-MM-dd",t[0].value[e.time])+" "+echarts.format.formatTime("hh:mm",t[0].value[e.time]),"风速："+t[0].value[e.windSpeed],"风向："+t[0].value[e.R]].join("<br>")}},grid:{top:130,bottom:125},xAxis:{type:"time",maxInterval:3600*1e3*24,splitLine:{lineStyle:{color:"#ddd"}}},yAxis:[{type:"value",name:"风速 (米/秒)",nameLocation:"center",nameGap:"40",max:function(t){return Math.floor(t.max+10)}},{axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1},splitLine:{show:!1}}],dataZoom:[{type:"inside",xAxisIndex:0,minSpan:5},{type:"slider",xAxisIndex:0,minSpan:5,height:20,bottom:50,show:!1,handleIcon:"M10.7,11.9H9.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z",handleSize:"120%"}],series:[{type:"custom",renderItem:d,encode:{x:e.time,y:e.windSpeed},data:l,z:10},{name:"风速",type:"bar",xAxisIndex:0,yAxisIndex:0,label:{show:!0,position:"top"},encode:{x:e.time,y:e.windSpeed},data:l,markPoint:{data:[{type:"max",name:"最大值"}],symbol:"rect",symbolSize:"1",symbolOffset:[0,"15"],label:{color:"red"}}}]},myChart.setOption(option)});
