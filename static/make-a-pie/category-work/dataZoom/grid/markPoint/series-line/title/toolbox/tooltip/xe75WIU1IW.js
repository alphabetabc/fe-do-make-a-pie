const rnd=()=>.2*Math.random()-.1,randomWalk=o=>{const t=[1];for(let e=1;e<o;e++)t[e]=Number((t[e-1]*(1+rnd())).toFixed(2));return t},prices=randomWalk(100),dataSet=prices.map((o,t)=>[t,o]),getInfinity=o=>{const t=[],e=[];for(let s=1;s<o.length-1;s++){const a=o[s-1],n=o[s],l=o[s+1];n<=a&&n<l&&t.push(s),n>a&&n>=l&&e.push(s)}return e[0]<t[0]&&t.unshift(0),t[t.length-1]>e[e.length-1]&&e.push(o.length-1),{bIdxs:t,sIdxs:e}},{bIdxs,sIdxs}=getInfinity(prices),markPoints=[];bIdxs.forEach(o=>{markPoints.push({name:"买点",coord:[o,dataSet[o][1]],symbolOffset:[0,10],itemStyle:{color:"red"}})}),sIdxs.forEach(o=>{markPoints.push({name:"卖点",coord:[o,dataSet[o][1]],symbolOffset:[0,-10],itemStyle:{color:"yellowgreen"}})}),option={backgroundColor:"#080b30",title:{text:"quan-infinity",textStyle:{color:"#fff"}},tooltip:{trigger:"axis",formatter:o=>{console.log(o);const t=o[0];return t.marker+t.data[1]}},grid:{left:64,right:16,bottom:80},toolbox:{feature:{dataZoom:{yAxisIndex:"none"},restore:{},saveAsImage:{}}},xAxis:{axisLine:{show:!0,lineStyle:{color:"rgba(255,255,255,0.3)"}},axisTick:{show:!1},splitLine:{show:!1}},yAxis:{axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:"rgba(255,255,255,0.3)"},splitLine:{show:!0,lineStyle:{color:"rgba(255,255,255,0.3)"}}},dataZoom:[{type:"inside",start:0,end:1e3},{start:0,end:1e3,handleIcon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4v1.3h1.3v-1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z",handleSize:"80%",handleStyle:{color:"#fff",shadowBlur:3,shadowColor:"rgba(0, 0, 0, 0.6)",shadowOffsetX:2,shadowOffsetY:2}}],series:[{type:"line",lineStyle:{color:"#6c50f3"},markPoint:{symbol:"circle",symbolSize:10,data:markPoints},data:dataSet}]};
