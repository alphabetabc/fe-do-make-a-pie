var uploadedDataURL="/asset/get/s/data-1634031839342-y15WlZvxx.csv",xdata=[],ydata=[],data=[],dataD={xdata:{},ydata:{}},dataM={xdata:{},ydata:{}},count=0,expand=!1;csv();function csv(){console.log("开始解析..."),Papa.parse(uploadedDataURL,{download:!0,header:!0,complete:function(l){data=l.data;let i=0,o=0;data.forEach((s,n)=>{let a=s.time,t=a.split(" ")[0],e=t.split("/")[0]+"/"+t.split("/")[1],d=s.line1;xdata.push(a),ydata.push(d),i!=t&&(i=t,dataD.xdata[t]=[],dataD.ydata[t]=[]),o!=e&&(o=e,dataM.xdata[e]=[],dataM.ydata[e]=[]),t==i&&(dataD.xdata[t].push(a),dataD.ydata[t].push(d)),e==o&&(dataM.xdata[e].push(a),dataM.ydata[e].push(d))}),console.log(dataM),myChart.hideLoading(),myChart.setOption(option)}})}option={title:{show:!0,text:"按年月日折线图-滑动触发数据范围改变",textStyle:{align:"center",color:"#000",fontSize:20},top:"5%",left:"center"},grid:{top:"15%",left:"5%",right:"5%",bottom:"5%",containLabel:!0},tooltip:{show:!0,trigger:"axis",axisPointer:{type:"line",lineStyle:{type:"dashed"}}},dataZoom:[{type:"inside",start:0,end:100}],toolbox:{right:"5%",feature:{saveAsImage:{},restore:{formatter:function(l){console.log(l)}},magicType:{type:["line","bar"]},dataView:{readOnly:!0}}},xAxis:{type:"category",name:"(时间)",data:xdata},yAxis:{type:"value",name:"(量)"},series:{data:ydata,type:"line",smooth:!0,symbol:"pin",symbolSize:12,label:{show:!0,position:"top",textStyle:{color:"#000",fontSize:14}}}},myChart.on("datazoom",function(l){let i=myChart.getModel().option.xAxis[0],o=l.batch[0].end-l.batch[0].start,s=i.rangeStart,n=i.data.splice(s,1)[0],a=n.split(" ")[0],t=n.split("/")[0]+"/"+n.split("/")[1];console.log(o),o<10?count=2:o<50?count=1:count=0;let e=count==0?xdata:count==1?dataM.xdata[t]:dataD.xdata[a],d=count==0?ydata:count==1?dataM.ydata[t]:dataD.ydata[a],r=count==0?[""]:count==1?[t]:[a],p=count==0?"":count==1?t:a;myChart.setOption({legend:{data:r,top:"10%"},xAxis:{data:e},series:{name:p,data:d}})});
