const xAxis=["2021-04-20","2021-04-21","2021-04-22"],yAxis={173:{1:[230,67,99],4:[503,607,990],5:[23,67,99],8:[23,67,99],total_count:[503,607,990]},174:{1:[23,67,99],4:[23,67,99],5:[23,67,99],8:[23,67,99],total_count:[53,60,0]},median:[30,60,70]},brand=[{brand_id:"173",brand_name:"hahahha",color:"rgba(77, 201, 78, 1)"},{brand_id:"174",brand_name:"hihih",color:"rgba(77, 21, 34,1)"}],platformOption=[{label:"微博",value:1},{label:"抖音",value:5},{label:"小红书",value:4}],dateNumInit=xAxis.map(e=>({...brand.map(l=>l.brand_id).reduce((l,s)=>(l[s]=0,l),{}),date:e})),getSeries=(e,c,n)=>{const l=c.map(r=>{const h=n.map(i=>i.value);return{name:r.brand_name,type:"line",data:e[r.brand_id].total_count.map((i,a)=>{const t=h.reduce((o,d)=>(o[d]=e[r.brand_id][d][a],o),{});return{brandId:r.brand_id,value:i,...t}}),smooth:!0,hoverAnimation:!1,symbolSize:(i,a)=>{const{dataIndex:t,data:o}=a;return 6},lineStyle:{color:r.color},itemStyle:{borderWidth:2}}}),s={name:"基准线",type:"line",data:e.median,smooth:!0,symbol:"none",lineStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#FFEF30"},{offset:.3,color:"#FF8016"},{offset:.6,color:"#FF8016"},{offset:1,color:"#FFEF30"}]},type:"dashed"}};return[...l,s]},getToolTipFormatter=(e,c,n)=>{const l=["","传播总量","微博","抖音"],s=n.map(t=>t.brand_name),r=e.slice(0,n.length),h=c.map(t=>t.value),i=r.map(t=>t.data).map(t=>[t.value,...h.map(o=>t[o])]);let a='<table style="width:100%; user-select: text;-webkit-user-select: text;color: rgba(255,255,255,0.87);font-size: 12px"> <tr style="display:flex;">';return l.forEach(t=>{a+=`<th style="height:24px;flex:1;" class='wheelTd'>${t}</th>`}),a+="</tr>",i.forEach((t,o)=>{a+='<tr style="display:flex;" >',s.length-1>=o&&(a+=`<td style="height:24px;flex:1;" class='wheelTd'>${s[o]}</td>`),t.forEach((d,m)=>{a+=`<td style="height:24px;flex:1;color:${m===0?n[o].color:"not specified"}" class='wheelTd'>${+d}</td>`}),a+="</tr>"}),a+="</table>",`<div class='spreadTrend_tooltip'>${a}</div>`};option={tooltip:{trigger:"axis",backgroundColor:"rgba(0, 0, 0, 0)",axisPointer:{type:"shadow",shadowStyle:{color:"#E5EDFC50"}},formatter:e=>getToolTipFormatter(e,platformOption,brand)},color:[...brand.map(e=>e.color),"#FF8016"],legend:{type:"plain",top:16,left:46,itemWidth:8,itemHeight:8,itemGap:46,icon:"circle",textStyle:{color:"#000",fontSize:12},data:[...brand.map(e=>e.brand_name),"基准线"]},dataZoom:{height:20,type:"slider",minValueSpan:6,maxValueSpan:15,backgroundColor:"rgba(237, 237, 241, .4)",fillerColor:"rgba(41, 115, 255, .1)",handleIcon:"M10.7,11.9H9.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z",handleSize:"60%",showDetail:!1,bottom:0,handleStyle:{color:"#2973FF"}},grid:{left:"5%",right:"5%",bottom:"44",top:90,containLabel:!0},toolbox:{right:20,bottom:0},xAxis:{type:"category",boundaryGap:!1,data:xAxis,splitLine:{show:!1},axisLine:{show:!0,lineStyle:{color:"#E3E3E3"}},axisTick:{show:!0,inside:!0},axisLabel:{color:"rgba(0, 0, 0, 0.3)",lineHeight:17}},yAxis:{name:"总传播量",nameTextStyle:{color:"rgba(0, 0, 0, 0.6)",fontSize:12},type:"value",splitLine:{lineStyle:{color:"#F0F0F0",type:"dashed"}},axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:"rgba(0, 0, 0, 0.3)",lineHeight:17,formatter:e=>+e}},series:getSeries(yAxis,brand,platformOption)},myChart.on("click",e=>{console.log("1212")});
