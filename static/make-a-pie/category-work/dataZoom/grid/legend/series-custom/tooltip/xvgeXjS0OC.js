const HEIGHT_RATIO=.6,DIM_CATEGORY_INDEX=0,DIM_TIME_ARRIVAL=1,DIM_TIME_DEPARTURE=2,ACTUAL_TIME_ARRIVAL=3,_cartesianXBounds=[],_cartesianYBounds=[],rowData={flight:{data:[[7,"2020-1-1","2020-1-2","2020-1-9","Project Kick Off"],[6,"2020-1-1","2020-1-31","2020-1-24","Requirement confirm"],[5,"2020-2-1","2020-4-30","2020-4-30","Development"],[4,"2020-5-1","2020-5-31","2020-6-30","SIT"],[3,"2020-6-1","2020-6-30","2020-7-15","UAT"],[2,"2020-7-1","2020-7-15","2020-7-23","Go live"],[1,"2020-7-16","2020-7-31","","Training"],[0,"2020-8-1","2020-8-31","","Payment"]],dimensions:["Parking Apron Index","开始时间","结束时间","实际结束时间"]},parkingApron:{dimensions:["Name","Type"],data:[["Task01","Project Kick Off"],["Task02","Requirement confirm"],["Task03","Development"],["Task04","SIT"],["Task05","UAT"],["Task06","Go live"],["Task07","Training"],["Task08","Payment"]]}};function clipRectByRect(t,e){return echarts.graphic.clipRectByRect(e,{x:t.coordSys.x,y:t.coordSys.y,width:t.coordSys.width,height:t.coordSys.height})}function renderGanttItem(t,e){const o=e.value(0),s=e.coord([e.value(1),o]),i=e.coord([e.value(2),o]),r=e.coord([e.value(3),o]),{coordSys:n}=t;_cartesianXBounds[0]=n.x,_cartesianXBounds[1]=n.x+n.width,_cartesianYBounds[0]=n.y,_cartesianYBounds[1]=n.y+n.height;const h=i[0]-s[0],A=i[0]-r[0],I=r[0]-i[0],a=e.size([0,1])[1]*.6,l=clipRectByRect(t,{x:s[0],y:s[1]-a,width:h,height:a}),c=clipRectByRect(t,{x:r[0],y:r[1]-a,width:A,height:a}),d=clipRectByRect(t,{x:i[0],y:i[1]-a,width:I,height:a});return{type:"group",children:[{type:"rect",ignore:!l,shape:l,style:e.style({fill:"#fac758"})},{type:"rect",ignore:!c,shape:c,style:e.style({fill:"#3ba272"})},{type:"rect",ignore:!d,shape:d,style:e.style({fill:"#ee6666"})}]}}function renderAxisLabelItem(t,e){const o=e.coord([0,e.value(0)])[1];if(!(o<t.coordSys.y+5))return{type:"group",position:[10,o],children:[{type:"path",shape:{d:"M0,0 L0,-20 L30,-20 C42,-20 38,-1 50,-1 L70,-1 L70,0 Z",x:0,y:-20,width:90,height:20,layout:"cover"},style:{fill:"#368c6c"}},{type:"text",style:{x:24,y:-3,text:e.value(1),textVerticalAlign:"bottom",textAlign:"center",textFill:"#fff"}},{type:"text",style:{x:60,y:-2,textVerticalAlign:"bottom",textAlign:"left",text:e.value(2),textFill:"#000"}}]}}function makeOption(){return{tooltip:{trigger:"item",show:!0,axisPointer:{type:"line"},formatter(t){if(t&&t.length>0)return"";const{data:e,value:o}=t,s=o[2]?new Date(o[2]).getTime():0,i=o[3]?new Date(o[3]).getTime():0;let r="#ddb30b";i-s>0?r="#ee6666":i-s<0&&(r="#3ba272");const n=`<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:${r};"></span>`;return`${e[4]} <br/>${n}开始时间：${o[1]}<br/>${n}结束时间：${o[2]}<br/>${n}实际结束时间：${o[3]}`}},animation:!1,grid:{show:!0,top:70,bottom:20,left:200,right:20,backgroundColor:"#fff",borderWidth:0},dataZoom:[{type:"slider",xAxisIndex:0,filterMode:"weakFilter",height:20,bottom:0,start:0,end:100,handleIcon:"path://M10.7,11.9H9.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z",handleSize:"80%",showDetail:!1},{type:"inside",id:"insideX",xAxisIndex:0,filterMode:"weakFilter",start:0,end:100,zoomOnMouseWheel:!1,moveOnMouseMove:!0},{type:"slider",yAxisIndex:0,zoomLock:!0,width:10,right:10,top:70,bottom:20,start:100,end:0,handleSize:0,showDetail:!1},{type:"inside",id:"insideY",yAxisIndex:0,start:95,end:100,zoomOnMouseWheel:!1,moveOnMouseMove:!0,moveOnMouseWheel:!0}],xAxis:{type:"time",position:"top",splitLine:{alignWithLabel:!0,show:!0,lineStyle:{color:["#E9EDFF"]}},axisLine:{show:!1},axisTick:{show:!1,lineStyle:{color:"#929ABA"}},axisLabel:{color:"#929ABA",inside:!1,align:"center",formatter:t=>{const e=new Date(t);return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`}},axisPointer:{show:!0,label:{backgroundColor:"#004f53",margin:-20},lineStyle:{color:"#9fbfcd",type:"solid",width:1.5}}},yAxis:{axisTick:{show:!1},splitLine:{show:!1},axisLine:{show:!1},axisLabel:{show:!1},min:0,axisPointer:{show:!1},max:rowData.parkingApron.data.length},legend:{show:!0,data:[{name:"提前完成",itemStyle:{color:"#3ba272"}},{name:"延期完成",itemStyle:{color:"#ee6666"}}]},series:[{id:"flightData1",type:"custom",name:"提前完成",renderItem:renderGanttItem,dimensions:rowData.flight.dimensions,encode:{x:[1,2,3],y:0,tooltip:[1,2,3]},data:rowData.flight.data},{id:"flightData2",type:"custom",name:"延期完成",renderItem:renderGanttItem,dimensions:rowData.flight.dimensions,encode:{x:[1,2,3],y:0,tooltip:[1,2,3]},data:rowData.flight.data},{type:"custom",renderItem:renderAxisLabelItem,dimensions:rowData.parkingApron.dimensions,encode:{x:-1,y:0},data:rowData.parkingApron.data.map((t,e)=>[rowData.parkingApron.data.length-1-e].concat(t))}]}}option=makeOption();
