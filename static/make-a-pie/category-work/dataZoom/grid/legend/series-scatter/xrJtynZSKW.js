for(var gdp="/asset/get/s/data-1504149403899-B1VjkbrYb.json",suicide="/asset/get/s/data-1504148156995-HJB69eHtZ.json",series=[],i=0;i<4;++i)series.push({name:2e3+i*5+"",type:"scatter",data:[],label:{normal:{show:!0,formatter:"{b}",position:"right"}}});option={xAxis:{name:"GDP 增长率",max:30,min:-30},yAxis:{name:"自杀人数（每万人）",max:50,min:0},series,legend:{data:["2000","2005","2010","2015"],selectedMode:"single"},dataZoom:[{type:"slider",startValue:-2,endValue:12},{type:"slider",startValue:0,endValue:20,yAxisIndex:0},{type:"inside"},{type:"inside",yAxisIndex:0}]},$.getJSON(gdp,function(t){getSuicide(t)});function getSuicide(t){$.getJSON(suicide,function(a){for(var r=[[],[],[],[]],e=0;e<a.fact.length;++e){var f=a.fact[e].dims.YEAR,s=(parseInt(f,10)-2e3)/5;if(s>=0&&s<a.fact.length&&a.fact[e].dims.SEX==="Both sexes"){var n=a.fact[e].dims.COUNTRY,o=getGdp(t,n,s);if(o&&o!=="-"){var l={};n==="China"&&(l={normal:{borderColor:"yellow",borderWidth:3}}),r[s].push({name:n,value:[o,parseFloat(a.fact[e].Value)],itemStyle:l})}}}for(var d=[],e=0;e<r.length;++e)d.push({type:"scatter",data:r[e]});myChart.setOption({series:d})})}function getGdp(t,a,r){for(var e=0;e<t.length;++e)if(a.indexOf(t[e][0])>-1)return t[e][r+1];return"-"}
