const barData={xaxis:["1月","2月","3月","4月","5月","6月","7月","8月"],series:[{name:"金额1",data:[90,19,68,98,87,20,150,62]},{name:"金额2",data:[90,19,68,98,87,20,150,62]},{name:"金额3",data:[90,19,68,98,87,20,150,62]}],legend:["金额1","金额2","金额3"],unit:"个",namePadding:[0,10,50,0],yName:"数",legendShow:!0,legendX:"right",xAxisTickHidden:!1,xLabelMargin:25,colorArr:[{start:"#1B7AFF",end:"#51D7FF"},{start:"#01C12E",end:"#48FE73"},{start:"#FF6B1A",end:"#FF9179"}],splitNumber:3,dataZoom:{type:"slider",show:!1,realtime:!0,startValue:0,endValue:5,filterMode:"none"},len:5,grid:{left:"122px",top:"156px",right:"5px",bottom:"65px",containLabel:!1}};myChart.getZr().on("mousemove",e=>{let a=[e.offsetX,e.offsetY];myChart.containPixel("grid",a)?myChart.getZr().setCursorStyle("pointer"):myChart.getZr().setCursorStyle("default")}),myChart.getZr().off("click"),myChart.getZr().on("click",e=>{this.$once("hook:beforeDestroy",()=>{myChart.getZr().off("click")});const a=[e.offsetX,e.offsetY];if(myChart.containPixel("grid",a)){let t=myChart.convertFromPixel({seriesIndex:0},[e.offsetX,e.offsetY])[0];t=Math.abs(t),this.$emit("clickBarIndex",t)}});let normalColor="#ECF8FF",list=[],seriesData=barData.series.map((e,a)=>(list=[...list,...e.data],{name:e.name,type:"bar",barWidth:"64px",stack:"记录",itemStyle:{normal:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:barData.colorArr[a].start},{offset:1,color:barData.colorArr[a].end}],globalCoord:!1}}},label:{show:barData.label&&a===2&&!0,position:"top",align:"center",height:48,backgroundColor:"rgba(9,50,93,0.3)",borderColor:"rgba(9,50,93,0.5)",borderWidth:3,formatter:t=>`{a|${barData.label&&barData.label[t.dataIndex]}%}`,distance:18,align:"center",rich:{a:{padding:[6,8,6,8],fontFamily:"DINAlternate-Bold",fontSize:42,color:"#3CF0FF",lineHeight:52}}},data:e.data}));if(option={backgroundColor:"#0A2E5D",legend:{show:barData.legendShow,x:barData.legendX,y:"top",icon:"rect",selectedMode:!1,padding:[20,0,0,0],itemGap:barData.itemGap||32,itemWidth:40,itemHeight:28,textStyle:{height:48,rich:{a:{color:normalColor,fontSize:48,fontFamily:"PingFangSC-Regular"}}},formatter:e=>"{a|"+e+" }",data:barData.legend},cursor:"pointer",dataZoom:barData.dataZoom?barData.dataZoom:[],grid:barData.grid,tooltip:{textStyle:{fontSize:48},trigger:"axis",formatter:function(e){let a="";for(let t=0;t<e.length;t++)if((!!e[t].value||e[t].value===0)&&e[t].seriesName!==""){let i=barData.unit;a+=e[t].seriesName+": "+e[t].value+i+"<br/>"}else e[t].seriesName!==""&&(a+=e[t].seriesName+": 无数据<br/>");return a}},xAxis:[{type:"category",data:barData.xaxis,axisPointer:{type:"shadow"},axisLabel:{interval:0,margin:barData.xLabelMargin,textStyle:{fontFamily:"PingFangSC-Regular",color:normalColor,fontSize:42,lineHeight:52},formatter:function(e){let a=barData.series[0]?barData.series[0].data.length:0,t="",i=7;a<5&&(i=9);let l=e.length,o=Math.ceil(l/i);if(o>1){for(let r=0;r<o;r++){let n="",s=r*i,d=s+i;n=e.substring(s,d)+`
`,t+=n}return t}else return e}},axisLine:{show:!1},axisTick:{show:!0,length:5,alignWithLabel:!0,lineStyle:{width:2,color:"#CEF8FF"}},splitLine:{show:!1}}],yAxis:[{type:"value",name:barData.yName,splitNumber:barData.splitNumber,nameTextStyle:{fontFamily:"PingFangSC-Regular",color:normalColor,fontSize:48,padding:barData.namePadding},axisLabel:{formatter:"{value}",align:"right",textStyle:{fontFamily:"PingFangSC-Regular",color:normalColor,fontSize:48}},axisLine:{show:!1},axisTick:{show:!0,length:5,lineStyle:{width:2,color:"#CEF8FF"}},splitLine:{show:!1}}],series:seriesData},myChart.setOption(option),barData.dataZoom&&!barData.noScroll){let e=0,a=new Date,t=2e3,i=barData.xaxis.length,l=()=>{new Date-a>=t&&(a=new Date,e===i-barData.len&&(e=0),myChart.dispatchAction({type:"dataZoom",startValue:e,endValue:e+barData.len}),e++),this.rafId=requestAnimationFrame(l)};l()}
