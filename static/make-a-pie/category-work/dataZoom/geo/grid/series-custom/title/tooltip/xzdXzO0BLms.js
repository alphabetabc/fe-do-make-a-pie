var data=[],dataCount=10,startTime=+new Date;console.log("startTime =  "+startTime);var categories=["categoryA","categoryB","categoryC"],types=[{name:"JS Heap",color:"#7b9ce1"},{name:"Documents",color:"#bd6d6c"},{name:"Nodes",color:"#75d874"},{name:"Listeners",color:"#e0bc78"},{name:"GPU Memory",color:"#dc77dc"},{name:"GPU",color:"#72b362"}];echarts.util.each(categories,function(e,t){for(var a=startTime,r=0;r<dataCount;r++){var n=types[Math.round(Math.random()*(types.length-1))],o=Math.round(Math.random()*1e4);data.push({name:n.name,value:[t,a,a+=o,o],itemStyle:{normal:{color:n.color}}}),a+=Math.round(Math.random()*2e3)}});function renderItem(e,t){var a=t.value(0),r=t.coord([t.value(1),a]),n=t.coord([t.value(2),a]),o=t.size([0,1])[1]*.6,c=echarts.graphic.clipRectByRect({x:r[0],y:r[1]-o/2,width:n[0]-r[0],height:o},{x:e.coordSys.x,y:e.coordSys.y,width:e.coordSys.width,height:e.coordSys.height});return c&&{type:"rect",shape:c,style:t.style()}}option={tooltip:{formatter:function(e){return e.marker+e.name+": "+e.value[3]+" ms"}},title:{text:"Profile",left:"center"},dataZoom:[{start:2,minValueSpan:1e4,type:"slider",filterMode:"weakFilter",showDataShadow:!1,top:400,height:10,borderColor:"transparent",backgroundColor:"#e2e2e2",handleIcon:"M10.7,11.9H9.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",handleSize:20,handleStyle:{shadowBlur:6,shadowOffsetX:1,shadowOffsetY:2,shadowColor:"#aaa"},labelFormatter:""},{type:"inside",filterMode:"weakFilter"}],grid:{height:300},xAxis:{type:"value",min:startTime,minInterval:1,scale:!0,axisLabel:{formatter:function(e){return Math.max(0,e-startTime)+" ms"}}},yAxis:{data:categories},geo:{scaleLimit:{}},series:[{type:"custom",renderItem,itemStyle:{normal:{opacity:.8}},encode:{x:[1,2],y:0},data}]};
