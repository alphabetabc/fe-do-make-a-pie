var nodes=[{name:"普通节点1",img:"data-1547632915872-WZMUphq72.png",alarm:"产生告警了哦"},{name:"普通节点2",img:"data-1547633192258-2EYYUDdcd.png"},{name:"普通节点3",img:"data-1547633192258-2EYYUDdcd.png"},{name:"普通节点4",img:"data-1547632915872-WZMUphq72.png"},{name:"普通节点5",img:"data-1547632915872-WZMUphq72.png",alarm:"产生告警了哦"},{name:"普通节点6",img:"data-1547632915872-WZMUphq72.png"}],links=[{source:"普通节点1",target:"普通节点2",name:"数据传输"},{source:"普通节点2",target:"普通节点3",name:"数据传输"},{source:"普通节点3",target:"普通节点4",name:"数据传输"},{source:"普通节点4",target:"普通节点5",name:"数据传输"},{source:"普通节点5",target:"普通节点6",name:"数据传输"},{source:"普通节点6",target:"普通节点1",name:"数据传输"}],lines=[{source:"中心节点",target:"普通节点1",name:"数据传输"},{source:"中心节点",target:"普通节点2",name:"数据传输"},{source:"中心节点",target:"普通节点3",name:"数据传输"},{source:"中心节点",target:"普通节点4",name:"数据传输"},{source:"中心节点",target:"普通节点5",name:"数据传输"},{source:"中心节点",target:"普通节点6",name:"数据传输"},{source:"控制台",target:"中心节点",name:"访问"}];for(let e=0;e<nodes.length;e++)nodes[e].angle=360/(nodes.length+1)*e;nodes[nodes.length]={name:"中心节点",img:"data-1547632686885-o5Rfi3tyk.png",alarm:"产生告警了哦",value:[0,0]},nodes[nodes.length]={name:"控制台",img:"data-1547633094304-08Q_2YEvH.png",value:[.5,0]};for(var charts={nodes:[],links:[],linesData:[]},dataMap=new Map,j=0;j<nodes.length;j++){var node={name:nodes[j].name,value:nodes[j].value||[1,nodes[j].angle],symbolSize:50,alarm:nodes[j].alarm,symbol:"image:///asset/get/s/"+nodes[j].img,itemStyle:{normal:{color:"#12b5d0"}}};dataMap.set(nodes[j].name,node.value),charts.nodes.push(node)}for(var i=0;i<links.length;i++){var link={source:links[i].source,target:links[i].target,label:{normal:{show:!0,formatter:links[i].name}},lineStyle:{normal:{color:"#12b5d0"}}};charts.links.push(link)}for(var i=0;i<lines.length;i++){var line={coords:[dataMap.get(lines[i].source),dataMap.get(lines[i].target)]};charts.linesData.push(line)}option={title:{text:"网络拓扑图2"},backgroundColor:"#F5F5F5",polar:{},radiusAxis:{show:!1},angleAxis:{type:"category",show:!1},series:[{type:"graph",layout:"none",coordinateSystem:"polar",symbolSize:50,label:{normal:{show:!0,position:"bottom",color:"#12b5d0"}},lineStyle:{normal:{width:2,shadowColor:"none"}},edgeSymbolSize:8,data:charts.nodes,links:charts.links,itemStyle:{normal:{label:{show:!0,formatter:function(e){return e.data.name}}}}},{name:"A",type:"lines",coordinateSystem:"polar",lineStyle:{color:"#a6c84c",width:1,opacity:.6,curveness:.5},effect:{show:!0,symbol:"triangle",color:"#12b5d0",symbolSize:8},data:charts.linesData}]},setInterval(()=>{for(var e=[],t=0;t<nodes.length;t++){var r=nodes[t].alarm;r!==null&&r!==""&&r!==void 0&&(option.series[0].data[t].symbolSize=60,option.series[0].data[t].label={normal:{color:"#DC143C"}},option.series[0].itemStyle.normal.label.formatter=function(a){return a.data.alarm!==void 0?a.data.name+`
[ `+a.data.alarm+" ]":a.data.name},e.push(t))}myChart.setOption(option),setTimeout(()=>{for(var a=0;a<e.length;a++)option.series[0].data[e[a]].symbolSize=50,option.series[0].data[e[a]].label={normal:{color:"#12b5d0"}},option.series[0].itemStyle.normal.label.formatter=function(o){return o.data.name};myChart.setOption(option)},2500)},5e3);
