var dataset=[{time:["2017-07-12 15:08:05","2017-07-12 15:08:10","2017-07-12 15:08:15","2017-07-12 15:08:20","2017-07-12 15:08:25","2017-07-12 15:08:30","2017-07-12 15:08:35","2017-07-12 15:08:40","2017-07-12 15:08:45","2017-07-12 15:08:50","2017-07-12 15:08:55","2017-07-12 15:09:00"],cpu:["50","55","40","70","80","85","47","58","47","58","47","58"],memory:["47","58","96","28","25","58","47","74","52","14","25","84"],network:["17","04","14","47","25","14","14","25","14","82","14","42"]}],set=[{name:"cpu",color:"#2E8CC4",final_color:"blue",chartPosition:"1",min:"0",max:"100",unit:"%"},{name:"memory",color:"#AF5DC6",final_color:"purple",chartPosition:"2",min:"0",max:"100",unit:"%"},{name:"network",color:"#9ACD76",final_color:"green",chartPosition:"3",min:"0",max:"100",unit:"%"}];function Broken_line(z,c,o){for(var r="#9A9A9C",D="#202624",T=200,G=400,v=16,s=parseInt(v)+10,b=parseInt(v)*2+2,a=(G-s)/3.1,N="mycharts_"+z,S=c[0].time.length,l={time:[]},e=0;e<o.length;e++)l[o[e].name]=[];for(var _="",A="",L="",y=[],g=[],w=[],k="",I="",P="",e=0;e<o.length;e++)o[e].chartPosition==1?(_=o[e].min,k=o[e].max-o[e].min,y.push(o[e].name)):o[e].chartPosition==2?(A=o[e].min,I=o[e].max-o[e].min,g.push(o[e].name)):o[e].chartPosition==3&&(L=o[e].min,P=o[e].max-o[e].min,w.push(o[e].name));function W(n,t){for(var i=0;i<y.length;i++)if(n=y[i])return(t-_)/k*100;for(var i=0;i<g.length;i++)if(n=g[i])return(t-A)/I*100;for(var i=0;i<w.length;i++)if(n=w[i])return(t-L)/P*100}for(var e=0;e<S;e++){l.time.push([new Date(c[0].time[e]),new Date(c[0].time[e])]);for(var h=0;h<o.length;h++)l[o[h].name].push([new Date(c[0].time[e]),W(o[h].name,c[0][o[h].name][e])])}function f(n,t){return echarts.util.merge({type:"time",gridIndex:n,axisLine:{onZero:!1,lineStyle:{color:r}},axisTick:{show:!1},axisLabel:{show:!1,textStyle:{fontSize:parseInt(v),margin:10}},splitLine:{show:!1,lineStyle:{color:r}},min:l.time[0][0],max:l.time[S-1][0],axisPointer:{lineStyle:{color:"transparent"}}},t||{},!0)}function u(n,t){return echarts.util.merge({type:"value",gridIndex:n,nameLocation:"middle",nameTextStyle:{color:r},boundaryGap:!1,axisTick:{show:!1},axisLine:{lineStyle:{color:r}},axisLabel:{show:!0},splitLine:{show:!0,lineStyle:{color:r,width:.3}},position:"right",min:0,max:100},t||{},!0)}function x(n,t){return echarts.util.merge({top:n,height:a,left:b,right:b},t||{},!0)}for(var d=[],e=0;e<o.length;e++)o[e].chartPosition==1&&d.push({name:o[e].name,type:"line",symbol:"circle",symbolSize:2,xAxisIndex:3,yAxisIndex:3,itemStyle:{normal:{color:o[e].color,borderWidth:1}},data:l[o[e].name],areaStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:o[e].color},{offset:1,color:o[e].final_color}],!1)}}}),o[e].chartPosition==2&&d.push({name:o[e].name,type:"line",symbol:"circle",symbolSize:2,xAxisIndex:1,yAxisIndex:1,itemStyle:{normal:{color:o[e].color,borderWidth:1}},data:l[o[e].name],areaStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:o[e].color},{offset:1,color:o[e].final_color}],!1)}}}),o[e].chartPosition==3&&d.push({name:o[e].name,type:"line",symbol:"circle",symbolSize:2,xAxisIndex:2,yAxisIndex:2,itemStyle:{normal:{color:o[e].color,borderWidth:1}},data:l[o[e].name],areaStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:o[e].color},{offset:1,color:o[e].final_color}],!1)}}});option={backgroundColor:D,tooltip:{trigger:"axis",backgroundColor:"#fff",borderColor:"rgba(0, 0, 200, 0.2)",borderWidth:1,borderRadius:0,padding:1,formatter:function(n){if(n.length)return n.unshift({}),echarts.util.map(["cpu","memory","network"],function(t){for(var i=0;i<n.length;i++){var m=n[i],C="color: "+m.color;if(m.seriesName===t)return'<span style="'+C+'">'+m.seriesName+':</span><span style="'+C+'">'+m.value[1]+"</span>"}}).join("<br>")}},axisPointer:{link:[{xAxisIndex:"all"}],snap:!0},grid:[x(s),x(s+a),x(s+a*2),x(s,{height:a}),x(s,{show:!0,height:a*3,borderColor:r,borderWidth:1,z:2})],xAxis:[f(0),f(1),f(2),f(3,{axisLine:{show:!1}}),f(4,{position:"top",axisLine:{show:!1,onZero:!1},splitLine:{show:!0,lineStyle:{color:r,width:.3}},axisLabel:{show:!0,textStyle:{color:r}},axisPointer:{show:!0,lineStyle:{color:"#478cf1",width:.5}}})],yAxis:[u(0,{}),u(1,{}),u(2,{}),u(3),u(4)],series:d},myChart.setOption(option)}Broken_line("main",dataset,set);
