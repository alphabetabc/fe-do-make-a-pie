for(var time=[],price=[],avgPrice=[],suiji=80,sjjj=!0,refercnce=100,minVal=refercnce-20,maxVal=refercnce+20,minPct=((minVal-refercnce)/refercnce*100).toFixed(2),maxPct=((maxVal-refercnce)/refercnce*100).toFixed(2),i=9;i<=15;i++)for(var y=0;y<=59&&(i==9&&y<30&&(y=30),i>11&&i<13||i===11&&y>30||i===13&&y===0||(time.push(weishu(i,2)+":"+weishu(y,2)),sjjj?(suiji=randomNum(suiji,suiji+1),suiji>=120&&(sjjj=!1)):(suiji=randomNum(suiji,suiji-2),suiji<=80&&(sjjj=!0)),i<=11&&(price.push(suiji),avgPrice.push(randomNum(suiji+2,suiji+4).toFixed(2)))),!(i>=15));y++);function randomNum(e,a){return Math.random()*(a-e+1)+e}function weishu(e,a){return e="0000"+e,e.substr(e.length-a)}var option={tooltip:{backgroundColor:"rgba(240,255,255,0.8)",borderColor:"#666",transitionDuration:0,padding:[2,4],trigger:"axis",confine:!0,borderWidth:1,axisPointer:{type:"cross",label:{backgroundColor:"rgba(240,255,255,0.8)",textStyle:{color:"#333",fontSize:14},padding:[5,4],borderColor:"#000",borderWidth:1,shadowBlur:0,shadowColor:"rgba(0,0,0,0)"},crossStyle:{type:"solid",color:"rgb(190,190,190)"}},extraCssText:"border-radius:0",position:function(e,a,t,n,o){var r={};return r[["left","right"][+(e[0]<o.viewSize[0]/2)]]=10,r.top=e[1]-10,r},formatter:function(e){var a="",t=e[0].value<refercnce?"#26aa5e":e[0].value>refercnce?"#f0595e":"#333";return a+='<span style="color:'+t+'">'+e[0].value.toFixed(2)+"</span>",a}},title:{text:""},grid:{top:5,left:5,right:5},xAxis:{boundaryGap:!1,splitNumber:4,axisTick:{show:!1},axisLabel:{interval:59,color:"#333",padding:[0,0,0,-25],formatter:function(e,a){var t="        ";return a===0&&(t="                "),a===240&&(t=""),(e=="10:30"||e=="14:00")&&(t="",e=""),t+e}},axisLine:{lineStyle:{color:"#ddd"}},data:time,splitLine:{show:!0}},yAxis:[{splitNumber:4,min:minVal,max:maxVal,axisTick:{show:!1},splitLine:{show:!1},axisLine:{lineStyle:{color:"#ddd"},onZero:!1},axisLabel:{inside:!0,padding:[-25,0,0,0],formatter:function(e,a){var t="";if(a%2===0)return a===2&&(t=`

`),a===4&&(t=`



`),t+e.toFixed(2)},textStyle:{color:function(e){var a=e.split(",").join("");return a<refercnce?"#26aa5e":a>refercnce?"#f0595e":"#333"}}},axisPointer:{label:{show:!1}}},{min:minPct,max:maxPct,axisLine:{lineStyle:{color:"#ddd"},onZero:!1},axisTick:{show:!1},axisLabel:{inside:!0,padding:[-25,0,0,0],formatter:function(e,a){var t="";if(a%2===0)return a===2&&(t=`

`),a===4&&(t=`



`),t+e.toFixed(2)+"%"},textStyle:{color:function(e){var a=e=e.split(",").join("");return a<0?"#26aa5e":a>0?"#f0595e":"#333"}}},axisPointer:{label:{show:!1}}}],series:[{type:"line",symbol:"none",name:"实时价格",smooth:!0,tooltip:{},lineStyle:{normal:{color:"#474747",width:1}},areaStyle:{normal:{color:"rgba(0, 0, 0, 0)"}},data:price,markLine:{silent:!0,label:{normal:{show:!1}},lineStyle:{normal:{color:"#f0595e",width:1}},symbol:"none",data:[{yAxis:102}]}},{type:"line",symbol:"none",name:"均线价格",lineStyle:{normal:{color:"#ffa421",width:1}},label:{normal:{show:!1}},data:avgPrice}]};function getdata(e){$.ajax({url:"http://pdfm.eastmoney.com/EM_UBG_PDTI_Fast/api/js?id="+e+"&TYPE=r&js=fsdata((x))&rtntype=5&isCR=false&fsdata=fsdata",type:"get",beforeSend:function(a){a.setRequestHeader("Referer","http://pdfm.eastmoney.com/EM_UBG_PDTI_Fast/api/js?id=3001192&TYPE=r&js=fsdata((x))&rtntype=5&isCR=false&fsdata=fsdata"),a.setRequestHeader("Accept","text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8")},success:function(a){console.log(a),suiji=randomNum(suiji,suiji+1),price.push(suiji),avgPrice.push(randomNum(suiji,suiji+1)),myChart.setOption({series:[{name:"实时价格",data:price},{name:"均线价格",data:avgPrice}]})},error:function(a){}})}setInterval(function(){getdata("3001192")},2e3);
