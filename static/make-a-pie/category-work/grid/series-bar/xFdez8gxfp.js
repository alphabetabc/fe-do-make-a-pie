data=[{name:"1.user1",value:(Math.random()*10).toFixed(0),sum:10},{name:"2.user2",value:(Math.random()*10).toFixed(0),sum:10},{name:"3.user3",value:(Math.random()*10).toFixed(0),sum:10},{name:"4.user4",value:(Math.random()*10).toFixed(0),sum:10}],getArrByKey=(t,e)=>{let a=e||"value",r=[];return t&&t.forEach(function(o){r.push(o[a])}),r},opt={index:0},color=["#FC619D","#FF904D","#48BFE3"],data=data.sort((t,e)=>e.value-t.value),option={grid:{top:"2%",bottom:-15,right:30,left:30,containLabel:!0},xAxis:{show:!1},yAxis:[{triggerEvent:!0,show:!0,inverse:!0,data:getArrByKey(data,"name"),axisLine:{show:!1},splitLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1,interval:0,color:"#666",align:"left",margin:80,fontSize:13,formatter:function(t,e){return opt.index===0&&e<3?"{idx"+e+"|"+(1+e)+"} {title|"+t+"}":opt.index!==0&&e+opt.index<9?"{idx|0"+(1+e+opt.index)+"} {title|"+t+"}":"{idx|"+(1+e+opt.index)+"} {title|"+t+"}"},rich:{idx0:{color:"#FB375E",backgroundColor:"#FFE8EC",borderRadius:100,padding:[5,8]},idx1:{color:"#FF9023",backgroundColor:"#FFEACF",borderRadius:100,padding:[5,8]},idx2:{color:"#01B599",backgroundColor:"#E1F7F3",borderRadius:100,padding:[5,8]},idx:{color:"#333",borderRadius:100,padding:[5,8]},title:{width:165}}}},{triggerEvent:!0,show:!0,inverse:!0,data:getArrByKey(data,"name"),axisLine:{show:!1},splitLine:{show:!1},axisTick:{show:!1},axisLabel:{interval:0,shadowOffsetX:"-20px",color:["#FF9023","red"],align:"right",verticalAlign:"bottom",lineHeight:30,fontSize:13,formatter:function(t,e){return"↑ "+data[e].value+"    ↓ "+(data[e].value/data[e].sum*100).toFixed(2)+"%"}}}],series:[{name:"条",type:"bar",showBackground:!0,barBorderRadius:30,yAxisIndex:0,data,barWidth:10,itemStyle:{color:t=>t.dataIndex<3&&opt.index===0?color[t.dataIndex]:"#1990FF",barBorderRadius:30},label:{normal:{color:"#000",show:!0,position:[0,"-20px"],textStyle:{fontSize:16},formatter:function(t,e){return t.name}}}}]};
