let data3=[],data2=[],proTitle=[],sum2=0,chartdata=[{name:"施工",val:"65.15265"},{name:"设计",val:"13.36558458"},{name:"监理",val:"76.365584852"}];chartdata.map(a=>{a.val=a.val*-1}),chartdata.sort((a,e)=>Number(a.val)-Number(e.val)),chartdata.forEach(a=>{sum2+=a.val*1,data2.push(a.val),proTitle.push(a.name)});let last=0;data2.forEach((a,e)=>{data2.length!==e+1?(data3.push((a*100/sum2).toFixed(2)),last+=Number((a*100/sum2).toFixed(2))):data3.push(parseFloat((100-last).toFixed(10)))});let data1=[],sum=0;data3.map(a=>{sum+=a*1;let e=100-sum;data1.push(e)}),option={grid:{top:"150",left:"30%"},backgroundColor:"#2c3e50",color:"#FFCA6F",height:100,width:280,xAxis:{show:!1},yAxis:[{type:"category",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{inside:!0,padding:[-28,0,0,0],textStyle:{fontSize:14,color:"#FFFFFF"}},data:proTitle.reverse()}],series:[{type:"bar",barGap:"-100%",barWidth:3,label:{normal:{show:!0,position:"right",color:"#FFFFFF",fontSize:"20",formatter:function(a){return data3[a.dataIndex]+"%"},align:"right",offset:[80,0]}},z:1,data:[100,100,100],itemStyle:{emphasis:{color:"#333"},normal:{color:"#333"}}},{type:"bar",barWidth:3,stack:"总量",color:"#333",itemStyle:{emphasis:{color:"#333"}},data:data1.reverse()},{type:"bar",barWidth:3,stack:"总量",data:data3.reverse()}]};
