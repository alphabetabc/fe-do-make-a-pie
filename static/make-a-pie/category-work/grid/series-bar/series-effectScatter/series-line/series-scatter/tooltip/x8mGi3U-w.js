const res={responseCode:10001,responseMsg:"ok",data:{xAxis:["currentSalary","PAStandardSalary","PAComparablePay","comparablePay","smartSalary","expectationSalary","reference"],smartSalary:{welfare:.8,bonus:6,fixedSalary:30},currentSalary:{welfare:1.2,bonus:5,fixedSalary:12},expectationSalary:{salary:30},reference:{recommended:20,design:15},PAComparablePay:[{salary:11},{salary:17},{salary:13},{salary:27},{salary:12},{salary:15},{salary:19},{salary:21}],PAStandardSalary:{upperLimit:29,aQuarterUpper:27,medianValue:25,aQuarterLower:23,lowerLimit:5},comparablePay:{upperLimit:29,aQuarterUpper:27,medianValue:25,aQuarterLower:23,lowerLimit:5}}},MAPS={currentSalary:"候选人当前薪酬",PAStandardSalary:"pa标准薪酬",PAComparablePay:"pa可比薪酬",comparablePay:"市场可比薪酬",smartSalary:"智能荐薪",expectationSalary:null,reference:null},MAP_KEY=Object.keys(MAPS);let space=[],xAxis=[],series=[];function create_options(a,r=null,t=null){switch(r&&(xAxis=[...xAxis,r]),a){case"smartSalary":case"currentSalary":series.push({name:"固薪",type:"bar",stack:"col",data:[...space,res.data[a].fixedSalary],itemStyle:{color:"#A3ADD6"}},{name:"奖金",type:"bar",stack:"col",data:[...space,res.data[a].bonus],itemStyle:{color:"#F0C2AF"}},{name:"福利",type:"bar",stack:"col",data:[...space,res.data[a].welfare],label:{show:!0,position:"top",color:"#7D8292",formatter(e){let l=0;return Object.entries(res.data[a]).map(([y,p])=>{l=l+ +p}),`${l}万`}},itemStyle:{color:"#F3DD94"}});break;case"PAComparablePay":let n=[];const i=t.length,s=t.indexOf("PAComparablePay"),c=300/i*s+300/i/4,d=300/i/2;res.data.PAComparablePay.map(e=>{const l=c+Math.floor(Math.random()*d);n.push([l,e.salary])}),series.push({symbolSize:4,data:n,xAxisIndex:1,type:"scatter",itemStyle:{color:"#6A6B78"}});break;case"reference":series.push({type:"line",xAxisIndex:2,name:"推荐年薪",data:[[0,res.data[a].recommended],[1,res.data[a].recommended]],label:{show:!0,formatter(e){return e.data[0]>0?e.data[1]+"万":""},color:"#7D8292",offset:[20,13]},symbol:"circle",symbolSize:5,zlevel:99,lineStyle:{type:"dashed",width:1,color:"#FD6720"}},{type:"line",name:"设计年薪",xAxisIndex:2,data:[[0,res.data[a].design],[1,res.data[a].design]],label:{show:!0,formatter(e){return e.data[0]>0?e.data[1]+"万":""},color:"#7D8292",offset:[20,13]},zlevel:99,symbol:"circle",symbolSize:5,lineStyle:{type:"dashed",width:1,color:"blue"}});break;case"comparablePay":case"PAStandardSalary":let o={emphasis:{color:"#E6F1FF",borderColor:"#fff"}};series.push({name:"下限",type:"bar",stack:"col",data:[...space,{value:res.data[a].lowerLimit,label:{formatter:function(e){return`{b|}

{a| ${res.data[a].lowerLimit}万}`},show:!0,width:30,position:[0,0,0,0],rich:{b:{width:30,height:2,color:"#fff",backgroundColor:"#55aee6",verticalAlign:"top"},a:{color:"#8e909a",width:100}}}}],barWidth:"30",barGap:"10%",itemStyle:{color:"#fff",borderColor:"#fff"}},{name:"下四分之一",type:"bar",stack:"col",data:[...space,{value:res.data[a].aQuarterLower-res.data[a].lowerLimit,label:{formatter:function(e){return"{b|}{a|}"},show:!0,position:[0,0,0,0],rich:{b:{width:30,height:2,color:"#fff",backgroundColor:"#55aee6",verticalAlign:"top"},a:{color:"#8e909a",width:100}}},itemStyle:o}],itemStyle:{color:"#E6F1FF"}},{name:"中位值",type:"bar",stack:"col",data:[...space,{value:res.data[a].medianValue-res.data[a].aQuarterLower,label:{formatter:function(e){return"{b|}{a|}"},show:!0,position:[0,0,0,0],rich:{b:{width:30,height:2,color:"#fff",backgroundColor:"#55aee6",verticalAlign:"top"},a:{color:"#8e909a",width:100}}},itemStyle:o}],itemStyle:{color:"#E6F1FF"}},{name:"上四分之一",type:"bar",stack:"col",data:[...space,{value:res.data[a].aQuarterUpper-res.data[a].medianValue,label:{formatter:function(e){return"{b|}{a|}"},show:!0,position:[0,0,0,0],rich:{b:{width:30,height:2,color:"#fff",backgroundColor:"#55aee6",verticalAlign:"top"},a:{color:"#8e909a",width:100}}},itemStyle:o}],itemStyle:{color:"#E6F1FF"}},{name:"上限",type:"bar",stack:"col",data:[...space,{value:res.data[a].upperLimit-res.data[a].aQuarterUpper,label:{formatter:function(e){return`{a| ${res.data[a].upperLimit}万}

{b|}`},show:!0,position:[0,-24,0,0],rich:{b:{width:30,height:2,color:"#fff",backgroundColor:"#55aee6",verticalAlign:"top"},a:{color:"#8e909a",width:100}}},itemStyle:o}],itemStyle:{color:"#E6F1FF"}});break;case"expectationSalary":series.push({type:"effectScatter",symbolSize:8,itemStyle:{color:"#FD6720 ",opacity:"0.9"},rippleEffect:{color:"#FD6720",period:9999},label:{show:!0,formatter(e){return e.data[1]+"万"},color:"#7D8292",offset:[0,-20]},data:[["候选人当前薪酬",res.data[a].salary]]});break;default:break}}function calcFloat(a){return["currentSalary","PAStandardSalary","PAComparablePay","comparablePay","smartSalary"].filter(t=>a.includes(t))}MAP_KEY.map(a=>{if(res.data[a]){let r=MAPS[a],t=null;r==="pa可比薪酬"&&(t=calcFloat(res.data.xAxis)),create_options(a,r,t),space.push("")}else space.pop()}),option={tooltip:{show:!1,trigger:"item",axisPointer:{type:"shadow"}},backgroundColor:"#fff",grid:{top:"10%",left:"10%",right:"5%",bottom:"10%"},xAxis:[{type:"category",data:xAxis,triggerEvent:!0,boundaryGap:!0,nameGap:30,axisLine:{lineStyle:{color:"#DFE1E6",opacity:"0.6"}},axisTick:{show:!1},axisLabel:{color:"#7D8292",fontSize:11,formatter:function(a){return a=="智能荐薪"?a+" {icon|}":a},rich:{icon:{backgroundColor:{image:""}}}},splitLine:{lineStyle:{color:"#DFE1E6"}},splitArea:{show:!1},splitLine:{show:!1}},{type:"value",boundaryGap:!1,axisLine:{lineStyle:{opacity:0}},axisLabel:{color:"#fff"},axisTick:{lineStyle:{opacity:0}},splitLine:{show:!1},min:0,max:300,nameGap:30},{type:"value",boundaryGap:!1,axisLine:{lineStyle:{opacity:0}},axisLabel:{color:"#fff"},axisTick:{lineStyle:{opacity:0}},splitLine:{show:!1},min:0,max:1,nameGap:30}],yAxis:{type:"value",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:"#7D8292",fontSize:12,formatter:"{value}万"},splitLine:{lineStyle:{color:"#DFE1E6",opacity:"0.2"}}},series};
