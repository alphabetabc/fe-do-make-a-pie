var base=+new Date(2017,3,8),oneDay=24*3600*1e3,date=[],data=[Math.random()*150],now=new Date(base),day=30;function addData(a){now=[now.getFullYear(),now.getMonth()+1,now.getDate()].join("/"),date.push(now),data.push((Math.random()-.5)*10+data[data.length-1]),a&&(console.log(data),date.shift(),data.shift()),now=new Date(+new Date(now)+oneDay)}for(var i=0;i<day;i++)addData();option={title:{text:"ECharts 30天内数据实时更新"},xAxis:{type:"category",data:date},yAxis:{boundaryGap:[0,"100%"],type:"value"},series:[{name:"成交",type:"bar",smooth:!0,symbol:"none",stack:"a",areaStyle:{normal:{}},data}]},setInterval(function(){addData(!0),myChart.setOption({xAxis:{data:date},series:[{name:"成交",data}]})},1e3);
