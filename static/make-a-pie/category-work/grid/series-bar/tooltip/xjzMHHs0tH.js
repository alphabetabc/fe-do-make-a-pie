function getPageList(e,t,a){t=t-1;const i=[],o=e.length,n=(o+a-1)/a;let r=t<=0?0:t*a,s=(t+1)*a>o?o:(t+1)*a;if(r>o)return i;for(r;r<s;r++)i.push(e[r]);return i}let yLabel=["幼儿园","小一","小二","小三","小四","小五","小六","初一","初二","初三","高一","高二","高三","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26"];var pageNum=1,pageSize=10,baseRows=getPageList(yLabel,pageNum,pageSize);let yData=[];baseRows.forEach(e=>{yData.push(Math.random()*1e3)});let bgData=[];for(let e in yData)bgData.push(2e3);var option={grid:{left:"5%",right:"5%",bottom:"5%",top:"5%",containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"none"},formatter:function(e){return e[0].name+"<br/><span style='display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:rgba(36,207,233,0.9)'></span>"+e[0].seriesName+" : "+e[0].value+" <br/>"}},backgroundColor:"rgb(20,28,52)",xAxis:{show:!1,type:"value"},yAxis:[{type:"category",inverse:!0,axisLabel:{show:!0,margin:15,textStyle:{color:"#fff"}},splitLine:{show:!1},axisTick:{show:!1},axisLine:{show:!1},data:baseRows},{type:"category",inverse:!0,axisTick:"none",axisLine:"none",show:!0,axisLabel:{textStyle:{color:"#9aeced",fontSize:"12"}},data:yData}],series:[{name:"人数",type:"bar",zlevel:1,itemStyle:{normal:{barBorderRadius:[0,30,30,0],color:new echarts.graphic.LinearGradient(0,0,1,0,[{offset:0,color:"#52d8da"},{offset:1,color:"#57dcde"}]),shadowBlur:0,shadowColor:"rgba(87,220,222,0.7)"}},barWidth:20,data:yData},{name:"背景",type:"bar",barWidth:20,barGap:"-100%",data:bgData,itemStyle:{normal:{color:"rgba(24,31,68,1)",barBorderRadius:[0,30,30,0]}}}]};setInterval(()=>{pageNum++;var e=getPageList(yLabel,pageSize+pageNum,1);if(e.length==0){pageSize=0,pageNum=0;return}baseRows.splice(0,1),baseRows.push(...e),yData.splice(0,1),e.forEach(t=>{yData.push(Math.random()*1e3)}),bgData.splice(0,1),e.forEach(t=>{bgData.push(2e3)}),myChart.setOption({yAxis:[{data:baseRows},{data:yData}],series:[{name:"人数",data:yData},{name:"背景",data:bgData}]})},1e3);
