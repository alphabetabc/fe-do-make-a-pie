for(var dataall=[{name:"汇总",text1:45.7,text3:29.5,text4:16.2,percent:35.44857768052516 .toFixed(2)},{name:"1.5MW",text1:10,text3:6,text4:4,percent:40 .toFixed(2)},{name:"2MW",text1:7.2,text3:3.5,text4:3.7,percent:51.38888888888889 .toFixed(2)},{name:"2XMW",text1:12,text3:11,text4:1,percent:8.333333333333332 .toFixed(2)}],Yaxisdata=[],data1=[],data2=[],data3=[],data4=[],i=0;i<dataall.length;i++)Yaxisdata.push(dataall[i].name),data1.push(dataall[i].text1),dataall[i].text1>dataall[i].text3?data3.push({name:dataall[i].name,value:dataall[i].text3,itemStyle:{color:"orange"}}):data3.push(dataall[i].text3),data2.push(dataall[i].text2),data4.push(dataall[i].text4);option={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["当前实际值","当前计划值"]},grid:{left:"3%",right:"24%",bottom:"3%",containLabel:!0},xAxis:{type:"value"},yAxis:{type:"category",data:Yaxisdata},series:[{type:"bar",stack:"总量",label:{normal:{show:!0,position:"insideRight"}},data:data1},{type:"bar",stack:"总量",label:{normal:{show:!0,position:"insideRight"}},data:data2},{type:"bar",stack:"总数",label:{normal:{show:!0,position:"insideRight"}},data:data3},{type:"bar",stack:"总数",label:{normal:{show:!0,position:"insideRight"}},data:data4},{name:dataall[3].name,type:"pie",radius:["10%","15%"],center:["85%","20%"],avoidLabelOverlap:!1,label:{show:!1,position:"center",formatter:"{c}%"},data:[{value:dataall[3].percent,name:"直接访问",label:{show:!0}},{value:100-dataall[3].percent,name:"邮件营销"}]},{name:dataall[2].name,type:"pie",radius:["10%","15%"],center:["85%","40%"],avoidLabelOverlap:!1,label:{show:!1,position:"center",formatter:"{c}%"},data:[{value:dataall[2].percent,name:"直接访问",label:{show:!0}},{value:100-dataall[2].percent,name:"邮件营销"}]},{name:dataall[1].name,type:"pie",radius:["10%","15%"],center:["85%","60%"],avoidLabelOverlap:!1,label:{show:!1,position:"center",formatter:"{c}%"},data:[{value:dataall[1].percent,name:"直接访问",label:{show:!0}},{value:100-dataall[1].percent,name:"邮件营销"}]},{name:dataall[0].name,type:"pie",radius:["10%","15%"],center:["85%","80%"],avoidLabelOverlap:!1,label:{show:!1,position:"center",formatter:"{c}%"},data:[{value:dataall[0].percent,name:"直接访问",label:{show:!0}},{value:100-dataall[0].percent,name:"邮件营销"}]}]};
