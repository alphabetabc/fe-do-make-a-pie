const dataArr={xdata:["01-01","01-02","01-03","01-04","01-05","01-06","01-07"],result:[{name:"天河",data:[320,435,490,340,320,270,360]},{name:"海珠",data:[150,220,210,310,140,180,288]},{name:"荔湾",data:[250,120,240,280,240,180,188]}]},diamondData=dataArr.result.reduce((o,e,t)=>(o[t]=e.data.map((a,s)=>a+(o[t-1]?o[t-1][s]:0)),o),[]),color=[["#0079FA"],["#00FD9F"],["#00C2FF"],["#0EEBFF"]],color1=[[{offset:0,color:"#0079FA"},{offset:.5,color:"#009AFF"},{offset:1,color:"#0079FF"}],[{offset:0,color:"#00FD9F"},{offset:.5,color:"#44FFBA"},{offset:1,color:"#00FD9F"}],[{offset:0,color:"#00C2FF"},{offset:.5,color:"#0EEBFF"},{offset:1,color:"#00C2FF"}],[{offset:0,color:"#00C2FF"},{offset:.5,color:"#0EEBFF"},{offset:1,color:"#00C2FF"}]];let series=dataArr.result.reduce((o,e,t,a)=>(o.push({z:t+1,stack:"总量",type:"bar",name:e.name,barGap:"-100%",barWidth:15,data:e.data,itemStyle:{borderRadius:t==0?[5,0,0,5]:[0,0,0,0],color:new echarts.graphic.LinearGradient(0,1,1,0,color1[t]),opacity:1}},{z:t+10,type:"pictorialBar",symbolPosition:"end",symbol:"circle",symbolOffset:["50%",0],symbolSize:[7,15],data:diamondData[t],itemStyle:{color:color[t+1]},tooltip:{show:!1}}),o.length===a.length*2&&o.push({z:a.length*2,type:"pictorialBar",symbolPosition:"start",data:dataArr.result[0].data,symbol:"circle",symbolSize:[7,15],itemStyle:{color:color[0]},tooltip:{show:!1}}),o),[]);const tooltip={show:!1,trigger:"axis"},legend={data:dataArr.result.map(o=>o.name),textStyle:{fontSize:14,color:"#fff"},itemWidth:25,itemHeight:15,itemGap:15,bottom:"5%",selectedMode:!1},grid={top:"10%",left:"10%",right:"3%",bottom:"15%"},xAxis={axisLabel:{color:"#fff",textStyle:{fontSize:"13"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:"rgba(255,255,255,0.2)"}},axisLine:{show:!1,lineStyle:{color:"#fff",width:1,opacity:.3}},axisTick:{show:!1}},yAxis=[{inverse:!0,splitLine:{show:!1},axisTick:{show:!1},axisLine:{lineStyle:{color:new echarts.graphic.LinearGradient(0,1,1,0,[{offset:0,color:"rgba(255,255,255,0.8)"},{offset:1,color:"rgba(255,255,255,0)"}]),width:1}},axisLabel:{textStyle:{fontSize:16,color:"#fff"}},data:dataArr.xdata}];option={tooltip,xAxis,yAxis,series,grid,legend,backgroundColor:"rgba(0, 0, 0, .8)"};
