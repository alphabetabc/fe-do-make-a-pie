for(var data_x=[],last_data=[],this_data=[],d_value=[],decrease_data=[],increase_data=[],decrease_rating=[],increase_rating=[],rating_data=[],i=1;i<16;i++)data_x.push("条目"+i),last_data.push(Math.floor(Math.random()*1e3)+1e3),this_data.push(Math.floor(Math.random()*1e3)+1e3),d_value.push(this_data[i-1]-last_data[i-1]),d_value[i-1]>0?(increase_data.push(d_value[i-1]),increase_rating.push((d_value[i-1]*100/this_data[i-1]).toFixed(2)),decrease_data.push(0),decrease_rating.push(0)):(decrease_data.push(d_value[i-1]),decrease_rating.push((d_value[i-1]*100/this_data[i-1]).toFixed(2)),increase_data.push(0),increase_rating.push(0)),rating_data.push(((this_data[i-1]-last_data[i-1])*100/this_data[i-1]).toFixed(2));option={title:{text:"XXX同/环比分析"},tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},toolbox:{feature:{dataView:{show:!0,readOnly:!1},restore:{show:!0},saveAsImage:{show:!0}}},legend:{top:"30%",data:["上期","本期"]},grid:[{show:!0,top:"5%",containLabel:!0,height:"25%"},{show:!0,top:"35%",containLabel:!0,height:"60%"}],xAxis:[{gridIndex:0,type:"category",data:data_x,axisLabel:{interval:0,rotate:60,margin:2,show:!0},axisPointer:{type:"shadow"}},{gridIndex:1,type:"category",data:data_x,axisLabel:{interval:0,rotate:60,margin:2},axisPointer:{type:"shadow"}}],yAxis:[{gridIndex:0,type:"value",name:"变化量",axisLabel:{formatter:"{value} %"}},{gridIndex:1,type:"value",name:"金额"}],series:[{xAxisIndex:1,yAxisIndex:1,name:"上期",type:"line",data:last_data},{xAxisIndex:1,yAxisIndex:1,name:"本期",type:"bar",itemStyle:{normal:{color:"#008B8B"}},data:this_data},{xAxisIndex:0,yAxisIndex:0,name:"减少",type:"bar",stack:"总量",itemStyle:{normal:{color:"rgba(51,204,112,1)",barBorderRadius:0,label:{show:!0,position:"bottom",formatter:function(a){return a.value<0?"▼"+a.value+"%":""}}}},data:decrease_rating},{xAxisIndex:0,yAxisIndex:0,name:"增长",type:"bar",stack:"总量",itemStyle:{normal:{color:"#FF6A6A",barBorderRadius:0,label:{show:!0,position:"top",formatter:function(a){return a.value>0?"▲"+a.value+"%":""}}}},data:increase_rating}]};
