var myChart=echarts.init(document.getElementById("chart-panel")),selected={},xdata=["三人班学费","一对一学费"],ydata=["词汇","阅读理解","完形填空","语法填空","短文改错","英语写作"],vdata=[[1500,2e3,0],[3500,4e3,40],[3500,4e3,30],[1500,2e3,15],[1500,2e3,10],[2e3,2500,25]],series=[],legenddata=ydata,sumData=[];$.each(vdata[0],function(t,a){for(var e=0,o=0;o<vdata.length;o++)e+=vdata[o][t];sumData[t]=parseFloat(toDecimal(e))}),$.each(vdata,function(t,a){var e={name:ydata[t],type:"bar",smooth:!0,areaStyle:{normal:{}},data:a,barWidth:"40%",stack:"总量"};series.push(e)});var bs2={name:"总量",type:"line",data:sumData,label:{normal:{show:!0,position:"top"}},lineStyle:{normal:{color:"none"}}};series.push(bs2),option={tooltip:{trigger:"axis",axisPointer:{type:"shadow",crossStyle:{color:"#999"}},formatter:function(t){if(t.pop(),t[0]){for(var a=t[0].name+"<br/>",e=0;e<t.length;e++)a+=t[e].marker+t[e].seriesName+" : "+t[e].value+"<br/>";return a}}},legend:{data:legenddata,top:"6%",right:"3%"},xAxis:[{data:xdata}],yAxis:[{name:"",type:"value"}],grid:{top:"12%",left:"3%",right:"4%",bottom:"4%",containLabel:!0},series};function toDecimal(t){return parseFloat(t).toFixed(1)}myChart.on("legendselectchanged",function(t){selected=t.selected,$.each(vdata[0],function(a,e){var o=0;for(var r in selected)if(selected[r]){var n=ydata.indexOf(r);o+=vdata[n][a]}sumData[a]=parseFloat(toDecimal(o))}),myChart.setOption(option)}),myChart.setOption(option);
