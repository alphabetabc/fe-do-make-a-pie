const arr=[{product_code:"HW1624",line_name:"1F02",wancheng:1050,jihua:2800,bili:.38},{product_code:"HW1626",line_name:"1F02",wancheng:2473,jihua:25e3,bili:.1},{product_code:"HW5626",line_name:"1F02",wancheng:2473,jihua:25e3,bili:.1},{product_code:"HW1524",line_name:"1F023",wancheng:2473,jihua:25e3,bili:.1},{product_code:"HW3524",line_name:"1F023",wancheng:2473,jihua:25e3,bili:.1}],ds=dailyoutQueue(arr),maxLength=Math.max.apply(null,ds.map(l=>l.ids.length));let titlearr=[];for(var datass=[],i=0;i<maxLength;i++)titlearr.push("计划","产出");let bs=[];for(var j=0;j<titlearr.length;j++){let l=[];ds.forEach((e,o)=>{let a="",t="",r="";e.ids.forEach((n,s)=>{titlearr[j]=="计划"&&n.line_name==e.line_name?(a=n.product_code,t=300,r=e.line_name):titlearr[j]=="产出"&&n.line_name==e.line_name?(a=n.product_code,t=100,r=e.line_name):(a=n.product_code,t=0)}),l.push({name:a,lx:r,title:titlearr[j],value:t})}),bs.push(l)}alert(JSON.stringify(bs));for(var datass=[[{name:"HW1624",lx:"1F02",title:"计划",value:300},{name:"HW3524",lx:"1F023",title:"计划",value:300}],[{name:"HW1624",lx:"1F02",title:"产出",value:100},{name:"HW3524",lx:"1F023",title:"产出",value:100}],[{name:"HW1626",lx:"1F02",title:"计划",value:300},{name:"HW3524",lx:"1F023",title:"计划",value:0}],[{name:"HW1626",lx:"1F02",title:"产出",value:100},{name:"HW3524",lx:"1F023",title:"产出",value:0}],[{name:"HW5626",lx:"1F02",title:"计划",value:300},{name:"HW3524",lx:"1F023",title:"计划",value:0}],[{name:"HW5626",lx:"1F02",title:"产出",value:100},{name:"HW3524",lx:"1F023",title:"产出",value:0}]],objs=[],i=0;i<titlearr.length;i++)objs.push({name:titlearr[i],type:"bar",xAxisIndex:titlearr[i]=="计划"?1:0,itemStyle:{normal:{color:titlearr[i]=="计划"?"#b25d25":"#000"},formatter(e){return"实际产出"+e.value}},label:{normal:{show:!0,position:"top",textStyle:{color:"#000"},formatter(e){return titlearr[i]+e.value}}},barGap:"100%",data:datass[i]});console.log(objs);var option={color:["red","#4CCEFE"],title:{text:"统计总量",textStyle:{fontSize:16,padding:"10px"}},legend:{data:["计划","产出"]},tooltip:{},yAxis:{type:"value",axisTick:{show:!1},axisLine:{show:!1,lineStyle:{color:"#000"}},splitLine:{show:!0,lineStyle:{color:"#aaa"}}},xAxis:[{type:"category",axisTick:{show:!1},axisLine:{show:!0,lineStyle:{color:"#000"}},data:["1F02","1F023"]},{type:"category",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1},splitArea:{show:!1},splitLine:{show:!1},data:["会","不会","看情况"]}],series:objs};function dailyoutQueue(l){for(var e={},o=[],a=0;a<l.length;a++){var t=l[a].line_name,r=l[a].product_code;if(!e[t])o.push({line_name:t,product_code:r,ids:[l[a]]}),e[t]=[l[a]];else for(var n=0;n<o.length;n++){var s=o[n];if(s.line_name==t){s.ids.push(l[a]);break}}}return o}
