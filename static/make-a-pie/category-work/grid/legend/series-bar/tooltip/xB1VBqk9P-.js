app.title="堆叠条形图";var _should=[150,150,150],_actual=[50,100,150];option={tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(t){console.log(t[0].dataIndex);var a="";return a+="应报道： "+_should[t[0].dataIndex]+" 人<br>",a+="实报道： "+_actual[t[0].dataIndex]+" 人<br>",a+="报到率： "+(_actual[t[0].dataIndex]*100/_should[t[0].dataIndex]).toFixed(2)+" %",a}},legend:{show:!0,top:10,data:["应报道人数","已报到人数"]},grid:{left:"3%",right:"6%",bottom:"3%",top:40,containLabel:!0},xAxis:{type:"value",show:!0,max:130},yAxis:{type:"category",axisLine:{show:!1},axisTick:{show:!1},data:["学院1","学院2","学院3"]},series:[{name:"应报道人数",type:"bar",stack:"人数",label:{normal:{show:!0,formatter:function(t){return _should[t.dataIndex]+" 人"},position:"inside"}},data:_should.map(function(t,a){return parseInt(t/(t+_actual[a])*100)})},{name:"已报到人数",type:"bar",stack:"人数",label:{normal:{show:!0,formatter:function(t){return _actual[t.dataIndex]+" 人"},position:"inside"}},itemStyle:{normal:{color:"#aaa"}},data:_actual.map(function(t,a){return parseInt(t/(t+_should[a])*100)})},{name:"报到率",type:"bar",stack:"人数",label:{normal:{formatter:function(t){return(_actual[t.dataIndex]*100/_should[t.dataIndex]).toFixed(2)+" %"},show:!0,position:"insideLeft",textStyle:{color:"#000"}}},itemStyle:{normal:{color:"transparent"}},data:[30,30,30]}]};
