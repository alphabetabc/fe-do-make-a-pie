for(var data1=[],data2=[],dataYaxis=[],data=[{id:"xxx3",name:"施工",all:8350,value:8970},{id:"xxx2",name:"监理",all:4500,value:5700},{id:"xxx1",name:"设计",all:2160,value:1800}],x=0;x<data.length;x++){dataYaxis[x]=data[x].name;var obj={};obj.id=data[x].id,obj.name=data[x].name+"投资额",obj.value=data[x].all,data1[x]=obj;var obj2={};obj2.id=data[x].id,obj2.name=data[x].name+"总额",obj2.value=data[x].value,obj2.valueAll=data[x].all,data2[x]=obj2}option={tooltip:{trigger:"axis",axisPointer:{type:"shadow"},textStyle:{color:"red"},backgroundColor:"white",formatter:function(e){var a=e[0].data.value,r=e[1].data.value,t=parseFloat(a/r).toFixed(2)*100;return t>=100?"禁用！资金使用额度已达招标额的"+t+"%":null}},legend:{data:["施工","监理","设计"]},grid:{left:"8%",right:"4%",bottom:"10%",containLabel:!0,height:"70%"},xAxis:{type:"value",axisLine:{symbol:["none","arrow"],symbolSize:[10,50]},axisTick:{show:!1},axisLabel:{fontSize:22,borderWidth:20,interval:10}},yAxis:{type:"category",data:dataYaxis,axisLine:{lineStyle:{type:"dashed"}},axisLabel:{fontSize:22,borderWidth:"20"},axisTick:{show:!1}},series:[{type:"bar",itemStyle:{color:function(e){var a=parseInt(e.data.value/data2[e.dataIndex].value*100);return a<80?"green":a>=80&&a<100?"yellow":"red"}},silent:!0,barWidth:20,barGap:"0%",data:data1,label:{show:!0,position:"right",offset:[80,10],formatter:function(e,a){a=e.dataIndex;var r=null,t=null,l=parseInt(e.data.value/data2[a].value*100);return l<80?"{green|"+e.data.value+`} 
 /{green|`+data2[a].value+"}":l>=80&&l<100?"{yellow|"+e.data.value+`} 
 /{green|`+data2[a].value+"}":"{red|"+e.data.value+`} 
 /{green|`+data2[a].value+"}"},rich:{red:{color:"red",fontSize:20,align:"right"},green:{color:"green",fontSize:20,align:"right"},yellow:{color:"yellow",fontSize:20,align:"right"}}}},{type:"bar",itemStyle:{color:"#009999"},barWidth:20,z:10,data:data2,label:{show:!0,position:"center",offset:[80,-14],formatter:function(e,a){return a=e.dataIndex,"{a|"+parseInt(e.data.valueAll/e.data.value*100)+"%}"},rich:{a:{color:"black",fontSize:30,align:"center"}}}}]};
