let data=new Array(50).fill(1).map(e=>({name:~~(Math.random()*400),value:~~(Math.random()*40),value3:~~(Math.random()*40),value2:~~(Math.random()*40)})),items=[{key:"value",color:"#419840"},{key:"value2",color:"#7db9ae"},{key:"value3",color:"#74a029"}];data.forEach(e=>{let a=0;items.forEach(t=>{a+=e[t.key]||0}),e.sum=a}),data.sort((e,a)=>e.sum-a.sum);let yData=data.map(e=>e.name),itemSeries=items.map((e,a)=>{let t=data.map(o=>o[e.key]);return{type:"bar",name:e.key,data:t,stack:"all",xAxisIndex:1,yAxisIndex:1,label:{normal:{show:!0,position:"insideLeft"}},itemStyle:{normal:{color:e.color}}}});option={backgroundColor:"#000",tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:items.map(e=>e.key),textStyle:{color:"#fff"}},grid:[{left:"3%",right:"55%",bottom:"3%",containLabel:!0},{left:"45%",right:"4%",bottom:"3%",containLabel:!0}],xAxis:[{type:"value",inverse:!0,splitLine:{show:!1}},{type:"value",gridIndex:1,splitLine:{show:!1}}],yAxis:[{type:"category",data:yData,axisLine:{show:!1},axisLabel:{show:!1},axisTick:{show:!1}},{type:"category",data:yData,gridIndex:1,axisLine:{show:!1},axisTick:{show:!1}}],series:[...itemSeries,{name:"总计",type:"bar",data:data.map(e=>e.sum),xAxisIndex:1,yAxisIndex:1,stack:"all",label:{normal:{show:!0,position:"insideLeft",color:"#fff"}},itemStyle:{normal:{color:"rgba(0,0,0,0)"}}},{type:"bar",data:data.map(e=>e.sum),label:{normal:{show:!0,position:"left",color:"#fff"}},itemStyle:{normal:{color:"#7DB9AE"}}}]};
