var getname=["学前教育","学前教育（公费师范）","小学教育（公费师范）","小学教育","教育学","公共事业管理","公共事业管理（公共与非盈利管理）"],getvaluenum=[1,20,25,0,0,0,0,5,22,32,26,41,0,0,21,0,24,25,30,15,28,20,0,23,44,24,20,37,0,0,1,1,0,1,0],getxlmc=["2020级","2019级","2018级","2017级","2016级"],getxlmcnum=getvaluenum.length/getname.length,getvalue=[];for(let t=0;t<getxlmcnum;t++){getvalue[t]=[];for(let a=0;a<getname.length;a++)getvalue[t][a]=getvaluenum[t*getname.length+a]}for(var color1=["#63B4FF","#FFD19A","#64F0BC","#BDBCFF","#FFA387","#63B4FF","#FFD19A","#64F0BC","#BDBCFF","#FFA387"],color2=["#1890FF","#FFD283","#47D095","#9C9BFF","#FF6388","#1890FF","#FFD283","#47D095","#9C9BFF","#FF6388"],getvaluesum=[],i=0;i<getname.length;i++){getvaluesum[i]=0;for(var j=0;j<getxlmcnum;j++)getvaluesum[i]+=getvalue[j][i]}var maxnum=Math.max.apply(null,getvaluesum),maxlen=Math.pow(10,String(Math.ceil(maxnum)).length-2);if(maxnum>=5)var max=Math.ceil(maxnum/(.95*maxlen))*maxlen;else var max=5;for(var series=[],i=0;i<getxlmc.length;i++)series.push({name:getxlmc[i],type:"bar",data:getvalue[i],stack:"各专业本科生年级分布",barWidth:"20px",itemStyle:{normal:{color:{x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:color1[i]},{offset:1,color:color2[i]}]},barBorderRadius:[0,0,0,0],label:{show:!1,position:"top",textStyle:{fontSize:12,color:"#666666"}}}}});option={grid:{top:"33",right:"15",left:"50",bottom:"55"},tooltip:{trigger:"axis",axisPointer:{type:"none"},backgroundColor:"rgba(21, 64, 92, 0.9)",formatter:function(t){var a="";a+="<div>"+t[0].name+"</div>";for(var e=0;e<getxlmcnum;e++)t[e]&&t[e].value>0&&(a+='<span style="color:rgba(0, 255, 252, 1);font:16px bold;">'+t[e].seriesName+'</span>本科生人数&nbsp;&nbsp;<span style="color:rgba(0, 255, 252, 1);">'+t[e].value+"人</span></br>");return a}},legend:{type:"scroll",right:"10",top:"0",data:getxlmc,itemGap:25,itemWidth:16,itemHeight:16,textStyle:{fontSize:"13",color:"#666666"}},xAxis:[{data:getname,axisLabel:{interval:0,formatter:function(t){var a="",e=8,s=t.length,l=Math.ceil(s/e);if(l>1){for(var n=0;n<l;n++){var f="",o=n*e,r=o+e;f=t.substring(o,r)+`
`,a+=f}return a}else return t},margin:10,color:"#666666",textStyle:{fontSize:13,fontWeight:400}},axisLine:{lineStyle:{color:"#B0C5DB"}},axisTick:{show:!1}}],yAxis:[{min:0,max,interval:max/5,splitNumber:5,name:"单位：人",nameTextStyle:{color:"#999999",fontSize:13,padding:[0,0,0,65]},axisLabel:{color:"#666666",textStyle:{fontSize:13}},axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{color:"#CCDBEB",type:"dashed",opacity:.5}}}],series};var series=option.series,fun=function(t){for(var a=0,e=0;e<series.length;e++)a+=series[e].data[t.dataIndex];return a};series[series.length-1]&&(series[series.length-1].itemStyle.normal.label.show=!0,series[series.length-1].itemStyle.normal.label.formatter=fun,series[series.length-1].itemStyle.normal.barBorderRadius=[3,3,0,0]),myChart.on("legendselectchanged",function(t){var a=t.selected,e=[];for(var s in a)if(a[s])for(var l=0;l<series.length;l++){var n=series[l].name;n==s&&e.push(l)}for(var f=function(m){for(var h=0,g=0;g<e.length;g++)for(var v=0;v<series.length;v++)e[g]==v&&(h+=series[v].data[m.dataIndex]);return h},o=0;o<series.length;o++)series[o].itemStyle.normal.label.show=!1,series[o].itemStyle.normal.barBorderRadius=[0,0,0,0];var r=series[e[e.length-1]];r!=null&&r!=""&&r!=null&&(r.itemStyle.normal.label.show=!0,r.itemStyle.normal.label.formatter=f,r.itemStyle.normal.barBorderRadius=[3,3,0,0]),myChart.setOption(option)});
