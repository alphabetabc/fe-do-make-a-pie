var dataObj={categories:[],legendData:["动态曲线"],yAxisData:[],yAxisName:"次",wangge:[]};dataObj.categories=function(){for(var t=new Date,e=[0,2,4,6,8,10,12,14,16,18,20,22,24],o=12;o--;){var a=t.getHours();e.unshift(a),t=new Date(t-72e5)}return e}(),dataObj.yAxisData=function(){for(var t=[0,0,0,0,0,33,35,28,25,28,10,0,0],e=0;e<12;)t.push(""),e++;return t}();var option=anlysis(myChart,dataObj);setInterval(function(){var t=new Date().getHours(),e=dataObj.wangge,o=dataObj.yAxisData;o.shift(),o.push(Math.round(Math.random()*10)),dataObj.categories.shift(),dataObj.categories.push(t),myChart.setOption({xAxis:[{data:dataObj.categories},{data:dataObj.categories}],series:[{data:e},{data:o}]})},1e3);function anlysis(t,e){var o={title:{show:!1},grid:{top:"12%",left:"10px",right:"10px",bottom:"2%",containLabel:!0},tooltip:{trigger:"axis",formatter:function(a){if(a[0].data!==""){var i='<span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:'+a[0].color+'"></span>'+a[0].seriesName+"："+a[0].data;return i}}},legend:{data:e.legendData,textStyle:{color:"#555"},top:"10",right:"20"},xAxis:[{type:"category",boundaryGap:!0,axisLine:{lineStyle:{color:"#fff"}},axisTick:{lineStyle:{color:"#fff"}},axisLabel:{color:"#555",rotate:"20",interval:6,formatter:function(a){var i=a;return i.length>10&&(i=i.substring(0,9)+".."),i}},data:e.categories},{type:"category",boundaryGap:!0,axisLine:{lineStyle:{color:"#fff"}},axisTick:{lineStyle:{color:"#fff"}},data:e.categories,show:!1}],yAxis:[{type:"value",scale:!0,name:e.yAxisName,min:0,boundaryGap:[.1,.2],splitLine:{show:!0,lineStyle:{color:"#007fff"}},axisLabel:{color:"#555"},axisLine:{lineStyle:{color:"#fff"}},axisTick:{lineStyle:{color:"#007fff"}}},{type:"value",scale:!0,max:100,min:0,boundaryGap:0,splitLine:{show:!1},axisLabel:{show:!1},axisLine:{lineStyle:{color:"#fff"}},axisTick:{show:!1}}],series:[{type:"bar",xAxisIndex:1,yAxisIndex:1,barGap:"-100%",barCategoryGap:"0%",itemStyle:{normal:{color:"rgba(0,0,0,0)",borderRightWidth:"1",borderColor:"#007fff"}},data:e.wangge},{name:e.legendData,type:"line",smooth:!0,showAllSymbol:!0,symbol:"circle",symbolSize:0,itemStyle:{normal:{color:"#000"}},lineStyle:{shadowColor:"#fff",shadowBlur:8,shadowOffsetX:"3",shadowOffsetY:"4"},markPoint:{data:[{name:"峰值",type:"max",label:{normal:{position:"top",formatter:function(a){var i=e.categories[a.data.coord[0]];return a.name+":"+a.value+"次（"+i+"）"},background:"#ddd"}}}],symbol:"pin",symbolSize:15,symbolOffset:[0,-6]},data:e.yAxisData,animationDurationUpdate:function(a){return a*100}}],animationEasing:"exponentialOut",animationEasingUpdate:"exponentialOut"};t.hideLoading(),t.setOption(o)}
