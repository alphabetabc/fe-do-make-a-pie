data=[{name:"aaaa",value:754},{name:"bbbb",value:611},{name:"dddd",value:400},{name:"eeee",value:200},{name:"ccccc",value:300}];let colorArr=["#ff8700","#ffc300","#07e373","#019dff","#0033ff"];arrName=getArrayValue(data,"name"),arrValue=getArrayValue(data,"value"),sumValue=eval(arrValue.join("+")),objData=array2obj(data,"name"),optionData=getData(data);function getArrayValue(e,l){var l=l||"value",a=[];return e&&e.forEach(function(r){a.push(r[l])}),a}function array2obj(e,t){for(var l={},a=0;a<e.length;a++)l[e[a][t]]=e[a];return l}function getData(e){var t={series:[],yAxis:[]};let l=["40%","50%"];for(let a=0;a<e.length;a++){let r=[70-a*15+"%",65-a*15+"%"];t.series.push({name:"",type:"pie",clockWise:!1,hoverAnimation:!1,radius:r,center:l,label:{show:!1},itemStyle:{label:{show:!1},labelLine:{show:!1},borderWidth:5},data:[{value:e[a].value,name:e[a].name},{value:sumValue-e[a].value,name:"",itemStyle:{color:"rgba(0,0,0,0)",borderWidth:0},tooltip:{show:!1},hoverAnimation:!1}]}),t.series.push({name:"",type:"pie",silent:!0,z:1,clockWise:!1,hoverAnimation:!1,radius:r,center:l,label:{show:!1},itemStyle:{label:{show:!1},labelLine:{show:!1},borderWidth:5},data:[{value:7.5,itemStyle:{color:"rgb(3, 31, 62)",borderWidth:0},tooltip:{show:!1},hoverAnimation:!1},{value:2.5,name:"",itemStyle:{color:"rgba(0,0,0,0)",borderWidth:0},tooltip:{show:!1},hoverAnimation:!1}]}),t.yAxis.push((e[a].value/sumValue*100).toFixed(2)+"%")}return t}let rich={};colorArr.map((e,t)=>{rich["circle"+t]={color:e,fontSize:25,lineHeight:60}});let legendRich={value:{fontSize:18,lineHeight:30,color:"#fff"},per:{fontSize:14,lineHeight:30,color:"#fff",padding:[0,0,0,20]}};colorArr.map((e,t)=>{legendRich["title"+t]={fontSize:16,lineHeight:15,color:e}}),option={backgroundColor:"#000",color:colorArr,legend:{show:!0,icon:"circle",top:"center",right:"10%",data:arrName,width:50,padding:[0,5],itemGap:25,formatter:function(e){let t="";return console.log("objData",objData),data.map((l,a)=>{if(l.name==e){let r=l.value/sumValue*100;t=`{${"title"+a}|${e}}
{value|${l.value}}{per|${r.toFixed(2)}%}`}}),t},textStyle:{rich:legendRich}},tooltip:{show:!0,trigger:"item",formatter:"{a}<br>{b}:{c}({d}%)"},grid:{top:"15%",bottom:"50%",left:"40%",containLabel:!1},yAxis:[{type:"category",inverse:!0,axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!0,interval:0,inside:!0,position:"right",formatter:function(e,t){return`{${"circle"+t}|‚óè}`},rich},data:optionData.yAxis}],xAxis:[{show:!1}],series:optionData.series};
