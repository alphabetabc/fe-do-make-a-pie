const totalData=[{year:"2004",data:[{name:"未知",value:"29.5"},{name:"男性",value:"55.4"},{name:"女性",value:"1.8"}]},{year:"2007",data:[{name:"未知",value:"25.9"},{name:"男性",value:"49.2"},{name:"女性",value:"0.9"}]},{year:"2010",data:[{name:"未知",value:"25.2"},{name:"男性",value:"47.7"},{name:"女性",value:"1.8"}]},{year:"2013",data:[{name:"未知",value:"22.4"},{name:"男性",value:"43.1"},{name:"女性",value:"1.4"}]},{year:"2015",data:[{name:"未知",value:"23.4"},{name:"男性",value:"44.7"},{name:"女性",value:"0.8"}]}],newSeriesData=[],xData=totalData.map(e=>e.year).sort(function(e,a){return e-a}),legendData=totalData[0].data.map(e=>e.name),formatXData=[+xData[0]];for(;+formatXData[formatXData.length-1]<=+xData[xData.length-1];){const e=+formatXData[formatXData.length-1]+1;formatXData.push(e)}totalData.forEach(e=>{e.data.forEach(a=>{const t=newSeriesData.findIndex(n=>n.name===a.name);if(t>=0)newSeriesData[t].data.push([e.year,a.value]);else{const n={name:a.name,type:"line",data:[]};n.data.push([e.year,a.value]),newSeriesData.push(n)}})});const Xlabels=newSeriesData[0].data.map(e=>e[0]);option={tooltip:{trigger:"axis",formatter(e){let a=e[0].data[0]+"年";for(let t=0;t<e.length;t++)a+="<br>"+e[t].marker+e[t].seriesName+": "+e[t].data[1]+"%";return a}},color:["red","blue","green","purple"],legend:{orient:"vertical",itemHeight:15,itemWidth:15,icon:"rect",itemGap:10,data:legendData,left:"91%",x:"right",y:"center"},grid:{left:"10%",right:"10%",bottom:70,containLabel:!0},toolbox:{feature:{}},xAxis:{name:"年份",type:"category",boundaryGap:!0,axisTick:{alignWithLabel:!0},splitLine:{show:!1},axisLabel:{interval(e,a){if(Xlabels.includes(a))return!0},show:!0,textStyle:{fontSize:16}},data:formatXData},yAxis:[{type:"value",axisLabel:{show:!0,textStyle:{fontSize:14}}},{name:"（%）",position:"left",nameLocation:"center",nameGap:40,nameTextStyle:{fontSize:16}}],series:newSeriesData};
