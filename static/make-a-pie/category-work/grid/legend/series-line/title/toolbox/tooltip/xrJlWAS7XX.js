function f_dbqh(a,t){return a?(Math.pow(1+a,t)-1)/a:t}function f_debx(a,t,l){return t=t/12,l=l*12,a*t*Math.pow(1+t,l)/(Math.pow(1+t,l)-1)}var map=["当年房价","首付及贷款花费","房租年收益","房租总收益","投资年收益","投资总收益"],choose={房租年收益:!1,房租总收益:!1,投资年收益:!1,投资总收益:!1},datax=[],dataList={};map.map(function(a,t){dataList[t]=[]});function runData(){var a={fj_dz:.04,tz_ll:.06,fj:200,sf:.3,dk_type:1,dk_ll:.0539,dk_nx:30,zj_bl:.015,sjall:50};a.nfd=f_debx(a.fj*(1-a.sf),a.dk_ll,a.dk_nx)*12,a.sy_fz_all=0,a.sy_tz_all=0;for(var t=0;t<a.sjall;t++){var l=a.fj*Math.pow(1+a.fj_dz,t);a.zc_fd=a.nfd*(t>30?30:t),a.zc_fd_all=a.zc_fd+a.fj*a.sf,a.sy_fz=l*a.zj_bl,a.sy_fz_all+=a.sy_fz,a.sy_tz=a.zc_fd_all*a.tz_ll,a.sy_tz_all+=a.sy_tz,datax.push(t),dataList[0].push(~~l),dataList[1].push(~~a.zc_fd_all),dataList[2].push(a.sy_fz.toFixed(1)),dataList[3].push(~~a.sy_fz_all),dataList[4].push(a.sy_tz.toFixed(1)),dataList[5].push(~~a.sy_tz_all)}}runData(),option={title:{text:"堆叠区域图"},tooltip:{trigger:"axis"},legend:{data:map,selected:choose},toolbox:{feature:{saveAsImage:{}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:datax,axisLabel:{formatter:"第 {value} 年"}}],yAxis:[{type:"value",axisLabel:{formatter:"{value} 万"}}],series:map.map(function(a,t){return{name:map[t],type:"line",areaStyle:{normal:{}},label:{normal:{show:!0,position:"top"}},data:dataList[t]}})};
