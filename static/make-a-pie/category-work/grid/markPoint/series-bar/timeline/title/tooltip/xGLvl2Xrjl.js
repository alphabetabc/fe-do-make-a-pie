var colorList=["#2f54eb","#feb513","#30ca40","#a147eb","#fcec13","#8b572a","#e0109c","#fc605f","#50e3c2","#6879ff"],sum=function(e){return e.reduce(function(t,a,o,r){return t+a})},round=function(t,a){return Number(Math.round(t+"e"+a)+"e-"+a)},ratio=function(e,t){return e.map(function(a){return(round(a/t,3)*100).toFixed(1)})},riskList=[{level:"中",gender:"女",value:333333},{level:"中",gender:"男",value:555555},{level:"低",gender:"女",value:777777},{level:"高",gender:"男",value:66666},{level:"高",gender:"女",value:999999},{level:"低",gender:"男",value:222222}],man=riskList.filter(e=>e.gender==="男"),woman=riskList.filter(e=>e.gender==="女"),womanlist=[],manlist=[],orderRiskList=["高","中","低"];orderRiskList.forEach(e=>{var t=0;man.forEach(o=>{o.level===e&&(t=o.value)}),manlist.push(t);var a=0;woman.forEach(o=>{o.level===e&&(a=o.value)}),womanlist.push(a)});for(var mRatio=ratio(manlist,sum(manlist)),fRatio=ratio(womanlist,sum(womanlist)),mData=[],fData=[],blankData=[],i=0;i<orderRiskList.length;i++)mData.push({name:orderRiskList[i],value:isNaN(Number(mRatio[i]))?"":mRatio[i],value2:manlist[i],tooltip:{formatter:function(e){var t="";return t+="等级："+e.data.name+"</br>",t+="人数: "+Number(e.data.value2).toLocaleString()+"</br>",t+="占比: "+e.data.value+"%",t}}}),fData.push({name:orderRiskList[i],value:isNaN(Number(fRatio[i]))?"":fRatio[i],value2:womanlist[i],tooltip:{formatter:function(e){var t="";return t+="等级："+e.data.name+"</br>",t+="人数: "+Number(e.data.value2).toLocaleString()+"</br>",t+="占比: "+e.data.value+"%",t}}}),blankData.push({value:100,tooltip:{formatter:function(e){return""}}});option={baseOption:{title:{text:"不同性别下各个等级人数占比",left:"center",textStyle:{fontSize:18,fontWeight:700}},tooltip:{trigger:"item"},timeline:{show:!1,top:0,data:[]},grid:[{show:!1,left:"5%",top:"20",bottom:"20%",containLabel:!0,width:"37%"},{show:!1,left:"52%",top:"20",bottom:"20%",width:"0%"},{show:!1,right:"2%",top:"20",bottom:"20%",containLabel:!0,width:"37%"}],xAxis:[{type:"value",inverse:!0,axisLine:{show:!1},axisTick:{show:!1},position:"top",axisLabel:{show:!1},splitLine:{show:!1}},{gridIndex:1,show:!1},{gridIndex:2,axisLine:{show:!1},axisTick:{show:!1},position:"top",axisLabel:{show:!1},splitLine:{show:!1}}],yAxis:[{type:"category",inverse:!0,position:"right",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1},data:orderRiskList},{gridIndex:1,type:"category",inverse:!0,position:"left",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!0,textStyle:{color:"#333",fontSize:14}},data:orderRiskList.map(function(e){return{value:e,textStyle:{align:"center"}}})},{gridIndex:2,type:"category",inverse:!0,position:"left",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1},data:orderRiskList}],series:[]},options:[{series:[{type:"bar",xAxisIndex:0,yAxisIndex:0,itemStyle:{normal:{show:!1,color:"rgba(65, 217, 199, 0.1)",borderWidth:0},emphasis:{color:"rgba(65, 217, 199, 0.1)"}},barGap:"-100%",barWidth:"50%",data:blankData},{name:"男",type:"bar",xAxisIndex:0,yAxisIndex:0,itemStyle:{normal:{show:!0,color:function(e){return colorList[e.dataIndex]},borderWidth:0,borderColor:"#f8d517"}},label:{normal:{show:!0,formatter:e=>mData[e.dataIndex].value+"%",position:"left",textStyle:{color:"#223273",fontSize:14}}},barWidth:"50%",data:mData,markPoint:{symbol:"image://data:image/svg+xml;base64,PHN2ZyBpZD0i57uEXzI5MDgiIGRhdGEtbmFtZT0i57uEIDI5MDgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZpZXdCb3g9IjAgMCAzNi45OTkgNzEuNDgiPgogIDxkZWZzPgogICAgPHN0eWxlPgogICAgICAuY2xzLTEgewogICAgICAgIGZpbGw6IHVybCgjbGluZWFyLWdyYWRpZW50KTsKICAgICAgfQogICAgPC9zdHlsZT4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0ibGluZWFyLWdyYWRpZW50IiB4MT0iMC41IiB5MT0iLTAuMzU2IiB4Mj0iMC41IiB5Mj0iMSIgZ3JhZGllbnRVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giPgogICAgICA8c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiMxYmM4ZmMiIHN0b3Atb3BhY2l0eT0iMC43OCIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMwMTg0YjkiIHN0b3Atb3BhY2l0eT0iMC42OTQiLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgPC9kZWZzPgogIDxwYXRoIGlkPSLot6/lvoRfMjM1IiBkYXRhLW5hbWU9Iui3r+W+hCAyMzUiIGNsYXNzPSJjbHMtMSIgZD0iTTEyLjg5MSwxNDguMzc5QTE4Ljg3NiwxOC44NzYsMCwwLDAsMCwxNjYuNDg2djEyLjkyMWExLjE2NywxLjE2NywwLDAsMCwxLjE1NiwxLjE1Nkg3LjM5NHYxNS42YS45NzQuOTc0LDAsMCwwLC45NzguOTYzSDI4LjYyN2EuOTc0Ljk3NCwwLDAsMCwuOTc4LS45NjN2LTE1LjZoNC44MTZBMi41OCwyLjU4LDAsMCwwLDM3LDE3Ny45ODRWMTY1LjMzYzAtMTEuNjQ3LTEyLjEyMS0yMC43NDUtMjQuMTA4LTE2Ljk1MVoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgLTEyNS42NDkpIi8+CiAgPHBhdGggaWQ9Iui3r+W+hF8yMzYiIGRhdGEtbmFtZT0i6Lev5b6EIDIzNiIgY2xhc3M9ImNscy0xIiBkPSJNNzMuOCwxMC43QTEwLjc1LDEwLjc1LDAsMSwwLDYzLjA1OCwyMS40LDEwLjc0NCwxMC43NDQsMCwwLDAsNzMuOCwxMC43Wm0wLDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC00NC41NSkiLz4KPC9zdmc+Cg==",symbolSize:[25,50],label:{position:"right",padding:[0,0,0,10],fontSize:12,color:"#333333",formatter:"男"},data:[{name:"某个屏幕坐标",x:"30%",y:"85%"}],silent:!0}},{type:"bar",xAxisIndex:2,yAxisIndex:2,itemStyle:{normal:{show:!0,color:"rgba(65, 217, 199, 0.1)",borderWidth:0},emphasis:{color:"rgba(65, 217, 199, 0.1)"}},barGap:"-100%",barWidth:"50%",data:blankData},{name:"女",type:"bar",xAxisIndex:2,yAxisIndex:2,itemStyle:{normal:{show:!0,color:function(e){return colorList[e.dataIndex]},borderWidth:0,borderColor:"#f39c11"}},label:{normal:{show:!0,formatter:e=>fData[e.dataIndex].value+"%",position:"right",textStyle:{color:"#223273",fontSize:14}}},barWidth:"50%",data:fData,markPoint:{symbol:"image://data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgMzcuOTYgNjkuNSI+CiAgPGRlZnM+CiAgICA8c3R5bGU+CiAgICAgIC5jbHMtMSB7CiAgICAgICAgZmlsbDogdXJsKCNsaW5lYXItZ3JhZGllbnQpOwogICAgICB9CiAgICA8L3N0eWxlPgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJsaW5lYXItZ3JhZGllbnQiIHgxPSIwLjUiIHgyPSIwLjUiIHkyPSIxIiBncmFkaWVudFVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCI+CiAgICAgIDxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iIzAzZWJiNyIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMwMGEzN2YiIHN0b3Atb3BhY2l0eT0iMC42OTQiLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgPC9kZWZzPgogIDxnIGlkPSLnu4RfMjkwOSIgZGF0YS1uYW1lPSLnu4QgMjkwOSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wNjIpIj4KICAgIDxwYXRoIGlkPSLot6/lvoRfMjM3IiBkYXRhLW5hbWU9Iui3r+W+hCAyMzciIGNsYXNzPSJjbHMtMSIgZD0iTTc5LjQzNiwxMC40NjdBMTAuNTE4LDEwLjUxOCwwLDEsMCw2OC45MjUsMjAuOTM0LDEwLjUxMiwxMC41MTIsMCwwLDAsNzkuNDM2LDEwLjQ2N1ptMCwwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNDkuOTg2KSIvPgogICAgPHBhdGggaWQ9Iui3r+W+hF8yMzgiIGRhdGEtbmFtZT0i6Lev5b6EIDIzOCIgY2xhc3M9ImNscy0xIiBkPSJNMzcuNzg1LDE3Ni4wODNsLTUuNzU1LTIyLjVhMTMuNDE5LDEzLjQxOSwwLDAsMC0yNi4xODItLjIxN2wtNS44LDIyLjdhMy44MjUsMy44MjUsMCwwLDAsLjY2NywzLjIxOCwzLjc1OCwzLjc1OCwwLDAsMCwyLjkyOCwxLjQ3OXMyLjgyNy4wNTgsNS4wNi4wNzJjLjcyNSwyLjE0NiwxLjc4Myw1LjI5MiwyLjc1NCw4LjM1QTMuNzIxLDMuNzIxLDAsMCwwLDE1LDE5MS43NjloNy44NThhMy42NzcsMy42NzcsMCwwLDAsMy41MDgtMi41NTJjLjk3MS0zLjA1OSwyLjA1OS02LjMwNiwyLjc2OS04LjQ1MiwyLjIzMy0uMDE1LDUuMDYtLjAyOSw1LjA2LS4wMjlhMy43NjYsMy43NjYsMCwwLDAsMi45MjgtMS40NjQsMy42ODUsMy42ODUsMCwwLDAsLjY2Ny0zLjE4OVptMCwwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIC0xMjIuMjY5KSIvPgogIDwvZz4KPC9zdmc+Cg==",symbolSize:[25,50],label:{position:"right",padding:[0,0,0,10],fontSize:12,color:"#333333",formatter:"女"},data:[{name:"某个屏幕坐标",x:"70%",y:"85%"}],silent:!0}}]}]};
