var uploadedDataURL="/asset/get/s/data-1591770442335-Z1n28JXXX.json";$.getJSON(uploadedDataURL,function(w){for(var I=w.data.label,i=I.channels,A=I.location,u=[],o=0;o<i.length;o++){u[o]=[];for(var D=i[o].data,n=0;n<D.length;n++)D[n]==1&&u[o].push(n)}for(var o=0;o<u.length;o++){var d=u[o],h=d.length,s=i[o].drawData=[],v=end=d[0];if(h===i[o].data.length)end=d[h-1],s.push({start:v,end,duration:end-v});else if(h===0)s.push({start:v,end,duration:0});else{var c=1;do{for(var n=c;n<h;)d[n]-d[n-1]===1&&(end=d[n],n++);s.push({start:v,end,duration:end-v}),v=d[n],end=d[n],c=++n}while(c<h)}}var L=[];echarts.util.each(i,function(a,e){for(var t=0;t<a.drawData.length;t++){var r=a.drawData[t];r.duration>0&&L.push({name:a.name,value:[a.name,r.start,r.end,r.duration]})}});function Z(a,e){var t=e.value(0),r=e.coord([e.value(1),t]),l=e.coord([e.value(2),t]),m=e.size([0,1])[1]*.9,x={x:r[0],y:r[1]-m/2,width:l[0]-r[0],height:m};return{type:"rect",shape:x,style:{fill:"#660066"}}}var X=w.data.data,b=X.channels,C=X.location,E=120,p=1/0,y=-1/0,f=1/0,g=-1/0,s=[];b.forEach(function(a){for(var e=[],t=0;t<a.data.length;t++){p=Math.min(p,t),y=Math.max(y,t+1);var r=a.name,l=a.data[t];f=Math.min(f,l),g=Math.max(g,l),e.push(t,r,l)}s.push(e)}),option={tooltip:{trigger:"item",formatter:function(a){if(console.log(a,"params"),a[0].componentIndex===1){var a=a[0];return console.log(a),a.marker+a.name+"<br />start: "+a.value[1]+"<br />end: "+a.value[2]+"<br />duration: "+a.value[3]+"<br />"}}},xAxis:{offset:25,axisLine:{},min:p,max:y,splitLine:{show:!1}},yAxis:{type:"category",position:"left",splitLine:{show:!1}},grid:{left:"15%",height:850,bottom:"10%"},series:[{type:"custom",dimensions:["x","y"],renderItem:function(a,e){for(var t=[],r=0;r<s[a.dataIndex].length;){var l=e.value(r++),m=e.value(r++),x=e.value(r++),M=e.coord([l,m]);M[1]-=(x-f)/(g-f)*E-E*.5,t.push(M)}return{type:"polyline",z2:10,shape:{points:t},style:e.style({stroke:"#8dd3c7",lineWidth:2,fill:"none"}),styleEmphasis:{stroke:"blue"}}},data:s},{type:"custom",clip:!0,renderItem:Z,data:L,encode:{x:[1,2],y:0}}]},myChart.setOption(option)});
