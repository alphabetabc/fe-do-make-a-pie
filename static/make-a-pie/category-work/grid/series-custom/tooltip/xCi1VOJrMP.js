let zeroTime=new Date(new Date(new Date().toLocaleDateString()).getTime()),beforeSevenTime=new Date(zeroTime.getTime()-7*24*60*60*1e3);const hourOfMs=36e5;let Chart={Config:{y_font_color:"#60F194",x_font_color:"#fff",y_line_color:"#184483",x_line_color:"#184483",split_line_color:"rgba(0,53,115,0.6)"},createRect(e){let t=[{id:"running",name:"正在运行",color:"#7FFFCA"},{id:"error",name:"发生故障",color:"#FFF59D"},{id:"stop",name:"已经停止",color:"#FF7790"}],o=null;for(let i=0;i<t.length;i++)if(t[i].id===e.status){o=t[i];break}let n=e.readTime+e.duration;return{name:o.name,value:[e.index,e.readTime,n,e.duration],itemStyle:{normal:{color:o.color}}}},categories:["3#出水泵","2#出水泵","1#出水泵","4#提升泵","3#提升泵","2#提升泵","1#提升泵","2#细格栅机","1#细格栅机","2#粗格栅机","1#粗格栅机"]},datas=[{index:1,status:"stop",duration:hourOfMs*8,readTime:beforeSevenTime.getTime()+hourOfMs*3},{index:1,status:"stop",duration:hourOfMs*8,readTime:beforeSevenTime.getTime()+hourOfMs*24},{index:2,status:"stop",duration:hourOfMs*2,readTime:beforeSevenTime.getTime()+hourOfMs*4},{index:3,status:"running",duration:hourOfMs*5,readTime:beforeSevenTime.getTime()+hourOfMs*5},{index:4,status:"running",duration:hourOfMs*12,readTime:beforeSevenTime.getTime()+hourOfMs*16},{index:4,status:"running",duration:hourOfMs*8,readTime:beforeSevenTime.getTime()+hourOfMs*72},{index:4,status:"error",duration:hourOfMs*8,readTime:beforeSevenTime.getTime()+hourOfMs*80}],series_data=[];datas.forEach(e=>{let t=Chart.createRect(e);series_data.push(t)}),console.log(series_data),option={tooltip:{formatter:function(e){return e.marker+e.name}},grid:{top:"5%",bottom:"15%",right:"5%",left:"13%"},xAxis:{min:beforeSevenTime.getTime(),max:zeroTime.getTime(),interval:1e3*60*60*12,axisLabel:{formatter:function(e,t){let o=new Date(e);return o.getMonth()+1+"/"+o.getDate()+`
`+o.getHours()+":"+o.getMinutes()},textStyle:{color:Chart.Config.x_font_color,fontSize:"70%"}},axisLine:{lineStyle:{color:Chart.Config.x_line_color}},splitLine:{lineStyle:{color:Chart.Config.split_line_color,width:1,type:"solid"}}},yAxis:{data:Chart.categories,axisLabel:{textStyle:{color:"#5EF0FE",fontSize:"70%"}},axisLine:{lineStyle:{color:Chart.Config.y_line_color}},splitLine:{show:!0,lineStyle:{color:Chart.Config.split_line_color,width:1,type:"solid"}}},series:[{type:"custom",renderItem:function(e,t){let o=t.value(0),n=t.coord([t.value(1),o]),i=t.coord([t.value(2),o]),r=t.size([0,1])[1]*.9;console.log(t.value);let l=echarts.graphic.clipRectByRect({x:n[0],y:n[1]-r/2,width:i[0]-n[0],height:r},{x:e.coordSys.x,y:e.coordSys.y,width:e.coordSys.width,height:e.coordSys.height});return l&&{type:"rect",shape:l,style:t.style()}},encode:{x:[1,2],y:0},data:series_data}]};
