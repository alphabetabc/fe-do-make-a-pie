function resizeChart(){var l=$("body").width(),a=$("body").height();myChart.resize({width:l,height:a}),option.series=getSeries(),myChart.setOption(option,!0)}var data=[{name:"asdd_fact",code:"node1",value:{interfaceNum:"date ",kpiNum:"order",alarmNum:"cnt   "},x:.35,y:.65},{name:"asdd_t1",code:"node5",value:{interfaceNum:"date ",kpiNum:"order",alarmNum:"client"},x:.1,y:.65},{name:"date_cnt",code:"node2",value:{interfaceNum:"date",kpiNum:"cnt ",alarmNum:"xxx "},x:.55,y:.8},{name:"order_cnt",code:"node3",value:{interfaceNum:"client",kpiNum:"cnt   ",alarmNum:"xxx  "},x:.55,y:.5},{name:"client_cnt",code:"node4",value:{interfaceNum:"client",kpiNum:"cnt   ",alarmNum:"xxx  "},x:.8,y:.5}],links=[{source:"node1",target:"node2"},{source:"node5",target:"node1"},{source:"node1",target:"node3"},{source:"node3",target:"node4"}],line=3,column=4;function getScatterData(){for(var l=[],a=myChart.getWidth(),n=myChart.getHeight(),e=a/(column*2),t=n/(line*2),o=0;o<data.length;o++)l.push({name:data[o].name,value:[data[o].x,(data[o].y*n+3/8*t)/n],type:"title",w:e,h:t/4,label:{normal:{textStyle:{color:"#fff",fontWeight:"bold",fontSize:15}}}},{code:data[o].code,value:[data[o].x,(data[o].y*n+1/4*t-3/4*t/2)/n],type:"body",w:e,h:3/4*t,info:data[o].value,label:{normal:{textStyle:{color:"#000"}}}});return l}function getLinesData(){for(var l=[],a={},n=0;n<data.length;n++)a[data[n].code]=data[n];for(var n=0;n<links.length;n++){var e=a[links[n].source],t=a[links[n].target],o=myChart.getWidth(),i=myChart.getHeight(),r=o/(column*2),y=i/(line*2);e.top={x:e.x,y:(e.y*i+1/2*y)/i},e.right={x:(e.x*o+1/2*r)/o,y:e.y},e.bottom={x:e.x,y:(e.y*i-1/2*y)/i},e.left={x:(e.x*o-1/2*r)/o,y:e.y},t.top={x:t.x,y:(t.y*i+1/2*y)/i},t.right={x:(t.x*o+1/2*r)/o,y:t.y},t.bottom={x:t.x,y:(t.y*i-1/2*y)/i},t.left={x:(t.x*o-1/2*r)/o,y:t.y},e.right.x<t.left.x?l.push(getLine([[e.right.x,e.right.y],[t.left.x,t.left.y]])):e.left.x>t.right.x?l.push(getLine([[e.left.x,e.left.y],[t.right.x,t.right.y]])):e.bottom.y>t.top.y?l.push(getLine([[e.bottom.x,e.bottom.y],[t.top.x,t.top.y]])):e.top.y<t.bottom.y&&l.push(getLine([[e.top.x,e.top.y],[t.bottom.x,t.bottom.y]]))}return l}function getLine(l){return{name:"",type:"lines",coordinateSystem:"cartesian2d",symbol:["none","arrow"],symbolSize:10,zlevel:4,effect:{show:!0,period:4,trailLength:.5,color:"#7480BC",symbolSize:3},lineStyle:{normal:{color:"#B0C4DE",width:1,curveness:0}},data:[{coords:l}]}}function getSeries(){var l=[];return l.push({type:"scatter",symbol:"rect",zlevel:2,silent:!0,symbolSize:function(a,n){return[n.data.w,n.data.h]},itemStyle:{normal:{shadowBlur:10,shadowColor:"rgba(120, 36, 50, 0.5)",shadowOffsetY:5,color:function(a){return a.data.type=="title"?"#88359A":"#D8BFD8"}}},label:{normal:{show:!0,position:"inside",formatter:function(a){return a.data.type=="title"?a.data.name:"col1"+a.data.info.interfaceNum+`
col2`+a.data.info.kpiNum+`
col3`+a.data.info.alarmNum},textStyle:{color:"#000"}}},data:getScatterData()}),l.concat(getLinesData())}option=null,option={backgroundColor:"#F3F3F3",title:[{text:"流程图",x:"5%",y:0,textStyle:{color:"#333",fontStyle:"normal",fontWeight:"normal",fontFamily:"sans-serif",fontSize:14}}],tooltip:{},grid:{left:0,right:0,top:0,bottom:0},xAxis:{type:"value",splitLine:{show:!1},axisLabel:{show:!1},max:1,min:0},yAxis:{type:"value",splitLine:{show:!1},axisLabel:{show:!1},max:1,min:0},series:getSeries()};
