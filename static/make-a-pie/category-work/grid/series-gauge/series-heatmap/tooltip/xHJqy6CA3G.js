var min=0,max=100,secretNum=(Math.random()*100).toFixed(0),flag=0,categoryX=["0","1","2","3","4","5","6","7","8","9"],categoryY=["0","1","2","3","4","5","6","7","8","9","10"],data=function(){var e=[];for(i=0;i<11;i++)for(j=0;j<10;j++)i*10+j<101&&e.push([i,j,""+(i*10+j)]);return e}();guessNumData=data.map(function(e){return[e[1],e[0],e[2]||"-"]}),myChart.setOption(getOption(0,100)),myChart.on("click",function(e){e.seriesId==="guessPanel"&&flag==0&&guess(parseInt(e.data[2]))});function getOption(e,t){return option={tooltip:{show:!1},grid:{width:"30%",height:"90%",left:"10px",top:"10px"},xAxis:{show:!1,type:"category",data:categoryX,splitArea:{show:!0}},yAxis:{show:!1,type:"category",data:categoryY,splitArea:{show:!0}},series:[{id:"guess",center:["60%","50%"],zlevel:1,name:"numPuzzle",type:"gauge",radius:"70%",silent:!0,axisLabel:{show:!1,formatter:function(a){if(a==e||a==t)return a}},pointer:{show:!0},axisLine:{lineStyle:{width:"25",color:[[0,"#BEBEBE"],[e/100,"#BEBEBE"],[t/100,"#5BC49F"],[1,"#BEBEBE"]]}},detail:{formatter:"请猜一个"+e+"到"+t+"的整数",offsetCenter:[0,"10%"]},data:[{value:[{value:secretNum,name:"随机整数"}]}]},{id:"guessPanel",type:"heatmap",label:{normal:{show:!0}},data:guessNumData}]},option}function guess(e){var t;e==secretNum?(t="猜中了！！！",flag=1,renewEcharts(1,t,min,max)):e<min||e>max?(t="请猜"+min+"到"+max+"之间的数",renewEcharts(0,t,min,max)):e<secretNum?(min=e+1,t="猜小了，答案在"+min+"与"+max+"之间",renewEcharts(0,t,min,max)):(max=e-1,t="猜大了，答案在"+min+"与"+max+"之间",renewEcharts(0,t,min,max))}function renewEcharts(e,t,a,r){var o,s="#5BC49F";r-a<8?s="#B5495B":r-a<15?s="#FF7C7C":r-a<30&&(s="#FFDA43"),e==1?(o={series:{detail:{formatter:t}}},myChart.setOption(o)):(o={series:[{id:"guess",axisLine:{lineStyle:{color:[[0,"#BEBEBE"],[a/100,"#BEBEBE"],[r/100,s],[1,"#BEBEBE"]]}},detail:{formatter:t,color:s}},{id:"guessPanel",data:function(){var l=[];for(var n in guessNumData)parseInt(guessNumData[n][2])>=a&&parseInt(guessNumData[n][2])<=r&&l.push(guessNumData[n]);return l}()}]},myChart.setOption(o))}
