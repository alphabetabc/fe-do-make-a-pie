var uploadedDataURL="/asset/get/s/data-1482909900836-H1BC_1WHg.json";myChart.showLoading(),$.getJSON(uploadedDataURL,function(s){echarts.registerMap("shanghai",s),myChart.hideLoading();var m={黄浦区:[121.490317,31.222771],徐汇区:[121.43752,31.179973],长宁区:[121.4222,31.218123],静安区:[121.448224,31.229003],普陀区:[121.392499,31.241701],闸北区:[121.465689,31.25318],虹口区:[121.491832,31.26097],杨浦区:[121.522797,31.270755],闵行区:[121.375972,31.111658],宝山区:[121.489934,31.398896],嘉定区:[121.250333,31.383524],浦东新区:[121.567706,31.245944],金山区:[121.330736,30.724697],松江区:[121.223543,31.03047],青浦区:[121.113021,31.151209],奉贤区:[121.458472,30.912345],崇明县:[121.397516,31.626946]},r=[{name:"黄浦区",value:219},{name:"徐汇区",value:339},{name:"长宁区",value:412},{name:"静安区",value:429},{name:"普陀区",value:389},{name:"闸北区",value:352},{name:"虹口区",value:329},{name:"杨浦区",value:532},{name:"闵行区",value:299},{name:"宝山区",value:139},{name:"嘉定区",value:440},{name:"浦东新区",value:89},{name:"金山区",value:652},{name:"松江区",value:415},{name:"青浦区",value:329},{name:"奉贤区",value:752},{name:"崇明县",value:399}],v=1e3,f=0,h=100,p=0,n=function(e){for(var a=[],t=0;t<e.length;t++){var o=m[e[t].name];o&&a.push({name:e[t].name,value:o.concat(e[t].value)})}return a};option={backgroundColor:"#0f0c29",title:{text:"上海",subtext:"data from Map",x:"left",textStyle:{color:"#ccc"}},tooltip:{trigger:"item",backgroundColor:"rgba(12, 204, 104, 0.92)",borderColor:"#FFFFCC",showDelay:0,hideDelay:0,enterable:!0,transitionDuration:0,extraCssText:"z-index:100",formatter:function(e,a,t){var o="",u=e.name,c=e.value;return o="<span style='color:#fff;'>"+u+"</span><br/>数据："+c,o}},legend:{orient:"vertical",y:"bottom",x:"right",data:["credit_pm2.5"],textStyle:{color:"#fff"}},visualMap:{show:!0,min:0,max:1e3,left:"left",top:"bottom",text:["高","低"],calculable:!0,seriesIndex:[1],dimension:0,inRange:{color:["#0f0c29","#302b63","#24243e"]},textStyle:{color:"#fff"}},geo:{map:"shanghai",label:{emphasis:{show:!1}},roam:!0,layoutCenter:["50%","50%"],layoutSize:"95%",itemStyle:{normal:{color:"rgba(51, 69, 89, .5)",borderColor:"rgba(100,149,237,1)"},emphasis:{color:"rgba(37, 43, 61, .5)"}}},series:[{name:"credit_pm2.5",type:"scatter",coordinateSystem:"geo",data:n(r),symbolSize:function(e){return e[2]/30},label:{normal:{formatter:"{b}",position:"right",show:!0},emphasis:{show:!0}},itemStyle:{normal:{color:"#05C3F9"}}},{type:"map",map:"shanghai",geoIndex:0,aspectScale:.75,showLegendSymbol:!1,label:{normal:{show:!1},emphasis:{show:!1,textStyle:{color:"#fff"}}},roam:!0,itemStyle:{normal:{areaColor:"#031525",borderColor:"#3B5077"},emphasis:{areaColor:"#2B91B7"}},animation:!1,data:r},{name:"前五名",type:"effectScatter",coordinateSystem:"geo",data:n(r.sort(function(e,a){return a.value-e.value}).slice(0,5)),symbolSize:function(e){return e[2]/30},showEffectOn:"render",rippleEffect:{brushType:"stroke"},hoverAnimation:!0,label:{normal:{formatter:"{b}",position:"right",show:!0}},itemStyle:{normal:{color:"#eac736",shadowBlur:10,shadowColor:"#05C3F9"}},zlevel:1}]},myChart.setOption(option);var l=option.series[0].data.length,d=0;function i(){for(var e=0;e<l;e++)(function(a){ts=setTimeout(function(){myChart.dispatchAction({type:"showTip",seriesIndex:1,dataIndex:a})},5e3*a)})(e)}setTimeout(function(){i(),tv=setInterval(i,l*1e3)},500)});
