var uploadedDataURL="/asset/get/s/data-1482909900836-H1BC_1WHg.json";$.get(uploadedDataURL,h=>{echarts.registerMap("shanghai",h);const i=["宝山区","嘉定区","青浦区","松江区"],f=["浦东新区","奉贤区","闵行区"];var r={黄浦区:[121.490317,31.222771],徐汇区:[121.43752,31.179973],长宁区:[121.4222,31.218123],静安区:[121.448224,31.229003],普陀区:[121.392499,31.241701],闸北区:[121.465689,31.25318],虹口区:[121.491832,31.26097],杨浦区:[121.522797,31.270755],闵行区:[121.375972,31.111658],宝山区:[121.489934,31.398896],嘉定区:[121.250333,31.383524],浦东新区:[121.7795171,31.13357039],金山区:[121.330736,30.724697],松江区:[121.223543,31.03047],青浦区:[121.113021,31.151209],奉贤区:[121.458472,30.912345],崇明县:[121.397516,31.626946]};function m(e){return e.map(n=>Object.entries(r).filter(([t,o])=>t===n)[0][1]).reduce((n,t,o)=>{let[l,a]=n;return l=l||0,a=a||0,o===e.length-1?[(l+t[0])/(o+1),(a+t[1])/(o+1)]:[l+t[0],a+t[1]]},[])}r.北区=m(i),r.南区=m(f);function c(e){const s=[],n=Object.entries(r);return e.map((t,o)=>{const l=o===e.length-1?e[0]:e[o+1],a=i.includes(t)?{normal:{color:"cyan"}}:{};return{coords:[p(t),p(l)],lineStyle:a}})}function p(e){return Object.entries(r).filter(([s,n])=>s===e)[0][1]}const u=Object.entries(r).map(([e,s])=>({name:e,itemStyle:e==="南区"||e==="北区"?{color:"red"}:{},value:s.concat([parseInt(Math.random()*500)])}));option={backgroundColor:"#173b84",textStyle:{color:"#fff"},geo:{map:"shanghai",left:"center",top:"center",silent:!1,roam:!0,label:{show:!1},emphasis:{show:!1},itemStyle:{areaColor:"#4487d5",borderColor:"#3B5077",borderWidth:1,color:"green"}},series:[{type:"map",map:"shanghai",geoIndex:0,aspectScale:.75,showLegendSymbol:!1,roam:!0,animation:!1,emphasis:{show:!1}},{type:"effectScatter",coordinateSystem:"geo",zlevel:3,rippleEffect:{period:2,brushType:"fill",scale:5},label:{normal:{show:!0,position:"bottom",formatter:"{b}"}},symbol:"circle",symbolSize:function(e){return e[2]/30},itemStyle:{normal:{show:!0,color:"#FD916A"}},data:u},{type:"lines",zlevel:2,lineStyle:{normal:{type:"dotted",width:1,opacity:.4,color:"yellow",curveness:.3}},effect:{show:!0,loop:!0},data:[...c(["宝山区","松江区","青浦区","嘉定区"]),...c(["浦东新区","奉贤区","闵行区"])]}]},console.log(c(["宝山区","嘉定区","青浦区","松江区"])),myChart.setOption(option),console.log(myChart.getOption())});
