var geoJson={};getGeoJson(42e4);function getGeoJson(a){AMapUI.loadUI(["geo/DistrictExplorer"],t=>{var o=new t;o.loadAreaNode(a,function(r,s){if(r){console.error(r);return}let e=s.getSubFeatures();if(e.length>0)parentJson=e;else if(e.length===0&&(e=parentJson.filter(l=>{if(l.properties.adcode==a)return l}),e.length===0))return;geoJson=e,getMapData()})})}function getMapData(){const a=geoJson,t=geoJson.map(o=>({name:o.properties.name,value:[o.properties.center[0],o.properties.center[1],parseFloat((Math.random(.1,1)*1e3).toFixed(2))],adcode:o.properties.adcode,level:o.properties.level}));initEcharts(t)}function initEcharts(a){let t={features:geoJson};echarts.registerMap("map",t);const o=a.sort((e,l)=>l.value[2]-e.value[2]);let r=o[0],s=o.slice(1).map(e=>({fromName:e.name,toName:r.name,coords:[[e.value[0],e.value[1]],[r.value[0],r.value[1]]]}));myChart.setOption({backgroundColor:"#001a3a",tooltip:{},geo:{map:"map",roam:!0,itemStyle:{normal:{areaColor:"#17439a",borderColor:"#53D9FF",borderWidth:1.3,shadowBlur:15,shadowColor:"rgb(58,115,192)",shadowOffsetX:7,shadowOffsetY:6},emphasis:{areaColor:"#17439a"}},label:{normal:{show:!0,color:"#fff"},emphasis:{show:!0,color:"#fff"}},zoom:1},series:[{name:"城市",type:"effectScatter",data:o.slice(1),coordinateSystem:"geo",symbolSize:10,label:{normal:{show:!1},emphasis:{show:!1}},showEffectOn:"render",rippleEffect:{brushType:"stroke"},itemStyle:{normal:{color:"rgb(29,233,182)",shadowBlur:10,shadowColor:"rgb(58,115,192)"}},layoutCenter:["50%","50%"],layoutSize:430},{name:"No.1",type:"effectScatter",data:o.slice(0,1),coordinateSystem:"geo",symbolSize:25,label:{normal:{show:!1},emphasis:{show:!1}},showEffectOn:"render",rippleEffect:{brushType:"stroke"},itemStyle:{normal:{color:"#f4e925",shadowBlur:10,shadowColor:"rgb(58,115,192)"}},layoutCenter:["50%","50%"],layoutSize:430},{name:"航线",type:"lines",tooltip:{formatter:e=>e.marker+e.data.fromName+"-"+e.data.toName},zlevel:2,effect:{show:!0,period:5,trailLength:0,symbol:"arrow",symbolSize:6},lineStyle:{normal:{color:"#f4e925",width:1,opacity:1,curveness:.3}},data:s}]})}
