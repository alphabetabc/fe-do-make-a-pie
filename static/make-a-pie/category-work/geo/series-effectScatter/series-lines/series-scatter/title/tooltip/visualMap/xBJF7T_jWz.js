var geoCoordMap={上海:[121.4648,31.2891],尼日利亚:[-4.388361,11.186148],美国洛杉矶:[-118.24311,34.052713],香港邦泰:[114.195466,22.282751],美国芝加哥:[-87.801833,41.870975],加纳库马西:[-4.62829,7.72415],英国曼彻斯特:[-1.657222,51.886863],德国汉堡:[10.01959,54.38474],哈萨克斯坦阿拉木图:[45.326912,41.101891],俄罗斯伊尔库茨克:[89.116876,67.757906],巴西:[-48.678945,-10.493623],埃及达米埃塔:[31.815593,31.418032],西班牙巴塞罗纳:[2.175129,41.385064],柬埔寨金边:[104.88659,11.545469],意大利米兰:[9.189948,45.46623],乌拉圭蒙得维的亚:[-56.162231,-34.901113],莫桑比克马普托:[32.608571,-25.893473],阿尔及利亚阿尔及尔:[3.054275,36.753027],阿联酋迪拜:[55.269441,25.204514],匈牙利布达佩斯:[17.108519,48.179162],澳大利亚悉尼:[150.993137,-33.675509],美国加州:[-121.910642,41.38028],澳大利亚墨尔本:[144.999416,-37.781726],墨西哥:[-99.094092,19.365711],加拿大温哥华:[-123.023921,49.311753]},BJData=[[{name:"尼日利亚",value:9100},{name:"上海"}],[{name:"美国洛杉矶",value:2370},{name:"上海"}],[{name:"香港邦泰",value:3130},{name:"上海"}],[{name:"美国芝加哥",value:2350},{name:"上海"}],[{name:"加纳库马西",value:5120},{name:"上海"}],[{name:"英国曼彻斯特",value:3110},{name:"上海"}],[{name:"德国汉堡",value:6280},{name:"上海"}],[{name:"哈萨克斯坦阿拉木图",value:7255},{name:"上海"}],[{name:"俄罗斯伊尔库茨克",value:8125},{name:"上海"}],[{name:"巴西",value:3590},{name:"上海"}],[{name:"埃及达米埃塔",value:3590},{name:"上海"}],[{name:"西班牙巴塞罗纳",value:3590},{name:"上海"}],[{name:"柬埔寨金边",value:3590},{name:"上海"}],[{name:"意大利米兰",value:3590},{name:"上海"}],[{name:"乌拉圭蒙得维的亚",value:3590},{name:"上海"}],[{name:"莫桑比克马普托",value:3590},{name:"上海"}],[{name:"阿尔及利亚阿尔及尔",value:3590},{name:"上海"}],[{name:"阿联酋迪拜",value:3590},{name:"上海"}],[{name:"匈牙利布达佩斯",value:3590},{name:"上海"}],[{name:"澳大利亚悉尼",value:3590},{name:"上海"}],[{name:"美国加州",value:3590},{name:"上海"}],[{name:"澳大利亚墨尔本",value:3590},{name:"上海"}],[{name:"墨西哥",value:3590},{name:"上海"}],[{name:"加拿大温哥华",value:3590},{name:"上海"}]],convertData=function(e){for(var n=[],a=0;a<e.length;a++){var o=e[a],r=geoCoordMap[o[0].name],l=geoCoordMap[o[1].name];r&&l&&n.push([{coord:r,value:o[0].value},{coord:l}])}return n},color=["#a6c84c","#ffa022","#46bee9"],series=[];[["上海",BJData]].forEach(function(e,n){series.push({type:"lines",zlevel:2,effect:{show:!0,period:4,trailLength:.02,symbol:"arrow",symbolSize:5},lineStyle:{normal:{width:1,opacity:0,curveness:.3}},data:convertData(e[1])},{type:"effectScatter",coordinateSystem:"geo",zlevel:2,rippleEffect:{period:4,brushType:"stroke",scale:4},label:{normal:{show:!0,position:"right",offset:[5,0],formatter:"{b}"},emphasis:{show:!0}},symbol:"circle",symbolSize:function(a){return 4+a[2]/1e3},itemStyle:{normal:{show:!1,color:"#f00"}},data:e[1].map(function(a){return{name:a[0].name,value:geoCoordMap[a[0].name].concat([a[0].value])}})},{type:"scatter",coordinateSystem:"geo",zlevel:2,rippleEffect:{period:4,brushType:"stroke",scale:4},label:{normal:{show:!0,position:"right",color:"#00ffff",formatter:"{b}",textStyle:{color:"#00ffff"}},emphasis:{show:!0}},symbol:"pin",symbolSize:30,itemStyle:{normal:{show:!0,color:"#9966cc"}},data:[{name:e[0],value:geoCoordMap[e[0]].concat([100])}]})}),option={backgroundColor:"#404a59",title:{text:"上海",left:"center",textStyle:{color:"#fff",fontSize:24},padding:[20,20,20,20]},tooltip:{trigger:"item",backgroundColor:"rgba(12, 204, 104, 0.92)",borderColor:"#FFFFCC",showDelay:0,hideDelay:0,enterable:!0,transitionDuration:0,extraCssText:"z-index:100",formatter:function(e,n,a){var o="",r=e.name,l=e.value[e.seriesIndex+1];return o="<span style='color:#fff;'>"+r+"</span><br/>数据："+l,o}},visualMap:{min:0,max:1e4,calculable:!0,color:["#ff3333","orange","yellow","lime","aqua"],textStyle:{color:"#fff"}},geo:{map:"world",label:{emphasis:{show:!1}},roam:!0,layoutCenter:["50%","50%"],layoutSize:"140%",itemStyle:{normal:{color:"rgba(51, 69, 89, .5)",borderColor:"rgba(100,149,237,1)"},emphasis:{color:"rgba(37, 43, 61, .5)"}}},series};var counts=option.series[0].data.length,dataIndex=0;function autoHoverTip(){for(var e=0;e<counts;e++)(function(n){ts=setTimeout(function(){myChart.dispatchAction({type:"showTip",seriesIndex:1,dataIndex:n})},5e3*n)})(e)}setTimeout(function(){autoHoverTip(),tv=setInterval(autoHoverTip,counts*1e3)},500);
