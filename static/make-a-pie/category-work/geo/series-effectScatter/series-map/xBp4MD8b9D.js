var jiangsuMapJson="/asset/get/s/data-1641366415167-sVovDceF5.json",jiangsuOutline="/asset/get/s/data-1641366419439-UFsbPgpeW.json";function convertData(e){for(var r=[],l=0;l<e.length;l++){var a=cityCenter[e[l].name];a&&r.push({name:e[l].name,value:a.concat(e[l].value)})}return r}const cityCenter={南京市:[118.667413,31.841544],无锡市:[120.201663,31.474729],徐州市:[117.584811,34.261792],常州市:[119.646973,31.672752],苏州市:[120.419585,31.099379],南通市:[120.964608,32.116212],连云港市:[118.978821,34.500018],淮安市:[119.121265,33.497506],盐城市:[120.239998,33.277631],扬州市:[119.321003,32.693159],镇江市:[119.452753,31.954402],泰州市:[120.015176,32.384882],宿迁市:[118.375162,33.863008]};let regions=[{name:"南京市",itemStyle:{areaColor:{type:"radial",x:.5,y:.5,r:.5,colorStops:[{offset:0,color:"rgba(8, 114, 204, 1)"},{offset:1,color:"rgba(83, 190, 236, 0.8)"}],global:!1},color:"red"}},{name:"徐州市",itemStyle:{areaColor:{type:"radial",x:.5,y:.5,r:.5,colorStops:[{offset:0,color:"rgba(22, 159, 255, 1)"},{offset:1,color:"rgba(22, 159, 255, 0.7)"}],global:!1},color:"red"}},{name:"盐城市",itemStyle:{areaColor:{type:"radial",x:.5,y:.5,r:.5,colorStops:[{offset:0,color:"rgba(8, 114, 204, 1)"},{offset:1,color:"rgba(8, 114, 204, 0.8)"}],global:!1},color:"red"}},{name:"南通市",itemStyle:{areaColor:{type:"radial",x:.5,y:.5,r:.5,colorStops:[{offset:0,color:"rgba(8, 114, 204, 0.9)"},{offset:1,color:"rgba(8, 114, 204, 0.7)"}],global:!1},color:"red"}},{name:"淮安市",itemStyle:{areaColor:{type:"radial",x:.5,y:.5,r:.5,colorStops:[{offset:0,color:"rgba(22, 159, 255, 0.9)"},{offset:1,color:"rgba(22, 159, 255, 0.65)"}],global:!1},color:"red"}},{name:"扬州市",itemStyle:{areaColor:{type:"radial",x:.5,y:.5,r:.5,colorStops:[{offset:0,color:"rgba(14, 64, 157, 0.9)"},{offset:1,color:"rgba(14, 64, 157, 0.8)"}],global:!1},color:"red"}},{name:"宿迁市",itemStyle:{areaColor:{type:"radial",x:.5,y:.5,r:.5,colorStops:[{offset:0,color:"rgba(14, 64, 157, 0.5)"},{offset:1,color:"rgba(14, 64, 157, 0.3)"}],global:!1},color:"red"}},{name:"常州市",itemStyle:{areaColor:{type:"radial",x:.5,y:.5,r:.5,colorStops:[{offset:0,color:"rgba(14, 64, 157, 0.8)"},{offset:1,color:"rgba(14, 64, 157, 0.7)"}],global:!1},color:"red"}},{name:"苏州市",itemStyle:{areaColor:{type:"radial",x:.5,y:.5,r:.5,colorStops:[{offset:0,color:"rgba(35, 209, 255, 0.9)"},{offset:1,color:"rgba(35, 209, 255, 0.7)"}],global:!1}}},{name:"无锡市",itemStyle:{areaColor:{type:"radial",x:.5,y:.5,r:.5,colorStops:[{offset:0,color:"rgba(35, 209, 255, 1)"},{offset:1,color:"rgba(35, 209, 255, 0.8)"}],global:!1}}},{name:"镇江市",itemStyle:{areaColor:{type:"radial",x:.5,y:.5,r:.5,colorStops:[{offset:0,color:"rgba(35, 209, 255, 0.9)"},{offset:1,color:"rgba(35, 209, 255, 0.8)"}],global:!1}}},{name:"泰州市",itemStyle:{areaColor:{type:"radial",x:.5,y:.5,r:.5,colorStops:[{offset:0,color:"rgba(35, 242, 255, 0.9)"},{offset:1,color:"rgba(35, 242, 255, 0.7)"}],global:!1}}},{name:"连云港市",itemStyle:{areaColor:{type:"radial",x:.5,y:.5,r:.5,colorStops:[{offset:0,color:"rgba(35, 242, 255, 0.9)"},{offset:1,color:"rgba(35, 242, 255, 0.7)"}],global:!1}}}];const aspectScale=1.2,zoom=1;function getRandomNum(e,r){return Math.floor(Math.random()*(r-e))+e}const dataMap=[{name:"南京市",value:getRandomNum(0,100)},{name:"无锡市",value:getRandomNum(0,100)},{name:"徐州市",value:getRandomNum(0,100)},{name:"常州市",value:getRandomNum(0,100)},{name:"苏州市",value:getRandomNum(0,100)},{name:"南通市",value:getRandomNum(0,100)},{name:"连云港市",value:getRandomNum(0,100)},{name:"淮安市",value:getRandomNum(0,100)},{name:"盐城市",value:getRandomNum(0,100)},{name:"扬州市",value:getRandomNum(0,100)},{name:"镇江市",value:getRandomNum(0,100)},{name:"泰州市",value:getRandomNum(0,100)},{name:"宿迁市",value:getRandomNum(0,100)}];$.getJSON(jiangsuMapJson,function(e){$.getJSON(jiangsuOutline,function(r){echarts.registerMap("jiangsu",e),echarts.registerMap("jiangsuOutline",r),echarts.registerMap("jiangsuOutline2",r);let l={geo:[{name:"jiangsu",map:"jiangsu",roam:!1,zoom,z:199,aspectScale,scaleLimit:{min:.5,max:2},label:{normal:{show:!0,color:"#fff",fontSize:15},emphasis:{show:!0,color:"#fff",fontSize:15}},itemStyle:{normal:{borderColor:"#17caf0",borderWidth:2,borderType:"solid"}},emphasis:{itemStyle:{areaColor:"rgba(14,64,157,1)",shadowColor:"rgba(254,240,59,0.7)",shadowBlur:30,borderColor:"rgba(254,240,59,0.6)",borderWidth:2}},regions}],series:[{type:"map",map:"jiangsuOutline",aspectScale,zoom,z:99,roam:!0,scaleLimit:{min:.5,max:2},itemStyle:{normal:{shadowColor:"rgba(85,184,247,0.2)",shadowOffsetX:-10,shadowOffsetY:10,areaColor:"transparent",borderColor:"#17caf0",borderWidth:2,borderType:"solid"}},label:{normal:{show:!1},emphasis:{show:!1}}},{type:"map",map:"jiangsuOutline2",aspectScale,zoom,z:99,roam:!0,scaleLimit:{min:.5,max:2},itemStyle:{normal:{shadowColor:"rgba(85,184,247,0.2)",shadowOffsetX:-20,shadowOffsetY:20,areaColor:"transparent",borderColor:"#17caf0",borderWidth:2,borderType:"solid"}},label:{normal:{show:!1},emphasis:{show:!1}}},{type:"effectScatter",name:"Top 5",legendHoverLink:!0,coordinateSystem:"geo",data:convertData(dataMap.sort(function(a,o){return o.value-a.value}).slice(0,20)),symbolSize:15,showEffectOn:"render",rippleEffect:{brushType:"stroke"},hoverAnimation:!0,geoIndex:0,label:{normal:{formatter:"{b}",position:"left",show:!1}},itemStyle:{normal:{color:"rgba(255, 225, 0, 1)",shadowBlur:8,shadowColor:"rgba(255, 225, 0, 1)"}},zlevel:1}],animation:!1};myChart.setOption(l),myChart.on("georoam",function(a){var o=myChart.getOption();a.zoom!=null&&a.zoom!=null&&(o.geo[0].zoom=o.series[0].zoom),o.geo[0].center=o.series[0].center,myChart.setOption(o)}),myChart.on("mouseover",function(a){let o=[];for(let t in cityCenter)t==a.name&&(o=cityCenter[t]);var s=myChart.getModel().getSeriesByIndex(0),n=s.coordinateSystem,f=n.dataToPoint(o);console.log(f)})})});
