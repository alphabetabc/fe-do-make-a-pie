var avg=45,colors=["#77f90b","#0efffe","#fada37","#fd4747"],geoCoordMap={房山区:[115.928155,39.697183],昌平区:[116.247808,40.247465],大兴区:[116.392687,39.375762],密云区:[117.008996,40.520052],顺义区:[116.756034,40.137236],东城区:[116.418757,39.917544],西城区:[116.366794,39.915309],朝阳区:[116.756034,40.137236],石景区:[116.195445,39.914601],丰台区:[116.286968,39.863642],石家庄市:[114.502461,38.045474],邯郸市:[114.490686,36.612273],沧州市:[116.857461,38.310582],廊坊市:[116.704441,39.523927],保定市:[115.482331,38.867657],承德市:[117.939152,40.976204],西青区:[117.012247,39.139446],武清区:[117.057959,39.376925],东丽区:[117.313967,39.087764]},BJData={eare1:[[{name:"丰台区"},{name:"石家庄市",value:45}],[{name:"丰台区"},{name:"廊坊市",value:70}],[{name:"丰台区"},{name:"廊坊市",value:170}],[{name:"丰台区"},{name:"保定市",value:170}]],eare2:[[{name:"丰台区"},{name:"西青区",value:100}],[{name:"丰台区"},{name:"武清区",value:150}],[{name:"丰台区"},{name:"东丽区",value:50}]]},convertData=function(r){var e=[];for(let s in r)for(var a=r[s],n=parseInt(s.replace("eare","")),t=0;t<a.length;t++){var o=a[t],l=myChart.convertToPixel({geoIndex:0},geoCoordMap[o[0].name]);l=myChart.convertFromPixel("grid",l);var i=myChart.convertToPixel({geoIndex:n},geoCoordMap[o[1].name]);i=myChart.convertFromPixel("grid",i),e.push({coords:[l,i],value:o[1].value,fromName:o[0].name,toName:o[1].name})}return e},option={backgroundColor:"#edf7f7",tooltip:{trigger:"item",backgroundColor:"rgba(0, 0, 0, 0.3)",borderColor:"#ffc",enterable:!0,padding:[0,10],formatter:function(r){var e=r.name,a=r.value[2];if(!(e==null||a==null)){var n="";return n="<span style='color:#fff;'>"+e+"</span><br/>数据："+a,n}}},xAxis:{type:"value",show:!1,min:0,max:100,position:"top"},yAxis:{type:"value",show:!1,min:0,max:100,inverse:!0},geo:[{id:"北京",map:"北京",roam:!1,center:[117.6,40.3],zoom:.8,label:{normal:{show:!0,textStyle:{color:"rgb(249, 249, 249)",fontSize:12,fontFamily:"Arial"}},emphasis:{color:"#43d0d6"}},itemStyle:{normal:{color:"rgba(1, 57, 84, .8)",borderColor:"#516a89",borderWidth:1},emphasis:{color:"rgba(1, 57, 84, 0.9)"}}},{id:"河北",map:"河北",roam:!1,center:[112,37],zoom:.7,label:{normal:{show:!1,textStyle:{color:"rgb(249, 249, 249)",fontSize:10,fontFamily:"Arial"}},emphasis:{color:"transparent"}},itemStyle:{normal:{color:"rgba(1, 57, 84, .8)",borderColor:"#516a89",borderWidth:1},emphasis:{color:"rgba(1, 57, 84, 0.9)"}}},{id:"天津",map:"天津",roam:!1,center:[115.9,39.6],zoom:.7,label:{normal:{show:!1,textStyle:{color:"rgb(249, 249, 249)",fontSize:10,fontFamily:"Arial"}},emphasis:{color:"transparent"}},itemStyle:{normal:{color:"rgba(1, 57, 84, .8)",borderColor:"#516a89",borderWidth:1},emphasis:{color:"rgba(1, 57, 84, 0.9)"}}}],series:[]};setTimeout(function(){myChart.setOption({series:[{type:"lines",coordinateSystem:"cartesian2d",xAxisIndex:0,yAxisIndex:0,zlevel:2,effect:{show:!0,period:4,trailLength:.04,symbol:"arrow",symbolSize:7,color:"#fff"},lineStyle:{normal:{color:function(r){var e=r.value;if(e>0&&e<=avg)return colors[0];if(e>avg&&e<=2*avg)return colors[1];if(e>2*avg&&e<=3*avg)return colors[2]},width:1,opacity:1,curveness:.3}},data:convertData(BJData)},{type:"effectScatter",coordinateSystem:"cartesian2d",zlevel:3,rippleEffect:{period:4,brushType:"stroke",scale:4},label:{normal:{show:!0,position:"right",offset:[5,0],formatter:function(r){return r.data.name},fontSize:13},emphasis:{show:!0,label:{show:!0}}},symbol:"circle",symbolSize:function(r){return 10},itemStyle:{normal:{show:!1,color:function(r){var e=r.value[2];if(e>0&&e<=avg)return colors[0];if(e>avg&&e<=2*avg)return colors[1];if(e>2*avg&&e<=3*avg)return colors[2]}}},data:convertData(BJData).map(function(r){return{name:r.toName,value:r.coords[1].concat([r.value])}})}]})},10);
