var name_title="Top Province of Total Population in China",subname="虚拟数据(随便写的)",nameColor="#4444FF",name_fontFamily="等线",name_fontSize=25,subname_fontSize=15,mapName="china",data=[{name:"北京",value:1314},{name:"天津",value:314},{name:"河北",value:1628},{name:"山西",value:314},{name:"内蒙古",value:156},{name:"辽宁",value:687},{name:"吉林",value:520},{name:"黑龙江",value:441},{name:"上海",value:1212},{name:"江苏",value:2999},{name:"浙江",value:2102},{name:"安徽",value:717},{name:"福建",value:689},{name:"江西",value:654},{name:"山东",value:2431},{name:"河南",value:1014},{name:"湖北",value:715},{name:"湖南",value:515},{name:"广东",value:3841},{name:"广西",value:355},{name:"海南",value:874},{name:"重庆",value:697},{name:"四川",value:610},{name:"贵州",value:254},{name:"云南",value:647},{name:"西藏",value:56},{name:"陕西",value:650},{name:"甘肃",value:164},{name:"青海",value:221},{name:"宁夏",value:124},{name:"新疆",value:78},{name:"香港",value:0},{name:"澳门",value:0},{name:"台湾",value:0}];myChart.showLoading();var mapFeatures=echarts.getMap(mapName).geoJson.features;myChart.hideLoading();var geoCoordMap={};mapFeatures.forEach(function(e){var a=e.properties.name;geoCoordMap[a]=e.properties.cp});var max=4e3,min=10,maxSize4Pin=100,minSize4Pin=20,yData=[],barData=data.filter(function(e){return e.value>0});barData=barData.sort(function(e,a){return a.value-e.value});for(var j=0;j<barData.length;j++)j<10?yData.push("0"+j+barData[j].name):yData.push(j+barData[j].name);var option={title:{text:name_title,subtext:subname,left:"300",top:30,textStyle:{color:nameColor,fontFamily:name_fontFamily,fontSize:name_fontSize},subtextStyle:{fontSize:subname_fontSize,fontFamily:name_fontFamily}},tooltip:{trigger:"item",formatter:function(e){var a="";return e.name==="南海诸岛"?a="":typeof e.value[2]>"u"?a=e.value===0?"":transferProvinceName(e.name)+": "+e.value:a=transferProvinceName(e.name)+": "+e.value[2],a}},visualMap:{show:!0,min:0,max:4500,left:"left",top:"bottom",text:["High","Low"],calculable:!0,seriesIndex:[1],inRange:{color:["#EFEFFF","#4444FF"]}},grid:{right:25,top:80,bottom:20,width:"200"},xAxis:{show:!1},yAxis:{type:"category",inverse:!0,nameGap:16,axisLine:{show:!1,lineStyle:{color:"#ddd"}},axisTick:{show:!1,lineStyle:{color:"#ddd"}},axisLabel:{interval:0,margin:105,textStyle:{align:"left",fontSize:14},rich:{a:{color:"#fff",backgroundColor:"#f0515e",width:20,height:20,align:"center",borderRadius:2},b:{color:"#fff",backgroundColor:"#24a5cd",width:20,height:20,align:"center",borderRadius:2},x:{color:"#f0515e"},y:{color:"#24a5cd"}},formatter:function(e){return parseInt(e.slice(0,2))<3?["{a|"+(parseInt(e.slice(0,2))+1)+"}  {x|"+transferProvinceName(e.slice(2))+"}"].join(`
`):["{b|"+(parseInt(e.slice(0,2))+1)+"}  {y|"+transferProvinceName(e.slice(2))+"}"].join(`
`)}},data:yData},geo:{show:!0,map:mapName,top:100,left:"left",right:"350",label:{normal:{show:!1},emphasis:{show:!1}},roam:!0,itemStyle:{},regions:[{name:"南海诸岛",value:0,itemStyle:{normal:{areaColor:"#EFEFFF",opacity:1,label:{show:!1}}}}]},series:[{name:"散点图",type:"scatter",coordinateSystem:"geo",data:convertData(data),symbolSize:function(e){return e[2]/100},label:{normal:{formatter:function(e){return transferProvinceName(e.name)||""},position:"right",show:!0},emphasis:{show:!0}},itemStyle:{normal:{color:"#4444FF"}}},{type:"map",map:mapName,geoIndex:0,aspectScale:.75,showLegendSymbol:!1,label:{normal:{show:!0},emphasis:{show:!1,textStyle:{color:"#fff"}}},roam:!0,animation:!1,data},{name:"气泡散点图",type:"scatter",coordinateSystem:"geo",symbol:"pin",symbolSize:function(e){if(e[2]===0)return 0;var a=(maxSize4Pin-minSize4Pin)/(max-min),n=maxSize4Pin-a*max;return a*e[2]+n*1.2},label:{normal:{show:!0,formatter:function(e){return e.data.value[2]},textStyle:{color:"#fff",fontSize:9}}},itemStyle:{normal:{color:"#F62157"}},zlevel:6,data:convertData(data)},{name:"Top 5",type:"effectScatter",coordinateSystem:"geo",data:convertData(data.sort(function(e,a){return a.value-e.value}).slice(0,5)),symbolSize:function(e){return e[2]/120},showEffectOn:"render",rippleEffect:{brushType:"stroke"},hoverAnimation:!0,label:{normal:{formatter:function(e){return transferProvinceName(e.name)||""},position:"right",show:!1}},itemStyle:{normal:{color:"yellow",shadowBlur:10,shadowColor:"yellow"}},zlevel:1},{name:"柱状图",type:"bar",roam:!1,visualMap:!1,barMaxWidth:20,zlevel:2,barGap:0,itemStyle:{normal:{color:function(e){var a=[{colorStops:[{offset:0,color:"#f0515e"},{offset:1,color:"#ef8554"}]},{colorStops:[{offset:0,color:"#3c38e4"},{offset:1,color:"#24a5cd"}]}];return e.dataIndex<3?a[0]:a[1]}},emphasis:{color:"#f0515e"}},label:{normal:{show:!0,position:"right",textBorderWidth:0}},data:barData}]};myChart.setOption(option);function transferProvinceName(e){var a=["Shanghai","Hebei","Shanxi","Neimenggu","Liaoning","Jilin","Heilongjiang","Jiangsu","Zhejiang","Anhui","Fujian","Jiangxi","Shandong","Henan","Hubei","Hunan","Guangdong","Guangxi","Hainan","Sichuan","Guizhou","Yunnan","Xizang","Shanxi1","Gansu","Qinghai","Ningxia","Xinjiang","Beijing","Tianjin","Chongqing","Xianggang","Aomen","Taiwan"],n=["上海","河北","山西","内蒙古","辽宁","吉林","黑龙江","江苏","浙江","安徽","福建","江西","山东","河南","湖北","湖南","广东","广西","海南","四川","贵州","云南","西藏","陕西","甘肃","青海","宁夏","新疆","北京","天津","重庆","香港","澳门","台湾"],t=a[n.indexOf(e)];return t||""}function convertData(e){for(var a=[],n=0;n<e.length;n++){var t=geoCoordMap[e[n].name];t&&a.push({name:e[n].name,value:t.concat(e[n].value)})}return a}
