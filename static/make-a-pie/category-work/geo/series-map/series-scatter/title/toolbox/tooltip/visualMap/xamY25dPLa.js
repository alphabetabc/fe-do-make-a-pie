var name_title="2020年云梦山游客来源河南省统计",subname="数据来自奇镜科技",nameColor=" rgb(55, 75, 113)",name_fontFamily="等线",subname_fontSize=15,name_fontSize=18,uploadedDataURL="/asset/get/s/data-1483664927969-r1dX0P2Sl.json",nameMap="河南省";window.dataList=[{name:"郑州市",value:19},{name:"濮阳市",value:18},{name:"安阳市",value:17},{name:"平顶山市",value:8},{name:"开封市",value:6},{name:"洛阳市",value:1},{name:"周口市",value:1},{name:"许昌市",value:1}];var toolTipData=[{name:"郑州市",value:19},{name:"濮阳市",value:18},{name:"安阳市",value:17},{name:"平顶山市",value:8},{name:"开封市",value:6},{name:"洛阳市",value:1},{name:"周口市",value:1},{name:"许昌市",value:1}],geoCoordMap={},max=2e3,min=1,maxSize4Pin=100,minSize4Pin=40,convertData=function(o){console.log("data",o);for(var r=[],n=0;n<o.length;n++){var a=geoCoordMap[o[n].name];a&&r.push({name:o[n].name,value:a.concat(o[n].value)})}return console.log("res",r),r};$.get(uploadedDataURL,function(o){echarts.registerMap(nameMap,o),myChart.showLoading();var r=echarts.getMap(nameMap).geoJson.features;myChart.hideLoading(),r.forEach(function(a){var t=a.properties.name;geoCoordMap[t]=a.properties.cp}),console.log(geoCoordMap);var n={title:{text:name_title,subtext:subname,x:"center",textStyle:{color:nameColor,fontFamily:name_fontFamily,fontSize:name_fontSize},subtextStyle:{fontSize:subname_fontSize,fontFamily:name_fontFamily}},backgroundColor:"#fff",grid:{right:"10%",bottom:"3%",width:"20%",height:"50%"},tooltip:{formatter:function(a){if(typeof a.value[2]>"u"){for(var t="",e=0;e<toolTipData.length;e++)a.name==toolTipData[e].name&&(t+=toolTipData[e].name+":"+toolTipData[e].value+"人");return t}else{for(var t="",e=0;e<toolTipData.length;e++)a.name==toolTipData[e].name&&(t+=toolTipData[e].name+":"+toolTipData[e].value+"人");return t}}},visualMap:[{show:!0,min:1,max:1e3,left:"left",top:"bottom",text:["高","低"],calculable:!0,seriesIndex:[0],inRange:{color:["#74add1","#ffd768","#ff8c71","#ff5428","#7f1100"]}},{show:!0,min:1,max:1e3,left:"left",top:"bottom",text:["高","低"],calculable:!0,seriesIndex:[1],inRange:{color:["#0b9df0","#74add1","#ffd768","#ff8c71","#ff5428","#7f1100"]}}],toolbox:{show:!0,orient:"vertical",left:"right",top:"center",feature:{saveAsImage:{}}},geo:{show:!0,map:nameMap,label:{normal:{show:!0},emphasis:{show:!1}},roam:!0,itemStyle:{normal:{areaColor:"#ffffff",borderColor:"#3B5077"},emphasis:{areaColor:"#2B91B7"}}},series:[{name:"十一游客来源",type:"map",map:nameMap,roam:!1,geoIndex:0,data:window.dataList},{name:"点",type:"scatter",coordinateSystem:"geo",symbol:"pin",symbolSize:function(a){var t=(maxSize4Pin-minSize4Pin)/(max-min),e=minSize4Pin-t*min;return e=maxSize4Pin-t*max,t*a[2]+e},label:{normal:{formatter:function(a){return a.data.value[2]},show:!0,textStyle:{color:"#fff",fontSize:9}}},itemStyle:{normal:{color:"#F62157"}},zlevel:6,data:convertData(window.dataList)}]};myChart.setOption(n,!0)});
