var uploadedDataURL="/asset/get/s/data-1584539897741-awremJ0P_.json";myChart.showLoading(),$.get("/asset/get/s/data-1584530867563-fUXCJiNUK.json",function(p){echarts.registerMap("SGP",p),$.get(uploadedDataURL,function(d){myChart.hideLoading();var a=JSON.parse(d),r={},o={};Object.keys(a).forEach(function(e){r[a[e]]||(r[a[e].Hospital]=[a[e].HospitalLongitude,a[e].HospitalLatitude]),o[a[e].Hospital]?(o[a[e].Hospital].num+=1,a[e].IsRecovered&&(o[a[e].Hospital].details.isRecovered+=1),a[e].IsLocal&&(o[a[e].Hospital].details.isLocal+=1)):o[a[e].Hospital]={num:1,details:{isRecovered:a[e].IsRecovered?1:0,isLocal:a[e].IsLocal?1:0}}});var s=[];Object.keys(o).forEach(function(e){s.push({name:e,value:o[e].num,details:o[e].details})});var l=function(e){for(var i=[],t=0;t<e.length;t++){var n=r[e[t].name];n&&i.push({name:e[t].name,value:n.concat(e[t].value).concat(e[t].details)})}return i};option={backgroundColor:"#404a59",title:{text:"Singapore Covid-19",left:"right"},tooltip:{trigger:"item"},visualMap:{left:"right",min:0,max:300,inRange:{color:["#abd9e9","#e0f3f8","#ffffbf","#fee090","#fdae61","#f46d43","#d73027","#a50026"]},text:["High","Low"],calculable:!0},toolbox:{show:!0,left:"left",top:"top",feature:{dataView:{readOnly:!1},restore:{},saveAsImage:{}}},geo:{map:"SGP",label:{emphasis:{show:!1}},roam:!0,itemStyle:{normal:{areaColor:"#323c48",borderColor:"#111"},emphasis:{areaColor:"#2a333d"}}},series:[{name:"Covid-19",type:"heatmap",coordinateSystem:"geo",data:l(s)},{name:"Point",type:"scatter",coordinateSystem:"geo",data:l(s),symbolSize:function(e){return 5+Math.log2(e[2])},label:{normal:{formatter:"{b}",position:"right",show:!1},emphasis:{show:!0}},itemStyle:{normal:{color:"#ddb926"}},tooltip:{trigger:"item",formatter:function(e){var i=e.value[3],t="";return t='<div style="width:280px;height:180px;background:rgba(22,80,158,0.8);border:1px solid rgba(7,166,255,0.7)"><div style="width:100%;height:40px;line-height:40px;border-bottom:2px solid rgba(7,166,255,0.7);padding:0 0"><span style="margin-left:10px;color:#fff;font-size:16px;">'+e.name+'</span></div><div style="padding:20px"><p style="color:#fff;font-size:12px;"><i style="display:inline-block;width:10px;height:10px;background:#16d6ff;border-radius:40px;margin:0 8px"></i>Num：<span style="color:#11ee7d;margin:0 6px;">'+e.value[2]+'</span></p><p style="color:#fff;font-size:12px;"><i style="display:inline-block;width:10px;height:10px;background:#16d6ff;border-radius:40px;margin:0 8px"></i>IsRecovered：<span style="color:#11ee7d;margin:0 6px;">'+i.isRecovered+'</span></p><p style="color:#fff;font-size:12px;"><i style="display:inline-block;width:10px;height:10px;background:#16d6ff;border-radius:40px;margin:0 8px"></i>IsLocal：<span style="color:#11ee7d;margin:0 6px;">'+i.isLocal+"</span></p></div></div>",t}}}]},myChart.setOption(option)})});
