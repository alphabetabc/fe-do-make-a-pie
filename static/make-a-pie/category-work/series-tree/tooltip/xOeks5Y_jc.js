myChart.showLoading();var data=[{children:[{children:[{children:[{children:[],name:"子部门XXX",hasChild:!0}],name:"部门A"}],name:"分公司A"},{children:[{children:[],name:"部门",hasChild:!0}],name:"分公司B"}],name:"总部"}];console.log(data),myChart.hideLoading(),myChart.setOption(option={tooltip:{trigger:"item",triggerOn:"mousemove"},series:[{type:"tree",data,initialTreeDepth:1,top:"1%",left:"7%",bottom:"1%",right:"20%",symbolSize:7,label:{normal:{position:"left",verticalAlign:"middle",align:"right",fontSize:9}},leaves:{label:{normal:{position:"right",verticalAlign:"middle",align:"left"}}},expandAndCollapse:!0,animationDuration:0,animationDurationUpdate:0}]}),clickFun=function(e){if(console.log(e.seriesIndex),!(typeof e.seriesIndex>"u")&&e.type=="click"){if(!e.data.hasChild){console.log(e.data.collapsed),e.data.collapsed===void 0||e.data.collapsed===!0?(console.log("未定义或者是未展开，下次即将展开"),e.data.collapsed=!1):(console.log("下次不展开"),e.data.collapsed=!0);return}e.data.children.push({name:"子部门测试",children:[]}),e.data.hasChild=!1,e.data.collapsed=!1,console.log(e.data),console.log(myChart.getOption().series[0].data),data=myChart.getOption().series[0].data,myChart.clear(),myChart.setOption(option={tooltip:{trigger:"item",triggerOn:"mousemove"},series:[{type:"tree",data,initialTreeDepth:1,top:"1%",left:"7%",bottom:"1%",right:"20%",symbolSize:7,label:{normal:{position:"left",verticalAlign:"middle",align:"right",fontSize:9}},leaves:{label:{normal:{position:"right",verticalAlign:"middle",align:"left"}}},expandAndCollapse:!0,animationDuration:100,animationDurationUpdate:0}]})}},myChart.on("click",clickFun);
