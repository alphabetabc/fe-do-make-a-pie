data=[{name:"名称1",value:85},{name:"名称2",value:71},{name:"名称3",value:40},{name:"名称4",value:20}],color=[["#30C5DB","#30C5DB"],["#F88C41","#F88C41"],["#66C4F7","#66C4F7"],["#9F9CF7","#9F9CF7"]],arrName=getArrayValue(data,"name"),arrValue=getArrayValue(data,"value"),sumValue=eval(arrValue.join("+")),objData=array2obj(data,"name"),optionData=getData(data);function getArrayValue(e,l){var l=l||"value",o=[];return e&&e.forEach(function(t){o.push(t[l])}),o}function array2obj(e,a){for(var l={},o=0;o<e.length;o++)l[e[o][a]]=e[o];return l}function getData(e){var a={series:[],legend:[]};for(let o=0;o<e.length;o++){if(e[o].value<60)var l={type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:color[2][0]},{offset:.6666666666666666,color:color[2][1]},{offset:1,color:color[2][1]}],global:!1};else if(e[o].value<80)var l={type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:color[1][0]},{offset:.5,color:color[1][1]},{offset:1,color:color[1][1]}],global:!1};else if(e[o].value<100)var l={type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:color[0][0]},{offset:.6666666666666666,color:color[0][1]},{offset:1,color:color[0][1]}],global:!1};a.series.push({name:"",type:"pie",clockWise:!1,hoverAnimation:!1,radius:[70-o*15+"%",65-o*15+"%"],center:["50%","50%"],label:{show:!1},itemStyle:{label:{show:!1},labelLine:{show:!1},normal:{color:l}},data:[{value:e[o].value,name:e[o].name},{value:400/3-e[o].value,name:"",itemStyle:{color:"rgba(0,0,0,0)",borderWidth:0},tooltip:{show:!1},hoverAnimation:!1}]}),a.series.push({name:"",type:"pie",silent:!0,z:1,clockWise:!1,hoverAnimation:!1,radius:[70-o*15+"%",65-o*15+"%"],center:["50%","50%"],label:{show:!1},itemStyle:{label:{show:!1},labelLine:{show:!1},borderWidth:5},data:[{value:7.5,itemStyle:{color:"#E3F0FF",borderWidth:0},tooltip:{show:!1},hoverAnimation:!1},{value:2.5,name:"",itemStyle:{color:"rgba(0,0,0,0)",borderWidth:0},tooltip:{show:!1},hoverAnimation:!1}]})}return a}optionData.series.push({name:"刻度线",type:"gauge",startAngle:90,endAngle:360,min:0,max:100,radius:"70%",center:["50%","50%"],title:{show:!1},detail:{show:!1},axisLine:{show:!1},axisTick:{length:0},splitLine:{length:"100%",show:!0,lineStyle:{color:"#999",width:1,type:"solid"}},axisLabel:{show:!1},pointer:{show:!1},data:[{value:0}]},{name:"刻度值",type:"gauge",startAngle:90,endAngle:360,min:0,max:100,radius:"75%",center:["50%","50%"],title:{show:!1},detail:{show:!1},axisLine:{show:!1},axisTick:{length:0},splitLine:{show:!1,length:-23},axisLabel:{color:"#000",fontSize:12,verticalAlign:"top",align:"left",margin:0},pointer:{show:!1},data:[{value:0}]}),option={backgroundColor:"#fff",legend:[{show:!0,top:"15%",left:"50%",data:arrName,width:100,itemGap:48,itemWidth:0,icon:"none",formatter:function(e){return"{title|"+e+"}{value| "+(objData[e].value/sumValue*100).toFixed(2)+"%} "},textStyle:{rich:{title:{fontSize:16,color:"#6D7383"},value:{fontSize:16,color:"#009afe"}}}}],tooltip:{show:!0,trigger:"item",confine:!0,formatter:function(e){return e.name+" : "+e.value+" ( "+(objData[e.name].value/sumValue*100).toFixed(2)+"% ）"},textStyle:{rich:{title:{fontSize:20,lineHeight:30,color:"#6D7383"},value:{fontSize:18,lineHeight:20,color:"#4DA1FF"}}}},series:optionData.series};
