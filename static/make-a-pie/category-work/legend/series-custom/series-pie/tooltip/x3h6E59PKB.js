const series=[{name:"One",value:81},{name:"Two",value:46},{name:"Three",value:59}],centerX="50%",angle=0;let total=series.map(e=>e.value).reduce((e,t)=>e+t,0),maxLen=0,oldAllRate=0;series.map((e,t)=>{t===series.length-1?e.rate=oldAllRate===0&&e.value===0?0:(100-oldAllRate).toFixed(1):(e.rate=total>0?(e.value/total*100).toFixed(1):0,oldAllRate+=Number(e.rate)),maxLen=e.name.length>maxLen?e.name.length:maxLen});function getCirlPoint(e,t,a,l){let o=e+a*Math.cos(l*Math.PI/180),r=t+a*Math.sin(l*Math.PI/180);return{x:o,y:r}}function _pie1(){let e=[];return total=0,series.forEach(t=>{total+=t.value}),series.forEach(t=>{e.push(t,{value:total/90,itemStyle:{normal:{label:{show:!1},labelLine:{show:!1},color:"rgba(0, 0, 0, 0)",borderColor:"rgba(0, 0, 0, 0)",borderWidth:0}}})}),e}function _pie2(){let e=[];for(var t=0;t<4;t++)t%2===0?e.push({name:(t+1).toString(),value:20,itemStyle:{normal:{color:"#1a4050",borderWidth:0,borderColor:"rgba(0,0,0,0)"}}}):e.push({name:(t+1).toString(),value:20,itemStyle:{normal:{color:"rgba(0,0,0,0)",borderWidth:0,borderColor:"rgba(0,0,0,0)"}}});return e}option={backgroundColor:"#0E1327",fontSize:16,tooltip:{trigger:"item",textStyle:{color:"#fff"},backgroundColor:"rgba(16, 32, 40, 0.88)",borderRadius:4,borderColor:"#20749e",formatter:e=>e.name?e.marker+e.name+": "+e.value:""},legend:{type:"scroll",orient:"vertical",right:"0%",width:"50%",itemGap:20,itemWidth:14,itemHeight:14,top:"middle",textStyle:{color:"#fff",rich:{a:{fontSize:12,width:maxLen>3?80:60},b:{fontSize:10,width:65},c:{fontSize:10,width:45}}},data:series},series:[{name:"",type:"pie",color:["#9fe8ff","#cbd4ff","#fff7c0","#9fffff","#62ffdf"],center:[centerX,"50%"],radius:["60%","70%"],avoidLabelOverlap:!1,zlevel:5,label:{show:!1},hoverAnimation:!1,emphasis:{show:!1},labelLine:{show:!1},data:_pie1()},{radius:["60%","63%"],center:[centerX,"50%"],type:"pie",zlevel:6,label:{normal:{show:!1},emphasis:{show:!1}},labelLine:{normal:{show:!1},emphasis:{show:!1}},hoverAnimation:!1,animation:!1,tooltip:{show:!1},itemStyle:{normal:{color:"rgba(0,0,0,0.8)"}},data:_pie1()},{radius:["67%","70%"],center:[centerX,"50%"],type:"pie",zlevel:6,label:{normal:{show:!1},emphasis:{show:!1}},labelLine:{normal:{show:!1},emphasis:{show:!1}},hoverAnimation:!1,animation:!1,tooltip:{show:!1},itemStyle:{normal:{color:"rgba(0,0,0,0.8)"}},data:_pie1()},{type:"pie",zlevel:2,silent:!0,center:[centerX,"50%"],radius:["70%","74%"],startAngle:45,label:{normal:{show:!1}},labelLine:{normal:{show:!1}},data:_pie2()},{name:"ring5",type:"custom",coordinateSystem:"none",renderItem:(e,t)=>({type:"arc",shape:{cx:centerX,cy:t.getHeight()/2,r:Math.min(t.getWidth(),t.getHeight())/2*.45,startAngle:(0+angle)*Math.PI/180,endAngle:(360+angle)*Math.PI/180},style:{stroke:{type:"linear",x:1,y:.5,x2:0,y2:1,colorStops:[{offset:0,color:"transparent"},{offset:.6,color:"#00eaff"}]},fill:"transparent",lineWidth:1},silent:!0}),data:[0]},{name:"ring5",type:"custom",coordinateSystem:"none",renderItem:(e,t)=>{let a=centerX,l=t.getHeight()/2,o=Math.min(t.getWidth(),t.getHeight())/2*.45,r=getCirlPoint(a,l,o,-95+angle);return{type:"circle",shape:{cx:r.x,cy:r.y,r:2.5},style:{stroke:"#00eaff",fill:"#00eaff"},silent:!0}},data:[0]}]};
