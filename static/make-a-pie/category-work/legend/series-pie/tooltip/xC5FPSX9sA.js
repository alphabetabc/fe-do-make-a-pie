backgroundColor="rgba(0,0,0,1)",chartdata=[{label:"竞争性谈判",value:"200"},{label:"公开招标",value:"300"},{label:"询价",value:"200"},{label:"单一来源",value:"600"},{label:"邀请招标",value:"500"}],itemGap=28.4,itemHeight=32.5,padding=[5,5],color=["#37FFC9","#FFE777","#19D6FF","#32A1FF","#FFFFFF"];let data1=chartdata,sum=0;data1.forEach(e=>{e.name=e.label||e.name,sum+=Number(e.value)});let arrName=getArrayValue(data1,"name"),arrValue=getArrayValue(data1,"value"),sumValue=eval(arrValue.join("+")),objData=array2obj(data1,"name"),optionData=getData(data1);function getArrayValue(e,a){var a=a||"value",t=[];return e&&e.forEach(r=>{t.push(r[a])}),t}function array2obj(e,l){for(var a={},t=0;t<e.length;t++)a[e[t][l]]=e[t];return a}function getData(e){var l={series:[],yAxis:[]};for(let a=0;a<e.length;a++)l.series.push({name:"",type:"pie",clockWise:!1,hoverAnimation:!1,legendHoverLink:!0,radius:[92-a*15+"%",84-a*15+"%"],center:["40%","50%"],label:{show:!1},itemStyle:{label:{show:!1},labelLine:{show:!1},borderWidth:5},data:[{value:e[a].value*.75,name:e[a].name},{value:sumValue-e[a].value*.75,name:"",itemStyle:{color:"rgba(0,0,0,0)",borderWidth:0},hoverAnimation:!1}]}),l.series.push({name:"",type:"pie",silent:!0,z:1,clockWise:!1,hoverAnimation:!1,radius:[92-a*15+"%",84-a*15+"%"],center:["40%","50%"],label:{show:!1},itemStyle:{label:{show:!1},labelLine:{show:!1},borderWidth:5},data:[{value:7.5,itemStyle:{color:"#203643",borderWidth:0},tooltip:{show:!1},hoverAnimation:!1},{value:2.5,name:"",itemStyle:{color:"rgba(0,0,0,0)",borderWidth:0},tooltip:{show:!1},hoverAnimation:!1}]}),l.yAxis.push((e[a].value/sumValue*100).toFixed(2)+"%");return l}option={backgroundColor,tooltip:{formatter:e=>{if(e.name!="")return e.name+" : "+e.value/.75+`
(`+(e.percent/.75).toFixed(2)+"%)"}},legend:{show:!0,icon:"rect",top:"3.38%",bottom:"0",left:"39.5%",data:arrName,selected:!0,width:496,itemWidth:496,itemHeight,padding,itemGap,tooltip:{show:!0,formatter:e=>e.name+" : "+objData[e.name].value+" ("+(Number(objData[e.name].value)*100/sum).toFixed(2)+"%)"},formatter:e=>"{line|}{circle|●}{value|"+objData[e].value+"}",textStyle:{rich:{value:{fontSize:12,lineHeight:20,color:"#fff"},line:{width:98,height:1,backgroundColor:"#fff"},circle:{color:"#fff",padding:[0,6,0,0]}}}},color:this.color,xAxis:[{show:!1}],series:optionData.series};
