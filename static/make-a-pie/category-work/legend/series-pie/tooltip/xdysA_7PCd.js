const dataSetArr=[{name:"本科",value:56},{name:"硕士",value:40},{name:"博士",value:15},{name:"留学",value:76}];let currName="",myChart=echarts.getInstanceByDom(document.getElementById("chart-panel"));myChart.on("mouseover",e=>{currName=e.name;let t=myChart.getOption();if(e.seriesIndex===0){let o={normal:{show:!0,position:"center",formatter:[`{a|${e.name}}`,`{b|${e.percent+"%"}}`].join(`
`),rich:{a:{color:"#fff",fontSize:18,lineHeight:30},b:{color:"yellow",fontSize:20,foneWeight:"bold",textShadowBlur:20,textShadowColor:"yellow"}}}};t.series[2].label=o,myChart.setOption(t,!0)}});let colors=_colors(),itemCol=_itemColor(),dataSorce=_yAxisData(),centerData=_getCenterData(),legendData=_legData();option={backgroundColor:"#0C1D38",color:colors,legend:{show:!0,right:"3%",top:"12%",type:"scroll",itemWidth:12,itemHeight:12,orient:"vertical",data:legendData},tooltip:{show:!0,backgroundColor:"rgba(3,43,80,0.7)",textStyle:{color:"rgba(255,255,255,0.7)",fontSize:16},extraCssText:"text-align:left",formatter:function(e,t){return`${`<span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:${itemCol[e.dataIndex]};"></span>`} ${e.name}&nbsp;${e.value}`}},series:[{name:"",type:"pie",hoverAnimation:!1,radius:["43%","63%"],center:["42%","47%"],avoidLabelOverlap:!0,label:{show:!0,position:"outside",formatter:function(e){let t=e.name,o=Number(e.percent).toFixed(2);return[`{a|${t}}
`,`{b|${o}%}`]},rich:{a:{color:"#fff",fontSize:14,lineHeight:20},b:{color:"yellow",fontSize:14,foneWeight:"bold"}}},labelLine:{normal:{show:!0,length:22,length2:40,lineStyle:{color:"#fff"}}},data:dataSorce},{name:"边框1",type:"pie",hoverAnimation:!1,radius:["73%","73.5%"],center:["42%","47%"],labelLine:{normal:{show:!1}},itemStyle:{normal:{color:"#2bb0eb",shadowColor:"#2bb0eb",borderWidth:5,borderColor:"rgba(43,176,235,0.2)",shadowBlur:20,opacity:.3}},data:[{value:100,tooltip:{show:!1}}]},{name:"内框",type:"pie",hoverAnimation:!1,radius:["38%","38.5%"],center:["42%","47%"],label:{normal:{show:!0,position:"center",formatter:[`{a|${centerData[0].name}}`,`{b|${centerData[0].value+"%"}}`].join(`
`),rich:{a:{color:"#fff",fontSize:18,lineHeight:30},b:{color:"yellow",fontSize:20,foneWeight:"bold",textShadowBlur:20,textShadowColor:"yellow"}}}},labelLine:{normal:{show:!1}},itemStyle:{normal:{color:"#2bb0eb",shadowColor:"#2bb0eb",borderWidth:5,borderColor:"rgba(43,176,235,0.2)"}},data:[{value:100,tooltip:{show:!1}}]}]};function _legData(){let e=[];return dataSetArr&&dataSetArr.map((t,o)=>{e.push({name:t.name,icon:"circle",textStyle:{color:"#ccc",fontSize:12}})}),e}function _yAxisData(){return dataSetArr&&dataSetArr.map(e=>e)}function _dySum(){let e=0,t=[];return dataSetArr.map(o=>{e+=Number(o.value)}),dataSetArr&&dataSetArr.map(o=>{let r=(Number(o.value)/e*100).toFixed(2);t.push({name:o.name,value:r})}),t}function _getCenterData(){let e=_dySum();return currName!==""?e&&e.filter(t=>t.name===currName):[e&&e[0]]}function _axisLine(){return{lineStyle:{color:"#3398DB",width:2}}}function _itemColor(){return["#327bfa","#f6973d","#17d8a1","#7a3ceb","#e40036","#ffde1d","#f8492c","#1da349","#eb3d7e"]}function _colors(){return[new this.echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#327bfa"},{offset:1,color:"#77a6f8"}],!1),new this.echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#f6973d"},{offset:1,color:"#ffc58e"}],!1),new this.echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#17d8a1"},{offset:1,color:"#b9ffeb"}],!1),new this.echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#7a3ceb"},{offset:1,color:"#b691f9"}],!1),new this.echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#e40036"},{offset:1,color:"#f97695"}],!1),new this.echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#ffde1d"},{offset:1,color:"#fff2a5"}],!1),new this.echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#f8492c"},{offset:1,color:"#fea191"}],!1),new this.echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#1da349"},{offset:1,color:"#39d16b"}],!1),new this.echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#eb3d7e"},{offset:1,color:"#fd97bd"}],!1)]}
