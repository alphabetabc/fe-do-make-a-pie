var color=["#0CD2E6","#3751E6","#FFC722","#886EFF","#008DEC","#114C90","#00BFA5"],title="自定义legend、默认选中",legend=["A需求类型","B需求类型","C需求类型","D需求类型","E需求类型","其他"],seriesData=[{name:"A需求类型",value:30,selected:!0},{name:"B需求类型",value:10,selected:!1},{name:"C需求类型",value:15,selected:!1},{name:"D需求类型",value:23,selected:!1},{name:"E需求类型",value:10,selected:!1},{name:"其他",value:12,selected:!1}],option={backgroundColor:"pink",color,title:{top:20,text:title,textStyle:{fontSize:20,color:"#DDEEFF"}},grid:{top:"15%",left:0,right:"1%",bottom:5,containLabel:!0},legend:{orient:"vertical",top:"center",right:50,textStyle:{align:"left",verticalAlign:"middle",rich:{name:{color:"red",fontSize:10},value:{color:"red",fontSize:10},rate:{color:"red",fontSize:10},gray:{color:"rgba(114,114,114, 0.39)"}}},formatter:e=>{if(seriesData.length){const t=seriesData.filter(l=>l.name===e)[0];return t.selected?`{name|${e}：}{value| ${t.value}} {rate| ${t.value}%}`:`{gray|${e}：}{gray| ${t.value}} {gray| ${t.value}%}`}},data:legend},series:[{name:"需求类型占比",type:"pie",center:["50%","50%"],radius:["45%","65%"],legendHoverLink:!1,label:{normal:{show:!1,position:"center",formatter:`{value|{c}}
{label|{b}}`,rich:{value:{padding:5,align:"center",verticalAlign:"middle",fontSize:32},label:{align:"center",verticalAlign:"middle",fontSize:16}}},emphasis:{show:!0,textStyle:{fontSize:"12"}}},labelLine:{show:!1,length:0,length2:0},emphasis:{scale:!0,scaleSize:30,itemStyle:{borderColor:"pink",borderWidth:20}},data:seriesData}]};myChart.setOption(option),getDefaultSelected(myChart);function getDefaultSelected(e){let t=0;e.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:0}),e.on("legendselectchanged",function(l){console.log(l.name);for(var a=0;a<seriesData.length;a++)seriesData[a].selected=!1,e.dispatchAction({type:"downplay",seriesIndex:0,dataIndex:a});const n=seriesData.findIndex(i=>i.name==l.name);n!==-1&&(console.log("下标",seriesData),seriesData[n].selected=!0),e.setOption({legend:{selected:{[l.name]:!0}}}),e.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:n})})}
