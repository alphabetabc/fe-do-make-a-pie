let echartData={inner:[{value:31.86,unit:"件",name:"大工业"},{value:5.49,unit:"件",name:"非、工业"},{value:3.2,unit:"件",name:"非居民"},{value:3.65,unit:"件",name:"商业"},{value:1.22,unit:"件",name:"农业"},{value:11.83,unit:"件",name:"居民"}],outer:[{value:32.76,unit:"件",name:"大工业"},{value:5.74,unit:"件",name:"非、工业"},{value:3.31,unit:"件",name:"非居民"},{value:4.42,unit:"件",name:"商业"},{value:1.31,unit:"件",name:"农业"},{value:10.51,unit:"件",name:"居民"}]};var arrName=getArrayValue(echartData.outer,"name");function getArrayValue(e,a){var a=a||"value",n=[];return e&&e.forEach(function(r){n.push(r[a])}),n}option={title:[{text:"单位：亿千瓦时",top:"center",left:"34.5%",textStyle:{fontSize:10,color:"#ffffff",lineHeight:26,fontWeight:400}}],tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},color:["#8a42ff","#fc8d89","#24FEB4","#f48639","#04c8ff","#66ffcc","#FC6060"],legend:{show:!0,top:"center",left:"80%",data:arrName,itemWidth:20,itemHeight:20,padding:[0,5],itemGap:25,textStyle:{color:"#fff"},formatter:function(e){return e+"          "}},series:[{name:"圆圈",type:"pie",zlevel:1,silent:!0,radius:["79%","80%"],center:["40%","50%"],hoverAnimation:!1,color:"#ffffff",label:{normal:{show:!1}},labelLine:{normal:{show:!1}},data:[{value:1,name:"",itemStyle:{normal:{color:"#ffffff"}}}]},{name:"2019年4月",type:"pie",radius:["50%","75%"],center:["40%","50%"],startAngle:"240",data:echartData.outer,labelLine:{normal:{length:20,length2:140,lineStyle:{color:"#e6e6e6"}}},itemStyle:{normal:{borderWidth:2,borderColor:"#fff"},emphasis:{borderWidth:0,shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},label:{normal:{position:"inner",formatter:e=>e.value,fontSize:10,color:"#000"}}},{name:"2020年4月",type:"pie",radius:["25%","50%"],center:["40%","50%"],itemStyle:{normal:{borderWidth:2,borderColor:"#fff"},emphasis:{borderWidth:0,shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},label:{normal:{position:"inner",formatter:e=>e.value,fontSize:10,color:"#000"}},labelLine:{normal:{show:!1}},startAngle:"230",data:echartData.inner}]};var timeTicket=null,count=0;timeTicket&&clearInterval(timeTicket),timeTicket=setInterval(function(){var e=option.series[1].data.length;myChart.dispatchAction({type:"downplay",seriesIndex:1}),myChart.dispatchAction({type:"highlight",seriesIndex:1,dataIndex:count%e}),myChart.dispatchAction({type:"showTip",seriesIndex:1,dataIndex:count%e}),count++},1500),myChart.on("mouseover",function(e){clearInterval(timeTicket);var t=[0,1,2,3,4,5,6,7,8,9];if(e.seriesIndex==0)if(myChart.dispatchAction({type:"downplay",seriesIndex:1,dataIndex:t}),e.dataIndex==0)myChart.dispatchAction({type:"highlight",seriesIndex:1,dataIndex:t.splice(0,4)});else{var a=t.splice(e.dataIndex*3+1,3);myChart.dispatchAction({type:"highlight",seriesIndex:1,dataIndex:a})}}),myChart.on("mouseout",function(e){timeTicket&&clearInterval(timeTicket),myChart.dispatchAction({type:"downplay"}),timeTicket=setInterval(function(){var t=option.series[1].data.length;myChart.dispatchAction({type:"downplay",seriesIndex:2}),myChart.dispatchAction({type:"highlight",seriesIndex:2,dataIndex:count%t}),myChart.dispatchAction({type:"showTip",seriesIndex:2,dataIndex:count%t}),count++},1500)});
