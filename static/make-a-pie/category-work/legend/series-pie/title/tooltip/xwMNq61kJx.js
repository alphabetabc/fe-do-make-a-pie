let dataArr=[{name:"测试1",value:20},{name:"测试2",value:30},{name:"测试3",value:40},{name:"测试4",value:50},{name:"测试5",value:60},{name:"测试6",value:70},{name:"测试7",value:80},{name:"测试8",value:90},{name:"测试9",value:100},{name:"测试10",value:110},{name:"测试11",value:120},{name:"测试12",value:130},{name:"测试13",value:140},{name:"测试14",value:150},{name:"测试15",value:160},{name:"测试16",value:170},{name:"测试17",value:180}],total=0;for(var totalIndex=0;totalIndex<dataArr.length;totalIndex++)total+=dataArr[totalIndex].value;total===0&&(total="0");let colorsArr=["#0098fe","#fe7270","#ff9a65","#6bb7b2","#9bcd35","#db4e36","#01a758","#8c53e6","#5ed9a8","#49c2e8","#e7bcf1","#5f58da","#b88350","#50bb5e","#fc47ff","#b0b0b0","#f19d11"];option={backgroundColor:"#dbf6e9",title:[{text:"合计",x:"center",y:"22%",textStyle:{color:"#000",fontSize:16},subtext:total,subtextStyle:{color:"#000",fontSize:24,fontWeight:"bold"}},{text:"标题二",x:"20",y:"50%",textStyle:{color:"#000",fontSize:14}}],tooltip:{trigger:"item",borderColor:"rgba(255,255,255,.3)",backgroundColor:"rgba(13,5,30,.6)",borderWidth:1,padding:5,formatter:function(e){var t=e.marker+""+e.data.name+"</br>数量："+e.data.value+"</br>占比："+e.percent+"%";return t},textStyle:{fontSize:14}},legend:{orient:"vertical",left:"center",itemWidth:15,itemHeight:15,icon:"circle",top:"55%",itemGap:25,textStyle:{color:"#000",fontSize:14},data:dataArr,formatter:function(e){if(dataArr&&dataArr.length){for(var t=0;t<dataArr.length;t++)if(e===dataArr[t].name)return e+"  ： "+dataArr[t].value}}},series:[{type:"pie",center:["50%","25%"],radius:["25%","40%"],clockwise:!0,avoidLabelOverlap:!0,hoverOffset:2,itemStyle:{normal:{color:function(e){return colorsArr[e.dataIndex]}}},label:{show:!0,position:"outside",formatter:"{d}%",fontSize:10},labelLine:{normal:{length:5,length2:8,lineStyle:{width:1}}},data:dataArr}]},myChart.on("legendselectchanged",function(e){var t=this.getOption();let a=Object.values(e.selected),r=0;if(a&&a.length)for(var l=0;l<a.length;l++)a[l]!==!1&&(r+=dataArr[l].value);t.title[0].subtext=r,this.setOption(t)});
