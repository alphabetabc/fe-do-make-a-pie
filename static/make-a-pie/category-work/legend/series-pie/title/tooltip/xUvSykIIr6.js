data=[{name:"使用中资源量",value:754},{name:"维修中资源量",value:611},{name:"保养中资源量",value:400},{name:"已损坏资源量",value:200}],arrName=getArrayValue(data,"name"),arrValue=getArrayValue(data,"value"),sumValue=eval(arrValue.join("+")),objData=array2obj(data,"name"),optionData=getData(data);function getArrayValue(a,e){var e=e||"value",t=[];return a&&a.forEach(function(r){t.push(r[e])}),t}function array2obj(a,l){for(var e={},t=0;t<a.length;t++)e[a[t][l]]=a[t];return e}function getData(a){var l={series:[]};for(let e=0;e<a.length;e++)l.series.push({name:"",type:"pie",clockWise:!1,hoverAnimation:!1,radius:[73-e*15+"%",68-e*15+"%"],center:["30%","55%"],label:{show:!1},itemStyle:{label:{show:!1},labelLine:{show:!1},borderWidth:5},data:[{value:a[e].value,name:a[e].name},{value:sumValue-a[e].value,name:"",itemStyle:{color:"rgba(0,0,0,0)",borderWidth:0},tooltip:{show:!1},hoverAnimation:!1}]}),l.series.push({name:"",type:"pie",silent:!0,z:1,clockWise:!1,hoverAnimation:!1,radius:[73-e*15+"%",68-e*15+"%"],center:["30%","55%"],label:{show:!1},itemStyle:{label:{show:!1},labelLine:{show:!1},borderWidth:5},data:[{value:7.5,itemStyle:{color:"rgb(3, 31, 62)",borderWidth:0},tooltip:{show:!1},hoverAnimation:!1},{value:2.5,name:"",itemStyle:{color:"rgba(0,0,0,0)",borderWidth:0},tooltip:{show:!1},hoverAnimation:!1}]});return l}option={backgroundColor:"#000",title:{text:"dfssdf",left:"center",top:0,textStyle:{color:"#00ffff",fontSize:14,fontWeight:0}},legend:{show:!0,icon:"circle",top:"15%",left:"35%",data:arrName,width:50,itemGap:5,itemWidth:8,itemHeight:8,itemGap:5,formatter:function(a){return a+" "+objData[a].value+`项
`+(objData[a].value/sumValue*100).toFixed(2)+"%"},textStyle:{color:"#fff",fontSize:14}},tooltip:{show:!0,trigger:"item",formatter:"{b}:<br>{c}"},color:["rgb(24, 183, 142)","rgb(1, 179, 238)","rgb(22, 75, 205)","rgb(52, 52, 176)"],grid:{top:"15%",left:"0",containLabel:!1},series:optionData.series};
