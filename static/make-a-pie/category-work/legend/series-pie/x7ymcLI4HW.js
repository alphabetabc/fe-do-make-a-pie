for(var data=[{value:335,name:"直接访问"},{value:310,name:"邮件营销"},{value:234,name:"联盟广告"},{value:135,name:"视频广告"},{value:11548,name:"搜索引擎"}],x=[],total=0,i=0;i<data.length;i++){var j={};j.name=data[i].name,j.value=10,x.push(j),total+=data[i].value}for(var len=0,total=0,i=0;i<data.length;i++)total+=data[i].value;for(var i=0;i<data.length;i++){var str=data[i].name+" "+(data[i].value/total*100).toFixed(2)+"%";str.length>len&&(len=str.length)}option={legend:{orient:"vertical",left:"60%",top:"middle",icon:"circle",selectedMode:!1,itemHeight:20,itemGap:18.5,textStyle:{color:"#000",fontSize:22},formatter:function(e){for(var a=0,t,l="               ",n=0,o=data.length;n<o;n++)a+=data[n].value,data[n].name==e&&(t=data[n].value);var r=e+" "+(t/a*100).toFixed(2)+"%";return r.length<len&&(r=r+l.slice(0,(len-r.length)*2)+" "),t>1e4&&(t=(t/1e4).toFixed(2)+"万"),r+" | "+t+"笔"}},series:[{name:"",type:"pie",radius:["35%","50%"],center:["30%","50%"],avoidLabelOverlap:!1,label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"30",fontWeight:"bold"}},labelLine:{show:!1},itemStyle:{color:function(e){var a=["#29C4D6","#1678BF","#527D2D","#8AA159"];return a[e.dataIndex]}},data,animation:!1},{name:"",type:"pie",radius:["35%","50%"],center:["30%","50%"],avoidLabelOverlap:!1,label:{show:!1,position:"center",formatter:function(e){var a=(data[e.dataIndex].value/total*100).toFixed(2);return["{a|"+a+"%}","{b|"+data[e.dataIndex].name+"}"].join(`
`)},textStyle:{rich:{a:{color:"#000",fontSize:48},b:{color:"#29C4D6",fontSize:22,padding:[0,0,15,0]}}}},itemStyle:{borderColor:"#CCC",borderWidth:10,color:function(e){var a=["#29C4D6","#1678BF","#527D2D","#8AA159"];return a[e.dataIndex]}},emphasis:{label:{show:!0,fontSize:"30",fontWeight:"bold"}},labelLine:{show:!1},data:x,animation:!0}]};var charPie3currentIndex=0;setInterval(function(){var e=option.series[0].data.length;myChart.dispatchAction({type:"downplay",seriesIndex:1,dataIndex:charPie3currentIndex}),charPie3currentIndex=(charPie3currentIndex+1)%e,myChart.dispatchAction({type:"highlight",seriesIndex:1,dataIndex:charPie3currentIndex})},2e3);
