var nodes=[{name:"字节跳动"},{name:"美团"},{name:"百度"},{name:"阿里"},{name:"京东"},{name:"饿了么"}],links=[{source:"字节跳动",target:"美团"},{source:"字节跳动",target:"百度"},{source:"字节跳动",target:"阿里"},{source:"美团",target:"京东"},{source:"美团",target:"饿了么"},{source:"美团",target:"百度"}];let searchedValue="",resOld="";if(!document.getElementById("searchInput")){document.getElementById("chart-panel").style.marginTop="100px";var text=document.createElement("span");text.innerHTML="节点名称搜索：",text.style.fontSize="12px",document.body.appendChild(text);var input=document.createElement("input");input.id="searchInput",document.body.appendChild(input)}setInterval(()=>{searchedValue=document.getElementById("searchInput").value,resOld!==searchedValue&&init(),resOld=searchedValue},1e3);function init(){let t={nodes:JSON.parse(JSON.stringify(nodes)),links};const a="#006acc",o="#ff7d18",l="#10a050";t.nodes.forEach(e=>{e.category===0?(e.symbolSize=100,e.itemStyle={color:a}):e.category===1&&(e.itemStyle={color:o}),searchedValue&&e.name.toLowerCase().indexOf(searchedValue.toLowerCase())>-1&&(e.itemStyle={color:"black"})}),t.links.forEach(e=>{e.label={align:"center",fontSize:12},e.name==="参股"?e.lineStyle={color:o}:e.name==="董事"?e.lineStyle={color:a}:e.name==="法人"&&(e.lineStyle={color:l})});let r=[{name:"公司",itemStyle:{color:a}},{name:"董事",itemStyle:{color:o}}];option={title:{text:"知识图谱"},legend:[{data:r.map(e=>e.name)}],series:[{type:"graph",layout:"force",symbolSize:58,draggable:!0,roam:!0,focusNodeAdjacency:!0,categories:r,edgeSymbol:["","arrow"],edgeLabel:{normal:{show:!0,textStyle:{fontSize:20},formatter(e){return e.data.name}}},label:{show:!0},force:{repulsion:2e3,edgeLength:120},data:t.nodes,links:t.links}]},myChart.setOption(option)}init();
