var w=new Array("日","一","二","三","四","五","六"),shiChen=new Array("【子时】夜半","【丑时】鸡鸣","【丑时】鸡鸣","【寅时】平旦","【寅时】平旦","【卯时】日出","【卯时】日出","【辰时】食时","【辰时】食时","【巳时】隅中","【巳时】隅中","【午时】日中","【午时】日中","【未时】日昳","【未时】日昳","【申时】哺时","【申时】哺时","【酉时】日入","【酉时】日入","【戌时】黄昏","【戌时】黄昏","【亥时】人定","【亥时】人定","【子时】夜半"),sc=["子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"],tianGan=["癸","甲","乙","丙","丁","戊","已","庚","辛","壬"],diZhi=["亥","子","丑","寅","卯","辰","巳","午","未","申","酉","戌"],shengXiao=["猪","鼠 ","牛 ","虎 ","兔 ","龙 ","蛇 ","马 ","羊 ","猴 ","鸡 ","狗 "];lunarInfo=[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42416,83315,21168,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46752,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,23232,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19195,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448,84835,37744,18936,18800,25776,92326,59984,27424,108228,43744,41696,53987,51552,54615,54432,55888,23893,22176,42704,21972,21200,43448,43344,46240,46758,44368,21920,43940,42416,21168,45683,26928,29495,27296,44368,84821,19296,42352,21732,53600,59752,54560,55968,92838,22224,19168,43476,41680,53584,62034,54560];function lYearDays(e){var o,t=348;for(o=32768;o>8;o>>=1)t+=lunarInfo[e-1900]&o?1:0;return t+leapDays(e)}function leapMonth(e){return lunarInfo[e-1900]&15}function leapDays(e){return leapMonth(e)?lunarInfo[e-1900]&65536?30:29:0}function monthDays(e,o){return o>12||o<1?-1:lunarInfo[e-1900]&65536>>o?30:29}function solar2lunar(d,s,y){if(d<1900||d>2100||d==1900&&s==1&&y<31)return-1;if(d)var n=new Date(d,parseInt(s)-1,y);else var n=new Date;var r,f=0,x=0,d=n.getFullYear(),s=n.getMonth()+1,y=n.getDate(),l=(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate())-Date.UTC(1900,0,31))/864e5;for(r=1900;r<2101&&l>0;r++)x=lYearDays(r),l-=x;l<0&&(l+=x,r--);var c=new Date,M=!1;c.getFullYear()==d&&c.getMonth()+1==s&&c.getDate()==y&&(M=!0);var v=r,f=leapMonth(r),b=!1;for(r=1;r<13&&l>0;r++)f>0&&r==f+1&&b==!1?(--r,b=!0,x=leapDays(v)):x=monthDays(v,r),b==!0&&r==f+1&&(b=!1),l-=x;l==0&&f>0&&r==f+1&&(b?b=!1:(b=!0,--r)),l<0&&(l+=x,--r);var u=r,m=l+1;return{lYear:v,lMonth:u,lDay:m}}function roundDatas(e){for(var o=[],t=0;t<e;t++){var n=Math.cos(30*t*Math.PI/180),r=Math.sin(30*t*Math.PI/180);o.push({name:t,x:r,y:-n})}return o}function roundDatas1(e){for(var o=[],t=0;t<e;t++){var n=Math.cos(6*t*Math.PI/180),r=Math.sin(6*t*Math.PI/180);o.push({name:t,x:r,y:-n})}return o}function roundDatas2(e){for(var o=[],t=0;t<e;t++){var n=Math.cos(30*t*Math.PI/180),r=Math.sin(30*t*Math.PI/180);o.push({name:sc[t],x:r,y:-n})}return o}function linkDatas(e){for(var o=[],t=0;t<e;t++)o.push({source:t,target:t+1});return o.push({source:t-1,target:0}),o}function arrIndex(e,o){for(var t=0;t<e.length;t++)if(e[t]==o.charAt(1))return t}option={backgroundColor:"#000000",title:{text:"",subtext:"",left:50,top:10,backgroundColor:"#ECECFF",borderRadius:8,textStyle:{color:"#2828FF"},subtextStyle:{color:"#2894FF"}},legend:{x:"280",top:"10%",itemGap:20,borderColor:"#6495ED",borderRadius:[5,5,5,5],shadowColor:"rgba(0, 245, 255, 0.8)",shadowBlur:10,shadowOffsetX:8,shadowOffsetY:-6,borderWidth:1,selectedMode:!1,textStyle:{color:"#00CACA"},data:["时","分","秒","时辰"]},series:[{name:"时",type:"graph",roam:!0,draggable:!0,itemStyle:{normal:{color:"#694d9f"}},lineStyle:{normal:{color:"#694d9f",curveness:1,opacity:.1}},symbol:"circle",symbolSize:2,top:"225",left:"300",width:"100",height:"100",data:roundDatas(12),links:linkDatas(12)},{name:"分",type:"graph",roam:!0,itemStyle:{normal:{color:"#2585a6"}},lineStyle:{normal:{color:"#2585a6",curveness:1,opacity:.1}},symbol:"circle",symbolSize:2,top:"168",left:"250",width:"200",height:"200",data:roundDatas1(60),links:linkDatas(60)},{name:"秒",type:"graph",roam:!0,itemStyle:{normal:{color:"#f173ac"}},lineStyle:{normal:{color:"#f173ac",curveness:1,opacity:.1}},symbol:"circle",symbolSize:2,top:"120",left:"200",width:"300",height:"300",data:roundDatas1(60),links:linkDatas(60)},{name:"时辰",type:"graph",roam:!0,draggable:!0,itemStyle:{normal:{color:"#94d6da"}},label:{normal:{show:!0,formatter:"{b}",fontSize:15,textBorderColor:"#94d6da",textBorderWidth:1}},lineStyle:{normal:{color:"#694d9f",curveness:1,opacity:.1}},symbol:"circle",symbolSize:2,top:"200",left:"540",width:"100",height:"100",data:roundDatas2(12),links:linkDatas(12)}]};function start(){myChart.setOption(option);var e=new Date,o=e.getFullYear(),t=e.getMonth()+1,n=e.getDay(),r=e.getDate(),x=e.getHours(),d=e.getMinutes(),s=e.getSeconds(),y=Math.cos(6*s*Math.PI/180),l=Math.sin(6*s*Math.PI/180),c=Math.cos(6*d*Math.PI/180),M=Math.sin(6*d*Math.PI/180),v=x;x>12&&(x=x-12);for(var f=Math.cos(30*x*Math.PI/180),b=Math.sin(30*x*Math.PI/180),u=arrIndex(sc,shiChen[v]),m=solar2lunar(o,t,r),p=tianGan[(m.lYear-3)%10],g=diZhi[(m.lYear-3)%12],I=shengXiao[(m.lYear-3)%12],a=0;a<s;a++){var i=Math.cos(6*a*Math.PI/180),h=Math.sin(6*a*Math.PI/180);option.series[2].data[a]={name:a,symbol:"arrow",symbolSize:1,x:h,y:-i}}for(var a=59;a>s;a--){var i=Math.cos(6*a*Math.PI/180),h=Math.sin(6*a*Math.PI/180);option.series[2].data[a]={name:a,symbol:"arrow",symbolSize:5,x:h,y:-i}}for(var a=0;a<d;a++){var i=Math.cos(6*a*Math.PI/180),h=Math.sin(6*a*Math.PI/180);option.series[1].data[a]={name:a,symbol:"arrow",symbolSize:5,x:h,y:-i}}for(var a=59;a>d;a--){var i=Math.cos(6*a*Math.PI/180),h=Math.sin(6*a*Math.PI/180);option.series[1].data[a]={name:a,symbol:"arrow",symbolSize:1,x:h,y:-i}}for(var a=0;a<x;a++){var i=Math.cos(30*a*Math.PI/180),h=Math.sin(30*a*Math.PI/180);option.series[0].data[a]={name:a,symbol:"arrow",symbolSize:5,x:h,y:-i}}for(var a=12;a>x;a--){var i=Math.cos(30*a*Math.PI/180),h=Math.sin(30*a*Math.PI/180);option.series[0].data[a]={name:a,symbol:"arrow",symbolSize:1,x:h,y:-i}}for(var a=0;a<u;a++)option.series[3].data[a]={name:sc[a],x:Math.sin(30*a*Math.PI/180),y:-Math.cos(30*a*Math.PI/180),label:{normal:{show:!0,formatter:"{b}",fontSize:15,textBorderColor:"#94d6da",textBorderWidth:1}}};option.series[2].data[s]={name:s,x:l,y:-y,itemStyle:{normal:{color:"#f173ac"}},label:{normal:{show:!0,formatter:"{b}",fontSize:18,textBorderColor:"#f173ac",textBorderWidth:3}}},s==0&&(option.series[2].data[0]={name:"0",x:l,y:-y,label:{normal:{show:!0,formatter:"0",fontSize:18,textBorderColor:"#f173ac",textBorderWidth:3}}}),option.series[1].data[d]={name:d,x:M,y:-c,itemStyle:{normal:{color:"#2585a6"}},label:{normal:{show:!0,formatter:"{b}",fontSize:20,textBorderColor:"#2585a6",textBorderWidth:3}}},d==0&&(option.series[1].data[0]={name:"0",x:M,y:-c,label:{normal:{show:!0,formatter:"0",fontSize:20,textBorderColor:"#2585a6",textBorderWidth:3}}}),option.series[0].data[x]={name:x,x:b,y:-f,itemStyle:{normal:{color:"#694d9f"}},label:{normal:{show:!0,formatter:"{b}",fontSize:28,textBorderColor:"#694d9f",textBorderWidth:5}}},x==0&&(option.series[0].data[0]={name:"0",x:b,y:-f,label:{normal:{show:!0,formatter:"0",fontSize:28,textBorderColor:"#694d9f",textBorderWidth:5}}}),option.series[3].data[u]={name:sc[u],x:Math.sin(30*u*Math.PI/180),y:-Math.cos(30*u*Math.PI/180),label:{normal:{show:!0,formatter:"{b}",fontSize:15,textBorderColor:"#f58220",textBorderWidth:2}}},option.title.text=o+"年"+t+"月"+r+"日",option.title.subtext=`农历：${m.lYear}、${m.lMonth}、 ${m.lDay}
星期`+w[n]+" "+shiChen[v]+`
`+p+g+"年【"+I+"年】",setTimeout(start,100)}start();
