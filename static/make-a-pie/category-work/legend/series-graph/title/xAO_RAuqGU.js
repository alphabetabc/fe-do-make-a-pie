var nodes=[{name:"浏览器有限公司",category:1},{name:"JavaScript科技",category:1},{name:"HTML科技",category:0},{name:"Css科技",category:1},{name:"Firefox",category:1},{name:"Safari",category:0},{name:"IE",category:0},{name:"Chrome",category:0},{name:"操作系统集团",category:1},{name:"typescript",category:1}],links=[{source:"浏览器有限公司",target:"操作系统集团",name:"参股"},{source:"HTML科技",target:"浏览器有限公司",name:"参股"},{source:"Css科技",target:"浏览器有限公司",name:"参股"},{source:"JavaScript科技",target:"浏览器有限公司",name:"参股"},{source:"Chrome",target:"浏览器有限公司",name:"董事"},{source:"IE",target:"浏览器有限公司",name:"董事"},{source:"Firefox",target:"浏览器有限公司",name:"董事"},{source:"Safari",target:"浏览器有限公司",name:"董事"},{source:"Chrome",target:"JavaScript科技",name:"法人"},{source:"Css科技",target:"typescript",name:"法人"}];let searchedValue="",resOld="";if(!document.getElementById("searchInput")){document.getElementById("chart-panel").style.marginTop="100px";var text=document.createElement("span");text.innerHTML="节点名称搜索：",text.style.fontSize="12px",document.body.appendChild(text);var input=document.createElement("input");input.id="searchInput",document.body.appendChild(input)}setInterval(()=>{searchedValue=document.getElementById("searchInput").value,resOld!==searchedValue&&init(),resOld=searchedValue},1e3);function init(){let t={nodes:JSON.parse(JSON.stringify(nodes)),links};const a="#006acc",r="#ff7d18",n="#10a050";t.nodes.forEach(e=>{e.category===0?(e.symbolSize=100,e.itemStyle={color:a}):e.category===1&&(e.itemStyle={color:r}),searchedValue&&e.name.toLowerCase().indexOf(searchedValue.toLowerCase())>-1&&(e.itemStyle={color:"black"})}),t.links.forEach(e=>{e.label={align:"center",fontSize:12},e.name==="参股"?e.lineStyle={color:r}:e.name==="董事"?e.lineStyle={color:a}:e.name==="法人"&&(e.lineStyle={color:n})});let o=[{name:"董事",itemStyle:{color:a}},{name:"",itemStyle:{color:r}}];option={title:{text:"知识图谱"},legend:[{data:o.map(e=>e.name)}],series:[{type:"graph",layout:"force",symbolSize:58,draggable:!0,roam:!0,focusNodeAdjacency:!0,categories:o,edgeSymbol:["","arrow"],edgeLabel:{normal:{show:!0,textStyle:{fontSize:20},formatter(e){return e.data.name}}},label:{show:!0},force:{repulsion:2e3,edgeLength:120},data:t.nodes,links:t.links}]},myChart.setOption(option)}init();
