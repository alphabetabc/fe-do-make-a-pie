var uploadedDataURL="/asset/get/s/data-1630741505579-A8A8D-V6N.json";$.getJSON(uploadedDataURL,function(i){var t=i[1],s={title:[{text:"长三角各市职住OD",subtext:"点击城市显示详细职住"}],tooltip:{},legend:{data:["上海市","江苏省","浙江省","安徽省","去向","来源"]},series:[{name:"销量1",type:"graph",layout:"circular",circular:{rotateLabel:!0},emphasis:{focus:"adjacency"},label:{position:"right",show:!0},categories:[{name:"上海市"},{name:"江苏省"},{name:"浙江省"},{name:"安徽省"}],data:t,lineStyle:{color:"source",curveness:.3},edges:i[0]}]};myChart.setOption(s),myChart.on("click",function(n){console.log(n);for(var a=n.name,l=i[0],o=[],r=1;r<t.length;r++)if(t[r].name==a){var e=t[r];e.itemStyle={borderColor:"#666",borderWidth:1,shadowColor:"rgba(0, 0, 0, 1)",shadowBlur:10},e.label={color:"red",textBorderColor:"#999",textBorderWidth:2},o.push(e)}else{var e=t[r];e.itemStyle={},e.label={},o.push(e)}console.log(o);var d={title:[{},{text:a+"职住来源去向情况",right:"5%"}],dataset:[{source:l},{transform:{type:"filter",config:{dimension:"source","=":a},print:!0}},{transform:{type:"filter",config:{dimension:"target","=":a},print:!0}}],grid:[{right:"7%",top:"7%",width:"38%",height:"80%"}],xAxis:{},yAxis:{type:"category",inverse:!0,max:10},series:[{left:"5%",width:"40%",data:o},{name:"去向",realtimeSort:!0,type:"bar",label:{show:!0,position:"right"},datasetIndex:1,encode:{x:"value",y:"target"},barGap:"0%",barCategoryGap:"5%"},{name:"来源",type:"bar",label:{show:!0,position:"right"},datasetIndex:2,encode:{x:"value",y:"source"}}]};myChart.setOption(d)})});
